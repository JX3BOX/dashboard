{"version":3,"sources":["webpack:///./src/views/medal.vue?0229","webpack:///./src/service/decoration.js","webpack:///./src/views/medal.vue","webpack:///src/views/medal.vue","webpack:///./src/views/medal.vue?3dcf","webpack:///./src/views/medal.vue?b7b8","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["getDecoration","params","$cms","get","setDecoration","data","post","getDecorationJson","url","__imgPath","concat","Date","now","axios","getEmotion","__dataPath","receive","user_id","val","updateAvatarFrame","put","getHonor","getUserHonors","uid","$next","mute","then","res","setHonor","honor_id","cancelHonor","delete","getUserMedals","getMedals","render","_vm","this","_c","_self","staticClass","attrs","tabList","scopedSlots","_u","key","fn","_v","proxy","_l","medals","item","id","class","hasMedal","name","desc","imgSrc","staticRenderFns","components","uc","themeTab","userMedals","computed","User","getInfo","mounted","load","methods","_this","_no_page","type","isLogin","sort","a","b","aUsing","findIndex","medal","bUsing","_this$userMedals","component","$","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-1c1e4be8.af78f0d2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./medal.vue?vue&type=style&index=0&id=96926eee&prod&lang=less\"","import { $cms, $next } from \"@jx3box/jx3box-common/js/https.js\";\nimport axios from \"axios\";\nimport { __imgPath, __dataPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\n\nfunction getDecoration(params) {\n    return $cms().get(`/api/cms/user/decoration`, {\n        params,\n    });\n}\n\nfunction setDecoration(data) {\n    return $cms().post(`/api/cms/user/decoration`, data);\n}\n\nfunction getDecorationJson() {\n    let url = __imgPath + `decoration/index.json?${Date.now()}`;\n    return axios.get(url);\n}\n\nfunction getEmotion() {\n    return axios.get(`${__dataPath}emotion/output/catalog.json?${Date.now()}`);\n}\n\nfunction receive(user_id, val) {\n    return $cms().post(`/api/cms/user/decoration/check-suit/${user_id}/${val}/for/avatar`);\n}\n\nfunction updateAvatarFrame(data) {\n    return $cms().put(\"/api/cms/user/my/avatar-frame\", data);\n}\n\nfunction getHonor() {\n    // return axios.get(`${__imgPath}decoration/honor.json?${Date.now()}`);\n    return $cms().get(\"/api/cms/user/config/honor\");\n}\n\nfunction getUserHonors(uid) {\n    return $next({ mute: true })\n        .get(\"/api/next2/user/\" + uid + \"/honors\")\n        .then((res) => {\n            return res.data.data;\n        });\n}\nfunction setHonor(honor_id) {\n    return $cms().put(`/api/cms/user/honor/use/${honor_id}`);\n}\nfunction cancelHonor() {\n    return $cms().delete(`/api/cms/user/honor/use`);\n}\n\n// 获取用户勋章\nfunction getUserMedals(uid) {\n    return $next({ mute: true }).get(\"/api/next2/user/\" + uid + \"/medals\");\n}\n\n// 获取所有勋章\nfunction getMedals(params) {\n    return $cms().get(\"/api/cms/config/medal\", {params});\n}\nexport {\n    getDecoration,\n    setDecoration,\n    getDecorationJson,\n    getEmotion,\n    receive,\n    updateAvatarFrame,\n    getHonor,\n    getUserHonors,\n    setHonor,\n    cancelHonor,\n    getUserMedals,\n    getMedals,\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('uc',{staticClass:\"m-dashboard-medal m-dashboard-skin\",attrs:{\"icon\":\"el-icon-brush\",\"title\":\"主题装扮\",\"tab-list\":_vm.tabList},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('a',{staticClass:\"u-link el-button el-button--default el-button--mini is-round is-plain\",attrs:{\"href\":\"/vip/mall?category=virtual\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\" 前往获取装扮\")])]},proxy:true}])},[_c('div',{staticClass:\"m-medal\"},[_c('div',{staticClass:\"u-list\"},_vm._l((_vm.medals),function(item){return _c('div',{key:item.id,staticClass:\"u-item\",class:{\n                    'is-have': _vm.hasMedal(item.name),\n                }},[_c('el-tooltip',{attrs:{\"content\":item.desc}},[_c('img',{staticClass:\"u-img\",attrs:{\"src\":_vm.imgSrc(item.name),\"alt\":item.name}})])],1)}),0)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <uc class=\"m-dashboard-medal m-dashboard-skin\" icon=\"el-icon-brush\" title=\"主题装扮\" :tab-list=\"tabList\">\n        <template #header>\n            <a\n                class=\"u-link el-button el-button--default el-button--mini is-round is-plain\"\n                href=\"/vip/mall?category=virtual\"\n                target=\"_blank\"\n                ><i class=\"el-icon-shopping-cart-2\"></i> 前往获取装扮</a\n            >\n        </template>\n        <div class=\"m-medal\">\n            <div class=\"u-list\">\n                <div\n                    class=\"u-item\"\n                    v-for=\"item in medals\"\n                    :key=\"item.id\"\n                    :class=\"{\n                        'is-have': hasMedal(item.name),\n                    }\"\n                >\n                    <el-tooltip :content=\"item.desc\">\n                        <img class=\"u-img\" :src=\"imgSrc(item.name)\" :alt=\"item.name\" />\n                    </el-tooltip>\n                </div>\n            </div>\n        </div>\n    </uc>\n</template>\n\n<script>\nimport uc from \"@/components/uc.vue\";\nimport { themeTab } from \"@/assets/data/tabs.json\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getUserMedals, getMedals } from \"@/service/decoration\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"medal\",\n    components: {\n        uc,\n    },\n    data: function () {\n        return {\n            tabList: themeTab,\n\n            medals: [],\n\n            userMedals: [],\n        };\n    },\n    computed: {\n        uid() {\n            return User.getInfo().uid;\n        },\n    },\n    mounted: function () {\n        this.load();\n    },\n    methods: {\n        load() {\n            const params = {\n                _no_page: 1,\n                type: \"user\"\n            }\n\n            if (User.isLogin()) {\n                getUserMedals(this.uid).then((res) => {\n                    this.userMedals = res.data.data;\n\n                    getMedals(params).then((res) => {\n                        this.medals = res.data.data;\n                        // 用户有的在前\n                        this.medals.sort((a, b) => {\n                            const aUsing = this.userMedals.findIndex((item) => item.medal == a.name) > -1;\n                            const bUsing = this.userMedals.findIndex((item) => item.medal == b.name) > -1;\n                            if (aUsing && !bUsing) {\n                                return -1;\n                            } else if (!aUsing && bUsing) {\n                                return 1;\n                            } else {\n                                return 0;\n                            }\n                        });\n                    });\n                });\n            }\n        },\n        imgSrc(name) {\n            return __imgPath + \"/image/medals/user/\" + name + \".gif\";\n        },\n        hasMedal(name) {\n            return this.userMedals?.findIndex((item) => item.medal == name) > -1;\n        }\n    },\n};\n</script>\n<style lang=\"less\">\n.m-dashboard-medal {\n    .u-list {\n        .flex;\n        gap: 20px;\n        // justify-content: center;\n        flex-wrap: wrap;\n        // max-width: 800px;\n        margin:0 auto;\n        padding:20px;\n    }\n    .u-pagination {\n        margin-top: 20px;\n        text-align: center;\n    }\n    .u-img {\n        .size(20px);\n        border: none;\n    }\n\n    .u-item {\n        filter: grayscale(100%);\n\n        &.is-have {\n            filter: none;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./medal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./medal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./medal.vue?vue&type=template&id=96926eee\"\nimport script from \"./medal.vue?vue&type=script&lang=js\"\nexport * from \"./medal.vue?vue&type=script&lang=js\"\nimport style0 from \"./medal.vue?vue&type=style&index=0&id=96926eee&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-findindex -- testing\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}