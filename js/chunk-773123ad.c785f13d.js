(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-773123ad"],{"0c34":function(t,e,a){},"0fa0":function(t){t.exports=JSON.parse('{"0":"待处理","1":"已完成","2":"异常"}')},"31e8":function(t){t.exports=JSON.parse('{"1":"管理员评分","2":"用户打赏","3":"盒币充值","4":"盒币退回","-1":"撤销评分","-2":"盒币兑换"}')},ceab:function(t,e,a){"use strict";a("0c34")},d15e:function(t){t.exports=JSON.parse('["电信一区","电信五区","电信八区","双线一区","双线二区","双线四区"]')},e963:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-credit m-boxcoin"},[t._m(0),a("div",{staticClass:"m-credit-total m-packet-total"},[t._v(" 余额 : "),a("b",{class:{hasLeft:t.hasLeft}},[t._v(t._s(t.money))]),a("el-button",{staticClass:"u-btn",attrs:{type:"primary",size:"mini",disabled:!t.money},on:{click:t.togglePullBox}},[t._v("兑换")])],1),t.showPullBox?a("div",{staticClass:"m-credit-pull"},[a("el-alert",{staticClass:"m-boxcoin-tip",attrs:{title:"1盒币可兑换1通宝，不可折现",type:"warning","show-icon":""}},[t._v(" 所有兑换申请将在每月1-5号统一处理，每月1-5日将不能提交兑换申请。默认通宝将通过直充进入游戏账号（不会计入充销），如发放为金山一卡通方式，则会发送卡密邮件至邮箱（请自行在 "),a("a",{attrs:{href:"https://charge.xoyo.com/pay?item=jx3&way=kcard",target:"_blank"}},[t._v("一卡通充值页面")]),t._v("进行充值。） ")]),a("el-form",{staticClass:"m-boxcoin-form",attrs:{"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"游戏大区"}},[a("el-select",{attrs:{placeholder:"请选择所在大区"},model:{value:t.pull.zone,callback:function(e){t.$set(t.pull,"zone",e)},expression:"pull.zone"}},t._l(t.zones,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"游戏账号"}},[a("el-input",{attrs:{placeholder:"请务必填写正确的账号，通宝将直充入账号（不会计入充销）"},model:{value:t.pull.account,callback:function(e){t.$set(t.pull,"account",e)},expression:"pull.account"}})],1),a("el-form-item",{attrs:{label:"兑换数目"}},[a("el-radio-group",{model:{value:t.pull.cash,callback:function(e){t.$set(t.pull,"cash",e)},expression:"pull.cash"}},[a("el-radio",{attrs:{label:1500,border:"",disabled:!t.canSelect(1500)}},[t._v("1500通宝")]),a("el-radio",{attrs:{label:3e3,border:"",disabled:!t.canSelect(3e3)}},[t._v("3000通宝")]),a("el-radio",{attrs:{label:5e3,border:"",disabled:!t.canSelect(5e3)}},[t._v("5000通宝")]),a("el-radio",{attrs:{label:1e4,border:"",disabled:!t.canSelect(1e4)}},[t._v("10000通宝")])],1)],1),a("el-form-item",{attrs:{label:"邮箱地址"}},[a("el-input",{attrs:{placeholder:"请务必填写正确的邮箱，如发放的是一卡通形式则会发送卡密邮件至此邮箱"},model:{value:t.pull.email,callback:function(e){t.$set(t.pull,"email",e)},expression:"pull.email"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",disabled:!t.ready||t.lockStatus},on:{click:t.openConfirmBox}},[t._v("提交申请")]),t.isAllowDate?t._e():a("span",{staticClass:"u-tip"},[a("i",{staticClass:"el-icon-warning-outline"}),t._v(" 每月1-5日结算期间不能进行兑换申请 ")])],1)],1)],1):t._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-credit-table m-packet-table"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.changeType},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"盒币记录",name:"in"}},[t.list&&t.list.length?a("div",{staticClass:"m-packet-table"},[a("table",{staticClass:"m-boxcoin-in-list m-packet-in-list"},[a("tr",[a("th",[t._v("类型")]),a("th",[t._v("数量")]),a("th",[t._v("源于作品")]),a("th",[t._v("备注")]),a("th",[t._v("时间")])]),t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(t._f("formatType")(e.action_type)))]),a("td",{staticClass:"u-count",class:{isNegative:Number(e.action_type)<0}},[a("span",[t._v(t._s(Number(e.action_type)>0?"+":"-"))]),a("b",[t._v(t._s(e.count))])]),a("td",[t.getPostLink(e)?a("a",{attrs:{href:t.getPostLink(e),target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" 点击查看 ")]):a("span",[t._v("-")])]),a("td",[a("span",{attrs:{title:e.remark}},[t._v(t._s(t._f("formatRemark")(e.remark)))])]),a("td",[t._v(t._s(t._f("formatDate")(e.created_at)))])])}))],2)]):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1),a("el-tab-pane",{attrs:{label:"兑换记录",name:"out"}},[t.list&&t.list.length?a("div",{staticClass:"m-packet-table"},[a("table",{staticClass:"m-boxcoin-out-list m-packet-in-list"},[a("tr",[a("th",[t._v("数量")]),a("th",[t._v("大区")]),a("th",[t._v("账号")]),a("th",[t._v("邮箱")]),a("th",[t._v("处理状态")]),a("th",[t._v("备注")]),a("th",[t._v("申请时间")])]),t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",[a("b",[t._v(t._s(e.cash)+"通宝")])]),a("td",[t._v(t._s(e.zone))]),a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.email))]),a("td",{class:{isFinished:1==e.status,isProcessing:!e.status,isPending:e.status>1}},[t._v(t._s(t._f("formatHistoryStatus")(e.status)))]),a("td",[t._v(t._s(e.remark))]),a("td",[t._v(t._s(t._f("formatDate")(e.created_at)))])])}))],2)]):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-coin"}),t._v(" 我的盒币 ")])}],l=(a("d3b7"),a("99af"),a("fb6a"),a("c9d2")),i=a("85e4"),o=a("e4f1"),c=a("31e8"),r=a("d15e"),u=a("0fa0"),p=a("41cb");function d(t){return Object(p["f"])().get("/api/my/boxcoin/cashout/history",{params:t})}function m(t){return Object(p["f"])().get("/api/my/boxcoin/bill",{params:t})}function f(t){return Object(p["f"])().post("/api/my/boxcoin/cashout",t)}var h={name:"Boxcoin",props:[],data:function(){return{money:0,min:1500,pull:{zone:"",account:"",cash:"",email:""},showPullBox:!1,lockStatus:!1,formStatus:!1,loading:!1,tab:"in",list:[],page:1,per:20,total:1,types:c,zones:r}},computed:{params:function(){var t={pageIndex:this.page,pageSize:this.per};return t},hasLeft:function(){return this.money>0},isAllowDate:function(){var t=(new Date).getDate();return t>5},canCash:function(){return this.hasLeft&&this.isAllowDate&&this.money>=this.min},ready:function(){return this.canCash&&this.formStatus}},methods:{init:function(){this.loadAsset(),this.loadData()},loadData:function(){var t=this;this.loading=!0;var e={in:m,out:d};e[this.tab](this.params).then((function(e){t.list=e.data.data.list,t.total=e.data.data.page.total})).finally((function(){t.loading=!1}))},changeType:function(){this.page=1,this.loadData()},getPostLink:function(t){return Object(i["getLink"])(t.post_type,t.post_id)},loadAsset:function(){var t=this;l["a"].getAsset().then((function(e){t.money=(null===e||void 0===e?void 0:e.box_coin)||0}))},togglePullBox:function(){this.showPullBox=!this.showPullBox},canSelect:function(t){return~~this.money>=~~t},checkForm:function(){for(var t in this.pull)if(!this.pull[t])return void(this.formStatus=!1);this.formStatus=!0},openConfirmBox:function(){var t=this;this.$alert('<div class="m-boxcoin-msg">大区：<b>'.concat(this.pull.zone,"</b> <br/> 账号：<b>").concat(this.pull.account,"</b> <br/> 邮箱：<b>").concat(this.pull.email,"</b> <br/> 兑换：<b>").concat(this.pull.cash,"通宝</b></div>"),"确认信息",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,callback:function(e){"confirm"==e&&(t.lockStatus=!0,t.loading=!0,f(t.pull).then((function(e){t.$message({type:"success",message:"申请成功,请耐心等待结算"}),t.showPullBox=!1,t.money=t.money-t.pull.cash})).finally((function(){t.lockStatus=!1,t.loading=!1})))}})}},filters:{formatDate:function(t){return Object(o["b"])(t)},formatType:function(t){return t&&c[t]||"未知"},formatRemark:function(t){return t?t.length>12?t.slice(12)+"...":t:"-"},formatHistoryStatus:function(t){return u[t]}},created:function(){this.tab=this.$route.query.tab||"in",this.init()},components:{},watch:{params:{deep:!0,handler:function(){this.loadData()}},pull:{deep:!0,handler:function(){this.checkForm()}}}},b=h,_=(a("ceab"),a("2877")),g=Object(_["a"])(b,n,s,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-773123ad.c785f13d.js.map