(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fd4ac3f"],{"3c65":function(t,n,a){"use strict";var e=a("23e7"),i=a("7b0b"),s=a("07fa"),o=a("3a34"),r=a("083a"),c=a("3511"),u=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},f=u||!l();e({target:"Array",proto:!0,arity:1,forced:f},{unshift:function(t){var n=i(this),a=s(n),e=arguments.length;if(e){c(a+e);var u=a;while(u--){var l=u+e;u in n?n[l]=n[u]:r(n,l)}for(var f=0;f<e;f++)n[f]=arguments[f]}return o(n,a+e)}})},4039:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.honor))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.honor))]),n("div",{staticClass:"u-pic",class:t.setClass(a),on:{click:function(n){return t.selectChange(a)}}},[a.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(a),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],s=(a("99af"),a("d3b7"),a("159b"),a("b64b"),a("7db0"),a("ac1f"),a("466d"),a("a9e3"),a("5319"),a("14d9"),a("3c65"),a("b547")),o=a("46c1"),r=a("c9d2"),c=a("8e44"),u=a("65c2"),l=a("aa38"),f=a("2ef0"),d={name:"honor",props:[],data:function(){return{tabList:o["d"],isVIP:!1,info:{uid:r["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(u["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},list:[],listBak:[],isSelect:{},isSelectBak:{},honorList:{}}},computed:{uid:function(){return r["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return r["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){if(t&&!t.isCustomize&&t.val)return t.isImgIndex?u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,"_").concat(t.imgIndex,".").concat(t.ext):u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,".").concat(t.ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(c["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},loadHonor:function(){var t=this;Object(l["d"])().then((function(n){t.honorList=n.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(l["a"])({type:"honor"}).then((function(n){var a=n.data.data,e=t.honorList,i=[];Object.keys(e).forEach((function(t,n){var s=a.find((function(n){return n.val==t})),o=e[t],r=function(t){var n=o.prefix,a=o.prefix.match(/(?<=\{)(.+?)(?=\})/g),e=o.ranking,i=o.year||"";if(a){if(!t)return;i+=t[a[0]]||""}else i+=n;if(e.length>0){t.imgIndex=0;for(var s=0;s<e.length;s++)if(void 0!=t.ranking&&Object(f["inRange"])(Number(t.ranking),e[s][0],e[s][1])){t.imgIndex=s;var r=e[s][2],c=r.match(/(?<=\{)(.+?)(?=\})/g);i+=c?r.replace(/\{(.+?)\}/g,t[c[0]]):r;break}}return i+o.suffix};if(s)s.honor=r(s),s.color=o.color,s.ext=o.ext,s.isHave=!0,s.isImgIndex=o.ranking.length>0,i.push(s);else{var c={color:o.color,ext:o.ext,honor:r(),extra:"尚未获取的称号框",using:0,type:"honor",val:t,isHave:!1,imgIndex:0,isImgIndex:o.ranking.length>0};i.push(c)}}));var s=i.find((function(t){return 1==t.using}));t.list=i||[];var o={type:"honor_customize",val:"不佩戴称号",honor:"取消佩戴称号",using:s?0:1,isHave:!0,isCustomize:!0};t.isSelect=s||o,t.list.unshift(o),t.isSelectBak=Object(f["cloneDeep"])(t.isSelect),t.listBak=Object(f["cloneDeep"])(t.list)}))},selectChange:function(t){if(t.isHave){var n=this.list,a=n.find((function(t){return 1==t.using}));a&&(a.using=0),t.using=1,this.isSelect=t}},reset:function(){this.$set(this,"list",Object(f["cloneDeep"])(this.listBak)),this.$set(this,"isSelect",Object(f["cloneDeep"])(this.isSelectBak))},showLevelColor:function(t){return u["__userLevelColor"][t]},submit:function(){var t=this;Object(l["f"])(this.list).then((function(n){t.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:s["a"]}},v=d,h=(a("b20c"),a("2877")),p=Object(h["a"])(v,e,i,!1,null,null,null);n["default"]=p.exports},"466d":function(t,n,a){"use strict";var e=a("c65b"),i=a("d784"),s=a("825a"),o=a("7234"),r=a("50c4"),c=a("577e"),u=a("1d80"),l=a("dc4a"),f=a("8aa5"),d=a("14c3");i("match",(function(t,n,a){return[function(n){var a=u(this),i=o(n)?void 0:l(n,t);return i?e(i,n,a):new RegExp(n)[t](c(a))},function(t){var e=s(this),i=c(t),o=a(n,e,i);if(o.done)return o.value;if(!e.global)return d(e,i);var u=e.unicode;e.lastIndex=0;var l,v=[],h=0;while(null!==(l=d(e,i))){var p=c(l[0]);v[h]=p,""===p&&(e.lastIndex=f(i,r(e.lastIndex),u)),h++}return 0===h?null:v}]}))},aa38:function(t,n,a){"use strict";a.d(n,"a",(function(){return r})),a.d(n,"f",(function(){return c})),a.d(n,"b",(function(){return u})),a.d(n,"c",(function(){return l})),a.d(n,"e",(function(){return f})),a.d(n,"g",(function(){return d})),a.d(n,"d",(function(){return v}));a("99af");var e=a("41cb"),i=a("bc3a"),s=a.n(i),o=a("65c2");function r(t){return Object(e["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(e["b"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json";return s.a.get(t)}function l(){return s.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json"))}function f(t,n){return Object(e["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function d(t){return Object(e["b"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return s.a.get("".concat(o["__imgPath"],"decoration/honor.json"))}},b20c:function(t,n,a){"use strict";a("ffb5")},b64b:function(t,n,a){var e=a("23e7"),i=a("7b0b"),s=a("df75"),o=a("d039"),r=o((function(){s(1)}));e({target:"Object",stat:!0,forced:r},{keys:function(t){return s(i(t))}})},ffb5:function(t,n,a){}}]);
//# sourceMappingURL=chunk-5fd4ac3f.e2dc1cbf.js.map