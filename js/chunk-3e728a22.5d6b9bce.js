(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e728a22"],{"337f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-dashboard-card m-credit"},[t._m(0),a("el-tabs",{attrs:{type:"border-card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"一卡通",name:"card"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:t.list,"show-header":"","cell-class-name":"u-table-cell","header-cell-class-name":"u-header-cell"}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("seasun_ykt"==e.row.type?"金山一卡通":"其他"))]}}])}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.subtypes[e.row.subtype]))]}}])}),a("el-table-column",{attrs:{label:"面额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.count))]}}])}),a("el-table-column",{attrs:{label:"激活码",width:"340"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"u-card"},[a("div",{staticClass:"u-count"},[a("div",{staticClass:"u-line"},[a("span",[t._v("卡号："+t._s(e.row.code||"****************")+" ")]),e.row.code?a("el-button",{staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制卡号")]):t._e()],1),a("div",{staticClass:"u-line"},[a("span",[t._v("卡密："+t._s(e.row.key||"****************"))]),e.row.key?a("el-button",{staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制密码")]):t._e()],1)]),e.row.code?t._e():a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return t.toCard(e.$index,e.row)}}},[t._v("点击查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"过期时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expire_at||"-"))]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1),a("el-tab-pane",{attrs:{label:"激活码",name:"code"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:t.list,"show-header":"","cell-class-name":"u-table-cell","header-cell-class-name":"u-header-cell"}},[a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.types[e.row.type]))]}}])}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.subtypes[e.row.subtype]))]}}])}),a("el-table-column",{attrs:{label:"激活码",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"u-code"},[a("span",{staticClass:"u-txt"},[t._v(t._s(e.row.code||"****************"))]),e.row.code?a("el-button",{staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制")]):a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return t.toCode(e.$index,e.row)}}},[t._v("点击查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"过期时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expire_at||"-"))]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-bank-card"}),t._v(" 我的卡密")])}],l=(a("d3b7"),a("41cb"));function s(t){return Object(l["e"])().get("/api/my/codekeycode/history",{params:t})}function i(t){return Object(l["e"])().get("/api/my/codesn/history",{params:t})}function c(t,e){return Object(l["e"])().post("/api/my/codesn/".concat(t,"/activation-code"),e)}function r(t,e){return Object(l["e"])().post("/api/my/codekeycode/".concat(t,"/activation-code"),e)}var u={name:"card",data:function(){return{loading:!1,tab:"",types:{tf:"体服激活码",game:"游戏内激活码"},code_types:{tf:"体服激活码",game:"游戏内激活码"},subtypes:{jdt_tf:"百强体服激活码",point_lottery:"积分抽奖",boxcoin:"盒币兑换"},show:!1,list:[]}},computed:{},watch:{tab:function(t){this.list=[],"card"==t?this.loadCard():this.LoadCode(),this.$router.push({name:"card",query:{tab:t}})}},methods:{loadCard:function(){var t=this;this.loading=!0,s().then((function(e){t.list=e.data.data.list})).finally((function(){t.loading=!1}))},LoadCode:function(){var t=this;this.loading=!0,i().then((function(e){t.list=e.data.data.list})).finally((function(){t.loading=!1}))},toCard:function(t,e){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;r(e.id,{password:o}).then((function(n){console.log(n);var o=n.data.data,l=o.code,s=o.key;e.code=l,e.key=s,a.$set(a.list,t,e)}))}))},toCode:function(t,e){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;c(e.id,{password:o}).then((function(n){e.code=n.data.data.sn,a.$set(a.list,t,e)}))}))},cardStatus:function(t){var e={0:"未使用",1:"已使用",2:"无效"};return e[t]}},mounted:function(){this.tab=this.$route.query.tab?this.$route.query.tab:"card"}},d=u,p=(a("fc8d"),a("2877")),b=Object(p["a"])(d,n,o,!1,null,null,null);e["default"]=b.exports},"551b":function(t,e,a){},fc8d:function(t,e,a){"use strict";a("551b")}}]);
//# sourceMappingURL=chunk-3e728a22.5d6b9bce.js.map