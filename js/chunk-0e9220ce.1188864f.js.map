{"version":3,"sources":["webpack:///./src/views/emotion.vue?6300","webpack:///./src/views/emotion.vue?4299","webpack:///src/views/emotion.vue","webpack:///./src/views/emotion.vue?c545","webpack:///./src/views/emotion.vue","webpack:///./src/service/decoration.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tabList","_v","_l","item","key","group_id","class","isUsing","group_name","disabled","isDisabled","hidden","isHidden","on","$event","stopPropagation","handleEmotionClick","imgSrc","_s","loading","handleSave","staticRenderFns","name","props","data","emotionList","emotions","active","computed","methods","loadDecoration","getDecoration","type","getEmotion","sessionStorage","console","val","using","setDecoration","mounted","components","uc","component","params","$cms","get","post","getDecorationJson","url","__imgPath","axios","__dataPath","$","$map","map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"yIAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACE,YAAY,wCAAwCC,MAAM,CAAC,KAAO,gBAAgB,MAAQ,OAAO,QAAUP,EAAIQ,UAAU,CAACJ,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,IAAI,CAACE,YAAY,4BAA4BN,EAAIS,GAAG,qBAAqBL,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,gDAAgD,OAAS,WAAW,CAACP,EAAIS,GAAG,aAAaT,EAAIS,GAAG,QAAQL,EAAG,MAAM,CAACE,YAAY,UAAUN,EAAIU,GAAIV,EAAY,UAAE,SAASW,GAAM,OAAOP,EAAG,MAAM,CAACQ,IAAID,EAAKE,SAASP,YAAY,SAASQ,MAAM,CACjkB,WAAYd,EAAIe,QAAQJ,EAAKK,YAC7BC,SAAUjB,EAAIkB,WAAWP,EAAKK,YAC9BG,OAAQnB,EAAIoB,SAAST,EAAKK,aAC5BK,GAAG,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOC,kBAAyBvB,EAAIwB,mBAAmBb,MAAS,CAACP,EAAG,MAAM,CAACE,YAAY,QAAQC,MAAM,CAAC,IAAMP,EAAIyB,OAAOd,EAAKK,YAAY,IAAML,EAAKK,cAAcZ,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIS,GAAGT,EAAI0B,GAAGf,EAAKK,oBAAmB,GAAGZ,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,KAAO,uBAAuB,QAAUP,EAAI2B,SAASN,GAAG,CAAC,MAAQrB,EAAI4B,aAAa,CAAC5B,EAAIS,GAAG,SAAS,MAClcoB,EAAkB,G,wHCkCP,GACfC,eACAC,SACAC,gBACA,OACAxB,eAEAyB,eACAC,YACAC,UACAR,aAGAS,YACAC,SACAC,eADA,WACA,WACAC,gBAAAC,iBAAA,kBACA,0BACA,kGAGAC,WAPA,WAOA,WACA,IACA,wDAEA,KAEA,YADA,iBAGAA,mCACA,kBACAC,gEAGA,SACAC,eACA,mBAGAlB,OAzBA,SAyBAmB,GAAA,MACA,6DACA,6CACA,kFAEA7B,QA9BA,SA8BA6B,GACA,0CAEA1B,WAjCA,SAiCA0B,GACA,gFAEAxB,SApCA,SAoCAwB,GACA,gBAEApB,mBAvCA,SAuCAb,GACA,gCAIA,mDACA,mCAGA,2BACA,uEAEA,iCAIAiB,WAvDA,WAuDA,WACA,gBACA,wCACA,OACAY,eACAI,UACAC,mCAGAC,oCACA,2BACA,kBAIAC,mBACA,sBACA,mBAEAC,YACAC,YChI4Y,I,wBCQxYC,EAAY,eACd,EACAnD,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E,2CCnBf,yLAGA,SAASX,EAAcY,GACnB,OAAOC,iBAAOC,IAAP,2BAAuC,CAC1CF,WAGR,SAASL,EAAcd,GACnB,OAAOoB,iBAAOE,KAAP,2BAAwCtB,GAEnD,SAASuB,IACL,IAAIC,EAAMC,eAAY,wBACtB,OAAOC,IAAML,IAAIG,GAErB,SAASf,IACL,OAAOiB,IAAML,IAAN,UAAaM,gBAAb,kC,kCCfX,IAAIC,EAAI,EAAQ,QACZC,EAAO,EAAQ,QAAgCC,IAC/CC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAKvDH,EAAE,CAAEK,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAuB,CAChEF,IAAK,SAAaM,GAChB,OAAOP,EAAK5D,KAAMmE,EAAYC,UAAUC,OAAS,EAAID,UAAU,QAAKE","file":"js/chunk-0e9220ce.1188864f.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('uc',{staticClass:\"m-dashboard-frame m-dashboard-emotion\",attrs:{\"icon\":\"el-icon-brush\",\"title\":\"主题装扮\",\"tabList\":_vm.tabList}},[_c('div',{staticClass:\"u-tips\"},[_c('i',{staticClass:\"el-icon-warning-outline\"}),_vm._v(\"自定义表情包最多只能同时激活三个，\"),_c('a',{attrs:{\"href\":\"/vip/mall/#/list?type=virtual&subtype=emotion\",\"target\":\"_blank\"}},[_vm._v(\"前往购买表情包\")]),_vm._v(\"。 \")]),_c('div',{staticClass:\"u-list\"},_vm._l((_vm.emotions),function(item){return _c('div',{key:item.group_id,staticClass:\"u-item\",class:{\n                'is-using': _vm.isUsing(item.group_name),\n                disabled: _vm.isDisabled(item.group_name),\n                hidden: _vm.isHidden(item.group_name),\n            },on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEmotionClick(item)}}},[_c('img',{staticClass:\"u-img\",attrs:{\"src\":_vm.imgSrc(item.group_name),\"alt\":item.group_name}}),_c('div',{staticClass:\"u-title\"},[_vm._v(_vm._s(item.group_name))])])}),0),_c('div',{staticClass:\"u-actions\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-check\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <uc class=\"m-dashboard-frame m-dashboard-emotion\" icon=\"el-icon-brush\" title=\"主题装扮\" :tabList=\"tabList\">\n        <div class=\"u-tips\">\n            <i class=\"el-icon-warning-outline\"></i>自定义表情包最多只能同时激活三个，<a\n                href=\"/vip/mall/#/list?type=virtual&subtype=emotion\"\n                target=\"_blank\"\n                >前往购买表情包</a\n            >。\n        </div>\n        <div class=\"u-list\">\n            <div\n                class=\"u-item\"\n                v-for=\"item in emotions\"\n                :key=\"item.group_id\"\n                :class=\"{\n                    'is-using': isUsing(item.group_name),\n                    disabled: isDisabled(item.group_name),\n                    hidden: isHidden(item.group_name),\n                }\"\n                @click.stop=\"handleEmotionClick(item)\"\n            >\n                <img class=\"u-img\" :src=\"imgSrc(item.group_name)\" :alt=\"item.group_name\" />\n                <div class=\"u-title\">{{ item.group_name }}</div>\n            </div>\n        </div>\n\n        <div class=\"u-actions\">\n            <el-button type=\"primary\" @click=\"handleSave\" icon=\"el-icon-circle-check\" :loading=\"loading\"\n                >保存</el-button\n            >\n        </div>\n    </uc>\n</template>\n\n<script>\nimport uc from \"@/components/uc.vue\";\nimport { getDecoration, getEmotion, setDecoration } from \"@/service/decoration\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { themeTab } from \"@/assets/data/tabs.json\";\nexport default {\n    name: \"emotion\",\n    props: [],\n    data: function () {\n        return {\n            tabList: themeTab,\n\n            emotionList: [],\n            emotions: [],\n            active: [],\n            loading: false,\n        };\n    },\n    computed: {},\n    methods: {\n        loadDecoration() {\n            getDecoration({ type: \"emotion\" }).then((res) => {\n                this.emotionList = res.data.data;\n                this.active = this.emotionList.filter((item) => item.using).map((item) => item.val);\n            });\n        },\n        getEmotion() {\n            try {\n                const _emotions = JSON.parse(sessionStorage.getItem(\"jx3_emotion\"));\n\n                if (_emotions) {\n                    this.emotions = _emotions;\n                    return;\n                } else {\n                    getEmotion().then((res) => {\n                        this.emotions = res.data;\n                        sessionStorage.setItem(\"jx3_emotion\", JSON.stringify(res.data));\n                    });\n                }\n            } catch (e) {\n                console.log(e);\n                this.emotions = [];\n            }\n        },\n        imgSrc(val) {\n            const group = this.emotions.find((item) => item.group_name === val);\n            const defaultEmo = group.items?.[0];\n            return __imgPath + \"emotion/output/\" + defaultEmo?.filename;\n        },\n        isUsing(val) {\n            return this.active.includes(val) || val === \"默认\";\n        },\n        isDisabled(val) {\n            return !this.emotionList.map((item) => item.val).includes(val) && val !== \"默认\";\n        },\n        isHidden(val) {\n            return val === \"默认\";\n        },\n        handleEmotionClick(item) {\n            if (this.isDisabled(item.group_name)) {\n                return;\n            }\n            // 最多只能选择三个\n            if (this.active.length >= 3 && !this.isUsing(item.group_name)) {\n                this.$message.error(\"最多只能选择三个表情包\");\n                return;\n            } else {\n                if (this.isUsing(item.group_name)) {\n                    this.active = this.active.filter((val) => val !== item.group_name);\n                } else {\n                    this.active.push(item.group_name);\n                }\n            }\n        },\n        handleSave() {\n            this.loading = true;\n            const data = this.emotionList.map((item) => {\n                return {\n                    type: \"emotion\",\n                    val: item.val,\n                    using: this.active.includes(item.val),\n                };\n            });\n            setDecoration(data).then((res) => {\n                this.$message.success(\"保存成功\");\n                this.loading = false;\n            });\n        },\n    },\n    mounted: function () {\n        this.loadDecoration();\n        this.getEmotion();\n    },\n    components: {\n        uc,\n    },\n};\n</script>\n\n<style lang=\"less\">\n.m-dashboard-emotion {\n    .u-tips {\n        margin-bottom: 16px;\n        .fz(13px);\n        i {\n            .mr(2px);\n        }\n        a:hover {\n            text-decoration: underline;\n        }\n    }\n    .u-list {\n        .flex;\n        flex-wrap: wrap;\n    }\n    .u-item {\n        .flex;\n        .pointer;\n        align-items: center;\n        border: 1px solid #e6e6e6;\n        border-radius: 3px;\n        padding: 4px 8px;\n        margin: 4px;\n        .u-img {\n            .size(20px, 20px);\n        }\n        .u-title {\n            margin-left: 4px;\n            .fz(13px);\n        }\n\n        &.hidden {\n            .none;\n        }\n\n        &.is-using {\n            border-color: #409eff;\n            position: relative;\n\n            // 倒三角标\n            &::before {\n                content: \"\";\n                .pa;\n                right: 0;\n                bottom: 0;\n                border: 12px solid #4abe84;\n                border-top-color: transparent;\n                border-left-color: transparent;\n                border-bottom-right-radius: 3px;\n            }\n            &::after {\n                content: \"\";\n                width: 2px;\n                height: 8px;\n                .pa;\n                right: 4px;\n                bottom: 4px;\n                border: 2px solid #fff;\n                border-top-color: transparent;\n                border-left-color: transparent;\n                transform: rotate(45deg);\n            }\n        }\n        &.disabled {\n            opacity: 0.5;\n            cursor: not-allowed;\n        }\n    }\n    .u-actions {\n        margin-top: 16px;\n        text-align: center;\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./emotion.vue?vue&type=template&id=12b6b4f4&\"\nimport script from \"./emotion.vue?vue&type=script&lang=js&\"\nexport * from \"./emotion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./emotion.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $cms } from \"@jx3box/jx3box-common/js/https.js\";\nimport axios from 'axios'\nimport { __imgPath, __dataPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nfunction getDecoration(params) {\n    return $cms().get(`/api/cms/user/decoration`, {\n        params\n    });\n}\nfunction setDecoration(data) {\n    return $cms().post(`/api/cms/user/decoration`, data);\n}\nfunction getDecorationJson() {\n    let url = __imgPath + \"decoration/index.json\"\n    return axios.get(url)\n}\nfunction getEmotion(){\n    return axios.get(`${__dataPath}emotion/output/catalog.json`);\n}\nexport {\n    getDecoration, setDecoration, getDecorationJson, getEmotion\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}