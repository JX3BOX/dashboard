(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e2fae4e"],{"0af9":function(t,e,s){"use strict";s("b480")},"498a":function(t,e,s){"use strict";var n=s("23e7"),i=s("58a8").trim,o=s("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var n=s("1d80"),i=s("5899"),o="["+i+"]",a=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),c=function(t){return function(e){var s=String(n(e));return 1&t&&(s=s.replace(a,"")),2&t&&(s=s.replace(r,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"685b":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var n=s("4328"),i=s.n(n),o=s("41cb");let a={newest(t,e,s=1){if(e)return Object(o["c"])()({method:"GET",url:"/api/wiki/post",params:{type:t,source_id:e,supply:s}})},newests(t){return Object(o["c"])()({method:"GET",url:"/api/wiki/posts/newest",params:{type:t}})},versions(t,e){if(e)return Object(o["c"])()({method:"GET",url:"/api/wiki/post/versions",params:{type:t,source_id:e}})},view(t){return t?Object(o["c"])()({method:"GET",url:"/api/wiki/post/"+t}):null},save(t){return Object(o["c"])()({method:"POST",url:"/api/wiki/post",data:i.a.stringify({post:t})})},myList(t){return Object(o["c"])()({method:"GET",url:"/api/my/wiki/posts",params:t})},myRemove(t){return t?Object(o["c"])()({method:"PUT",url:`/api/my/wiki/post/${t}/remove`}):null}}},"818b":function(t){t.exports=JSON.parse('{"title":" &raquo; 魔盒（JX3BOX） - 一站式剑网3资源工具站","keys":"jx3box,剑三魔盒,剑三宏,剑三插件,剑三辅助,副本攻略,副本解包,团队监控,捏脸数据,剑3数据库,成就百科,剑三成就,剑3,剑网3,剑三box,通识百科","desc":"JX3BOX - 剑三魔盒是一个以剑网3游戏为主的专业攻略资源站，这里干货满满，大神多多，为你的武侠江湖之路助力。剑三魔盒，玩家贴心的小助手。"}')},b480:function(t,e,s){},b52a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-publish-box"},[s("pubheader",{attrs:{name:"通识百科"}},[t._t("header")],2),s("el-form",{staticClass:"m-publish-post"},[s("div",{staticClass:"m-publish-source"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("选择通识 *")]),s("el-select",{staticClass:"u-source-id",attrs:{filterable:"",remote:"",disabled:!!t.post.id,placeholder:"通过输入通识名称进行搜索","remote-method":t.search_handle,loading:t.options.loading},model:{value:t.post.source_id,callback:function(e){t.$set(t.post,"source_id",e)},expression:"post.source_id"}},t._l(t.options.sources,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[s("div",{staticClass:"u-option"},[s("span",{staticClass:"u-type",domProps:{textContent:t._s(e.label)}}),s("span",{staticClass:"u-name",domProps:{textContent:t._s(e.name)}})])])})),1),s("p",{staticClass:"m-knowledge-add"},[s("span",[t._v("如没有合适的通识选择，可点击此处")]),s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加通识")]),s("span",[t._v("Note：添加完成后的通识需要经过管理员审核通过后才会在通识百科上展示哦")])],1)],1),s("div",{staticClass:"m-publish-remark"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("修订说明 *")]),s("el-input",{attrs:{maxlength:200,minlength:1,"show-word-limit":"",required:"",placeholder:"请简单描述一下本次修订说明"},model:{value:t.post.remark,callback:function(e){t.$set(t.post,"remark",e)},expression:"post.remark"}})],1),s("div",{staticClass:"m-publish-content"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("通识正文 *")]),s("Tinymce",{attrs:{attachmentEnable:!0,resourceEnable:!0,height:600},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),s("div",{staticClass:"m-publish-tags"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("通识标签")]),t._l(t.post.tags,(function(e,n){return s("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.post.tags.splice(n,1)}}},[t._v(t._s(e)+" ")])})),t.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",placeholder:"回车以添加"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 添加标签 ")])],2),s("div",{staticClass:"m-publish-commit"},[s("el-divider",{attrs:{"content-position":"left"}}),s("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:t.processing},on:{click:t.publish}},[t._v("提交通识 ")])],1)]),s("el-dialog",{attrs:{title:"通识添加",visible:t.dialogVisible,width:"640px"},on:{"update:visible":function(e){t.dialogVisible=e},open:function(e){t.knowledge={type:"",name:""}}}},[t.knowledge?s("el-form",{staticClass:"m-publish-knowledge"},[s("div",{staticClass:"m-publish-type"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("类别 *")]),t.types?s("el-radio-group",{model:{value:t.knowledge.type,callback:function(e){t.$set(t.knowledge,"type",e)},expression:"knowledge.type"}},t._l(t.types,(function(e,n){return s("el-radio",{key:e.name,attrs:{label:n,border:""}},[t._v(t._s(e.label)+" ")])})),1):t._e()],1),s("div",{staticClass:"m-publish-name"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("名称 *")]),s("el-input",{attrs:{placeholder:"请输入通识名称",minlength:1,maxlength:50,"show-word-limit":""},model:{value:t.knowledge.name,callback:function(e){t.$set(t.knowledge,"name",e)},expression:"knowledge.name"}})],1)]):t._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",disabled:t.processing},on:{click:t.create_knowledge}},[t._v("添加通识")])],1)],1)],1)},i=[],o=(s("d3b7"),s("b0c0"),s("498a"),s("a0fa")),a=s("221a"),r=s("ee8f"),c=s("685b"),l=s("c9d2"),u=s("2777"),p=s("4328"),d=s.n(p);function m(){return Object(u["d"])({method:"GET",url:"/api/knowledge/menus"})}function f(t){return Object(u["d"])({method:"GET",url:"/api/knowledges",params:t})}function h(t){return Object(u["d"])({method:"POST",url:"/api/knowledge",data:d.a.stringify({knowledge:t})})}var g={name:"knowledge",data:function(){return{dialogVisible:!1,knowledge:null,post:{id:"",content:"",source_id:"",remark:"",tags:[]},types:null,options:{sources:null,loading:!1},inputVisible:!1,inputValue:""}},computed:{processing:function(){return this.$store.state.processing}},methods:{create_knowledge:function(){var t=this;this.$store.commit("startProcess"),h({type:this.knowledge.type,name:this.knowledge.name}).then((function(e){e=e.data,200===e.code?(t.post.source_id=e.data.id,t.$message({message:"通识添加成功",type:"success"}),t.dialogVisible=!1):t.$message({message:"".concat(e.message),type:"warning"})})).finally((function(){t.$store.commit("endProcess")}))},search_handle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options.loading=!0,f({keyword:e,include_pending:1,limit:10}).then((function(e){e=e.data,200===e.code&&(t.options.sources=e.data.data),t.options.loading=!1}))},validate:function(){var t=this,e=["source_id","content","remark"].every((function(e){return!!t.post[e]}));return e||this.$message.error("请完成必填项"),e},publish:function(){var t=this;this.validate()&&(this.$store.commit("startProcess"),c["a"].save({type:"knowledge",source_id:this.post.source_id,user_nickname:l["a"].getInfo().name,content:this.post.content,remark:this.post.remark,tags:this.post.tags}).then((function(e){e=e.data,200===e.code?(t.$message({message:"提交成功，请等待审核",type:"success"}),setTimeout((function(){location.href=r["JX3BOX"].__Root+"/dashboard/#/wiki"}),500)):(t.$message({message:"".concat(e.message),type:"warning"}),t.$store.commit("endProcess"))})).catch((function(){t.$store.commit("endProcess")})))},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue.trim();t&&this.post.tags.push(t),this.inputVisible=!1,this.inputValue=""}},created:function(){var t=this;this.search_handle("");var e=this.$route.params.source_id;this.post.source_id=e||"",m().then((function(e){e=e.data,200===e.code&&(t.types=e.data.menus)}))},watch:{"post.source_id":{handler:function(){var t=this;this.post.source_id&&c["a"].newest("knowledge",this.post.source_id,0).then((function(e){var s=e.data;if(200===s.code){var n=s.data.post,i=s.data.source;if(n?(t.post.source_id=parseInt(n.source_id),t.post.remark="",t.post.content=n.content,t.post.tags=n.tags||[]):(t.post.source_id=t.post.source_id?parseInt(t.post.source_id):"",t.post.remark="",t.post.content="",t.post.tags=[]),i){var o=!1;for(var a in t.options.sources=t.options.sources||[],t.options.sources)if(t.options.sources[a].id==i.id){o=!0;break}o||t.options.sources.push(i)}}}))}}},components:{pubheader:o["a"],Tinymce:a["a"]}},b=g,v=(s("0af9"),s("2877")),k=Object(v["a"])(b,n,i,!1,null,null,null);e["default"]=k.exports},c8d2:function(t,e,s){var n=s("d039"),i=s("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},ee8f:function(t,e,s){const n=s("65c2"),i=s("818b");t.exports={JX3BOX:n,SEO:i}}}]);
//# sourceMappingURL=chunk-7e2fae4e.2180b1da.js.map