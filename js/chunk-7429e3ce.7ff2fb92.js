(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7429e3ce"],{1101:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"n",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return l})),a.d(t,"o",(function(){return u})),a.d(t,"p",(function(){return p})),a.d(t,"i",(function(){return d})),a.d(t,"c",(function(){return b})),a.d(t,"m",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"l",(function(){return f})),a.d(t,"k",(function(){return y})),a.d(t,"b",(function(){return v})),a.d(t,"f",(function(){return h}));a("99af");var n=a("41cb");function o(e){return Object(n["e"])().get("/api/mall/ship-address",e)}function r(e){return Object(n["e"])().post("/api/mall/ship-address",e)}function i(e,t){return Object(n["e"])().put("/api/mall/ship-address/".concat(e),t)}function s(e){return Object(n["e"])().delete("/api/mall/ship-address/".concat(e))}function c(e){return Object(n["e"])().put("/api/mall/ship-address/default/".concat(e))}function l(e){return Object(n["e"])().get("/api/mall/my/orders",{params:e})}function u(e,t){return Object(n["e"])().put("/api/mall/my/orders/".concat(e,"/bind-address/").concat(t))}function p(e,t){return Object(n["e"])().put("/api/mall/my/orders/".concat(e,"/remark"),{remark:t})}function d(e){return Object(n["e"])().get("/api/mall/my/orders/".concat(e))}function b(e){return Object(n["e"])().put("/api/mall/my/orders/".concat(e,"/cancel"))}function m(e){return Object(n["e"])().post("/api/mall/my/orders/".concat(e,"/pay"))}function f(e){return Object(n["e"])().post("/api/mall/my/orders/".concat(e,"/received"))}function g(e){return Object(n["e"])().get("/api/mall/my/virtual_goods",{params:e})}function y(e){return Object(n["e"])().post("/api/mall/goods-rate",e)}function v(e,t){return Object(n["e"])().post("/api/mall/goods-rate/".concat(e,"/append-comments"),t)}function h(e){return Object(n["e"])().delete("/api/mall/goods-rate/".concat(e))}},"337f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-dashboard-keycode m-credit"},[e._m(0),t("el-alert",{staticClass:"m-boxcoin-tip",attrs:{title:"请务必妥善保管，并注意过期时间。",type:"warning","show-icon":""}},[t("a",{attrs:{href:"https://charge.xoyo.com/pay?item=jx3&way=kcard",target:"_blank"}},[e._v("金山一卡通充值页面")])]),t("div",{staticClass:"m-keycode-tab"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("el-tab-pane",{attrs:{label:"一卡通",name:"keycode"}},[e.filteredList.length?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:e.filteredList,"show-header":""}},[t("el-table-column",{attrs:{prop:"type",label:"类型",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.keycodeOptions.types[t.row.type]||"其他"))]}}],null,!1,1101775500)}),t("el-table-column",{attrs:{prop:"subtype",label:"渠道",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.keycodeOptions.subtypes[t.row.subtype]||"其他"))]}}],null,!1,178056652)}),t("el-table-column",{attrs:{label:"面额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.count))]}}],null,!1,1801049342)}),t("el-table-column",{attrs:{label:"卡密","min-width":"330"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"u-card"},[t("div",{staticClass:"u-count"},[t("div",{staticClass:"u-line"},[t("span",[e._v("卡号："+e._s(a.row.key||"****************"))]),a.row.key?t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+a.row.key,expression:"'' + scope.row.key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制卡号")]):e._e()],1),t("div",{staticClass:"u-line"},[t("span",[e._v("卡密："+e._s(a.row.code||"****************")+" ")]),a.row.code?e._e():t("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"mini",plain:""},on:{click:function(t){return e.getKeycode(a.$index,a.row)}}},[e._v("点击查看")]),a.row.code?t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+a.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制卡密")]):e._e()],1)])])]}}],null,!1,1155304115)}),t("el-table-column",{attrs:{label:"过期时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.expire_at?t("div",{staticClass:"u-time"},[t("span",{staticClass:"u-tag",class:e.compareTime(a.row.expire_at,"tag")},[e._v(e._s(e.compareTime(a.row.expire_at,"time")))]),t("span",[e._v(e._s(a.row.expire_at))])]):t("span",[e._v("-")])]}}],null,!1,3144732282)}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200"}}),t("el-table-column",{attrs:{prop:"used_by_self",label:"是否使用"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.used_by_self?"是":"否")+" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.row.used_by_self,expression:"!scope.row.used_by_self"}],attrs:{type:"text",size:"mini"},on:{click:function(t){return e.onKeyCodeUsedClick(a.row)}}},[e._v("（标记使用）")])]}}],null,!1,3021784174)})],1):t("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到任何记录",type:"info",center:"","show-icon":""}}),e.showPagination?t("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1),t("el-tab-pane",{attrs:{label:"激活码",name:"sn"}},[e.list.length?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:e.list,"show-header":"","cell-class-name":"u-table-cell","header-cell-class-name":"u-header-cell"}},[t("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.snOptions.types[t.row.type]||t.row.type||"其他"))]}}],null,!1,249660435)}),t("el-table-column",{attrs:{prop:"subtype",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.snOptions.subtypes[t.row.subtype]||"其他"))]}}],null,!1,4082255435)}),t("el-table-column",{attrs:{prop:"describe",label:"描述"}}),t("el-table-column",{attrs:{label:"激活码","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"u-code"},[t("span",{staticClass:"u-txt"},[e._v(e._s(a.row.code||"****************"))]),a.row.code?t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+a.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制")]):t("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"mini",plain:""},on:{click:function(t){return e.getSn(a.$index,a.row)}}},[e._v("点击查看")])],1)]}}],null,!1,861861275)}),t("el-table-column",{attrs:{label:"过期时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.expire_at?t("div",{staticClass:"u-time"},[t("span",{staticClass:"u-tag",class:e.compareTime(a.row.expire_at,"tag")},[e._v(e._s(e.compareTime(a.row.expire_at,"time")))]),t("span",[e._v(e._s(a.row.expire_at))])]):t("span",[e._v("-")])]}}],null,!1,3144732282)}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"300"}}),t("el-table-column",{attrs:{prop:"used_by_self",label:"是否使用"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.used_by_self?"是":"否")+" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.row.used_by_self,expression:"!scope.row.used_by_self"}],attrs:{type:"text",size:"mini"},on:{click:function(t){return e.onSnUsedClick(a.row)}}},[e._v("（标记使用）")])]}}],null,!1,1631935113)})],1):t("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到任何记录",type:"info",center:"","show-icon":""}}),e.showPagination?t("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1),t("el-tab-pane",{attrs:{label:"虚拟商品",name:"virtual"}},[e.virtualList.length?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:e.virtualList,"show-header":""}},[t("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods.title||"-"))]}}],null,!1,217824814)}),t("el-table-column",{attrs:{label:"卡密","min-width":"330"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"u-card"},["code"==a.row.goods.sub_category?t("div",{staticClass:"u-count"},[t("div",{staticClass:"u-line"},[t("span",[e._v("卡号："+e._s(a.row.goods.good_number||"****************"))]),a.row.goods.good_number?t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+a.row.goods.good_number,expression:"'' + scope.row.goods.good_number",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制卡号")]):e._e()],1),t("div",{staticClass:"u-line"},[t("span",[e._v("卡密："+e._s(a.row.goods.goods_secret||"****************")+" ")]),a.row.goods.goods_secret?e._e():t("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"mini",plain:""},on:{click:function(t){return e.getVirtualCode(a.$index,a.row)}}},[e._v("点击查看")]),a.row.goods.goods_secret?t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+a.row.goods.goods_secret,expression:"'' + scope.row.goods.goods_secret",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制卡密")]):e._e()],1)]):t("div",{staticClass:"u-count"},[e._v(" "+e._s(a.row.goods.good_number)+" ")])])]}}],null,!1,4261449350)}),t("el-table-column",{attrs:{label:"过期时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.goods.expire_at?t("div",{staticClass:"u-time"},[t("span",{staticClass:"u-tag",class:e.compareTime(a.row.goods.expire_at,"tag")},[e._v(e._s(e.compareTime(a.row.goods.expire_at,"time")))]),t("span",[e._v(e._s(a.row.goods.expire_at))])]):t("span",[e._v("-")])]}}],null,!1,4212373690)}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200"}})],1):t("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到任何记录",type:"info",center:"","show-icon":""}}),e.showPagination?t("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1)],1),t("div",{staticClass:"u-only"},[t("el-switch",{attrs:{"active-text":"仅查看未使用"},model:{value:e.onlyNew,callback:function(t){e.onlyNew=t},expression:"onlyNew"}})],1)],1)],1)},o=[function(){var e=this,t=e._self._c;return t("h2",{staticClass:"u-title"},[t("i",{staticClass:"el-icon-bank-card"}),e._v(" 我的卡密")])}],r=a("5530"),i=(a("fb6a"),a("4de4"),a("d3b7"),a("14d9"),a("d81d"),a("b0c0"),a("a9e3"),a("99af"),a("41cb"));function s(e){return Object(i["e"])().get("/api/my/codekeycode/history",{params:e})}function c(e){return Object(i["e"])().get("/api/my/codesn/history",{params:e})}function l(e,t){return Object(i["e"])().post("/api/my/codesn/".concat(e,"/activation-code"),t)}function u(e,t){return Object(i["e"])().post("/api/my/codekeycode/".concat(e,"/activation-code"),t)}function p(e,t){return Object(i["e"])().put("/api/my/codesn/".concat(e,"/mark/").concat(t))}function d(e,t){return Object(i["e"])().put("/api/my/codekeycode/".concat(e,"/mark/").concat(t))}function b(e,t){return Object(i["e"])().post("/mall/manage/virtual_goods/".concat(e,"/secret"),t)}var m=a("1101"),f=a("65f6"),g=a("350b"),y={name:"card",data:function(){return{loading:!1,per:10,page:1,total:0,tab:"keycode",list:[],keycodeOptions:f,snOptions:g,showPagination:!0,onlyNew:!1,virtualList:[]}},computed:{params:function(){return{tab:this.tab,pageIndex:this.page,pageSize:this.per}},loadName:function(){return"load"+this.tab.slice(0,1).toUpperCase()+this.tab.slice(1)},filteredList:function(){return this.onlyNew?this.list.filter((function(e){return!e.used_by_self})):this.list}},methods:{loadKeycode:function(){var e=this;this.loading=!0,this.$router.push({name:"card",query:{tab:"keycode",page:this.page}}),this.showPagination=!1,s(this.params).then((function(t){var a=t.data.data.list||[];e.list=a.map((function(e){return e.code="",e})),e.total=t.data.data.page.total})).finally((function(){e.loading=!1,e.showPagination=!0}))},loadSn:function(){var e=this;this.loading=!0,this.$router.push({name:"card",query:{tab:"sn",page:this.page}}),this.showPagination=!1,c(this.params).then((function(t){var a=t.data.data.list||[];e.list=a.map((function(e){return e.sn="",e})),e.total=t.data.data.page.total})).finally((function(){e.loading=!1,e.showPagination=!0}))},loadVirtual:function(){var e=this;this.loading=!0,this.$router.push({name:"card",query:{tab:"virtual",page:this.page}}),this.showPagination=!1,Object(m["j"])(Object(r["a"])(Object(r["a"])({},this.params),{},{sub_category:"code"})).then((function(t){var a=t.data.data.list||[];e.virtualList=a.map((function(e){return e.goods.goods_secret="",e})),e.total=t.data.data.page.total})).finally((function(){e.loading=!1,e.showPagination=!0}))},getKeycode:function(e,t){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;u(t.id,{password:o}).then((function(n){var o=n.data.data,r=o.code,i=o.key;t.code=r,t.key=i,a.$set(a.list,e,t)}))}))},getSn:function(e,t){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;l(t.id,{password:o}).then((function(n){t.code=n.data.data.sn,a.$set(a.list,e,t)}))}))},getVirtualCode:function(e,t){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;b(t.goods.id,{password:o}).then((function(n){var o=n.data.data,r=o.good_number,i=o.goods_secret;t.goods.good_number=r,t.goods.goods_secret=i,a.$set(a.virtualList,e,t)}))}))},compareTime:function(e,t){var a=new Date(e).getTime()>Date.now()?0:1,n={0:"green",1:"gray"},o={0:"未过期",1:"已过期"};return"tag"==t?n[a]:o[a]},onKeyCodeUsedClick:function(e){var t=this;this.$confirm("确认标记为已使用吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d(e.id,"used").then((function(e){t.$message({type:"success",message:"标记成功!"}),t.loadKeycode()}))})).catch((function(){}))},onSnUsedClick:function(e){var t=this;this.$confirm("确认标记为已使用吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e.id,"used").then((function(e){t.$message({type:"success",message:"标记成功!"}),t.loadSn()}))})).catch((function(){}))},onCopy:function(e){this.$notify({title:"复制成功",message:"复制内容 : "+e.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})},currentChange:function(e){this.page=e,this[this.loadName]()},tabClick:function(e){this.page=1,this.tab=e.name,this[this.loadName]()}},mounted:function(){this.$route.query.tab&&(this.tab=this.$route.query.tab),this.page=Number(this.$route.query.page||1),this.loadName&&this[this.loadName]()}},v=y,h=(a("45b2"),a("2877")),w=Object(h["a"])(v,n,o,!1,null,null,null);t["default"]=w.exports},"350b":function(e){e.exports=JSON.parse('{"types":{"tf":"体服激活码","game":"游戏内激活码"},"subtypes":{"boxcoin":"盒币兑换","lottery":"积分抽奖","weibo":"微博活动","jdt":"赛事奖励"}}')},"45b2":function(e,t,a){"use strict";a("4baf")},"4baf":function(e,t,a){},"51eb":function(e,t,a){"use strict";var n=a("825a"),o=a("485a"),r=TypeError;e.exports=function(e){if(n(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw r("Incorrect hint");return o(this,e)}},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("14d9"),a("159b"),a("dbb4");var n=a("ade3");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"65f6":function(e){e.exports=JSON.parse('{"types":{"seasun_ykt":"金山一卡通","other":"其它"},"subtypes":{"boxcoin":"盒币兑换","lottery":"积分抽奖","weibo":"微博活动","jdt":"赛事奖励"}}')},8172:function(e,t,a){var n=a("e065"),o=a("57b9");n("toPrimitive"),o()},ade3:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("53ca");a("8172"),a("efec"),a("a4d3"),a("e01a"),a("d3b7"),a("d9e2"),a("a9e3");function o(e,t){if("object"!==Object(n["a"])(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!==Object(n["a"])(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function r(e){var t=o(e,"string");return"symbol"===Object(n["a"])(t)?t:String(t)}function i(e,t,a){return t=r(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},b64b:function(e,t,a){var n=a("23e7"),o=a("7b0b"),r=a("df75"),i=a("d039"),s=i((function(){r(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return r(o(e))}})},dbb4:function(e,t,a){var n=a("23e7"),o=a("83ab"),r=a("56ef"),i=a("fc6a"),s=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,a,n=i(e),o=s.f,l=r(n),u={},p=0;while(l.length>p)a=o(n,t=l[p++]),void 0!==a&&c(u,t,a);return u}})},e439:function(e,t,a){var n=a("23e7"),o=a("d039"),r=a("fc6a"),i=a("06cf").f,s=a("83ab"),c=!s||o((function(){i(1)}));n({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(r(e),t)}})},efec:function(e,t,a){var n=a("1a2d"),o=a("cb2d"),r=a("51eb"),i=a("b622"),s=i("toPrimitive"),c=Date.prototype;n(c,s)||o(c,s,r)}}]);
//# sourceMappingURL=chunk-7429e3ce.7ff2fb92.js.map