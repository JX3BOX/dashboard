(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c95b94c"],{"3f95":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-emotion m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮",tabList:t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"u-tips"},[n("i",{staticClass:"el-icon-warning-outline"}),t._v("自定义表情包最多只能同时激活五个。 ")]),n("div",{staticClass:"u-list"},t._l(t.emotions,(function(i){return n("div",{key:i.group_id,staticClass:"u-item",class:{"is-using":t.isUsing(i.group_name),disabled:t.isDisabled(i.group_name),hidden:t.isHidden(i.group_name)},on:{click:function(n){return n.stopPropagation(),t.handleEmotionClick(i)}}},[n("img",{staticClass:"u-img",attrs:{src:t.imgSrc(i.group_name),alt:i.group_name}}),n("div",{staticClass:"u-title"},[t._v(t._s(i.group_name))])])})),0),n("div",{staticClass:"u-actions"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",loading:t.loading},on:{click:t.handleSave}},[t._v("保存")])],1)])},o=[],a=(i("4de4"),i("7db0"),i("caad"),i("d81d"),i("14d9"),i("4e82"),i("e9c4"),i("b64b"),i("d3b7"),i("2532"),i("0643"),i("2382"),i("fffc"),i("a573"),i("b547")),r=i("aa38"),s=i("65c2"),u=i("46c1"),c={name:"emotion",props:[],data:function(){return{tabList:u["e"],emotionList:[],emotions:[],active:[],loading:!1}},computed:{},methods:{loadDecoration:function(){var t=this;Object(r["b"])({type:"emotion"}).then((function(n){t.emotionList=n.data.data,t.active=t.emotionList.filter((function(t){return t.using})).map((function(t){return t.val}));var i=t.emotionList.map((function(t){return t.val}));t.emotions.sort((function(t,n){var e=i.includes(t.group_name),o=i.includes(n.group_name);return e&&!o?-1:!e&&o?1:0}))}))},getEmotion:function(){var t=this;try{var n=JSON.parse(sessionStorage.getItem("jx3_emotion"));if(n)return void(this.emotions=n);Object(r["d"])().then((function(n){t.emotions=n.data,sessionStorage.setItem("jx3_emotion",JSON.stringify(n.data))}))}catch(i){this.emotions=[]}finally{this.loadDecoration()}},imgSrc:function(t){var n,i=this.emotions.find((function(n){return n.group_name===t})),e=null===(n=i.items)||void 0===n?void 0:n[0];return s["__imgPath"]+"emotion/output/"+(null===e||void 0===e?void 0:e.filename)},isUsing:function(t){return this.active.includes(t)||"默认"===t},isDisabled:function(t){return!this.emotionList.map((function(t){return t.val})).includes(t)&&"默认"!==t},isHidden:function(t){return"默认"===t},handleEmotionClick:function(t){this.isDisabled(t.group_name)||(this.active.length>=5&&!this.isUsing(t.group_name)?this.$message.error("最多只能选择五个表情包"):this.isUsing(t.group_name)?this.active=this.active.filter((function(n){return n!==t.group_name})):this.active.push(t.group_name))},handleSave:function(){var t=this;this.loading=!0;var n=this.emotionList.map((function(n){return{type:"emotion",val:n.val,using:t.active.includes(n.val)}}));Object(r["j"])(n).then((function(n){t.$message.success("保存成功"),t.loading=!1}))}},mounted:function(){this.getEmotion()},components:{uc:a["a"]}},d=c,l=(i("fd77"),i("2877")),m=Object(l["a"])(d,e,o,!1,null,null,null);n["default"]=m.exports},6163:function(t,n,i){},aa38:function(t,n,i){"use strict";i.d(n,"b",(function(){return s})),i.d(n,"j",(function(){return u})),i.d(n,"c",(function(){return c})),i.d(n,"d",(function(){return d})),i.d(n,"i",(function(){return l})),i.d(n,"l",(function(){return m})),i.d(n,"e",(function(){return f})),i.d(n,"g",(function(){return p})),i.d(n,"k",(function(){return g})),i.d(n,"a",(function(){return h})),i.d(n,"h",(function(){return v})),i.d(n,"f",(function(){return b}));i("99af");var e=i("41cb"),o=i("bc3a"),a=i.n(o),r=i("65c2");function s(t){return Object(e["a"])().get("/api/cms/user/decoration",{params:t})}function u(t){return Object(e["a"])().post("/api/cms/user/decoration",t)}function c(){var t=r["__cdn"]+"design/decoration/index.json?".concat(Date.now());return a.a.get(t)}function d(){return a.a.get("".concat(r["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function l(t,n){return Object(e["a"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function m(t){return Object(e["a"])().put("/api/cms/user/my/avatar-frame",t)}function f(){return Object(e["a"])().get("/api/cms/user/config/honor")}function p(t){return Object(e["b"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function g(t){return Object(e["a"])().put("/api/cms/user/honor/use/".concat(t))}function h(){return Object(e["a"])().delete("/api/cms/user/honor/use")}function v(t){return Object(e["b"])({mute:!0}).get("/api/next2/user/"+t+"/medals")}function b(t){return Object(e["a"])().get("/api/cms/config/medal",{params:t})}},fd77:function(t,n,i){"use strict";i("6163")}}]);
//# sourceMappingURL=chunk-1c95b94c.01c925b5.js.map