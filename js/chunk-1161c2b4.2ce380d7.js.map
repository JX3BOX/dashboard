{"version":3,"sources":["webpack:///./src/views/honor.vue","webpack:///src/views/honor.vue","webpack:///./src/views/honor.vue?c8a1","webpack:///./src/views/honor.vue?62e2","webpack:///./src/service/decoration.js","webpack:///./src/views/honor.vue?925a"],"names":["render","_vm","this","_c","_self","staticClass","attrs","tabList","scopedSlots","_u","key","fn","_v","proxy","uid","avatar","avatarSize","avatar_frame","on","$event","copyData","data","display_name","_s","ID","concat","experience","class","level","style","backgroundColor","showLevelColor","isPRO","isVIP","vipTypeTitle","vipType","_e","isSuperAuthor","isSelect","isCustomize","backgroundImage","imgUrl","color","name","_l","honorList","item","i","slot","setClass","selectChange","submit","reset","staticRenderFns","props","themeTab","info","User","getInfo","user_avatar","__imgPath","user_avatar_frame","bio","sign","list","isSelectBak","computed","_this$data","is_pro","_this$data2","_this$data3","getLevel","methods","__cdn","img","img_ext","isHave","using","w","document","body","clientWidth","documentElement","loadUserInfo","_this","getMyInfo","then","res","disposeHonor","honor","honorConfig","only","prefix","regPrefix","match","ranking","honorStr","year","length","imgIndex","undefined","inRange","Number","str","regStr","replace","p1","suffix","loadHonor","_this2","getHonor","loadDecoration","_this3","getUserHonors","_this3$honorList","myHonors","map","find","e","honor_id","id","isUsing","_objectSpread","type","unshift","sortData","cloneDeep","forEach","$set","arr","filter","sort","a","b","noHave","__userLevelColor","_this$honorList","_this4","setHonor","$message","message","cancelHonor","mounted","components","uc","component","getDecoration","params","$cms","get","setDecoration","post","getDecorationJson","url","Date","now","axios","getEmotion","__dataPath","receive","user_id","val","updateAvatarFrame","put","$next","mute","delete","getUserMedals","getMedals"],"mappings":"qIAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,KAAK,CAACE,YAAY,qCAAqCC,MAAM,CAAC,KAAO,gBAAgB,MAAQ,OAAO,WAAWL,EAAIM,SAASC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAACR,EAAG,IAAI,CAACE,YAAY,wEAAwEC,MAAM,CAAC,KAAO,6BAA6B,OAAS,WAAW,CAACH,EAAG,IAAI,CAACE,YAAY,4BAA4BJ,EAAIW,GAAG,eAAeC,OAAM,MAAS,CAACV,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,SAAS,CAACE,YAAY,kBAAkBC,MAAM,CAAC,IAAML,EAAIa,IAAI,IAAMb,EAAIc,OAAO,KAAOd,EAAIe,aAAa,MAAQf,EAAIgB,gBAAgBd,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,OAAO,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,SAASnB,EAAIoB,KAAKC,cAAgB,SAAS,CAACrB,EAAIW,GAAGX,EAAIsB,GAAGtB,EAAIoB,KAAKC,cAAgB,SAASrB,EAAIW,GAAG,KAAKT,EAAG,OAAO,CAACE,YAAY,QAAQa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,SAASnB,EAAIoB,KAAKG,IAAM,MAAM,CAACvB,EAAIW,GAAG,UAAUX,EAAIsB,GAAGtB,EAAIoB,KAAKG,IAAM,GAAG,SAASrB,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,QAAS,QAAAmB,OAASxB,EAAIoB,KAAKK,YAAc,GAAI,UAAY,QAAQ,CAACvB,EAAG,OAAO,CAACE,YAAY,UAAUsB,MAAM,MAAQ1B,EAAI2B,MAAMC,MAAO,CAAEC,gBAAiB7B,EAAI8B,eAAe9B,EAAI2B,SAAW,CAAC3B,EAAIW,GAAG,MAAMX,EAAIsB,GAAGtB,EAAI2B,YAAa3B,EAAI+B,OAAS/B,EAAIgC,MAAO9B,EAAG,aAAa,CAACG,MAAM,CAAC,QAAUL,EAAIiC,aAAa,UAAY,QAAQ,CAAC/B,EAAG,OAAO,CAACE,YAAY,QAAQC,MAAM,CAAC,OAAS,WAAW,CAACH,EAAG,IAAI,CAACE,YAAY,cAAc,CAACJ,EAAIW,GAAGX,EAAIsB,GAAGtB,EAAIkC,gBAAgBlC,EAAImC,KAAMnC,EAAIoC,cAAelC,EAAG,aAAa,CAACG,MAAM,CAAC,QAAU,OAAO,UAAY,QAAQ,CAACH,EAAG,OAAO,CAACE,YAAY,iBAAiB,CAACF,EAAG,IAAI,CAACE,YAAY,sBAAsB,CAACJ,EAAIW,GAAG,cAAcX,EAAImC,MAAM,GAAKnC,EAAIqC,SAASC,YAAwMtC,EAAImC,KAA/LjC,EAAG,MAAM,CAACE,YAAY,UAAUwB,MAAO,CAAEW,gBAAiB,OAAFf,OAASxB,EAAIwC,OAAOxC,EAAIqC,UAAS,OAAQ,CAACnC,EAAG,OAAO,CAAC0B,MAAO,CAAEa,MAAOzC,EAAIqC,SAASI,QAAU,CAACzC,EAAIW,GAAGX,EAAIsB,GAAGtB,EAAIqC,SAASK,cAAuB,KAAKxC,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,OAAO,CAACE,YAAY,UAAU,CAACF,EAAG,IAAI,CAACE,YAAY,2BAA2BJ,EAAIW,GAAG,QAAQT,EAAG,IAAI,CAACE,YAAY,QAAQC,MAAM,CAAC,KAAM,gDAAiD,OAAS,WAAW,CAACH,EAAG,IAAI,CAACE,YAAY,4BAA4BJ,EAAIW,GAAG,aAAaT,EAAG,MAAM,CAACE,YAAY,gBAAgBJ,EAAI2C,GAAI3C,EAAI4C,WAAW,SAASC,EAAKC,GAAG,OAAO5C,EAAG,MAAM,CAACO,IAAIqC,EAAE1C,YAAY,YAAY,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,OAAS,OAAO,UAAY,MAAM,aAAa,MAAM,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,WAAW0C,KAAK,WAAW,CAAC/C,EAAIW,GAAGX,EAAIsB,GAAGuB,EAAKH,SAASxC,EAAG,MAAM,CAACE,YAAY,QAAQsB,MAAM1B,EAAIgD,SAASH,GAAM5B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIiD,aAAaJ,MAAS,CAAEA,EAAKP,YAAapC,EAAG,MAAM,CAACE,YAAY,cAAcF,EAAG,WAAW,CAACG,MAAM,CAAC,IAAML,EAAIwC,OAAOK,GAAM,IAAM,cAAc,MAAM,MAAK,SAAS3C,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWY,GAAG,CAAC,MAAQjB,EAAIkD,SAAS,CAAClD,EAAIW,GAAG,QAAQT,EAAG,YAAY,CAACe,GAAG,CAAC,MAAQjB,EAAImD,QAAQ,CAACnD,EAAIW,GAAG,SAAS,MAExlGyC,EAAkB,G,kQC2FP,GACfV,KAAA,QACAW,MAAA,GACAjC,KAAA,WACA,OACAd,QAAAgD,OACAtB,OAAA,EACAuB,KAAA,CACA1C,IAAA2C,OAAAC,UAAA5C,IACA6B,KAAA,KACAgB,YAAA,GAAAlC,OAAAmC,eAAA,4BACAC,kBAAA,UACAC,IAAA,IACAC,KAAA,GAEAzB,SAAA,GACAO,UAAA,GACAmB,KAAA,GACAC,YAAA,KAGAC,SAAA,CACApD,IAAA,WACA,OAAA2C,OAAAC,UAAA5C,KAEAO,KAAA,WACA,YAAAmC,MAEAzC,OAAA,WACA,YAAAM,KAAAsC,aAAA,IAEA1C,aAAA,WACA,YAAAI,KAAAwC,mBAAA,IAEA7B,MAAA,eAAAmC,EACA,eAAAA,EAAA,KAAA9C,YAAA,IAAA8C,OAAA,EAAAA,EAAAC,QAEA/B,cAAA,eAAAgC,EACA,gBAAAA,EAAA,KAAAhD,YAAA,IAAAgD,MAAAN,OAEA5B,QAAA,WACA,YAAAH,MAAA,aAEAE,aAAA,WACA,YAAAF,MAAA,qBAEAJ,MAAA,eAAA0C,EACA,OAAAb,OAAAc,UAAA,QAAAD,EAAA,KAAAjD,YAAA,IAAAiD,OAAA,EAAAA,EAAA5C,aAAA,KAGA8C,QAAA,CACA/B,OAAA,SAAAK,GACA,OAAA2B,WAAA,2BAAAhD,OAAAqB,EAAA4B,IAAA,KAAAjD,OAAAqB,EAAA4B,IAAA,KAAAjD,OAAAqB,EAAA6B,UAEA1B,SAAA,SAAAH,GACA,OAAAA,EAAA8B,OACA9B,EAAA+B,MAAA,gBADA,UAGA7D,WAAA,WACA,IAAA8D,EAAAC,SAAAC,KAAAC,aAAAF,SAAAG,gBAAAD,YACA,OAAAH,EAAA,IACA,IAEA,KAGAK,aAAA,eAAAC,EAAA,KACAC,iBAAAC,MAAA,SAAAC,GACAA,EAAAlE,YACA+D,EAAA5B,KAAA+B,EAAAlE,eAIAmE,aAAA,SAAAC,GACA,IAAApE,EAAAoE,GAAA,GACAC,GAAA,OAAAD,QAAA,IAAAA,OAAA,EAAAA,UAAA,GAEAE,EAAAD,EAAAC,KACAC,EAAAF,EAAAE,OACAC,EAAAH,EAAAE,OAAAE,MAAA,uBACAC,EAAAL,EAAAK,QACAC,EAAAN,EAAAO,MAAA,GAaA,GAZAN,EASAK,EAAAJ,EARAC,EACAxE,IACA2E,IAAA,OAAAP,QAAA,IAAAA,OAAA,EAAAA,EAAAI,EAAA,UAGAG,GAAAJ,GAMA,OAAAG,QAAA,IAAAA,OAAA,EAAAA,EAAAG,QAAA,GAAA7E,EAAA,CACAA,EAAA8E,SAAA,EACA,QAAApD,EAAA,EAAAA,EAAAgD,EAAAG,OAAAnD,IAEA,QAAAqD,IAAA,OAAAX,QAAA,IAAAA,OAAA,EAAAA,EAAAM,UAAAM,qBAAAC,OAAA,OAAAb,QAAA,IAAAA,OAAA,EAAAA,EAAAM,WAAAhD,GAAA,GAAAgD,EAAAhD,GAAA,KACA1B,EAAA8E,SAAApD,EACA,IAAAwD,EAAAR,EAAAhD,GAAA,GAEAyD,EAAAD,EAAAT,MAAA,uBAGAE,GAFAQ,EAIAD,EAAAE,QAAA,2BAAAX,EAAAY,GACA,OAAArF,EAAAqF,IAAAjB,EAAAiB,IAAA,MAGAH,EAEA,OAIA,OAAAP,EAAAN,EAAAiB,QAEAC,UAAA,eAAAC,EAAA,KACAC,iBAAAxB,MAAA,SAAAC,GACAsB,EAAAhE,UAAA0C,EAAAlE,UAAA2C,KACA6C,EAAAE,qBAGAA,eAAA,eAAAC,EAAA,KACAC,eAAA,KAAAnG,KAAAwE,MAAA,SAAAC,GAAA,IAAA2B,EACAC,EAAA5B,GAAA,GACAyB,EAAAnE,UAAAmE,EAAAnE,UAAAuE,KAAA,SAAAtE,GACA,IAAA8B,EAAA,OAAAuC,QAAA,IAAAA,OAAA,EAAAA,EAAAE,MAAA,SAAAC,GAAA,OAAAA,EAAAC,UAAAzE,EAAA0E,MACA5C,IACA9B,EAAA8B,QAAA,GAEA,IAAA6C,EAAA,OAAAN,QAAA,IAAAA,OAAA,EAAAA,EAAAE,MAAA,SAAAC,GAAA,OAAAA,EAAAC,UAAAzE,EAAA0E,IAAA,GAAAF,EAAAzC,SAUA,OATA4C,IACA3E,EAAA+B,MAAA,GAGA/B,EAAAH,KAAAqE,EAAAxB,aAAAkC,8BAAA,GACA9C,GAAA,IACAa,MAAA3C,KAGAA,KAEA,IAAA2E,EAAA,QAAAP,EAAAF,EAAAnE,iBAAA,IAAAqE,OAAA,EAAAA,EAAAG,MAAA,SAAAvE,GAAA,UAAAA,EAAA+B,SACAtC,EAAA,CACAoF,KAAA,kBACAjD,IAAA,QACA/B,KAAA,SACAkC,MAAA4C,EAAA,IACA7C,QAAA,EACArC,aAAA,GAGAyE,EAAA1E,SADAmF,GAGAlF,EAEAyE,EAAAnE,UAAA+E,QAAArF,GACAyE,EAAAnE,UAAAmE,EAAAa,SAAAb,EAAAnE,WACAmE,EAAAhD,KAAA8D,uBAAAd,EAAAnE,WACAmE,EAAA/C,YAAA6D,uBAAAd,EAAA1E,cAGAY,aAAA,SAAAJ,GACAA,EAAA8B,SACA,KAAA/B,UAAAkF,SAAA,SAAAT,GACAA,EAAAzC,MAAA,KAEA/B,EAAA+B,MAAA,EACA,KAAAvC,SAAAQ,IAEAM,MAAA,WACA,KAAA4E,KAAA,iBAAAF,uBAAA,KAAA9D,OACA,KAAAgE,KAAA,gBAAAF,uBAAA,KAAA7D,eAEA4D,SAAA,SAAAI,GAEA,IAAArD,EAAAqD,EAAAC,QAAA,SAAAZ,GAAA,OAAAA,EAAA1C,UAAAuD,MAAA,SAAAC,EAAAC,GAAA,OAAAD,EAAAb,SAAAc,EAAAd,YAEAe,EAAAL,EAAAC,QAAA,SAAAZ,GAAA,OAAAA,EAAA1C,UAAAuD,MAAA,SAAAC,EAAAC,GAAA,OAAAD,EAAAb,SAAAc,EAAAd,YACA,OAAA3C,EAAAnD,OAAA6G,IAEAvG,eAAA,SAAAH,GACA,OAAA2G,sBAAA3G,IAEAuB,OAAA,eAAAqF,EAAAC,EAAA,KACA3F,EAAA,QAAA0F,EAAA,KAAA3F,iBAAA,IAAA2F,OAAA,EAAAA,EAAAnB,MAAA,SAAAC,GAAA,UAAAA,EAAAzC,SACA,OAAA/B,QAAA,IAAAA,KAAA0E,GACAkB,eAAA5F,EAAA0E,IAAAlC,MAAA,SAAAC,GACAkD,EAAAE,SAAA,CACAC,QAAA,SACAjB,KAAA,eAIAkB,iBAAAvD,MAAA,SAAAC,GACAkD,EAAAE,SAAA,CACAC,QAAA,SACAjB,KAAA,iBAMAmB,QAAA,WACA,KAAA3D,eACA,KAAAyB,aAEAmC,WAAA,CACAC,YChTyY,I,wBCQrYC,EAAY,eACd,EACAjJ,EACAqD,GACA,EACA,KACA,KACA,MAIa,aAAA4F,E,8fCff,SAASC,EAAcC,GACnB,OAAOC,iBAAOC,IAAI,2BAA4B,CAC1CF,WAIR,SAASG,EAAcjI,GACnB,OAAO+H,iBAAOG,KAAK,2BAA4BlI,GAGnD,SAASmI,IACL,IAAIC,EAAMhF,WAAQ,gCAAHhD,OAAmCiI,KAAKC,OACvD,OAAOC,IAAMP,IAAII,GAGrB,SAASI,IACL,OAAOD,IAAMP,IAAI,GAAD5H,OAAIqI,gBAAU,gCAAArI,OAA+BiI,KAAKC,QAGtE,SAASI,EAAQC,EAASC,GACtB,OAAOb,iBAAOG,KAAK,uCAAD9H,OAAwCuI,EAAO,KAAAvI,OAAIwI,EAAG,gBAG5E,SAASC,EAAkB7I,GACvB,OAAO+H,iBAAOe,IAAI,gCAAiC9I,GAGvD,SAASyF,IAEL,OAAOsC,iBAAOC,IAAI,8BAGtB,SAASpC,EAAcnG,GACnB,OAAOsJ,eAAM,CAAEC,MAAM,IAChBhB,IAAI,mBAAqBvI,EAAM,WAC/BwE,MAAK,SAACC,GACH,OAAOA,EAAIlE,KAAKA,QAG5B,SAASqH,EAASnB,GACd,OAAO6B,iBAAOe,IAAI,2BAAD1I,OAA4B8F,IAEjD,SAASsB,IACL,OAAOO,iBAAOkB,OAAO,2BAIzB,SAASC,EAAczJ,GACnB,OAAOsJ,eAAM,CAAEC,MAAM,IAAQhB,IAAI,mBAAqBvI,EAAM,WAIhE,SAAS0J,EAAUrB,GACf,OAAOC,iBAAOC,IAAI,wBAAyB,CAACF,a,yDCzDhD","file":"js/chunk-1161c2b4.2ce380d7.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('uc',{staticClass:\"m-dashboard-honor m-dashboard-skin\",attrs:{\"icon\":\"el-icon-brush\",\"title\":\"主题装扮\",\"tab-list\":_vm.tabList},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('a',{staticClass:\"u-link el-button el-button--default el-button--mini is-round is-plain\",attrs:{\"href\":\"/vip/mall?category=virtual\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\" 前往获取装扮\")])]},proxy:true}])},[_c('div',{staticClass:\"m-honor\"},[_c('div',{staticClass:\"m-honor-left\"},[_c('div',{staticClass:\"u-header-info\"},[_c('Avatar',{staticClass:\"u-author-avatar\",attrs:{\"uid\":_vm.uid,\"url\":_vm.avatar,\"size\":_vm.avatarSize(),\"frame\":_vm.avatar_frame}}),_c('div',{staticClass:\"u-author-info\"},[_c('span',{staticClass:\"u-name\"},[_c('span',{on:{\"click\":function($event){return _vm.copyData(_vm.data.display_name || '匿名')}}},[_vm._v(_vm._s(_vm.data.display_name || \"匿名\"))]),_vm._v(\" \"),_c('span',{staticClass:\"u-uid\",on:{\"click\":function($event){return _vm.copyData(_vm.data.ID || 0)}}},[_vm._v(\"(UID : \"+_vm._s(_vm.data.ID || 0)+\")\")])]),_c('div',{staticClass:\"u-tips\"},[_c('el-tooltip',{attrs:{\"content\":`当前经验 ${_vm.data.experience || 0}`,\"placement\":\"top\"}},[_c('span',{staticClass:\"u-level\",class:'lv-' + _vm.level,style:({ backgroundColor: _vm.showLevelColor(_vm.level) })},[_vm._v(\"Lv.\"+_vm._s(_vm.level))])]),(_vm.isPRO || _vm.isVIP)?_c('el-tooltip',{attrs:{\"content\":_vm.vipTypeTitle,\"placement\":\"top\"}},[_c('span',{staticClass:\"u-vip\",attrs:{\"target\":\"_blank\"}},[_c('i',{staticClass:\"u-icon vip\"},[_vm._v(_vm._s(_vm.vipType))])])]):_vm._e(),(_vm.isSuperAuthor)?_c('el-tooltip',{attrs:{\"content\":\"签约作者\",\"placement\":\"top\"}},[_c('span',{staticClass:\"u-superauthor\"},[_c('i',{staticClass:\"u-icon superauthor\"},[_vm._v(\"签约作者\")])])]):_vm._e()],1),(!_vm.isSelect.isCustomize)?_c('div',{staticClass:\"u-honor\",style:({ backgroundImage: `url(${_vm.imgUrl(_vm.isSelect)})` })},[_c('span',{style:({ color: _vm.isSelect.color })},[_vm._v(_vm._s(_vm.isSelect.name))])]):_vm._e()])],1)]),_c('div',{staticClass:\"m-honor-right\"},[_c('div',{staticClass:\"u-honor-list\"},[_c('div',{staticClass:\"u-title\"},[_c('span',{staticClass:\"u-name\"},[_c('i',{staticClass:\"el-icon-collection-tag\"}),_vm._v(\"称号\")]),_c('a',{staticClass:\"u-buy\",attrs:{\"href\":`/vip/mall?category=virtual&sub_category=honor`,\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\" 前往获取\")])]),_c('div',{staticClass:\"u-honor-item\"},_vm._l((_vm.honorList),function(item,i){return _c('div',{key:i,staticClass:\"u-picbox\"},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"placement\":\"top\",\"open-delay\":200}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"u-pic\",class:_vm.setClass(item),on:{\"click\":function($event){return _vm.selectChange(item)}}},[(item.isCustomize)?_c('div',{staticClass:\"u-noHonor\"}):_c('el-image',{attrs:{\"src\":_vm.imgUrl(item),\"fit\":\"contain\"}})],1)])],1)}),0)])])]),_c('div',{staticClass:\"m-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确认\")]),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <uc class=\"m-dashboard-honor m-dashboard-skin\" icon=\"el-icon-brush\" title=\"主题装扮\" :tab-list=\"tabList\">\n        <template #header>\n            <a\n                class=\"u-link el-button el-button--default el-button--mini is-round is-plain\"\n                href=\"/vip/mall?category=virtual\"\n                target=\"_blank\"\n                ><i class=\"el-icon-shopping-cart-2\"></i> 前往获取装扮</a\n            >\n        </template>\n        <div class=\"m-honor\">\n            <div class=\"m-honor-left\">\n                <div class=\"u-header-info\">\n                    <Avatar\n                        class=\"u-author-avatar\"\n                        :uid=\"uid\"\n                        :url=\"avatar\"\n                        :size=\"avatarSize()\"\n                        :frame=\"avatar_frame\"\n                    />\n                    <div class=\"u-author-info\">\n                        <span class=\"u-name\">\n                            <span @click=\"copyData(data.display_name || '匿名')\">{{ data.display_name || \"匿名\" }}</span\n                            >&nbsp;<span class=\"u-uid\" @click=\"copyData(data.ID || 0)\">(UID : {{ data.ID || 0 }})</span>\n                        </span>\n                        <div class=\"u-tips\">\n                            <el-tooltip :content=\"`当前经验 ${data.experience || 0}`\" placement=\"top\">\n                                <span\n                                    class=\"u-level\"\n                                    :class=\"'lv-' + level\"\n                                    :style=\"{ backgroundColor: showLevelColor(level) }\"\n                                    >Lv.{{ level }}</span\n                                >\n                            </el-tooltip>\n                            <el-tooltip :content=\"vipTypeTitle\" v-if=\"isPRO || isVIP\" placement=\"top\">\n                                <span class=\"u-vip\" target=\"_blank\">\n                                    <i class=\"u-icon vip\">{{ vipType }}</i>\n                                </span>\n                            </el-tooltip>\n                            <el-tooltip content=\"签约作者\" v-if=\"isSuperAuthor\" placement=\"top\">\n                                <span class=\"u-superauthor\">\n                                    <i class=\"u-icon superauthor\">签约作者</i>\n                                </span>\n                            </el-tooltip>\n                        </div>\n                        <div\n                            class=\"u-honor\"\n                            v-if=\"!isSelect.isCustomize\"\n                            :style=\"{ backgroundImage: `url(${imgUrl(isSelect)})` }\"\n                        >\n                            <span :style=\"{ color: isSelect.color }\">{{ isSelect.name }}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"m-honor-right\">\n                <div class=\"u-honor-list\">\n                    <div class=\"u-title\">\n                        <span class=\"u-name\"><i class=\"el-icon-collection-tag\"></i>称号</span>\n                        <a class=\"u-buy\" :href=\"`/vip/mall?category=virtual&sub_category=honor`\" target=\"_blank\"\n                            ><i class=\"el-icon-shopping-cart-2\"></i> 前往获取</a\n                        >\n                    </div>\n                    <div class=\"u-honor-item\">\n                        <div class=\"u-picbox\" v-for=\"(item, i) in honorList\" :key=\"i\">\n                            <el-tooltip effect=\"dark\" placement=\"top\" :open-delay=\"200\">\n                                <div slot=\"content\">{{ item.name }}</div>\n                                <div class=\"u-pic\" :class=\"setClass(item)\" @click=\"selectChange(item)\">\n                                    <div v-if=\"item.isCustomize\" class=\"u-noHonor\"></div>\n                                    <el-image :src=\"imgUrl(item)\" fit=\"contain\" v-else />\n                                </div>\n                            </el-tooltip>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"m-btn\">\n            <el-button type=\"primary\" @click=\"submit\">确认</el-button>\n            <el-button @click=\"reset\">重置</el-button>\n        </div>\n    </uc>\n</template>\n\n<script>\nimport uc from \"@/components/uc.vue\";\nimport { themeTab } from \"@/assets/data/tabs.json\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getMyInfo } from \"@/service/index.js\";\nimport { __userLevelColor, __imgPath, __cdn } from \"@jx3box/jx3box-common/data/jx3box\";\nimport { getHonor, getUserHonors, setHonor, cancelHonor } from \"@/service/decoration\";\nimport { cloneDeep, inRange } from \"lodash\";\nexport default {\n    name: \"honor\",\n    props: [],\n    data: function () {\n        return {\n            tabList: themeTab,\n            isVIP: false,\n            info: {\n                uid: User.getInfo().uid,\n                name: \"匿名\",\n                user_avatar: `${__imgPath}/image/common/avatar.png`,\n                user_avatar_frame: \"default\",\n                bio: \"-\",\n                sign: 0,\n            },\n            isSelect: {},\n            honorList: [],\n            list: [],\n            isSelectBak: {},\n        };\n    },\n    computed: {\n        uid: function () {\n            return User.getInfo().uid;\n        },\n        data: function () {\n            return this.info;\n        },\n        avatar: function () {\n            return this.data.user_avatar || \"\";\n        },\n        avatar_frame: function () {\n            return this.data.user_avatar_frame || \"\";\n        },\n        isPRO: function () {\n            return this.data?.is_pro;\n        },\n        isSuperAuthor: function () {\n            return !!this.data?.sign;\n        },\n        vipType: function () {\n            return this.isPRO ? \"PRO\" : \"PRE\";\n        },\n        vipTypeTitle: function () {\n            return this.isPRO ? \"专业版会员用户\" : \"高级版会员用户\";\n        },\n        level: function () {\n            return User.getLevel(this.data?.experience || 0);\n        },\n    },\n    methods: {\n        imgUrl: function (item) {\n            return __cdn + `design/decoration/honor/${item.img}/${item.img}.${item.img_ext}`;\n        },\n        setClass(item) {\n            if (!item.isHave) return \"noHave\";\n            if (item.using) return \"select\";\n        },\n        avatarSize() {\n            let w = document.body.clientWidth || document.documentElement.clientWidth;\n            if (w > 500) {\n                return \"m\";\n            } else {\n                return \"s\";\n            }\n        },\n        loadUserInfo: function () {\n            getMyInfo().then((res) => {\n                if (res.data.data) {\n                    this.info = res.data.data;\n                }\n            });\n        },\n        disposeHonor(honor) {\n            const data = honor || {};\n            const honorConfig = honor?.honor || {};\n            //正则取出前缀\n            let only = honorConfig.only;\n            let prefix = honorConfig.prefix;\n            let regPrefix = honorConfig.prefix.match(/(?<=\\{)(.+?)(?=\\})/g);\n            let ranking = honorConfig.ranking;\n            let honorStr = honorConfig.year || \"\";\n            if (!only) {\n                if (regPrefix) {\n                    if (data) {\n                        honorStr = honorStr + (honor?.[regPrefix[0]] || \"\");\n                    }\n                } else {\n                    honorStr = honorStr + prefix;\n                }\n            } else {\n                honorStr = prefix;\n            }\n            //排名处理\n            if (ranking?.length > 0 && data) {\n                data.imgIndex = 0;\n                for (let i = 0; i < ranking.length; i++) {\n                    //处在范围内取数组第三个值进行称号拼接\n                    if (honor?.ranking != undefined && inRange(Number(honor?.ranking), ranking[i][0], ranking[i][1])) {\n                        data.imgIndex = i;\n                        let str = ranking[i][2];\n                        //正则取出需替换值，如果没有则直接拼接\n                        let regStr = str.match(/(?<=\\{)(.+?)(?=\\})/g);\n                        if (regStr) {\n                            //包含花括号替换\n                            honorStr =\n                                honorStr +\n                                str.replace(/\\{([^{}]+?)\\}/g, function (match, p1) {\n                                    return data[p1] || honor[p1] || \"\";\n                                });\n                        } else {\n                            honorStr = honorStr + str;\n                        }\n                        break;\n                    }\n                }\n            }\n            return honorStr + honorConfig.suffix;\n        },\n        loadHonor() {\n            getHonor().then((res) => {\n                this.honorList = res.data.data.list;\n                this.loadDecoration();\n            });\n        },\n        loadDecoration() {\n            getUserHonors(this.uid).then((res) => {\n                const myHonors = res || [];\n                this.honorList = this.honorList.map((item) => {\n                    const isHave = myHonors?.find((e) => e.honor_id == item.id);\n                    if (isHave) {\n                        item.isHave = true;\n                    }\n                    const isUsing = myHonors?.find((e) => e.honor_id == item.id && e.using == 1);\n                    if (isUsing) {\n                        item.using = 1;\n                    }\n\n                    item.name = this.disposeHonor({\n                        ...isHave,\n                        honor: item,\n                    });\n\n                    return item;\n                });\n                let isUsing = this.honorList?.find((item) => item.using == 1);\n                let isCustomize = {\n                    type: \"honor_customize\",\n                    img: \"不佩戴称号\",\n                    name: \"取消佩戴称号\",\n                    using: isUsing ? 0 : 1,\n                    isHave: true,\n                    isCustomize: true, //是否是自己定义的\n                };\n                if (isUsing) {\n                    this.isSelect = isUsing;\n                } else {\n                    this.isSelect = isCustomize;\n                }\n                this.honorList.unshift(isCustomize);\n                this.honorList = this.sortData(this.honorList);\n                this.list = cloneDeep(this.honorList);\n                this.isSelectBak = cloneDeep(this.isSelect);\n            });\n        },\n        selectChange(item) {\n            if (!item.isHave) return;\n            this.honorList.forEach((e) => {\n                e.using = 0;\n            });\n            item.using = 1;\n            this.isSelect = item;\n        },\n        reset() {\n            this.$set(this, \"honorList\", cloneDeep(this.list));\n            this.$set(this, \"isSelect\", cloneDeep(this.isSelectBak));\n        },\n        sortData(arr) {\n            // 已有的称号\n            const isHave = arr.filter((e) => e.isHave).sort((a, b) => a.honor_id - b.honor_id);\n            // 未有的称号\n            const noHave = arr.filter((e) => !e.isHave).sort((a, b) => a.honor_id - b.honor_id);\n            return isHave.concat(noHave);\n        },\n        showLevelColor: function (level) {\n            return __userLevelColor[level];\n        },\n        submit() {\n            const item = this.honorList?.find((e) => e.using == 1);\n            if (item?.id) {\n                setHonor(item.id).then((res) => {\n                    this.$message({\n                        message: \"称号更新成功\",\n                        type: \"success\",\n                    });\n                });\n            } else {\n                cancelHonor().then((res) => {\n                    this.$message({\n                        message: \"称号更新成功\",\n                        type: \"success\",\n                    });\n                });\n            }\n        },\n    },\n    mounted: function () {\n        this.loadUserInfo();\n        this.loadHonor();\n    },\n    components: {\n        uc,\n    },\n};\n</script>\n<style lang=\"less\">\n@import \"../assets/css/honor.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./honor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./honor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./honor.vue?vue&type=template&id=28956eae\"\nimport script from \"./honor.vue?vue&type=script&lang=js\"\nexport * from \"./honor.vue?vue&type=script&lang=js\"\nimport style0 from \"./honor.vue?vue&type=style&index=0&id=28956eae&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $cms, $next } from \"@jx3box/jx3box-common/js/https.js\";\nimport axios from \"axios\";\nimport { __imgPath, __dataPath, __cdn } from \"@jx3box/jx3box-common/data/jx3box.json\";\n\nfunction getDecoration(params) {\n    return $cms().get(`/api/cms/user/decoration`, {\n        params,\n    });\n}\n\nfunction setDecoration(data) {\n    return $cms().post(`/api/cms/user/decoration`, data);\n}\n\nfunction getDecorationJson() {\n    let url = __cdn + `design/decoration/index.json?${Date.now()}`;\n    return axios.get(url);\n}\n\nfunction getEmotion() {\n    return axios.get(`${__dataPath}emotion/output/catalog.json?${Date.now()}`);\n}\n\nfunction receive(user_id, val) {\n    return $cms().post(`/api/cms/user/decoration/check-suit/${user_id}/${val}/for/avatar`);\n}\n\nfunction updateAvatarFrame(data) {\n    return $cms().put(\"/api/cms/user/my/avatar-frame\", data);\n}\n\nfunction getHonor() {\n    // return axios.get(`${__imgPath}decoration/honor.json?${Date.now()}`);\n    return $cms().get(\"/api/cms/user/config/honor\");\n}\n\nfunction getUserHonors(uid) {\n    return $next({ mute: true })\n        .get(\"/api/next2/user/\" + uid + \"/honors\")\n        .then((res) => {\n            return res.data.data;\n        });\n}\nfunction setHonor(honor_id) {\n    return $cms().put(`/api/cms/user/honor/use/${honor_id}`);\n}\nfunction cancelHonor() {\n    return $cms().delete(`/api/cms/user/honor/use`);\n}\n\n// 获取用户勋章\nfunction getUserMedals(uid) {\n    return $next({ mute: true }).get(\"/api/next2/user/\" + uid + \"/medals\");\n}\n\n// 获取所有勋章\nfunction getMedals(params) {\n    return $cms().get(\"/api/cms/config/medal\", {params});\n}\nexport {\n    getDecoration,\n    setDecoration,\n    getDecorationJson,\n    getEmotion,\n    receive,\n    updateAvatarFrame,\n    getHonor,\n    getUserHonors,\n    setHonor,\n    cancelHonor,\n    getUserMedals,\n    getMedals,\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./honor.vue?vue&type=style&index=0&id=28956eae&prod&lang=less\""],"sourceRoot":""}