(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aa22453"],{"4ec9":function(t,e,n){"use strict";n("6f48")},"6f3c":function(t,e,n){},"6f48":function(t,e,n){"use strict";var a=n("6d61"),i=n("6566");a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"86ed":function(t,e,n){"use strict";n("6f3c")},"9a9a":function(t,e,n){"use strict";n("a732")},a732:function(t,e,n){"use strict";var a=n("23e7"),i=n("2266"),c=n("59ed"),o=n("825a"),r=n("46c4");a({target:"Iterator",proto:!0,real:!0},{some:function(t){o(this),c(t);var e=r(this),n=0;return i(e,(function(e,a){if(t(e,n++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},a83c:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-theme m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-theme-box"},[e("div",{staticClass:"m-theme-left"},[e("div",{staticClass:"u-top"},[t.previewUrl?e("img",{staticClass:"u-img",attrs:{src:t.previewUrl,fit:"contain"}}):e("div",{staticClass:"u-no-preview"},[t._v(" 暂 无"),e("br"),t._v(" 预 览 ")])]),e("div",{staticClass:"u-bottom"},t._l(t.themeType,(function(n,a){return e("div",{key:a,staticClass:"u-type-box"},[t.isStatus(n)?e("img",{staticClass:"u-img",attrs:{src:t.getActiveImg(n),fit:"contain"},on:{click:function(e){return t.preview(n)}}}):n.statue?e("div",{staticClass:"u-no-select"},[t._v(" 暂 无"),e("br"),t._v(" 设 置 ")]):e("div",{staticClass:"u-no-select"},[t._v(" 敬 请"),e("br"),t._v(" 期 待 ")]),e("div",{staticClass:"u-title"},[t._v(t._s(n.name))])])})),0)]),e("div",{staticClass:"m-theme-right"},[e("div",{staticClass:"u-theme"},t._l(t.decoration,(function(n,a){return e("div",{key:a+n.val,staticClass:"u-decoration-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" "+t._s(n.name))]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=skin&search=".concat(n.name),target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-decoration-item"},t._l(n.list,(function(n,i){return e("div",{key:"c"+i,staticClass:"u-picbox",attrs:{title:n.name}},[e("div",{staticClass:"u-pic",class:n.isHave?n.using?"select":"":"noHave",on:{click:function(e){return t.setStatus(a,i,n)}}},[e("el-image",{attrs:{src:t._f("showDecoration")(n),fit:"contain"}})],1),e("div",{staticClass:"u-decoration-name"},[t._v(t._s(n.text))])])})),0)])})),0)])]),e("div",{staticClass:"u-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.decorationSubmit}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],c=n("ade3"),o=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("4e82"),n("e9c4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("0643"),n("2382"),n("fffc"),n("4e3e"),n("a573"),n("9a9a"),n("159b"),n("ddb0"),n("b547")),r=n("aa38"),s=n("c9d2"),u=n("65c2"),d=n("2ef0"),l=n("46c1"),f=function(t){return function(e,n){return e[t]-n[t]}},v=function(t,e,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=new Map,o=[],r=Object(d["cloneDeep"])(a),s=t.filter((function(t){return!c.has(t[e])&&c.set(t[e],1)}));return r.forEach((function(t,e){if(t.val=n,-1===i.indexOf(n)){var a=s.find((function(e){return e.type==t.type}));a&&(t.isHave=1,t.using=a.using)}o.push(t)})),o},p={name:"theme",props:[],data:function(){return{tabList:l["e"],uid:s["a"].getInfo().uid,themeType:[{name:"个人名片",type:"atcard",statue:1},{name:"主页风格",type:"homebg",statue:1},{name:"侧栏主题",type:"sidebar",statue:1},{name:"首页日历",type:"calendar",statue:1},{name:"评论皮肤",type:"comment",statue:1}],previewUrl:"",decoration:[],decorationJson:[],originalActivateName:null,back:{}}},computed:{},methods:{reset:function(){var t=Object(d["cloneDeep"])(this.back);this.previewUrl="",this.decoration=t.decoration,this.originalActivateName=t.originalActivateName},loadDecoration:function(){var t=this;Object(r["c"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(r["b"])().then((function(e){var n=["atcard","homebg","sidebar","calendar","comment"],a=e.data.data.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));t.decoration=t.formattingData(a,"val"),t.decoration=t.sortData(t.decoration,t.decorationJson),t.back.decoration=Object(d["cloneDeep"])(t.decoration),t.back.originalActivateName=Object(d["cloneDeep"])(t.originalActivateName)}))}))},formattingData:function(t,e){var n=this,a={},i=[],o=[],r=[{type:"atcard",text:"个人名片",sort:1,isHave:0,using:0},{type:"homebg",text:"主页风格",sort:2,isHave:0,using:0},{type:"sidebar",text:"侧栏主题",sort:3,isHave:0,using:0},{type:"calendar",text:"首页日历",sort:4,isHave:0,using:0},{type:"comment",text:"评论皮肤",sort:5,isHave:0,using:0}];t.forEach((function(t,i){var c=r.find((function(e){return e.type==t.type}));c&&(t.sort=c.sort,a[t[e]]?a[t[e]].push(t):a[t[e]]=[t],t.using&&(n.originalActivateName=t[e]))}));var s=Object(d["cloneDeep"])(this.decorationJson);return Object.keys(s).forEach((function(t,e){if(!a[t]&&1==s[t].status){o.push(t);var n=Object(d["cloneDeep"])(r),i=[];n.forEach((function(e){e.val=t,i.push(e)})),a[t]=i}})),Object.keys(a).forEach((function(t,n){var u;i.push(Object(c["a"])(Object(c["a"])(Object(c["a"])({},e,t),"name",null===(u=s[t])||void 0===u?void 0:u.desc),"list",v(a[t],"type",t,r,o).sort(f("sort"))))})),i},sortData:function(t){var e=t.filter((function(t){return t.list.some((function(t){return t.isHave}))})),n=t.filter((function(t){return!t.list.some((function(t){return t.isHave}))}));return e.reverse().concat(n.reverse())},setStatus:function(t,e,n){var a=this;if(n.isHave){var i=n.type,c=n.val;this.decoration.forEach((function(t,e){var n=t.list;n.forEach((function(t,n){t.val!=c&&t.type==i&&1==t.using&&(a.decoration[e].list[n].using=0)}))})),1==n.using?n.using=0:n.using=1}},isStatus:function(t){var e=t.type,n=!1,a=Object(d["flatten"])(this.decoration.map((function(t){return t.list})));return a.forEach((function(t){t.type==e&&1==t.using&&(n=!0)})),!!n},preview:function(t){this.previewUrl=this.getActiveImg(t)},getActiveImg:function(t){var e=t.type,n=void 0,a=Object(d["flatten"])(this.decoration.map((function(t){return t.list})));a.forEach((function(t){t.type==e&&1==t.using&&(n=t.val)}));var i="https://cdn.jx3box.com/static/dashboard/img/no.5fe91973.svg";return n?u["__cdn"]+"design/decoration/images/".concat(n,"/").concat(e,"_preview.png"):i},decorationSubmit:function(){var t=this,e=[],n="",a=Object(d["flatten"])(this.decoration.map((function(t){return t.list}))),i=a.map((function(t){return 1==t.using&&e.push(t.type),{val:t.val,using:t.using,type:t.type}}));Object(r["j"])(i).then((function(a){var i={name:n,type:e};n||(i.name=!1),localStorage.setItem("decoration_all",JSON.stringify(i)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))}},mounted:function(){this.loadDecoration()},filters:{showDecoration:function(t){return u["__cdn"]+"design/decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")}},components:{uc:o["a"]}},m=p,g=(n("86ed"),n("2877")),b=Object(g["a"])(m,a,i,!1,null,null,null);e["default"]=b.exports},aa38:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"j",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"e",(function(){return v})),n.d(e,"g",(function(){return p})),n.d(e,"k",(function(){return m})),n.d(e,"a",(function(){return g})),n.d(e,"h",(function(){return b})),n.d(e,"f",(function(){return h}));n("99af");var a=n("41cb"),i=n("bc3a"),c=n.n(i),o=n("65c2");function r(t){return Object(a["a"])().get("/api/cms/user/decoration",{params:t})}function s(t){return Object(a["a"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__cdn"]+"design/decoration/index.json?".concat(Date.now());return c.a.get(t)}function d(){return c.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function l(t,e){return Object(a["a"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function f(t){return Object(a["a"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return Object(a["a"])().get("/api/cms/user/config/honor")}function p(t){return Object(a["b"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function m(t){return Object(a["a"])().put("/api/cms/user/honor/use/".concat(t))}function g(){return Object(a["a"])().delete("/api/cms/user/honor/use")}function b(t){return Object(a["b"])({mute:!0}).get("/api/next2/user/"+t+"/medals")}function h(t){return Object(a["a"])().get("/api/cms/config/medal",{params:t})}}}]);
//# sourceMappingURL=chunk-2aa22453.aa5fe942.js.map