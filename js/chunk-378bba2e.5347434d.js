(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-378bba2e"],{"61cb":function(t,n,a){"use strict";a.d(n,"c",(function(){return i})),a.d(n,"d",(function(){return e})),a.d(n,"g",(function(){return s})),a.d(n,"f",(function(){return o})),a.d(n,"b",(function(){return r})),a.d(n,"e",(function(){return u})),a.d(n,"h",(function(){return d})),a.d(n,"a",(function(){return f}));var c=a("41cb");function i(t){return Object(c["b"])().get("/api/cms/post/".concat(t))}function e(t){return Object(c["b"])().get("/api/cms/user/".concat(t,"/info"))}function o(t){return Object(c["b"])().get("/api/cms/post/".concat(t,"/author/my"))}function s(t){return Object(c["b"])().delete("/api/cms/post/".concat(t,"/authors/quit"))}function r(t){return Object(c["b"])().put("/api/cms/post/".concat(t,"/author/my"))}function u(t){return Object(c["b"])().get("/api/cms/user/kith/".concat(t,"/invitation"))}function d(t){return Object(c["b"])().delete("/api/cms/user/kith/".concat(t,"/invitation"))}function f(t){return Object(c["b"])().put("/api/cms/user/kith/".concat(t,"/invitation"))}},8435:function(t,n,a){"use strict";a.r(n);var c=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-callback m-invitation-creators"},[t._m(0),n("p",{staticClass:"u-desc"},[t._v("你收到了一条联合创作邀请。")]),n("div",{staticClass:"u-post"},[n("div",{staticClass:"u-post-avatar"},[n("img",{attrs:{src:t._f("showAvatar")(t.userdata.user_avatar)}})]),n("div",{staticClass:"u-post-info"},[n("a",{staticClass:"u-post-title",attrs:{href:t._f("postLink")(t.data),target:"_blank"}},[t._v(t._s(t.data.post_title))]),n("a",{staticClass:"u-post-desc",attrs:{href:t._f("authorLink")(t.uid),target:"_blank"}},[t._v(" @ "),n("b",[t._v(t._s(t.userdata.display_name))]),n("time",{staticClass:"u-post-time"},[t._v(t._s(t._f("dateFormat")(t.info.updated)))])])])]),n("div",{staticClass:"u-btns"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:t.isNotExist||t.alreadyAccept},on:{click:t.accept}},[t._v(t._s(t.alreadyAccept?"已接受":"接受"))]),n("el-button",{attrs:{type:"info",icon:"el-icon-close",disabled:t.isNotExist},on:{click:t.confirmQuit}},[t._v(t._s(t.alreadyAccept?"退出联合创作":"拒绝"))])],1)])},i=[function(){var t=this,n=t._self._c;return n("h1",{staticClass:"u-title"},[n("i",{staticClass:"el-icon-message"}),t._v(" 邀请 ")])}],e=a("e762"),o=a("61cb"),s=a("85e4"),r=a("fb92"),u={name:"CallbackCreators",props:[],components:{},data:function(){return{data:"",userdata:"",record:null}},computed:{info:function(){return JSON.parse(e["a"].decode(decodeURIComponent(this.$route.query.info)))},id:function(){return~~this.info.source_id},uid:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.post_author},isNotExist:function(){return!this.record},alreadyAccept:function(){return!(!this.record||!this.record.status)},post_link:function(){var t,n;return Object(s["getLink"])(null===(t=this.data)||void 0===t?void 0:t.post_type,null===(n=this.data)||void 0===n?void 0:n.ID)}},watch:{id:{immediate:!0,handler:function(t){t&&(this.loadData(),this.check())}}},methods:{loadData:function(){var t=this;Object(o["c"])(this.id).then((function(n){var a;t.data=null===(a=n.data)||void 0===a?void 0:a.data})).then((function(){Object(o["d"])(t.uid).then((function(n){var a;t.userdata=null===(a=n.data)||void 0===a?void 0:a.data}))}))},confirmQuit:function(){var t=this;this.$confirm("确定退出联合创作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.quit()})).catch((function(){}))},quit:function(){var t=this;Object(o["g"])(this.id).then((function(){t.$message({message:"操作成功",type:"success"})})),this.$router.push("/msg")},check:function(){var t=this;Object(o["f"])(this.id).then((function(n){var a;t.record=null===(a=n.data)||void 0===a?void 0:a.data}))},accept:function(){var t=this;Object(o["b"])(this.id).then((function(n){t.$message({message:"操作成功",type:"success"}),location.href=t.post_link}))}},filters:{postLink:function(t){return Object(s["getLink"])(t.post_type,t.ID)},authorLink:s["authorLink"],showAvatar:s["showAvatar"],dateFormat:function(t){return Object(r["a"])(new Date(1e3*~~t))}},created:function(){},mounted:function(){}},d=u,f=(a("88d5"),a("2877")),l=Object(f["a"])(d,c,i,!1,null,"62f4a8c0",null);n["default"]=l.exports},"88d5":function(t,n,a){"use strict";a("8eda")},"8eda":function(t,n,a){},fb92:function(t,n,a){"use strict";a("99af");function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=t.getFullYear(),e=t.getMonth()+1,o=t.getDate(),s=a?"".concat(c).concat(n).concat(i(e)).concat(n).concat(i(o)):"".concat(c).concat(n).concat(e).concat(n).concat(o);return s}function i(t){return t<10?"0"+t:t}n["a"]=c}}]);
//# sourceMappingURL=chunk-378bba2e.5347434d.js.map