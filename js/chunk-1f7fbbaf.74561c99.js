(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f7fbbaf"],{"04d1":function(t,e,n){var a=n("342f"),r=a.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},1645:function(t){t.exports=JSON.parse('{"default":{"name":"default","style":"square","files":{"xs":{"w":48,"width":60,"file":"default-xs.gif"},"s":{"w":68,"width":84,"file":"default-s.gif"},"m":{"w":108,"width":136,"file":"default-m.png"},"l":{"w":180,"width":224,"file":"default-l.png"},"xl":{"w":240,"width":300,"file":"default-xl.png"}}},"flower_1":{"name":"flower_1","style":"circle","files":{"xs":{"w":48,"width":60,"file":"flower_1-xs.png"},"s":{"w":68,"width":84,"file":"flower_1-s.png"},"m":{"w":108,"width":136,"file":"flower_1-m.png"},"l":{"w":180,"width":224,"file":"flower_1-l.png"},"xl":{"w":240,"width":300,"file":"flower_1-xl.png"}}}}')},4208:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("uc",{staticClass:"m-dashboard-avatar"},[n("div",{staticClass:"m-profile-avatar"},[n("div",{staticClass:"m-profile-avatar-primary"},[n("el-upload",{staticClass:"u-upload",attrs:{drag:"",accept:"image/png, image/gif, image/jpeg","on-change":t.upload,action:"upload/avatar","auto-upload":!1}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击上传，只能上传jpg/png/gif文件",placement:"top-start"}},[n("div",{staticClass:"u-avatar"},[n("img",{staticClass:"u-avatar u-avatar-l",attrs:{src:t._f("showAvatar")(t.avatar)}})])])],1),n("p",{staticClass:"u-btng"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1),n("div",{staticClass:"m-profile-avatar-frame"},[n("el-tabs",{attrs:{type:"card"},model:{value:t.tabActivate,callback:function(e){t.tabActivate=e},expression:"tabActivate"}},[n("el-tab-pane",{staticClass:"m-profile-tab",attrs:{label:"头像框",name:"0"}},[n("h3",{staticClass:"u-title"},[t._v(" 自定义头像框 "),n("span",{staticClass:"u-limit",class:{on:t.isVIP}},[t._v(" ( "),n("i",{class:t.isVIP?"el-icon-unlock":"el-icon-lock"}),t._v("仅"),n("a",{attrs:{href:"/vip/premium?from=dashboard_avatar",target:"_blank"}},[t._v("高级/专业版")]),t._v("账户适用 ) ")])]),t.frames?n("div",{staticClass:"u-list"},[n("li",{staticClass:"u-item",class:{on:!t.frame},on:{click:function(e){return t.selectFrame("")}}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"无边框",placement:"top","open-delay":200}},[n("div",[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.frame,expression:"!frame"}],staticClass:"u-pic",attrs:{src:t._f("showSmallAvatar")(t.avatar)}}),n("i",{staticClass:"u-frame u-frame-none"})])])],1),t._l(t.frames,(function(e,a){return n("li",{key:a,staticClass:"u-item",class:{on:a==t.frame},on:{click:function(n){return t.selectFrame(e)}}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.desc,placement:"top","open-delay":300}},[n("div",{class:{"u-blocked":!e.status}},[n("img",{directives:[{name:"show",rawName:"v-show",value:a==t.frame,expression:"name == frame"}],staticClass:"u-pic isCircle",attrs:{src:t._f("showSmallAvatar")(t.avatar)}}),n("i",{staticClass:"u-frame"},[n("img",{attrs:{src:t.showFrame(e.name)}})])])])],1)}))],2):t._e(),n("div",{staticClass:"u-tip"},[n("i",{staticClass:"el-icon-warning-outline"}),t._v(" 「限定头像框」仅在指定时间段可选择激活。 ")])])],1)],1)])])},r=[],i=n("ade3"),o=(n("d81d"),n("b0c0"),n("e9c4"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("159b"),n("b64b"),n("4e82"),n("7db0"),n("99af"),n("b547")),s=n("46e8"),c=n("aa38"),u=n("c9d2"),f=n("85e4"),l=n("1645"),d=n("65c2"),v=n("2ef0"),h={name:"avatar",props:[],data:function(){return{bak:"",avatar:"",frame:"",isVIP:!1,uid:u["a"].getInfo().uid,frames:l,tabActivate:"0",decorationJson:{},decoration:[],decorationActivate:null,originalActivateName:null,selectAll:[],noDecoration:!1}},computed:{data:function(){return{user_avatar:this.avatar,user_avatar_frame:this.frame}}},methods:{upload:function(t,e){var n=this,a=new FormData,r=t.raw;a.append("avatar",r),Object(s["m"])(a).then((function(t){n.$message({message:"上传成功",type:"success"}),n.avatar=t.data.data[0]}))},reset:function(){this.avatar=this.bak},submit:function(){var t=this;this.isVIP||(this.frame&&this.$notify({title:"头像框未生效",message:"头像框仅高级/专业账号可用",type:"warning"}),this.frame=""),Object(s["j"])(this.data).then((function(e){u["a"].refresh("avatar",t.avatar),t.$message({message:"头像更新成功",type:"success"})}))},decorationSubmit:function(){var t=this,e=this.decorationActivate,n=e?this.decoration[e].val:"",a=Object(v["flatten"])(this.decoration.map((function(t){return t.list}))),r=this.getActivate(),i=a.map((function(t){return{val:t.val,using:t.using,type:t.type}}));Object(c["d"])(i).then((function(e){var a={name:n,type:r};n||(a.name=!1),localStorage.setItem("decoration_all",JSON.stringify(a)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))},formattingData:function(t,e){for(var n=this,a={"无主题":[]},r=[],o=this,s=[{name:"atcard",text:"个人名片",sort:2},{name:"homebg",text:"主页风格",sort:3},{name:"sidebar",text:"侧边栏主题",sort:4},{name:"calendar",text:"首页日历",sort:5}],c=function(r){var i=t[r],o=s.find((function(t){return t.name==i.type}));o&&(i.sort=o.sort,a[i[e]]?a[i[e]].push(i):a[i[e]]=[i],i.using&&(n.originalActivateName=i[e]))},u=0;u<t.length;u++)c(u);var f=function(t){return function(e,n){return e[t]-n[t]}},l=function(t,e){var n=new Map;return t.filter((function(t){return!n.has(t[e])&&n.set(t[e],1)}))};return Object.keys(a).forEach((function(t,n){var s;0!==n&&t==o.originalActivateName&&(o.decorationActivate=n),r.push((s={},Object(i["a"])(s,e,t),Object(i["a"])(s,"list",l(a[t],"type").sort(f("sort"))),s))})),r},loadFrames:function(){var t=this;Object(s["d"])().then((function(e){t.frames=e.data})),Object(c["b"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(c["a"])().then((function(e){var n=e.data.data.filter((function(t){return""!=t.type}));t.decoration=t.formattingData(n,"val"),t.selectAllInit()}))}))},showFrame:function(t){return d["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},selectFrame:function(t){t?t.status&&(this.frame=t.name):this.frame=""},init:function(){var t=this;this.loadFrames(),u["a"].isVIP().then((function(e){t.isVIP=e})),this.avatar=this.bak=u["a"].getInfo().avatar_origin,Object(s["f"])(this.uid).then((function(e){t.frame=e.data.data.user_avatar_frame||""}))},decorationStatus:function(t,e,n){if("homebanner"!=t.type)if(1==t.using?t.using=0:t.using=1,n!=this.decorationActivate){for(var a=this.decoration[this.decorationActivate]?this.decoration[this.decorationActivate].list:[],r=0;r<a.length;r++)a[r].using=0;this.selectAll[this.decorationActivate]=!1,this.decorationActivate=n}else{for(var i=this.decoration[n].list,o=!1,s=!0,c=0;c<i.length;c++)i[c].using&&"homebanner"!=i[c].type?o=!0:s=!1;this.decorationActivate=o?n:null,this.selectAll[n]=s}},getActivate:function(){for(var t=this.decorationActivate,e=[],n=t?this.decoration[t].list:[],a=0;a<n.length;a++)n[a].using&&e.push(n[a].type);return e},selectAllInit:function(){var t=this.decorationActivate;if(null!=t){for(var e=!0,n=this.decoration[t].list,a=0;a<n.length;a++)n[a].using||(e=!1);this.selectAll[t]=e}else this.selectAll[0]=!0},selectAllChange:function(t,e){this.decorationActivate=t?e:null;for(var n=[],a=0;a<this.selectAll.length;a++)a!=e?n.push(!1):n.push(t);for(var r=this.decoration,i=0;i<r.length;i++)for(var o=r[i].list,s=0;s<o.length;s++)o[s].using=i===e&&t?1:0;this.$set(this,"decoration",r),this.selectAll=n}},filters:{showAvatar:function(t){return Object(f["showAvatar"])(t,480,!1)},showSmallAvatar:function(t){return Object(f["showAvatar"])(t,136,!1)},showDecoration:function(t){return d["__imgPath"]+"decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")},showDecorationName:function(t){var e=[{name:"homebanner",text:"资料卡(默认)"},{name:"atcard",text:"个人名片"},{name:"homebg",text:"主页风格"},{name:"sidebar",text:"侧边栏主题"},{name:"calendar",text:"首页日历"}],n=e.find((function(e){return e.name==t}));return n?n.text:"无"}},created:function(){this.init()},components:{uc:o["a"]}},m=h,p=(n("bfad"),n("2877")),b=Object(p["a"])(m,a,r,!1,null,null,null);e["default"]=b.exports},"46e8":function(t,e,n){"use strict";n.d(e,"l",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"g",(function(){return b})),n.d(e,"i",(function(){return x})),n.d(e,"c",(function(){return w})),n.d(e,"m",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return v}));var a=n("41cb"),r=n("bc3a"),i=n.n(r),o=n("65c2"),s=Object(a["a"])("server",{proxy:!1});function c(){return Object(a["b"])().get("/api/cms/user/my/profile")}function u(t){return Object(a["b"])().put("/api/cms/user/my/profile",t)}function f(t){return Object(a["b"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(a["b"])().post("/api/cms/upload/avatar",t)}function d(){var t=o["__imgPath"]+"avatar/index.json";return i.a.get(t)}function v(t){return Object(a["b"])().get("/api/cms/user/".concat(t,"/info"))}function h(t){return s.post("profile/password",t)}function m(){return s.get("profile/email/check")}function p(t){return s.get("profile/email/available",{params:{user_email:t}})}function b(t){return s.post("profile/email/bind",t)}function g(){return s.post("profile/email/verify")}function w(){return Object(a["b"])().get("/api/cms/account/oauth/status")}function x(t){return Object(a["b"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}},"4e82":function(t,e,n){"use strict";var a=n("23e7"),r=n("e330"),i=n("59ed"),o=n("7b0b"),s=n("07fa"),c=n("083a"),u=n("577e"),f=n("d039"),l=n("addb"),d=n("a640"),v=n("04d1"),h=n("d998"),m=n("2d00"),p=n("512ce"),b=[],g=r(b.sort),w=r(b.push),x=f((function(){b.sort(void 0)})),y=f((function(){b.sort(null)})),_=d("sort"),A=!f((function(){if(m)return m<70;if(!(v&&v>3)){if(h)return!0;if(p)return p<603;var t,e,n,a,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)b.push({k:e+a,v:n})}for(b.sort((function(t,e){return e.v-t.v})),a=0;a<b.length;a++)e=b[a].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),j=x||!y||!_||!A,k=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}};a({target:"Array",proto:!0,forced:j},{sort:function(t){void 0!==t&&i(t);var e=o(this);if(A)return void 0===t?g(e):g(e,t);var n,a,r=[],u=s(e);for(a=0;a<u;a++)a in e&&w(r,e[a]);l(r,k(t)),n=r.length,a=0;while(a<n)e[a]=r[a++];while(a<u)c(e,a++);return e}})},"4ec9":function(t,e,n){n("6f48")},"4fad":function(t,e,n){var a=n("d039"),r=n("861d"),i=n("c6b6"),o=n("d86b"),s=Object.isExtensible,c=a((function(){s(1)}));t.exports=c||o?function(t){return!!r(t)&&((!o||"ArrayBuffer"!=i(t))&&(!s||s(t)))}:s},"512ce":function(t,e,n){var a=n("342f"),r=a.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},6566:function(t,e,n){"use strict";var a=n("9bf2").f,r=n("7c73"),i=n("6964"),o=n("0366"),s=n("19aa"),c=n("2266"),u=n("7dd0"),f=n("2626"),l=n("83ab"),d=n("f183").fastKey,v=n("69f3"),h=v.set,m=v.getterFor;t.exports={getConstructor:function(t,e,n,u){var f=t((function(t,a){s(t,v),h(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=a&&c(a,t[u],{that:t,AS_ENTRIES:n})})),v=f.prototype,p=m(e),b=function(t,e,n){var a,r,i=p(t),o=g(t,e);return o?o.value=n:(i.last=o={index:r=d(e,!0),key:e,value:n,previous:a=i.last,next:void 0,removed:!1},i.first||(i.first=o),a&&(a.next=o),l?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t},g=function(t,e){var n,a=p(t),r=d(e);if("F"!==r)return a.index[r];for(n=a.first;n;n=n.next)if(n.key==e)return n};return i(v,{clear:function(){var t=this,e=p(t),n=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),a=g(e,t);if(a){var r=a.next,i=a.previous;delete n.index[a.index],a.removed=!0,i&&(i.next=r),r&&(r.previous=i),n.first==a&&(n.first=r),n.last==a&&(n.last=i),l?n.size--:e.size--}return!!a},forEach:function(t){var e,n=p(this),a=o(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:n.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),i(v,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),l&&a(v,"size",{get:function(){return p(this).size}}),f},setStrong:function(t,e,n){var a=e+" Iterator",r=m(e),i=m(a);u(t,e,(function(t,e){h(this,{type:a,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),f(e)}}},"6d61":function(t,e,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("e330"),o=n("94ca"),s=n("cb2d"),c=n("f183"),u=n("2266"),f=n("19aa"),l=n("1626"),d=n("861d"),v=n("d039"),h=n("1c7e"),m=n("d44e"),p=n("7156");t.exports=function(t,e,n){var b=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),w=b?"set":"add",x=r[t],y=x&&x.prototype,_=x,A={},j=function(t){var e=i(y[t]);s(y,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})},k=o(t,!l(x)||!(g||y.forEach&&!v((function(){(new x).entries().next()}))));if(k)_=n.getConstructor(e,t,b,w),c.enable();else if(o(t,!0)){var O=new _,C=O[w](g?{}:-0,1)!=O,I=v((function(){O.has(1)})),S=h((function(t){new x(t)})),E=!g&&v((function(){var t=new x,e=5;while(e--)t[w](e,e);return!t.has(-0)}));S||(_=e((function(t,e){f(t,y);var n=p(new x,t,_);return void 0!=e&&u(e,n[w],{that:n,AS_ENTRIES:b}),n})),_.prototype=y,y.constructor=_),(I||E)&&(j("delete"),j("has"),b&&j("get")),(E||C)&&j(w),g&&y.clear&&delete y.clear}return A[t]=_,a({global:!0,constructor:!0,forced:_!=x},A),m(_,t),g||n.setStrong(_,t,b),_}},"6f48":function(t,e,n){"use strict";var a=n("6d61"),r=n("6566");a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},aa38:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return f}));var a=n("41cb"),r=n("bc3a"),i=n.n(r),o=n("65c2");function s(t){return Object(a["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(a["b"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json";return i.a.get(t)}function f(){return i.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json"))}},ade3:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}))},b64b:function(t,e,n){var a=n("23e7"),r=n("7b0b"),i=n("df75"),o=n("d039"),s=o((function(){i(1)}));a({target:"Object",stat:!0,forced:s},{keys:function(t){return i(r(t))}})},bb2f:function(t,e,n){var a=n("d039");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bfad:function(t,e,n){"use strict";n("d38b")},d38b:function(t,e,n){},d86b:function(t,e,n){var a=n("d039");t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},d998:function(t,e,n){var a=n("342f");t.exports=/MSIE|Trident/.test(a)},f183:function(t,e,n){var a=n("23e7"),r=n("e330"),i=n("d012"),o=n("861d"),s=n("1a2d"),c=n("9bf2").f,u=n("241c"),f=n("057f"),l=n("4fad"),d=n("90e3"),v=n("bb2f"),h=!1,m=d("meta"),p=0,b=function(t){c(t,m,{value:{objectID:"O"+p++,weakData:{}}})},g=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,m)){if(!l(t))return"F";if(!e)return"E";b(t)}return t[m].objectID},w=function(t,e){if(!s(t,m)){if(!l(t))return!0;if(!e)return!1;b(t)}return t[m].weakData},x=function(t){return v&&h&&l(t)&&!s(t,m)&&b(t),t},y=function(){_.enable=function(){},h=!0;var t=u.f,e=r([].splice),n={};n[m]=1,t(n).length&&(u.f=function(n){for(var a=t(n),r=0,i=a.length;r<i;r++)if(a[r]===m){e(a,r,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},_=t.exports={enable:y,fastKey:g,getWeakData:w,onFreeze:x};i[m]=!0}}]);
//# sourceMappingURL=chunk-1f7fbbaf.74561c99.js.map