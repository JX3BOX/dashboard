(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77185e1e"],{"090ee":function(t,s,i){},"6c30":function(t,s,i){"use strict";i("090ee")},"826f":function(t,s,i){"use strict";i.r(s);var n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"m-dashboard m-dashboard-work m-dashboard-whitelist"},[i("div",{staticClass:"m-dashboard-whitelist-cont"},[t._m(0),i("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],attrs:{title:t.onSuccess,type:"success",center:"","show-icon":""}}),i("div",{staticClass:"u-box"},t._l(t.list,(function(s,n){return i("div",{key:n,staticClass:"u-item"},[i("div",{staticClass:"u-item-box"},[i("img",{attrs:{src:s.info.user_avatar||t.avatar}}),i("div",{staticClass:"u-item-txt"},[i("div",{staticClass:"u-item-name"},[i("span",[t._v(t._s(s.info.display_name))]),i("span",[t._v("备注："+t._s(s.remark||"无"))])]),i("div",{staticClass:"u-item-btn"},[i("el-button",{attrs:{type:"warning"},on:{click:function(i){return t.delWhitelistBtn(s.kith_id)}}},[t._v("删除")]),i("el-button",{on:{click:function(i){return t.editWhitelistBtn(s.kith_id)}}},[t._v("编辑")])],1)])])])})),0)],1),i("div",{staticClass:"m-dashboard-whitelist-add"},[t._m(1),i("el-input",{staticClass:"u-input",attrs:{placeholder:"输入UID添加","suffix-icon":"el-icon-search"},on:{input:t.searchUid},model:{value:t.uid,callback:function(s){t.uid=s},expression:"uid"}}),t.hasUser?i("div",{staticClass:"u-box u-user"},[i("img",{attrs:{src:t.userInfo.user_avatar||t.avatar,alt:"userInfo.display_name"}}),i("div",{staticClass:"u-txt"},[i("span",[t._v("UID："+t._s(t.userInfo.ID))]),i("span",[t._v(t._s(t.userInfo.display_name))])])]):i("div",{staticClass:"u-box"},[i("el-alert",{attrs:{title:"请输入UID",type:"info","show-icon":"",closable:!1}})],1),i("el-button",{attrs:{type:"success",disabled:!t.allowAppend},on:{click:t.addWhitelistBtn}},[t._v("添加亲友 ("+t._s(this.list.length)+" / "+t._s(t.hasNum)+")")])],1)])},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("h2",{staticClass:"u-title"},[i("i",{staticClass:"el-icon-s-management"}),t._v(" 我的亲友")])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"u-title"},[i("i",{staticClass:"el-icon-news"}),t._v(" 添加亲友")])}],a=i("41cb");function c(){return Object(a["b"])({proxy:!0}).get("/api/cms/user/kith/my")}function u(t){return Object(a["b"])({proxy:!0}).get("api/cms/user/".concat(t,"/info"))}function o(t){return Object(a["b"])({proxy:!0}).delete("/api/cms/user/kith/".concat(t))}function r(t){return Object(a["b"])({proxy:!0}).post("/api/cms/user/kith/".concat(t))}function l(t,s){return Object(a["b"])({proxy:!0}).put("/api/cms/user/kith/".concat(t),s)}var h=i("c9d2"),d={name:"whitelist",props:[],data:function(){return{uid:"",list:{},userInfo:"",onSuccess:"",avatar:"https://console.cnyixun.com/image/common/avatar.png?x-oss-process=style/avatar_s",isvip:!1,ispro:!1}},computed:{isVerify:function(){return""!=this.uid&&null!=this.userInfo},hasUser:function(){return this.userInfo},success:function(){return""!==this.onSuccess},allowAppend:function(){var t=this.list.length;return t<5||(t<20?this.isvip:this.ispro)},hasNum:function(){return this.isvip?20:this.ispro?100:0}},methods:{searchUid:function(){var t=this;this.uid&&u(this.uid).then((function(s){t.userInfo=s.data.data}))},addWhitelistBtn:function(){var t=this;r(this.uid).then((function(s){t.successTxt("亲友添加成功"),t.getList()}))},delWhitelistBtn:function(t){var s=this;o(t).then((function(){s.successTxt("删除亲友成功"),s.getList()}))},editWhitelistBtn:function(t){var s=this;this.$prompt("请输入备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(i){l(t,{remark:i.value}).then((function(){s.successTxt("备注添加成功"),s.getList()}))})).catch((function(){}))},successTxt:function(t){var s=this;this.onSuccess=t,this.uid="",this.userInfo="",setTimeout((function(){s.onSuccess=""}),2e3)},getList:function(){var t=this;c().then((function(s){t.list=s.data.data}))}},mounted:function(){var t=this;this.getList(),h["a"].getAsset().then((function(){h["a"].isVIP().then((function(s){t.isvip=s})),h["a"].isPRO().then((function(s){t.ispro=s}))}))},components:{}},f=d,p=(i("6c30"),i("2877")),v=Object(p["a"])(f,n,e,!1,null,"56502a1e",null);s["default"]=v.exports}}]);
//# sourceMappingURL=chunk-77185e1e.9b54beb1.js.map