(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7ea689a"],{1101:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"k",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return b}));n("99af");var a=n("41cb");function r(e){return Object(a["e"])().get("/mall/ship-address",e)}function o(e){return Object(a["e"])().post("/mall/ship-address",e)}function i(e,t){return Object(a["e"])().put("/mall/ship-address/".concat(e),t)}function c(e){return Object(a["e"])().delete("/mall/ship-address/".concat(e))}function s(e){return Object(a["e"])().put("/mall/ship-address/default/".concat(e))}function l(e){return Object(a["e"])().get("/mall/my/orders",{params:e})}function u(e,t){return Object(a["e"])().put("/mall/my/orders/".concat(e,"/bind-address/").concat(t))}function d(e,t){return Object(a["e"])().put("/mall/my/orders/".concat(e,"/remark"),{remark:t})}function p(e){return Object(a["e"])().get("/mall/my/orders/".concat(e))}function m(e){return Object(a["e"])().put("/mall/my/orders/".concat(e,"/cancel"))}function f(e){return Object(a["e"])().post("/mall/my/orders/".concat(e,"/pay"))}function b(e){return Object(a["e"])().post("/mall/my/orders/".concat(e,"/received"))}function h(e){return Object(a["e"])().get("/mall/my/virtual_goods",{params:e})}},"3ed1":function(e,t,n){},"46c1":function(e){e.exports=JSON.parse('{"c":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"}],"b":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"email","icon":"el-icon-message","label":"邮箱设置"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"}],"a":[{"name":"mall","icon":"el-icon-present","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-1","label":"系统订单"}]}')},"7cf3":function(e,t,n){},b547:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-dashboard-profile m-profile"},[n("h2",{staticClass:"u-title"},[n("i",{class:e.icon}),e._v(" "+e._s(e.title)+" "),e._t("header")],2),n("tabs",{attrs:{tabs:e.tabList}}),e._t("default")],2)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":e.changeTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(t){return n("el-tab-pane",{key:t.name,attrs:{name:t.name}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{class:t.icon}),e._v(" "+e._s(t.label))])])})),1)},i=[],c=(n("b0c0"),{name:"",props:{tabs:{type:Array,default:function(){return[]}}},data:function(){return{active:""}},watch:{$route:function(){this.active=this.$route.name}},computed:{},methods:{changeTab:function(){this.$router.push({name:this.active})}},mounted:function(){this.active=this.$route.name},components:{}}),s=c,l=n("2877"),u=Object(l["a"])(s,o,i,!1,null,null,null),d=u.exports,p=n("46c1"),m={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return p["b"]}}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:d}},f=m,b=(n("bdd0"),Object(l["a"])(f,a,r,!1,null,null,null));t["a"]=b.exports},b8fd:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uc",{attrs:{icon:"el-icon-present",title:"我的订单",tabList:e.tabList}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-page-record p-mall-orders"},[n("div",{staticClass:"m-content"},[n("el-table",{attrs:{data:e.list,size:"small"}},[n("el-table-column",{attrs:{prop:"order.created_at",label:"兑换时间",width:"180"}}),n("el-table-column",{attrs:{label:"兑换商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"m-line"},[e._v(" "+e._s(t.row.goods.title)+" ")])]}}])}),n("el-table-column",{attrs:{label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"m-line"},[e._v(" "+e._s(t.row.order.order_no)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"order.goods_num",label:"数量",width:"80"}}),n("el-table-column",{attrs:{label:"订单状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.orderStatus[t.row.order.order_status])+" ")]}}])}),n("el-table-column",{attrs:{label:"付款状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.payStatus[t.row.order.pay_status])+" ")]}}])}),n("el-table-column",{attrs:{label:"操作","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"m-button"},[n("el-button",{attrs:{size:"small",icon:"el-icon-link"},on:{click:function(n){return e.showDetail(t.row)}}},[e._v("查看详情")]),e.showPay(t.row.order)?n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-position"},on:{click:function(n){return e.toPay(t.row)}}},[e._v("点击支付")]):e._e(),3==t.row.order.order_status?[t.row.goods.is_virtual?e._e():n("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-check"},on:{click:function(n){return e.isReceipt(t.row.order.id)}}},[e._v("确认收货")])]:e._e(),n("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info",title:"确定取消吗？"},on:{confirm:function(n){return e.cancel(t.row.order.id)}}},[0==t.row.order.order_status?n("el-button",{attrs:{slot:"reference",size:"small",type:"info",plain:"",icon:"el-icon-circle-close"},slot:"reference"},[e._v("取消订单")]):e._e()],1)],2)]}}])})],1)],1),n("div",{staticClass:"m-record-pages"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper","page-size":e.pageSize,total:e.total,"current-page":e.pageIndex,"hide-on-single-page":!0},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)])])},r=[],o=(n("d81d"),n("b547")),i=n("1101"),c=n("f03c"),s=n("46c1"),l={name:"mall",components:{uc:o["a"]},data:function(){return{list:[],total:0,pageIndex:1,pageSize:10,loading:!1,payStatus:c["b"],orderStatus:c["a"],order_id:"",tabList:s["a"]}},computed:{params:function(){var e={pageIndex:this.pageIndex,pageSize:this.pageSize};return e},params_pageIndex:function(){return this.$route.params.pageIndex}},watch:{params:{deep:!0,handler:function(){this.load()}},params_pageIndex:{immediate:!0,handler:function(e){e&&(this.pageIndex=e)}}},methods:{load:function(){var e=this;this.loading=!0,Object(i["f"])(this.params).then((function(t){e.list=t.data.data.list,e.total=t.data.data.page.total,e.loading=!1}))},showPay:function(e){var t=e.order_status,n=e.pay_status;return 1!=t&&2!=t&&7!=t&&0==n},showDetail:function(e){var t=e.goods,n=e.order;if(t.is_virtual){var a=null;a="code"==t.sub_category?this.$router.resolve({name:"card",query:{tab:"virtual"}}):this.$router.resolve({name:"frame"}),a&&window.open(a.href,"_blank")}else this.$router.push({name:"order-detail",params:{id:n.id,pageIndex:this.pageIndex}})},cancel:function(e){var t=this;Object(i["b"])(e).then((function(){t.$message({message:"关闭订单成功",type:"success"}),t.list=t.list.map((function(t){return t.order.id==e&&(t.order.order_status=1),t}))}))},toPay:function(e){var t=this,n=e.order.id;Object(i["j"])(n).then((function(){t.$message({message:"付款成功",type:"success"}),t.list=t.list.map((function(e){return e.order.id==n&&(e.order.pay_status=1),e}))}))},isReceipt:function(e){var t=this;Object(i["i"])(e).then((function(){t.$message({message:"收货成功",type:"success"}),t.list=t.list.map((function(t){return t.order.id==e&&(t.order.order_status=4),t}))}))}},mounted:function(){this.load()}},u=l,d=(n("ce02"),n("2877")),p=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},bdd0:function(e,t,n){"use strict";n("3ed1")},ce02:function(e,t,n){"use strict";n("7cf3")},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,o=n("1dde"),i=o("map");a({target:"Array",proto:!0,forced:!i},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},f03c:function(e){e.exports=JSON.parse('{"b":{"0":"未支付","1":"已支付","2":"已退款"},"a":{"0":"未发货","1":"已取消","2":"已关闭","3":"已发货","4":"已收货","5":"已评价","6":"已退货","7":"等待退款"}}')}}]);
//# sourceMappingURL=chunk-e7ea689a.01d3eb91.js.map