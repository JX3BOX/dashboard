(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a2596b5"],{"0761":function(e,t,n){},"0c39":function(e,t,n){},"219e":function(e,t,n){"use strict";var r=n("de3d");function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=p(a);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function v(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,c=-1,u=new this(o);while(++c<n)l(e[c],c);return u;function l(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(u,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=-1,s=new this(o);while(++a<n)c(e[a]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}e.exports=u,u.prototype["catch"]=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!==typeof e&&this.state===s||"function"!==typeof t&&this.state===a)return this;var n=new this.constructor(o);if(this.state!==c){var r=this.state===s?e:t;f(n,r,this.outcome)}else this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;var o=-1,a=e.queue.length;while(++o<a)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;var n=-1,r=e.queue.length;while(++n<r)e.queue[n].callRejected(t);return e},u.resolve=v,u.reject=m,u.all=b,u.race=y},"23e3":function(e,t,n){"use strict";var r=n("efcf"),o=n.n(r);o.a},"2b14":function(e,t,n){"use strict";var r=n("0761"),o=n.n(r);o.a},"302f":function(e,t,n){"use strict";var r=n("0c39"),o=n.n(r);o.a},4562:function(e,t,n){"use strict";(function(e){"function"!==typeof e.Promise&&(e.Promise=n("219e"))}).call(this,n("c8ba"))},"6d75":function(e,t,n){"use strict";var r=n("d570"),o=n.n(r);o.a},"7ae9":function(e,t,n){"use strict";var r=n("8d6f"),o=n.n(r);o.a},"8d6f":function(e,t,n){},c202:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-box"},[n("pubheader",{attrs:{name:e.name,localDraft:e.localDraft}},[e._t("header")],2),n("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[n("post_title",{attrs:{title:e.post.post_title}},[e._t("title")],2),e.infoEnable?n("div",{staticClass:"m-publish-info"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("信息")]),e._t("default")],2):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.contentEnable,expression:"contentEnable"}],staticClass:"m-publish-prepend"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("正文")]),e._t("prepend")],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.contentEnable,expression:"contentEnable"}],staticClass:"m-publish-content"},[n("Tinymce",{directives:[{name:"show",rawName:"v-show",value:"tinymce"==e.mode,expression:"mode == 'tinymce'"}],attrs:{attachmentEnable:!0,resourceEnable:!0},on:{update:e.updateContent},model:{value:e.post.post_content,callback:function(t){e.$set(e.post,"post_content",t)},expression:"post.post_content"}})],1),e.excerptEnable?n("div",{staticClass:"m-publish-append"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("附加")]),e.tagEnable?n("post_tag",{attrs:{tags:e.post.post_tags}}):e._e(),n("post_excerpt",{attrs:{excerpt:e.post.post_excerpt}}),e._t("append")],2):e._e(),e.notifyEnable?n("div",{staticClass:"m-publish-extend"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("扩展")]),n("post_notify",{attrs:{notify:e.extend}}),e._t("extend")],2):e._e(),e.bannerEnable?n("div",{staticClass:"m-publish-admin"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("海报")]),n("post_banner",{attrs:{banner:e.post.post_banner}})],1):e._e(),n("div",{staticClass:"m-publish-buttons"},[n("el-button",{attrs:{type:"primary",disabled:e.processing},on:{click:e.publish}},[e._v(e._s(e.publish_text||"发 布"))]),n("el-button",{attrs:{type:"plain",disabled:e.processing},on:{click:e.draft}},[e._v(e._s(e.draft_text||"保存为草稿"))])],1)],1)],1)},o=[],i=n("a0fa"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-upload"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[n("i",{staticClass:"el-icon-upload el-icon--right"}),e._v(" 上传附件")]),n("el-dialog",{staticClass:"c-large-dialog",attrs:{title:"上传",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-button",{staticClass:"u-upload-clear",attrs:{plain:"",icon:"el-icon-delete",size:"small"},on:{click:e.clear}},[e._v("清空")]),n("el-alert",{staticClass:"u-upload-tip",attrs:{title:e.tip,type:"info","show-icon":"",closable:!1}}),n("el-upload",{ref:"uploadbox",attrs:{action:e.API,"list-type":"picture-card","auto-upload":!1,limit:10,multiple:"","with-credentials":"","file-list":e.fileList,"on-change":e.change},scopedSlots:e._u([{key:"file",fn:function(t){var r=t.file;return n("div",{staticClass:"u-file-wrapper",class:{isSelected:r.selected,disabled:"success"!=r.status},on:{click:function(t){return e.select(r)}}},[r.is_img?n("img",{staticClass:"el-upload-list__item-thumbnail u-imgbox",attrs:{src:r.url,alt:""}}):n("div",{staticClass:"u-filebox"},[n("svg",{class:"u-fileplaceholder",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469.333 469.333","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M466.208 88.458L380.875 3.125c-2-2-4.708-3.125-7.542-3.125H42.667C19.146 0 0 19.135 0 42.667v384c0 23.531 19.146 42.667 42.667 42.667h384c23.521 0 42.667-19.135 42.667-42.667V96a10.665 10.665 0 00-3.126-7.542zM106.667 21.333h234.667v128c0 11.76-9.563 21.333-21.333 21.333H128c-11.771 0-21.333-9.573-21.333-21.333v-128zM384 448H85.333V256H384v192zm64-21.333c0 11.76-9.563 21.333-21.333 21.333h-21.333V245.333a10.66 10.66 0 00-10.667-10.667h-320A10.66 10.66 0 0064 245.333V448H42.667c-11.771 0-21.333-9.573-21.333-21.333v-384c0-11.76 9.563-21.333 21.333-21.333h42.667v128C85.333 172.865 104.479 192 128 192h192c23.521 0 42.667-19.135 42.667-42.667v-128h6.25L448 100.417v326.25z"}}),n("path",{attrs:{d:"M266.667 149.333h42.667a10.66 10.66 0 0010.667-10.667V53.333a10.66 10.66 0 00-10.667-10.667h-42.667A10.66 10.66 0 00256 53.333v85.333a10.66 10.66 0 0010.667 10.667zM277.333 64h21.333v64h-21.333V64z"}})]),n("span",{staticClass:"u-filename"},[e._v(e._s(r.name))])]),n("label",{directives:[{name:"show",rawName:"v-show",value:r.selected,expression:"file.selected"}],staticClass:"u-file-select-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-check"})])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v(e._s(e.buttonTXT))])],1)],1)],1)},s=[],c=(n("99af"),n("4160"),n("caad"),n("a15b"),n("a434"),n("b0c0"),n("ac1f"),n("1276"),n("159b"),n("2d81"),n("ee8f")),u=n("bc3a"),l=n.n(u),f=["jpg","png","gif","bmp"],d=c["JX3BOX"].__server+"upload",h={name:"upload",data:function(){return{API:d,dialogVisible:!1,tip:"一次最多同时上传10个文件（不超过5M），格式限常见的图片、文档、数据表及压缩包",fileList:[],selectedCount:0}},computed:{buttonTXT:function(){return this.selectedCount?"插 入":"确 定"}},methods:{change:function(e,t){var n=this;if("success"!=e.status){var r=new FormData;r.append("file",e.raw),l.a.post(d,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(t){n.$message({message:"上传成功",type:"success"}),e.url=t.data.data.list[0];var r=e.name.split(".").pop(),o=f.includes(r);e.is_img=o,e.selected=!0,e.status="success",n.fileList.push(e),n.selectedCount++})).catch((function(e){e.response.data.code?n.$message.error("[".concat(e.response.data.code,"] ").concat(e.response.data.msg)):n.$message.error("请求异常")}))}},select:function(e){"success"==e.status&&(this.$set(e,"selected",!e.selected),e.selected?this.selectedCount++:this.selectedCount--)},insert:function(){this.dialogVisible=!1,this.selectedCount&&("markdown"==this.$store.state.post.post_mode||tinyMCE.editors["tinymce"].insertContent(this.insertList()),this.resetSelectStatus())},resetSelectStatus:function(){var e=this;this.fileList.forEach((function(t,n){e.$set(e.fileList[n],"selected",!1)})),this.selectedCount=0},clear:function(){this.$refs.uploadbox.clearFiles(),this.fileList=[]},removeFile:function(e,t){e.forEach((function(n,r){n.uid==t&&e.splice(r,1)}))},insertList:function(){var e=[];return this.fileList.forEach((function(t){t.selected&&(t.is_img?e.push('<img src="'.concat(t.url,'" />')):e.push('<a target="_blank" href="'.concat(t.url,'">').concat(t.name,"</a>")))})),e.join(" \n")}},mounted:function(){},components:{}},p=h,v=(n("2b14"),n("2877")),m=Object(v["a"])(p,a,s,!1,null,null,null),b=(m.exports,n("221a")),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-editor-markdown"},[e._v(" "+e._s(e.content)+" ")])},g=[],_={name:"markdown",props:["content"],data:function(){return{data:this.content}},watch:{data:function(e){this.$store.commit("editContent",e)}},computed:{},methods:{},mounted:function(){},components:{}},w=_,I=Object(v["a"])(w,y,g,!1,null,null,null),E=(I.exports,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-title"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("标题")]),n("el-input",{attrs:{maxlength:"50",minlength:"2","show-word-limit":"",required:"",placeholder:"请填写标题"},on:{change:e.done},model:{value:e.post_title,callback:function(t){e.post_title=t},expression:"post_title"}}),e._t("default")],2)}),x=[],S={name:"post_title",props:["title"],data:function(){return{post_title:this.title}},computed:{store:function(){return this.$store.state.post.post_title}},watch:{store:function(e){this.post_title=e}},methods:{done:function(){this.$store.commit("editTitle",this.post_title)}},mounted:function(){},components:{}},C=S,N=Object(v["a"])(C,E,x,!1,null,null,null),j=N.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-excerpt"},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"摘要信息"},on:{change:e.done},model:{value:e.post_excerpt,callback:function(t){e.post_excerpt=t},expression:"post_excerpt"}})],1)},O=[],D={name:"post_excerpt",props:["excerpt"],data:function(){return{post_excerpt:this.excerpt}},computed:{store:function(){return this.$store.state.post.post_excerpt}},watch:{store:function(e){this.post_excerpt=e}},methods:{done:function(){this.$store.commit("editExcerpt",this.post_excerpt)}},mounted:function(){},components:{}},A=D,B=(n("23e3"),Object(v["a"])(A,k,O,!1,null,null,null)),R=B.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-tag"},[e._l(e.dynamicTags,(function(t){return n("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1,effect:"plain"},on:{close:function(n){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 标签")])],2)},$=[],L=(n("c975"),{name:"post_tag",props:["tags"],data:function(){return{dynamicTags:this.tags,inputVisible:!1,inputValue:""}},computed:{},methods:{handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue=""}},mounted:function(){},components:{}}),M=L,z=(n("7ae9"),Object(v["a"])(M,T,$,!1,null,null,null)),F=z.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-notify"},[n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"通知作品订阅用户",disabled:""},model:{value:e.notify.feedEnable,callback:function(t){e.$set(e.notify,"feedEnable",t)},expression:"notify.feedEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"通知粉丝",disabled:""},model:{value:e.notify.followEnable,callback:function(t){e.$set(e.notify,"followEnable",t)},expression:"notify.followEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至腾讯文档",disabled:""},model:{value:e.notify.tencentEnable,callback:function(t){e.$set(e.notify,"tencentEnable",t)},expression:"notify.tencentEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至微博头条文章",disabled:""},model:{value:e.notify.weiboEnable,callback:function(t){e.$set(e.notify,"weiboEnable",t)},expression:"notify.weiboEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至推栏",disabled:""},model:{value:e.notify.tuilanEnable,callback:function(t){e.$set(e.notify,"tuilanEnable",t)},expression:"notify.tuilanEnable"}})],1)},V=[],U={name:"post_notify",props:["notify"],data:function(){return{post_notify:this.notify}},computed:{},methods:{},mounted:function(){},components:{}},q=U,W=(n("302f"),Object(v["a"])(q,P,V,!1,null,null,null)),H=W.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-publish-banner"},[n("el-alert",{staticClass:"u-tip",attrs:{title:"图片尺寸180*100像素，非必选，部分栏目不会展示海报，分享功能将使用该图作为预览图",type:"info","show-icon":""}}),n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.url,"show-file-list":!1,"on-success":e.done,"on-error":e.fail,"with-credentials":"",accept:"image/jpg,image/jpeg,image/gif,image/png,image/bmp"}},[e.post_banner?n("img",{attrs:{src:e._f("showBanner")(e.post_banner)}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),n("el-button",{staticClass:"u-remove",attrs:{type:"info",size:"mini",icon:"el-icon-circle-close"},on:{click:e.clearBanner}},[e._v("移除海报")])],1)},J=[],K=n("64c7"),Q=n("85e4"),G=K["__server"]+"upload",Y={name:"post_banner",props:["banner"],data:function(){return{post_banner:this.banner,url:G}},methods:{done:function(e,t){this.post_banner=e.data.list[0],this.$store.commit("editBanner",this.post_banner)},fail:function(e,t,n){try{var r=JSON.parse(e.message);this.$message.error("[".concat(r.code,"]").concat(r.msg))}catch(o){this.$message.error("网络请求异常")}},clearBanner:function(){this.post_banner="",this.$store.commit("editBanner",this.post_banner)}},filters:{showBanner:function(e){return Object(Q["showMinibanner"])(e)}}},Z=Y,ee=(n("c383"),Object(v["a"])(Z,X,J,!1,null,null,null)),te=ee.exports;const ne=n("ed26");class re{constructor(e,t){if(window.indexedDB)return this.dbName=e||"jx3box",this.storeName=t||"posts",console.log("%c[IDB] Use Database - ","color:#ff3399;",`${this.dbName} > ${this.storeName}`),this.db=ne.createInstance({name:this.dbName,storeName:this.storeName,driver:ne.INDEXEDDB}),this.db;console.log("不支持IndexedDB")}}var oe=re,ie=n("2ef0"),ae=new oe,se=5e3;function ce(e,t){ae.ready().then((function(){ae.setItem(e,t)}))}ie.throttle(ce,se);var ue=n("c9d2"),le=n.n(ue),fe={name:"boilerplate",props:["name","type","post","meta","extend","localDraft","infoEnable","contentEnable","markdownEnable","excerptEnable","tagEnable","notifyEnable","bannerEnable","publish_text","draft_text"],data:function(){return{mode:this.post.post_mode||"tinymce",draft_key:"",isAdmin:le.a.getInfo().group>30}},computed:{processing:function(){return this.$store.state.processing}},watch:{"post.post_meta":{handler:function(e){this.$store.commit("editPostMeta",e)},deep:!0},meta:{handler:function(e){this.$store.commit("editMeta",e)},deep:!0},mode:function(e){this.$store.commit("changeMode",e)}},methods:{publish:function(){this.$store.commit("changeStatus","publish"),this.$emit("publish"),this.$store.commit("startProcess")},draft:function(){this.$store.commit("changeStatus","draft"),this.$emit("draft"),this.$store.commit("startProcess")},updateContent:function(e){this.$store.commit("editContent",e)}},mounted:function(){this.$store.commit("changeType",this.type),this.$store.commit("changeSubtype",this.post.post_subtype)},components:{pubheader:i["a"],Tinymce:b["a"],post_title:j,post_tag:F,post_excerpt:R,post_notify:H,post_banner:te}},de=fe,he=(n("6d75"),Object(v["a"])(de,r,o,!1,null,null,null));t["a"]=he.exports},c383:function(e,t,n){"use strict";var r=n("c515"),o=n.n(r);o.a},c515:function(e,t,n){},d570:function(e,t,n){},de3d:function(e,t,n){"use strict";(function(t){var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var c=new t.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;var n=u.length;while(n){t=u,u=[],e=-1;while(++e<n)t[e]();n=u.length}r=!1}function f(e){1!==u.push(e)||r||n()}e.exports=f}).call(this,n("c8ba"))},ed26:function(e,t,n){"use strict";function r(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}n.r(t);var o=r(),i=o;function a(){try{if(!i||!i.open)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}var s=a;function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}var u=c;"undefined"===typeof Promise&&n("4562");var l=Promise;function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}var d=f;function h(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}var p=h;function v(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const b="local-forage-detect-blob-support";let y;const g={},_=Object.prototype.toString,w="readonly",I="readwrite";function E(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new l((function(t){var n=e.transaction(b,I),r=u([""]);n.objectStore(b).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"===typeof y?l.resolve(y):x(e).then((function(e){return y=e,y}))}function C(e){var t=g[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function N(e){var t=g[e.name],n=t.deferredOperations.pop();if(n)return n.resolve(),n.promise}function j(e,t){var n=g[e.name],r=n.deferredOperations.pop();if(r)return r.reject(t),r.promise}function k(e,t){return new l((function(n,r){if(g[e.name]=g[e.name]||z(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(b)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),N(e)}}))}function O(e){return k(e,!1)}function D(e){return k(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function B(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function R(e){var t=E(atob(e.data));return u([t],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function $(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return p(n,e,e),n}function L(e){C(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){const e=n[r];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return e.db=null,O(e).then(t=>(e.db=t,A(e)?D(e):t)).then(r=>{e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r}).catch(t=>{throw j(e,t),t})}function M(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return l.resolve().then(()=>{if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),D(e)}).then(()=>L(e).then((function(){M(e,t,n,r-1)}))).catch(n);n(i)}}function z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=z(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=$);var i=[];function a(){return l.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var u=o.forages.slice(0);return l.all(i).then((function(){return n.db=o.db,O(n)})).then((function(e){return n.db=e,A(n,t._defaultConfig.version)?D(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function P(e,t){var n=this;e=v(e);var r=new l((function(t,r){n.ready().then((function(){M(n._dbInfo,w,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=a.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),T(e)&&(e=R(e)),t(e)},s.onerror=function(){r(s.error)}}catch(c){r(c)}}))})).catch(r)}));return d(r,t),r}function V(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){M(n._dbInfo,w,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=a.openCursor(),c=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;T(r)&&(r=R(r));var o=e(r,n.key,c++);void 0!==o?t(o):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(u){r(u)}}))})).catch(r)}));return d(r,t),r}function U(e,t,n){var r=this;e=v(e);var o=new l((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===_.call(t)?S(i.db).then((function(e){return e?t:B(t)})):t})).then((function(t){M(r._dbInfo,I,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(u){o(u)}}))})).catch(o)}));return d(o,n),o}function q(e,t){var n=this;e=v(e);var r=new l((function(t,r){n.ready().then((function(){M(n._dbInfo,I,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=a.delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(c){r(c)}}))})).catch(r)}));return d(r,t),r}function W(e){var t=this,n=new l((function(e,n){t.ready().then((function(){M(t._dbInfo,I,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(s){n(s)}}))})).catch(n)}));return d(n,e),n}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){M(t._dbInfo,w,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName),a=i.count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return d(n,e),n}function X(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){M(n._dbInfo,w,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(u){r(u)}}))})).catch(r)}));return d(r,t),r}function J(e){var t=this,n=new l((function(e,n){t.ready().then((function(){M(t._dbInfo,w,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName),a=i.openKeyCursor(),s=[];a.onsuccess=function(){var t=a.result;t?(s.push(t.key),t.continue()):e(s)},a.onerror=function(){n(a.error)}}catch(c){n(c)}}))})).catch(n)}));return d(n,e),n}function K(e,t){t=m.apply(this,arguments);var n=this.config();e="function"!==typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){const t=e.name===n.name&&o._dbInfo.db,a=t?l.resolve(o._dbInfo.db):O(e).then(t=>{const n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t});r=e.storeName?a.then(t=>{if(!t.objectStoreNames.contains(e.storeName))return;const n=t.version+1;C(e);const r=g[e.name],o=r.forages;t.close();for(let e=0;e<o.length;e++){const t=o[e];t._dbInfo.db=null,t._dbInfo.version=n}const a=new l((t,r)=>{const o=i.open(e.name,n);o.onerror=e=>{const t=o.result;t.close(),r(e)},o.onupgradeneeded=()=>{var t=o.result;t.deleteObjectStore(e.storeName)},o.onsuccess=()=>{const e=o.result;e.close(),t(e)}});return a.then(e=>{r.db=e;for(let t=0;t<o.length;t++){const n=o[t];n._dbInfo.db=e,N(n._dbInfo)}}).catch(t=>{throw(j(e,t)||l.resolve()).catch(()=>{}),t})}):a.then(t=>{C(e);const n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++){const e=r[o];e._dbInfo.db=null}const a=new l((t,n)=>{var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=e=>{const t=r.result;t&&t.close(),n(e)},r.onsuccess=()=>{const e=r.result;e&&e.close(),t(e)}});return a.then(e=>{n.db=e;for(var t=0;t<r.length;t++){const e=r[t];N(e._dbInfo)}}).catch(t=>{throw(j(e,t)||l.resolve()).catch(()=>{}),t})})}else r=l.reject("Invalid arguments");return d(r,t),r}var Q={_driver:"asyncStorage",_initStorage:F,_support:s(),iterate:V,getItem:P,setItem:U,removeItem:q,clear:W,length:H,key:X,keys:J,dropInstance:K},G=Q;function Y(){return"function"===typeof openDatabase}var Z=Y,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te="~~local_forage_type~",ne=/^~~local_forage_type~([^~]+)~/,re="__lfsc__:",oe=re.length,ie="arbf",ae="blob",se="si08",ce="ui08",ue="uic8",le="si16",fe="si32",de="ur16",he="ui32",pe="fl32",ve="fl64",me=oe+ie.length,be=Object.prototype.toString;function ye(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=ee.indexOf(e[t]),r=ee.indexOf(e[t+1]),o=ee.indexOf(e[t+2]),i=ee.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function ge(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=ee[n[t]>>2],r+=ee[(3&n[t])<<4|n[t+1]>>4],r+=ee[(15&n[t+1])<<2|n[t+2]>>6],r+=ee[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function _e(e,t){var n="";if(e&&(n=be.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===be.call(e.buffer))){var r,o=re;e instanceof ArrayBuffer?(r=e,o+=ie):(r=e.buffer,"[object Int8Array]"===n?o+=se:"[object Uint8Array]"===n?o+=ce:"[object Uint8ClampedArray]"===n?o+=ue:"[object Int16Array]"===n?o+=le:"[object Uint16Array]"===n?o+=de:"[object Int32Array]"===n?o+=fe:"[object Uint32Array]"===n?o+=he:"[object Float32Array]"===n?o+=pe:"[object Float64Array]"===n?o+=ve:t(new Error("Failed to get type for BinaryArray"))),t(o+ge(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=te+e.type+"~"+ge(this.result);t(re+ae+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function we(e){if(e.substring(0,oe)!==re)return JSON.parse(e);var t,n=e.substring(me),r=e.substring(oe,me);if(r===ae&&ne.test(n)){var o=n.match(ne);t=o[1],n=n.substring(o[0].length)}var i=ye(n);switch(r){case ie:return i;case ae:return u([i],{type:t});case se:return new Int8Array(i);case ce:return new Uint8Array(i);case ue:return new Uint8ClampedArray(i);case le:return new Int16Array(i);case de:return new Uint16Array(i);case fe:return new Int32Array(i);case he:return new Uint32Array(i);case pe:return new Float32Array(i);case ve:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var Ie={serialize:_e,deserialize:we,stringToBuffer:ye,bufferToString:ge},Ee=Ie;function xe(e,t,n,r){e.executeSql(`CREATE TABLE IF NOT EXISTS ${t.storeName} (id INTEGER PRIMARY KEY, key unique, value)`,[],n,r)}function Se(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!==typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(o){return r(o)}n.db.transaction((function(o){xe(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=Ee,o}function Ce(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):xe(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function Ne(e,t){var n=this;e=v(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Ce(n,o,`SELECT * FROM ${o.storeName} WHERE key = ? LIMIT 1`,[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function je(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Ce(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),u=e(u,c.key,s+1),void 0!==u)return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function ke(e,t,n,r){var o=this;e=v(e);var i=new l((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){Ce(n,c,`INSERT OR REPLACE INTO ${c.storeName} (key, value) VALUES (?, ?)`,[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(ke.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return d(i,n),i}function Oe(e,t,n){return ke.apply(this,[e,t,n,1])}function De(e,t){var n=this;e=v(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Ce(n,o,`DELETE FROM ${o.storeName} WHERE key = ?`,[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Ae(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Be(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Re(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Ce(n,o,`SELECT key FROM ${o.storeName} WHERE id = ? LIMIT 1`,[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Te(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function $e(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Le(e,t){t=m.apply(this,arguments);var n=this.config();e="function"!==typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t($e(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));l.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),d(r,t),r}var Me={_driver:"webSQLStorage",_initStorage:Se,_support:Z(),iterate:je,getItem:Ne,setItem:Oe,removeItem:De,clear:Ae,length:Be,key:Re,keys:Te,dropInstance:Le},ze=Me;function Fe(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}var Pe=Fe;function Ve(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ue(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function qe(){return!Ue()||localStorage.length>0}function We(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Ve(e,t._defaultConfig),qe()?(t._dbInfo=n,n.serializer=Ee,l.resolve()):l.reject()}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return d(n,e),n}function Xe(e,t){var n=this;e=v(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return d(r,t),r}function Je(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),u=e(u,c.substring(o),a++),void 0!==u)return u}}}));return d(r,t),r}function Ke(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return d(r,t),r}function Qe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return d(n,e),n}function Ge(e){var t=this,n=t.keys().then((function(e){return e.length}));return d(n,e),n}function Ye(e,t){var n=this;e=v(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return d(r,t),r}function Ze(e,t,n){var r=this;e=v(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return d(o,n),o}function et(e,t){if(t=m.apply(this,arguments),e="function"!==typeof e&&e||{},!e.name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(Ve(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),d(r,t),r}var tt={_driver:"localStorageWrapper",_initStorage:We,_support:Pe(),iterate:Je,getItem:Xe,setItem:Ze,removeItem:Ye,clear:He,length:Ge,key:Ke,keys:Qe,dropInstance:et},nt=tt;const rt=(e,t)=>e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t),ot=(e,t)=>{const n=e.length;let r=0;while(r<n){if(rt(e[r],t))return!0;r++}return!1};var it=ot;const at=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};var st=at;const ct={},ut={},lt={INDEXEDDB:G,WEBSQL:ze,LOCALSTORAGE:nt},ft=[lt.INDEXEDDB._driver,lt.WEBSQL._driver,lt.LOCALSTORAGE._driver],dt=["dropInstance"],ht=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(dt),pt={description:"",driver:ft.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function vt(e,t){e[t]=function(){const n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function mt(){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(t)for(let e in t)t.hasOwnProperty(e)&&(st(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}class bt{constructor(e){for(let t in lt)if(lt.hasOwnProperty(t)){const e=lt[t],n=e._driver;this[t]=n,ct[n]||this.defineDriver(e)}this._defaultConfig=mt({},pt),this._config=mt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(()=>{})}config(e){if("object"===typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config}defineDriver(e,t,n){const r=new l((function(t,n){try{const r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);const i=ht.concat("_initStorage");for(let t=0,c=i.length;t<c;t++){const r=i[t],a=!it(dt,r);if((a||e[r])&&"function"!==typeof e[r])return void n(o)}const a=function(){const t=function(e){return function(){const t=new Error(`Method ${e} is not implemented by the current driver`),n=l.reject(t);return d(n,arguments[arguments.length-1]),n}};for(let n=0,r=dt.length;n<r;n++){const r=dt[n];e[r]||(e[r]=t(r))}};a();const s=function(n){ct[r]&&console.info("Redefining LocalForage driver: "+r),ct[r]=e,ut[r]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(s,n):s(!!e._support):s(!0)}catch(r){n(r)}}));return p(r,t,n),r}driver(){return this._driver||null}getDriver(e,t,n){const r=ct[e]?l.resolve(ct[e]):l.reject(new Error("Driver not found."));return p(r,t,n),r}getSerializer(e){const t=l.resolve(Ee);return p(t,e),t}ready(e){const t=this,n=t._driverSet.then(()=>(null===t._ready&&(t._ready=t._initDriver()),t._ready));return p(n,e,e),n}setDriver(e,t,n){const r=this;st(e)||(e=[e]);const o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){let t=0;function n(){while(t<e.length){let o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();const o=new Error("No available storage method found.");return r._driverSet=l.reject(o),r._driverSet}return n()}}const c=null!==this._driverSet?this._driverSet.catch(()=>l.resolve()):l.resolve();return this._driverSet=c.then(()=>{const e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(e=>{r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)})}).catch(()=>{i();const e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet}),p(this._driverSet,t,n),this._driverSet}supports(e){return!!ut[e]}_extend(e){mt(this,e)}_getSupportedDrivers(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];this.supports(r)&&t.push(r)}return t}_wrapLibraryMethodsWithReady(){for(let e=0,t=ht.length;e<t;e++)vt(this,ht[e])}createInstance(e){return new bt(e)}}t["default"]=new bt},efcf:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2a2596b5.684b2803.js.map