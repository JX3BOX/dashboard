(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bb45ddc"],{4039:function(t,n,i){"use strict";i.r(n);var a=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.honor))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.list,(function(i,a){return n("div",{key:a,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(i.honor))]),n("div",{staticClass:"u-pic",class:t.setClass(i),on:{click:function(n){return t.selectChange(i)}}},[i.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(i),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},e=[],o=(i("99af"),i("d3b7"),i("159b"),i("b64b"),i("7db0"),i("ac1f"),i("466d"),i("a9e3"),i("5319"),i("14d9"),i("b547")),s=i("46c1"),r=i("c9d2"),c=i("8e44"),u=i("65c2"),l=i("aa38"),d=i("2ef0"),v={name:"honor",props:[],data:function(){return{tabList:s["d"],isVIP:!1,info:{uid:r["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(u["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},list:[],listBak:[],isSelect:{},isSelectBak:{},honorList:{}}},computed:{uid:function(){return r["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return r["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){if(t&&!t.isCustomize&&t.val)return t.isImgIndex?u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,"_").concat(t.imgIndex,".").concat(t.ext):u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,".").concat(t.ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(c["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},loadHonor:function(){var t=this;Object(l["e"])().then((function(n){t.honorList=n.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(l["f"])(this.uid).then((function(n){var i=n||[],a=t.honorList,e=[];Object.keys(a).forEach((function(t,n){var o=i.find((function(n){var i;return(null===n||void 0===n||null===(i=n.honor)||void 0===i?void 0:i.img)==t})),s=a[t],r=function(t){var n=(null===t||void 0===t?void 0:t.honor)||{},i=s.only,a=s.prefix,e=s.prefix.match(/(?<=\{)(.+?)(?=\})/g),o=s.ranking,r=s.year||"";if(i?r=a:e?n&&(r+=(null===t||void 0===t?void 0:t[e[0]])||""):r+=a,o.length>0&&n){n.imgIndex=0;for(var c=0;c<o.length;c++)if(void 0!=(null===t||void 0===t?void 0:t.ranking)&&Object(d["inRange"])(Number(null===t||void 0===t?void 0:t.ranking),o[c][0],o[c][1])){n.imgIndex=c;var u=o[c][2],l=u.match(/(?<=\{)(.+?)(?=\})/g);r+=l?u.replace(/\{([^{}]+?)\}/g,(function(i,a){return n[a]||t[a]||""})):u;break}}return r+s.suffix};if(o){var c;o.honor=r(o),o.color=s.color,o.ext=s.ext,o.val=t,o.isHave=!0,o.imgIndex=(null===(c=o.honor)||void 0===c?void 0:c.imgIndex)||0,o.isImgIndex=s.ranking.length>0,e.push(o)}else{var u={color:s.color,ext:s.ext,honor:r(),extra:"尚未获取的称号框",using:0,type:"honor",val:t,isHave:!1,imgIndex:0,isImgIndex:s.ranking.length>0};e.push(u)}}));var o=e.find((function(t){return 1==t.using}));t.list=e||[];var s={type:"honor_customize",val:"不佩戴称号",honor:"取消佩戴称号",using:o?0:1,isHave:!0,isCustomize:!0};t.isSelect=o||s,t.list.unshift(s),t.isSelectBak=Object(d["cloneDeep"])(t.isSelect),t.listBak=Object(d["cloneDeep"])(t.list)}))},selectChange:function(t){if(t.isHave){var n=this.list,i=n.find((function(t){return 1==t.using}));i&&(i.using=0),t.using=1,this.isSelect=t}},reset:function(){this.$set(this,"list",Object(d["cloneDeep"])(this.listBak)),this.$set(this,"isSelect",Object(d["cloneDeep"])(this.isSelectBak))},showLevelColor:function(t){return u["__userLevelColor"][t]},submit:function(){var t,n=this,i=null===(t=this.list)||void 0===t?void 0:t.find((function(t){return 1==t.using}));null!==i&&void 0!==i&&i.honor_id?Object(l["i"])(i.honor_id).then((function(t){n.$message({message:"称号更新成功",type:"success"})})):Object(l["a"])().then((function(t){n.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:o["a"]}},f=v,h=(i("40c0"),i("2877")),p=Object(h["a"])(f,a,e,!1,null,null,null);n["default"]=p.exports},"40c0":function(t,n,i){"use strict";i("bca2")},aa38:function(t,n,i){"use strict";i.d(n,"b",(function(){return r})),i.d(n,"h",(function(){return c})),i.d(n,"c",(function(){return u})),i.d(n,"d",(function(){return l})),i.d(n,"g",(function(){return d})),i.d(n,"j",(function(){return v})),i.d(n,"e",(function(){return f})),i.d(n,"f",(function(){return h})),i.d(n,"i",(function(){return p})),i.d(n,"a",(function(){return m}));i("99af");var a=i("41cb"),e=i("bc3a"),o=i.n(e),s=i("65c2");function r(t){return Object(a["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(a["b"])().post("/api/cms/user/decoration",t)}function u(){var t=s["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return o.a.get(t)}function l(){return o.a.get("".concat(s["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,n){return Object(a["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function v(t){return Object(a["b"])().put("/api/cms/user/my/avatar-frame",t)}function f(){return Object(a["b"])().get("/api/cms/user/config/honor")}function h(t){return Object(a["c"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function p(t){return Object(a["b"])().put("/api/cms/user/honor/use/".concat(t))}function m(){return Object(a["b"])().delete("/api/cms/user/honor/use")}},bca2:function(t,n,i){}}]);
//# sourceMappingURL=chunk-4bb45ddc.92379bd5.js.map