(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56115144"],{"00b4":function(e,t,a){"use strict";a("ac1f");var n=a("23e7"),r=a("c65b"),s=a("e330"),i=a("1626"),c=a("861d"),o=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=TypeError,u=s(/./.test);n({target:"RegExp",proto:!0,forced:!o},{test:function(e){var t=this.exec;if(!i(t))return u(this,e);var a=r(t,this,e);if(null!==a&&!c(a))throw new l("RegExp exec method returned something other than an Object or null");return!!a}})},"39a2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-feedback-index"},[a("section",{staticClass:"m-feedback-box"},[a("el-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-tab-pane",{attrs:{label:"提交反馈",name:"submit",lazy:""}},[a("add")],1),a("el-tab-pane",{attrs:{label:"我的反馈",name:"myfeedback",lazy:""}},["myfeedback"===e.active?a("list"):e._e()],1)],1)],1),a("aside",{staticClass:"m-feedback-aside"},[a("el-button",{staticClass:"u-btn",attrs:{size:"small",type:"warning",plain:""},on:{click:e.handleEraseClick}},[e._v("注销账号")]),a("div",{staticClass:"m-feedback-faq"},[e._m(0),e._l(e.faq.menus,(function(t){return a("div",{key:t.link,staticClass:"u-list"},[a("a",{staticClass:"u-item",attrs:{href:t.link}},[e._v(e._s(t.label))])])}))],2)],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-question"}),e._v(" FAQ")])}],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-add-feedback"},[a("div",{staticClass:"type-box"},[a("div",{staticClass:"type-box-item"},[a("span",{staticClass:"u-label"},[e._v("来源：")]),a("el-select",{attrs:{placeholder:"请选择问题来源",size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.types,(function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})})),1)],1),a("div",{staticClass:"type-box-item"},[a("span",{staticClass:"u-label"},[e._v("类别：")]),a("el-select",{attrs:{placeholder:"请选择问题类别",size:"small"},model:{value:e.form.subtype,callback:function(t){e.$set(e.form,"subtype",t)},expression:"form.subtype"}},e._l(e.subtypes,(function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})})),1)],1)]),a("div",{staticClass:"m-content"},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"输入反馈内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("div",{staticClass:"m-feedback-actions"},[a("div",{staticClass:"m-feedback-attachment"},[a("el-upload",{ref:"upload",staticClass:"u-upload avatar-uploader",attrs:{action:e.url,"list-type":"picture-card","on-remove":e.remove,"on-success":e.done,"on-error":e.fail,"on-exceed":e.exceed,"before-upload":e.beforeUpload,limit:e.max,title:"上传图片","with-credentials":"",accept:"image/jpg, image/jpeg, image/gif, image/png, image/bmp",size:"small",multiple:""}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"m-feedback-visible"},[a("span",{staticClass:"u-label"},[e._v("是否公开：")]),a("el-checkbox",{staticClass:"u-checkbox",attrs:{"true-label":1,"false-label":0},model:{value:e.form.public,callback:function(t){e.$set(e.form,"public",t)},expression:"form.public"}})],1),a("div",{staticClass:"m-feedback-btn"},[a("el-button",{staticClass:"u-submit",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:!e.canSubmit,loading:e.loading},on:{click:e.submit}},[e._v("提交")])],1)])])},i=[],c=a("5530");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e){if(Array.isArray(e))return o(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("fb6a"),a("b0c0"),a("ac1f"),a("00b4");function f(e,t){if(e){if("string"===typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}a("d9e2");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return l(e)||u(e)||f(e)||d()}a("a9e3"),a("99af"),a("4de4");var b=a("4437"),m=a("65c2"),g=a("b4fa"),v=m["__cms"],h=v+"api/cms/upload",y={name:"AddFeedback",props:{max:{type:Number,default:6}},data:function(){return{types:b["d"],subtypes:b["c"],form:{type:"",subtype:"",content:"",public:0},url:h,imgs:[],loading:!1}},computed:{canSubmit:function(){return this.form.type&&this.form.subtype&&this.form.content},client:function(){return this.$store.state.client},refer:function(){var e,t;return null!==(e=this.$route.query)&&void 0!==e&&e.refer?decodeURIComponent(null===(t=this.$route.query)||void 0===t?void 0:t.refer):""}},methods:{beforeUpload:function(e){console.log(e);var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/bmp"===e.type;if(!t)return this.$message.error("上传图片只能是 JPG/PNG/GIF/BMP 格式!"),!1},done:function(e){console.log(e),this.imgs=[].concat(p(this.imgs),[e.data[0]])},fail:function(e){try{var t=JSON.parse(e.message);this.$message.error("[".concat(t.code,"]").concat(t.msg))}catch(a){this.$message.error("网络请求异常")}},exceed:function(){this.$message.warning("上传的图片个数最多为".concat(this.max,"个"))},remove:function(e){this.imgs=this.imgs.filter((function(t){var a;return t!==(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data[0])}))},submit:function(){var e=this;this.loading=!0;var t=Object(c["a"])(Object(c["a"])({},this.form),{},{images:this.imgs,client:this.client});this.refer&&(t.refer=this.refer),Object(g["a"])(t).then((function(t){e.$message.success("提交成功"),e.$refs.upload.clearFiles(),e.form=e.$options.data().form,e.imgs=[]})).finally((function(){e.loading=!1}))}}},k=y,_=(a("c5ff"),a("2877")),w=Object(_["a"])(k,s,i,!1,null,"027b4590",null),C=w.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-feedback-list"},[a("el-table",{attrs:{data:e.data,"highlight-current-row":"",size:"small","row-class-name":"u-row"},on:{"row-click":e.viewFeedback}},[a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"u-status",style:{backgroundColor:e.statusColors[n.status]}},[e._v(e._s(e.statusMap[n.status]))])]}}])}),a("el-table-column",{attrs:{label:"客户端",prop:"client"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"u-client",class:"i-client-"+n.client},[e._v(e._s(e.formatClient(n.client)))])]}}])}),a("el-table-column",{attrs:{label:"来源",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.types[a.type])+" ")]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"subtype"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.subtypes[a.subtype])+" ")]}}])}),a("el-table-column",{attrs:{label:"提交时间",prop:"created_at"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.formatTime(a.created_at))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(n)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.currentChange}})],1)},x=[],j=a("c7eb"),$=a("1da1"),S=a("c1df"),P=a.n(S),A={name:"FeedbackList",data:function(){return{data:[],loading:!1,page:1,per:10,total:0,types:b["d"],subtypes:b["c"],statusMap:b["b"],statusColors:b["a"]}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Object($["a"])(Object(j["a"])().mark((function t(){var a,n;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,a={pageIndex:e.page,pageSize:e.per},t.next=5,Object(g["c"])(a);case 5:n=t.sent,e.data=n.data.data.list||[],e.total=n.data.data.page.total,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})))()},formatTime:function(e){return P()(e).format("YYYY-MM-DD HH:mm:ss")},formatClient:function(e){var t=e||"std";return"std"===t?"重制":"缘起"},handleView:function(e){this.$router.push({name:"feedback_single",params:{id:e.id}})},currentChange:function(e){this.page=e,this.getData()},viewFeedback:function(e){this.$router.push({name:"feedback_single",params:{id:e.id}})}}},E=A,q=(a("d167"),Object(_["a"])(E,O,x,!1,null,"a6a4f2d8",null)),D=q.exports,z=a("cc9a"),F={name:"FeedbackIndex",components:{add:C,list:D},data:function(){return{active:"submit",faq:{}}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(e){this.active=e.tab||"submit"}},active:function(e){this.$router.push({path:this.$route.path,query:{tab:e}})}},mounted:function(){this.getFAQ()},methods:{handleEraseClick:function(){this.$router.push({name:"feedback_erase"})},getFAQ:function(){var e=this;Object(z["c"])({names:["feedback_faq"]}).then((function(t){e.faq=t.feedback_faq}))}}},I=F,M=(a("fa4e"),Object(_["a"])(I,n,r,!1,null,"bd77f20a",null));t["default"]=M.exports},4919:function(e,t,a){},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},a630:function(e,t,a){var n=a("23e7"),r=a("4df4"),s=a("1c7e"),i=!s((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:i},{from:r})},aed1:function(e,t,a){},c5ff:function(e,t,a){"use strict";a("4919")},d167:function(e,t,a){"use strict";a("d4ba")},d4ba:function(e,t,a){},dbb4:function(e,t,a){var n=a("23e7"),r=a("83ab"),s=a("56ef"),i=a("fc6a"),c=a("06cf"),o=a("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,a,n=i(e),r=c.f,l=s(n),u={},f=0;while(l.length>f)a=r(n,t=l[f++]),void 0!==a&&o(u,t,a);return u}})},e439:function(e,t,a){var n=a("23e7"),r=a("d039"),s=a("fc6a"),i=a("06cf").f,c=a("83ab"),o=r((function(){i(1)})),l=!c||o;n({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(e,t){return i(s(e),t)}})},fa4e:function(e,t,a){"use strict";a("aed1")}}]);
//# sourceMappingURL=chunk-56115144.3ba11db0.js.map