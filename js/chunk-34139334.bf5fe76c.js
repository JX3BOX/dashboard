(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34139334"],{"00b4":function(t,e,a){"use strict";a("ac1f");var n=a("23e7"),r=a("c65b"),s=a("e330"),i=a("1626"),o=a("861d"),l=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),c=TypeError,u=s(/./.test);n({target:"RegExp",proto:!0,forced:!l},{test:function(t){var e=this.exec;if(!i(e))return u(this,t);var a=r(e,this,t);if(null!==a&&!o(a))throw new c("RegExp exec method returned something other than an Object or null");return!!a}})},"0524":function(t,e,a){},"25d3":function(t,e,a){"use strict";a("ba05")},"300e":function(t,e,a){"use strict";a("0524")},"39a2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-feedback-index"},[a("section",{staticClass:"m-feedback-box"},[a("el-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{label:"提交反馈",name:"submit",lazy:""}},[a("add")],1),a("el-tab-pane",{attrs:{label:"我的反馈",name:"myfeedback",lazy:""}},["myfeedback"===t.active?a("list"):t._e()],1),t.isTeammate?a("el-tab-pane",{attrs:{label:"待处理",name:"pending",lazy:""}},["pending"===t.active?a("pending",{attrs:{"only-me":t.onlyMe}}):t._e()],1):t._e()],1),t.isTeammate&&"pending"===t.active?a("el-checkbox",{staticClass:"u-only-check",model:{value:t.onlyMe,callback:function(e){t.onlyMe=e},expression:"onlyMe"}},[t._v("指派给我的")]):t._e()],1),a("aside",{staticClass:"m-feedback-aside"},[a("el-button",{staticClass:"u-btn",attrs:{size:"small",type:"warning",plain:""},on:{click:t.handleEraseClick}},[t._v("注销账号")]),a("div",{staticClass:"m-feedback-faq"},[t._m(0),t._l(t.faq.menus,(function(e){return a("div",{key:e.link,staticClass:"u-list"},[a("a",{staticClass:"u-item",attrs:{href:e.link}},[t._v(t._s(e.label))])])}))],2)],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-question"}),t._v(" FAQ")])}],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-add-feedback"},[a("div",{staticClass:"type-box"},[a("div",{staticClass:"type-box-item"},[a("span",{staticClass:"u-label"},[t._v("来源：")]),a("el-select",{attrs:{placeholder:"请选择问题来源",size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.types,(function(t,e){return a("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1),a("div",{staticClass:"type-box-item"},[a("span",{staticClass:"u-label"},[t._v("类别：")]),a("el-select",{attrs:{placeholder:"请选择问题类别",size:"small"},model:{value:t.form.subtype,callback:function(e){t.$set(t.form,"subtype",e)},expression:"form.subtype"}},t._l(t.subtypes,(function(t,e){return a("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1)]),a("div",{staticClass:"m-content"},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"输入反馈内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("div",{staticClass:"m-feedback-actions"},[a("div",{staticClass:"m-feedback-attachment"},[a("el-upload",{ref:"upload",staticClass:"u-upload avatar-uploader",attrs:{action:t.url,"list-type":"picture-card","on-remove":t.remove,"on-success":t.done,"on-error":t.fail,"on-exceed":t.exceed,"before-upload":t.beforeUpload,limit:t.max,title:"上传图片","with-credentials":"",accept:"image/jpg, image/jpeg, image/gif, image/png, image/bmp",size:"small",multiple:""}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"m-feedback-visible"},[a("span",{staticClass:"u-label"},[t._v("是否公开：")]),a("el-checkbox",{staticClass:"u-checkbox",attrs:{"true-label":1,"false-label":0},model:{value:t.form.public,callback:function(e){t.$set(t.form,"public",e)},expression:"form.public"}})],1),a("div",{staticClass:"m-feedback-btn"},[a("el-button",{staticClass:"u-submit",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:!t.canSubmit,loading:t.loading},on:{click:t.submit}},[t._v("提交")])],1)])])},i=[],o=a("5530");function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function c(t){if(Array.isArray(t))return l(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function u(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}a("fb6a"),a("b0c0"),a("ac1f"),a("00b4");function f(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}a("d9e2");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){return c(t)||u(t)||f(t)||d()}a("a9e3"),a("99af"),a("4de4");var m=a("4437"),b=a("65c2"),g=a("b4fa"),h=b["__cms"],v=h+"api/cms/upload",y={name:"AddFeedback",props:{max:{type:Number,default:6}},data:function(){return{types:m["e"],subtypes:m["d"],form:{type:"",subtype:"",content:"",public:0},url:v,imgs:[],loading:!1}},computed:{canSubmit:function(){return this.form.type&&this.form.subtype&&this.form.content},client:function(){return this.$store.state.client},refer:function(){var t,e;return null!==(t=this.$route.query)&&void 0!==t&&t.refer?decodeURIComponent(null===(e=this.$route.query)||void 0===e?void 0:e.refer):""}},methods:{beforeUpload:function(t){console.log(t);var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type||"image/bmp"===t.type;if(!e)return this.$message.error("上传图片只能是 JPG/PNG/GIF/BMP 格式!"),!1},done:function(t){console.log(t),this.imgs=[].concat(p(this.imgs),[t.data[0]])},fail:function(t){try{var e=JSON.parse(t.message);this.$message.error("[".concat(e.code,"]").concat(e.msg))}catch(a){this.$message.error("网络请求异常")}},exceed:function(){this.$message.warning("上传的图片个数最多为".concat(this.max,"个"))},remove:function(t){this.imgs=this.imgs.filter((function(e){var a;return e!==(null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.data[0])}))},submit:function(){var t=this;this.loading=!0;var e=Object(o["a"])(Object(o["a"])({},this.form),{},{images:this.imgs,client:this.client});this.refer&&(e.refer=this.refer),Object(g["a"])(e).then((function(e){t.$message.success("提交成功"),t.$refs.upload.clearFiles(),t.form=t.$options.data().form,t.imgs=[]})).finally((function(){t.loading=!1}))}}},k=y,_=(a("c5ff"),a("2877")),w=Object(_["a"])(k,s,i,!1,null,"027b4590",null),C=w.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-feedback-list"},[a("el-table",{attrs:{data:t.data,"highlight-current-row":"",size:"small","row-class-name":"u-row"},on:{"row-click":t.viewFeedback}},[a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{staticClass:"u-status",style:{backgroundColor:t.statusColors[n.status]}},[t._v(t._s(t.statusMap[n.status]))])]}}])}),a("el-table-column",{attrs:{label:"客户端",prop:"client"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{staticClass:"u-client",class:"i-client-"+n.client},[t._v(t._s(t.formatClient(n.client)))])]}}])}),a("el-table-column",{attrs:{label:"来源",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.types[a.type])+" ")]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"subtype"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.subtypes[a.subtype])+" ")]}}])}),a("el-table-column",{attrs:{label:"提交时间",prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.formatTime(a.created_at))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleView(n)}}},[t._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.currentChange}})],1)},O=[],j=a("c7eb"),$=a("1da1"),S=a("c1df"),A=a.n(S),D={name:"FeedbackList",data:function(){return{data:[],loading:!1,page:1,per:10,total:0,types:m["e"],subtypes:m["d"],statusMap:m["c"],statusColors:m["b"]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;return Object($["a"])(Object(j["a"])().mark((function e(){var a,n;return Object(j["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={pageIndex:t.page,pageSize:t.per},e.next=5,Object(g["c"])(a);case 5:n=e.sent,t.data=n.data.data.list||[],t.total=n.data.data.page.total,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()},formatTime:function(t){return A()(t).format("YYYY-MM-DD HH:mm:ss")},formatClient:function(t){var e=t||"std";return"std"===e?"重制":"缘起"},handleView:function(t){this.$router.push({name:"feedback_single",params:{id:t.id}})},currentChange:function(t){this.page=t,this.getData()},viewFeedback:function(t){this.$router.push({name:"feedback_single",params:{id:t.id}})}}},M=D,P=(a("d167"),Object(_["a"])(M,x,O,!1,null,"a6a4f2d8",null)),z=P.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-feedback-list"},[a("el-table",{attrs:{data:t.data,"highlight-current-row":"",size:"small","row-class-name":"u-row"},on:{"row-click":t.viewFeedback,"filter-change":t.filterChange}},[a("el-table-column",{attrs:{label:"状态",prop:"status","column-key":"status",filters:t.filterOptions.status,"filter-multiple":!1},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{staticClass:"u-status",style:{backgroundColor:t.statusColors[n.status]}},[t._v(t._s(t.statusMap[n.status]))])]}}])}),a("el-table-column",{attrs:{label:"客户端",prop:"client","column-key":"client",filters:t.filterOptions.client,"filter-multiple":!1},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{staticClass:"u-client",class:"i-client-"+n.client},[t._v(t._s(t.formatClient(n.client)))])]}}])}),a("el-table-column",{attrs:{label:"来源",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.types[a.type])+" ")]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"subtype"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.subtypes[a.subtype])+" ")]}}])}),a("el-table-column",{attrs:{label:"指派给"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.assign_user&&n.assign_user.length?a("div",{staticClass:"m-assign"},t._l(n.assign_user,(function(e){return a("a",{key:e.id,staticClass:"u-assign",attrs:{href:t.authorLink(e.id),target:"_blank"}},[a("img",{staticClass:"u-assign-avatar",attrs:{src:t.showAvatar(e.avatar)}}),a("span",{staticClass:"u-assign-name"},[t._v(t._s(e.display_name))])])})),0):t._e()]}}])}),a("el-table-column",{attrs:{label:"提交时间",prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.formatTime(a.created_at))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleView(n)}}},[t._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.currentChange}})],1)},F=[];function q(t){if(Array.isArray(t))return t}function I(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,r,s=[],i=!0,o=!1;try{for(a=a.call(t);!(i=(n=a.next()).done);i=!0)if(s.push(n.value),e&&s.length===e)break}catch(l){o=!0,r=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(o)throw r}}return s}}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(t,e){return q(t)||I(t,e)||f(t,e)||T()}a("159b"),a("4fad");var L=a("85e4"),N=a("c9d2"),H={name:"pendingList",props:{onlyMe:{type:Boolean,default:!0}},data:function(){return{data:[],loading:!1,page:1,per:10,total:0,filterOptions:m["a"],filters:{status:"",client:""},types:m["e"],subtypes:m["d"],statusMap:m["c"],statusColors:m["b"]}},mounted:function(){this.getData()},computed:{user:function(){return N["a"].getInfo()}},watch:{onlyMe:function(){this.page=1,this.getData()}},methods:{showAvatar:L["showAvatar"],authorLink:L["authorLink"],getData:function(){var t=this;return Object($["a"])(Object(j["a"])().mark((function e(){var a,n;return Object(j["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a=Object(o["a"])({pageIndex:t.page,pageSize:t.per},t.filters),t.onlyMe&&(a.assign=t.user.uid),e.next=6,Object(g["d"])(a);case 6:n=e.sent,t.data=n.data.data.list||[],t.total=n.data.data.page.total,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))()},formatTime:function(t){return A()(t).format("YYYY-MM-DD HH:mm:ss")},formatClient:function(t){var e=t||"std";return"std"===e?"重制":"缘起"},handleView:function(t){this.$router.push({name:"feedback_single",params:{id:t.id}})},currentChange:function(t){this.page=t,this.getData()},viewFeedback:function(t){this.$router.push({name:"feedback_single",params:{id:t.id}})},filterChange:function(t){var e=this;Object.entries(t).forEach((function(t){var a=Y(t,2),n=a[0],r=a[1];e.filters[n]=r.length?r[0]:""})),this.getData()}}},J=H,U=(a("300e"),Object(_["a"])(J,E,F,!1,null,"6e2d167c",null)),V=U.exports,G=a("cc9a"),Q={name:"FeedbackIndex",components:{add:C,list:z,pending:V},data:function(){return{active:"submit",faq:{},onlyMe:!0}},computed:{isTeammate:function(){return this.$store.state.isTeammate}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){this.active=t.tab||"submit"}},active:function(t){this.$router.push({path:this.$route.path,query:{tab:t}})}},mounted:function(){this.getFAQ()},methods:{handleEraseClick:function(){this.$router.push({name:"feedback_erase"})},getFAQ:function(){var t=this;Object(G["c"])({names:["feedback_faq"]}).then((function(e){t.faq=e.feedback_faq}))}}},R=Q,B=(a("25d3"),Object(_["a"])(R,n,r,!1,null,"0a92a8c9",null));e["default"]=B.exports},4919:function(t,e,a){},"4fad":function(t,e,a){var n=a("23e7"),r=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return r(t)}})},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"6f53":function(t,e,a){var n=a("83ab"),r=a("e330"),s=a("df75"),i=a("fc6a"),o=a("d1e7").f,l=r(o),c=r([].push),u=function(t){return function(e){var a,r=i(e),o=s(r),u=o.length,f=0,d=[];while(u>f)a=o[f++],n&&!l(r,a)||c(d,t?[a,r[a]]:r[a]);return d}};t.exports={entries:u(!0),values:u(!1)}},a630:function(t,e,a){var n=a("23e7"),r=a("4df4"),s=a("1c7e"),i=!s((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:r})},ba05:function(t,e,a){},c5ff:function(t,e,a){"use strict";a("4919")},d167:function(t,e,a){"use strict";a("d4ba")},d4ba:function(t,e,a){},dbb4:function(t,e,a){var n=a("23e7"),r=a("83ab"),s=a("56ef"),i=a("fc6a"),o=a("06cf"),l=a("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,a,n=i(t),r=o.f,c=s(n),u={},f=0;while(c.length>f)a=r(n,e=c[f++]),void 0!==a&&l(u,e,a);return u}})},e439:function(t,e,a){var n=a("23e7"),r=a("d039"),s=a("fc6a"),i=a("06cf").f,o=a("83ab"),l=r((function(){i(1)})),c=!o||l;n({target:"Object",stat:!0,forced:c,sham:!o},{getOwnPropertyDescriptor:function(t,e){return i(s(t),e)}})}}]);
//# sourceMappingURL=chunk-34139334.bf5fe76c.js.map