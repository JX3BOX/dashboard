(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e728a22"],{"337f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-dashboard-card m-credit"},[t._m(0),a("el-tabs",{attrs:{type:"border-card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"一卡通",name:"card"}},[t.list.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:t.list,"show-header":""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("seasun_ykt"==e.row.type?"金山一卡通":"其他"))]}}],null,!1,520693853)}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.subtypes[e.row.subtype]))]}}],null,!1,640011560)}),a("el-table-column",{attrs:{label:"面额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.count))]}}],null,!1,1801049342)}),a("el-table-column",{attrs:{label:"卡密","min-width":"330"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"u-card"},[a("div",{staticClass:"u-count"},[a("div",{staticClass:"u-line"},[a("span",[t._v("卡号："+t._s(e.row.code||"****************")+" ")]),e.row.code?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+e.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制卡号")]):t._e()],1),a("div",{staticClass:"u-line"},[a("span",[t._v("卡密："+t._s(e.row.key||"****************"))]),e.row.key?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+e.row.key,expression:"'' + scope.row.key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制密码")]):t._e()],1)]),e.row.code?t._e():a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return t.toCard(e.$index,e.row)}}},[t._v("点击查看")])],1)]}}],null,!1,3090724145)}),a("el-table-column",{attrs:{label:"过期时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expire_at||"-"))]}}],null,!1,1956959273)}),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200"}})],1):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有获得卡密",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1),a("el-tab-pane",{attrs:{label:"激活码",name:"code"}},[t.list.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:t.list,"show-header":"","cell-class-name":"u-table-cell","header-cell-class-name":"u-header-cell"}},[a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.types[e.row.type]))]}}],null,!1,2973790184)}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.subtypes[e.row.subtype]))]}}],null,!1,640011560)}),a("el-table-column",{attrs:{label:"激活码","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"u-code"},[a("span",{staticClass:"u-txt"},[t._v(t._s(e.row.code||"****************"))]),e.row.code?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+e.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[t._v("复制")]):a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return t.toCode(e.$index,e.row)}}},[t._v("点击查看")])],1)]}}],null,!1,327869754)}),a("el-table-column",{attrs:{label:"过期时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expire_at||"-"))]}}],null,!1,1956959273)}),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"300"}})],1):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有获得激活码",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-bank-card"}),t._v(" 我的卡密")])}],r=(a("d3b7"),a("41cb"));function s(t){return Object(r["e"])().get("/api/my/codekeycode/history",{params:t})}function l(t){return Object(r["e"])().get("/api/my/codesn/history",{params:t})}function i(t,e){return Object(r["e"])().post("/api/my/codesn/".concat(t,"/activation-code"),e)}function c(t,e){return Object(r["e"])().post("/api/my/codekeycode/".concat(t,"/activation-code"),e)}var u={name:"card",data:function(){return{loading:!1,per:10,page:1,total:0,tab:"card",list:[],types:{tf:"体服激活码",game:"游戏内激活码"},subtypes:{jdt_tf:"百强体服激活码",point_lottery:"积分抽奖",boxcoin:"盒币兑换"}}},computed:{params:function(){return{pageIndex:this.page,pageSize:this.per}}},watch:{tab:function(t){this.list=[],this.page=1,this.loadData(t),this.$router.push({name:"card",query:{tab:t}})},params:function(){this.loadData()}},methods:{loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tab;"card"==t?this.loadCard():this.LoadCode()},loadCard:function(){var t=this;this.loading=!0,s(this.params).then((function(e){t.list=e.data.data.list,t.total=e.data.data.page.total})).finally((function(){t.loading=!1}))},LoadCode:function(){var t=this;this.loading=!0,l(this.params).then((function(e){t.list=e.data.data.list,t.total=e.data.data.page.total})).finally((function(){t.loading=!1}))},toCard:function(t,e){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(o){var n=o.value;c(e.id,{password:n}).then((function(o){console.log(o);var n=o.data.data,r=n.code,s=n.key;e.code=r,e.key=s,a.$set(a.list,t,e)}))}))},toCode:function(t,e){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(o){var n=o.value;i(e.id,{password:n}).then((function(o){e.code=o.data.data.sn,a.$set(a.list,t,e)}))}))},onCopy:function(t){this.$notify({title:"复制成功",message:"复制内容 : "+t.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})}},mounted:function(){this.$route.query.tab&&(this.tab=this.$route.query.tab),this.loadData()}},p=u,d=(a("fc8d"),a("2877")),b=Object(d["a"])(p,o,n,!1,null,null,null);e["default"]=b.exports},"551b":function(t,e,a){},fc8d:function(t,e,a){"use strict";a("551b")}}]);
//# sourceMappingURL=chunk-3e728a22.e05ab98c.js.map