{"version":3,"sources":["webpack:///./src/service/profile.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/frame.vue?8719","webpack:///src/views/frame.vue","webpack:///./src/views/frame.vue?a5ed","webpack:///./src/views/frame.vue","webpack:///./src/service/decoration.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/views/frame.vue?3dfe","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["$server","$_https","proxy","getProfile","$cms","get","updateProfile","data","put","updateAvatar","uploadAvatar","post","getFrames","url","__imgPath","axios","getUserOverview","uid","updatePassword","checkEmailStatus","checkEmailAvailable","email","params","user_email","sendBindEmail","sendVerifyEmail","checkOAuth","unbindOAuth","type","popType","delete","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tabList","scopedSlots","_u","fn","_v","showAvatar","avatar","frameUrl","frame","_e","_l","item","slot","_s","desc","postscript","class","setClass","on","$event","setAvatar","name","updateAvatarFrame","reset","staticRenderFns","props","frameList","framebak","framesBak","frames","avatars","decoration","computed","methods","user_avatar_frame","user_avatar","message","val","using","setDecoration","receiveFrame","receive","load","loadDecoration","getDecoration","formattingData","arr","group_key","map","decorationAather","dataProcessing","firstRes","isHave","twoRes","threeRes","mounted","components","uc","component","getDecorationJson","getEmotion","__dataPath","user_id","_defineProperty","obj","value","configurable","writable","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","stat","forced","it","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","sham","descriptor","O","f","result","index","undefined","nativeGetOwnPropertyDescriptor","FORCED"],"mappings":"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","file":"js/chunk-28e532ce.1dc7d68c.js","sourcesContent":["import { $cms,$_https } from \"@jx3box/jx3box-common/js/https.js\";\n\nimport axios from 'axios'\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\n\nconst $server = $_https('server', {\n    proxy: false,\n})\n\n// 1.资料\n// -------------------------------\nfunction getProfile() {\n    return $cms().get(\"/api/cms/user/my/profile\");\n}\nfunction updateProfile(data) {\n    return $cms().put(\"/api/cms/user/my/profile\", data);\n}\n\n// 2.头像\n// -------------------------------\nfunction updateAvatar(data) {\n    return $cms().put(\"/api/cms/user/my/avatar\", data);\n}\nfunction uploadAvatar(data) {\n    return $cms().post(\"/api/cms/upload/avatar\", data);\n}\nfunction getFrames() {\n    // let url = process.env.NODE_ENV == 'development'?'/temp/user_avatar_frame.json':(__imgPath + \"avatar/index.json\")\n    let url = __imgPath + \"avatar/index.json\"\n    return axios.get(url)\n}\nfunction getUserOverview(uid) {\n    return $cms().get(`/api/cms/user/${uid}/info`);\n}\n\n// 3.密码\n// -------------------------------\nfunction updatePassword(data) {\n    return $server.post(\"profile/password\", data);\n}\n\n// 4.邮箱\n// -------------------------------\nfunction checkEmailStatus() {\n    return $server.get(\"profile/email/check\");\n}\n\nfunction checkEmailAvailable(email) {\n    return $server.get(\"profile/email/available\", {\n        params: {\n            user_email: email,\n        },\n    });\n}\n\nfunction sendBindEmail(data) {\n    return $server.post(\"profile/email/bind\", data);\n}\n\nfunction sendVerifyEmail() {\n    return $server.post(\"profile/email/verify\");\n}\n\n// 5.互联\nfunction checkOAuth() {\n    return $cms().get(\"/api/cms/account/oauth/status\");\n}\n\nfunction unbindOAuth(type) {\n    return $cms({\n        popType : 'alert',\n    }).delete(`/api/cms/account/oauth/unbind/${type}`);\n}\n\n\nexport {\n    updateProfile,\n    getProfile,\n    updateAvatar,\n    updatePassword,\n    sendVerifyEmail,\n    checkEmailAvailable,\n    checkEmailStatus,\n    sendBindEmail,\n    unbindOAuth,\n    checkOAuth,\n    uploadAvatar,\n    getFrames,\n    getUserOverview,\n};\n","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('uc',{staticClass:\"m-dashboard-frame m-dashboard-skin\",attrs:{\"icon\":\"el-icon-brush\",\"title\":\"主题装扮\",\"tab-list\":_vm.tabList},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('a',{staticClass:\"u-link el-button el-button--default el-button--mini is-round is-plain\",attrs:{\"href\":\"/vip/mall/?type=virtual\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\" 前往获取装扮\")])]},proxy:true}])},[_c('div',{staticClass:\"m-frame\"},[_c('div',{staticClass:\"m-frame-left\"},[_c('a',{staticClass:\"u-btn el-button el-button--default el-button--mini is-plain\",attrs:{\"href\":\"/dashboard/avatar\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-picture-outline-round\"}),_vm._v(\" 修改头像\")]),_c('div',{staticClass:\"u-avatar-box\"},[_c('div',{staticClass:\"u-avatar\"},[_c('img',{staticClass:\"u-avatar-pic\",attrs:{\"src\":_vm.showAvatar(_vm.avatar)}}),(_vm.frame)?_c('i',{staticClass:\"u-avatar-frame\"},[_c('img',{attrs:{\"src\":_vm.frameUrl(_vm.frame)}})]):_vm._e()])])]),_c('div',{staticClass:\"m-frame-right\"},[_c('div',{staticClass:\"u-theme\"},[_c('div',{staticClass:\"u-frame-list\"},[_c('div',{staticClass:\"u-title\"},[_c('span',{staticClass:\"u-name\"},[_c('i',{staticClass:\"el-icon-collection-tag\"}),_vm._v(\"头像框\")]),_c('a',{staticClass:\"u-buy\",attrs:{\"href\":\"/vip/mall/?type=virtual&subtype=avatar\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\" 前往获取\")])]),_c('div',{staticClass:\"u-frame-item\"},_vm._l((_vm.frameList),function(item,i){return _c('div',{key:i,staticClass:\"u-picbox\",attrs:{\"title\":\"xxx\"}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"placement\":\"top\",\"open-delay\":200}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_vm._v(_vm._s(item.desc)),_c('br'),_vm._v(_vm._s(item.postscript))]),_c('div',{staticClass:\"u-pic\",class:_vm.setClass(item),on:{\"click\":function($event){return _vm.setAvatar(item)}}},[(item.name)?_c('el-image',{attrs:{\"src\":_vm.frameUrl(item.name),\"fit\":\"contain\"}}):_c('div',{staticClass:\"u-noFrame\"})],1)])],1)}),0)])])])]),_c('div',{staticClass:\"m-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateAvatarFrame}},[_vm._v(\"确认\")]),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <uc class=\"m-dashboard-frame m-dashboard-skin\" icon=\"el-icon-brush\" title=\"主题装扮\" :tab-list=\"tabList\">\n        <template #header>\n            <a\n                class=\"u-link el-button el-button--default el-button--mini is-round is-plain\"\n                href=\"/vip/mall/?type=virtual\"\n                target=\"_blank\"\n                ><i class=\"el-icon-shopping-cart-2\"></i> 前往获取装扮</a\n            >\n        </template>\n        <div class=\"m-frame\">\n            <!-- 左右两侧 -->\n            <div class=\"m-frame-left\">\n                <a\n                    class=\"u-btn el-button el-button--default el-button--mini is-plain\"\n                    href=\"/dashboard/avatar\"\n                    target=\"_blank\"\n                    ><i class=\"el-icon-picture-outline-round\"></i> 修改头像</a\n                >\n                <div class=\"u-avatar-box\">\n                    <div class=\"u-avatar\">\n                        <img :src=\"showAvatar(avatar)\" class=\"u-avatar-pic\" />\n                        <i class=\"u-avatar-frame\" v-if=\"frame\">\n                            <img :src=\"frameUrl(frame)\" />\n                        </i>\n                    </div>\n                </div>\n            </div>\n            <div class=\"m-frame-right\">\n                <!-- <div class=\"u-no-theme\" :class=\"decorationActivate==null?'select':''\" @click=\"noSet\">不设置主题</div> -->\n                <!-- 主题渲染列表 -->\n                <div class=\"u-theme\">\n                    <div class=\"u-frame-list\">\n                        <div class=\"u-title\">\n                            <span class=\"u-name\"><i class=\"el-icon-collection-tag\"></i>头像框</span>\n                            <a class=\"u-buy\" :href=\"`/vip/mall/?type=virtual&subtype=avatar`\" target=\"_blank\"\n                                ><i class=\"el-icon-shopping-cart-2\"></i> 前往获取</a\n                            >\n                        </div>\n                        <div class=\"u-frame-item\">\n                            <div title=\"xxx\" class=\"u-picbox\" v-for=\"(item, i) in frameList\" :key=\"i\">\n                                <el-tooltip effect=\"dark\" placement=\"top\" :open-delay=\"200\">\n                                    <div slot=\"content\">{{ item.desc }}<br />{{ item.postscript }}</div>\n                                    <div class=\"u-pic\" :class=\"setClass(item)\" @click=\"setAvatar(item)\">\n                                        <el-image :src=\"frameUrl(item.name)\" fit=\"contain\" v-if=\"item.name\" />\n                                        <div v-else class=\"u-noFrame\"></div>\n                                    </div>\n                                </el-tooltip>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"m-btn\">\n            <el-button type=\"primary\" @click=\"updateAvatarFrame\">确认</el-button>\n            <el-button @click=\"reset\">重置</el-button>\n        </div>\n    </uc>\n</template>\n\n<script>\nimport uc from \"@/components/uc.vue\";\nimport { themeTab } from \"@/assets/data/tabs.json\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { showAvatar } from \"@jx3box/jx3box-common/js/utils\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { updateAvatar, getFrames, getUserOverview } from \"@/service/profile\";\nimport { getDecoration, receive, setDecoration } from \"@/service/decoration\";\nimport { cloneDeep } from \"lodash\";\n// import frames from \"@jx3box/jx3box-common/data/user_avatar_frame.json\";\nexport default {\n    name: \"frame\",\n    props: [],\n    data: function () {\n        return {\n            tabList: themeTab,\n            uid: User.getInfo().uid,\n            frameList: [],\n            //头像框备份\n            framebak: \"\",\n            framesBak: {},\n            // 数据\n            avatar: User.getInfo().avatar_origin,\n            frame: null,\n            frames: {}, //远程json\n            avatars: [], //头像筛选\n            decoration: null, //装扮筛选用于判断是否符合领取条件\n        };\n    },\n    computed: {},\n    methods: {\n        reset() {\n            this.frame = this.framebak;\n            this.frames = this.framesBak;\n            this.dataProcessing();\n        },\n        frameUrl: function (name) {\n            if (!name) return;\n            return __imgPath + `avatar/images/${name}/${name}.svg`;\n        },\n        showAvatar: function (val) {\n            return showAvatar(val, 200 * 3);\n        },\n        setClass(item) {\n            if (item.decoration && item.receive) return \"receive\";\n            if (!item.isHave) return \"noHave\";\n            if (item.using) return \"select\";\n        },\n        updateAvatarFrame() {\n            updateAvatar({ user_avatar_frame: this.frame, user_avatar: this.avatar }).then((res) => {\n                this.$message({\n                    message: \"头像框更新成功\",\n                    type: \"success\",\n                });\n                const params = this.frameList.map((item) => {\n                    return { val: item.name, using: item.using, type: \"avatar\" };\n                });\n                setDecoration(params);\n            });\n        },\n        receiveFrame(type) {\n            receive(this.uid, type).then((data) => {\n                this.$message({\n                    message: \"领取成功\",\n                    type: \"success\",\n                });\n                this.loadDecoration();\n            });\n        },\n        setAvatar(item) {\n            //如果receive则走领取\n            if (item.decoration && item.receive) {\n                //先走领取完事重载状态\n                this.receiveFrame(item.name);\n                return;\n            }\n            if (!item.isHave) return;\n            let list = this.frameList;\n            let find = list.find((e) => e.using == 1);\n            if (find) find.using = 0;\n            item.using == 1 ? (item.using = 0) : (item.using = 1);\n            this.frame = item.name;\n        },\n        load: function () {\n            getUserOverview(this.uid).then((res) => {\n                this.frame = res.data.data.user_avatar_frame || \"\";\n                this.framebak = res.data.data.user_avatar_frame || \"\";\n            });\n            getFrames().then((res) => {\n                this.frames = res.data;\n                this.framesBak = res.data;\n                this.loadDecoration();\n            });\n        },\n        loadDecoration() {\n            getDecoration().then((data) => {\n                let res = data.data.data;\n                let typeArr = [\"atcard\", \"homebg\", \"sidebar\", \"calendar\"];\n                let arr = res.filter((item) => item.type != \"\" && typeArr.indexOf(item.type) != -1);\n                this.decoration = this.formattingData(arr, \"val\");\n                this.avatars = res.filter((e) => e.type == \"avatar\");\n                this.dataProcessing();\n            });\n        },\n        formattingData(arr, group_key) {\n            let map = {};\n            arr.forEach((item, i) => {\n                if (!map[item[group_key]]) {\n                    map[item[group_key]] = [item];\n                } else {\n                    map[item[group_key]].push(item);\n                }\n            });\n            return map;\n        },\n        //装扮收集判断\n        decorationAather(key) {\n            let typeArr = [\"atcard\", \"homebg\", \"sidebar\", \"calendar\"];\n            let arr = this.decoration[key]?.filter((item) => item.type != \"\" && typeArr.indexOf(item.type) != -1);\n            if (arr?.length >= 4) return true;\n            return false;\n        },\n        dataProcessing() {\n            let avatars = this.avatars || [],\n                frames = this.frames,\n                firstRes = [{ desc: \"无边框\", name: \"\", val: \"\", isHave: 1, using: 1 }],\n                twoRes = [],\n                threeRes = [];\n            Object.keys(frames).forEach((key, i) => {\n                let item = { ...frames[key], ...{ isHave: 0, using: 0, receive: false } };\n                let find = avatars.find((e) => e.val == key);\n                if (find) {\n                    item.using = find.using;\n                    item.isHave = 1;\n                    if (item.using) {\n                        firstRes[0].using = 0;\n                    }\n                } else {\n                    if (item.decoration) {\n                        item.receive = this.decorationAather(item.name);\n                    }\n                }\n\n                if (item.isHave) {\n                    firstRes.push(item);\n                } else if (item.decoration) {\n                    twoRes.push(item);\n                } else {\n                    threeRes.push(item);\n                }\n            });\n            this.frameList = [...firstRes, ...twoRes, ...threeRes];\n        },\n    },\n    mounted: function () {\n        this.load();\n    },\n    components: {\n        uc,\n    },\n};\n</script>\n<style lang=\"less\">\n@import \"../assets/css/frame.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./frame.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./frame.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./frame.vue?vue&type=template&id=3967f886&\"\nimport script from \"./frame.vue?vue&type=script&lang=js&\"\nexport * from \"./frame.vue?vue&type=script&lang=js&\"\nimport style0 from \"./frame.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $cms } from \"@jx3box/jx3box-common/js/https.js\";\nimport axios from \"axios\";\nimport { __imgPath, __dataPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nfunction getDecoration(params) {\n    return $cms().get(`/api/cms/user/decoration`, {\n        params,\n    });\n}\nfunction setDecoration(data) {\n    return $cms().post(`/api/cms/user/decoration`, data);\n}\nfunction getDecorationJson() {\n    let url = __imgPath + \"decoration/index.json\";\n    return axios.get(url);\n}\nfunction getEmotion() {\n    return axios.get(`${__dataPath}emotion/output/catalog.json`);\n}\nfunction receive(user_id, val) {\n    return $cms().post(`/api/cms/user/decoration/check-suit/${user_id}/${val}/for/avatar`);\n}\nexport { getDecoration, setDecoration, getDecorationJson, getEmotion, receive };\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./frame.vue?vue&type=style&index=0&lang=less&\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}