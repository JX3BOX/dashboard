(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c60e4cd"],{"46e8":function(e,t,r){"use strict";r.d(t,"g",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"m",(function(){return o})),r.d(t,"o",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"l",(function(){return l})),r.d(t,"n",(function(){return h})),r.d(t,"i",(function(){return b})),r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"h",(function(){return d})),r.d(t,"k",(function(){return p})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return g})),r.d(t,"j",(function(){return _}));var n=r("2777"),i=r("64c7");function s(e){return n["a"].get(i["__server"]+"user/info",{params:{uid:e}})}function a(e){return n["a"].get(i["__server"]+"dashboard/nickname/check",{params:{name:e}})}function o(e){return n["a"].post(i["__server"]+"dashboard/nickname/update",{name:e})}function c(e){return n["a"].post(i["__server"]+"dashboard/profile/update",e)}function u(){return n["a"].get(i["__server"]+"user/profile").then((function(e){return e.data.data}))}function l(e){return n["a"].post(i["__server"]+"dashboard/avatar/update",e)}function h(e){return n["a"].post(i["__server"]+"dashboard/password/update",e)}function m(e){return n["a"].get(i["__server"]+"dashboard/email/check",{params:{uid:e}})}function f(e){return n["a"].get(i["__server"]+"account/has",{params:{user_login:e}})}function d(e){return n["a"].post(i["__server"]+"dashboard/email/bind",e)}function b(e){return n["a"].get(i["__server"]+"dashboard/email/verify",{params:{uid:e}})}function p(e){return n["a"].post(i["__server"]+"dashboard/oauth/unbind",e)}function v(e){return n["a"].post(i["__server"]+"dashboard/oauth/check",e)}function g(){return n["a"].get(i["__server"]+"dashboard/config")}function _(e){return n["a"].post(i["__server"]+"dashboard/config",e)}},"498a":function(e,t,r){"use strict";var n=r("23e7"),i=r("58a8").trim,s=r("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),i=r("5899"),s="["+i+"]",a=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(a,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},5928:function(e,t,r){},9756:function(e){e.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒","凌雪藏锋","风月同天","江湖故人","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},b3b1:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-dashboard-profile"},[r("el-form",{ref:"form",staticClass:"m-profile-name",attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{staticClass:"u-name",attrs:{label:"昵称"}},[r("div",{staticClass:"u-value"},[e._v(" "+e._s(e.name)+" "),r("el-button",{staticClass:"u-edit",attrs:{disabled:e.renaming,title:"修改昵称",type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:e.startChangeName}},[e._v("修改昵称")])],1)]),r("el-dialog",{attrs:{title:"昵称修改",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-alert",{staticClass:"u-tip",attrs:{title:"昵称将作为唯一识别符，默认只能修改1次，请谨慎操作",description:"昵称中请勿使用任何符号、空格等特殊字符，否则云端宏/数据订阅号将无法加载",type:"warning","show-icon":""}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.renaming,expression:"renaming"}],staticClass:"u-rename"},[r("el-input",{staticClass:"u-rename-input",attrs:{minlength:"2",maxlength:"12","show-word-limit":""},on:{change:e.check},model:{value:e.rename,callback:function(t){e.rename=t},expression:"rename"}}),r("i",{directives:[{name:"show",rawName:"v-show",value:e.checkname,expression:"checkname"}],staticClass:"el-icon-success el-icons-status"}),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:!e.checkname,expression:"!checkname"}],attrs:{title:"昵称已被使用",type:"error","show-icon":""}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.endChangeName}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:e.renaming&&!e.checkname},on:{click:e.submitChangeName}},[e._v("确 定")])],1)],1),r("el-form-item",{staticClass:"u-name",attrs:{label:"服务器"}},[r("el-select",{staticClass:"u-server",attrs:{filterable:"",placeholder:"请输入服务器"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},e._l(e.servers,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"u-name",attrs:{label:"签名"}},[r("el-input",{attrs:{type:"textarea",rows:4,maxlength:"80",placeholder:"签名内容","show-word-limit":""},model:{value:e.rebio,callback:function(t){e.rebio=t},expression:"rebio"}})],1),r("el-form-item",{staticClass:"u-btns",attrs:{label:""}},[r("el-button",{staticClass:"u-submit",attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.submitChangeProfile}},[e._v("提交")])],1)],1)],1)},i=[],s=(r("b0c0"),r("498a"),r("ee8f")),a=r("46e8"),o=r("bd13"),c=r("9756"),u={name:"profile",props:[],data:function(){return{name:"",rename:"",renaming:!1,checkname:!0,bio:"",rebio:"",server:"",servers:c,dialogVisible:!1}},computed:{},methods:{startChangeName:function(){this.renaming=!0,this.dialogVisible=!0},check:function(){var e=this;this.rename=this.rename.trim(),this.rename<2||this.rename.length>12?this.$message.error("昵称长度限制为2~12个字符"):(this.rename=Object(o["a"])(this.rename).kill(),this.rename=Object(o["a"])(this.rename).removeSpace(),Object(a["c"])(this.rename).then((function(t){e.checkname=!0})).catch((function(t){e.checkname=!1})))},submitChangeName:function(){var e=this;this.checkname?this.$alert("确定修改为 ".concat(this.rename," 吗"),"消息",{confirmButtonText:"确定",callback:function(t){"confirm"==t&&Object(a["m"])(e.rename).then((function(t){e.name=e.rename,s["User"].refresh("name",e.rename),e.$message({message:"资料修改成功",type:"success"}),e.renaming=!1,e.dialogVisible=!1}))}}):this.$alert("昵称不合法","提交失败",{confirmButtonText:"确定",callback:function(t){e.$message.error("用户名已被使用或包含禁用字符")}})},endChangeName:function(){this.renaming=!1,this.rename=this.name,this.rebio=this.bio,this.dialogVisible=!1},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitChangeProfile:function(){var e=this,t={bio:this.rebio,server:this.server};Object(a["o"])(t).then((function(t){e.bio=e.rebio,s["User"].refresh("bio",e.rebio),e.$message({message:"资料修改成功",type:"success"})}))},getUserProfile:function(){var e=this;Object(a["f"])().then((function(t){e.server=t.server}))}},mounted:function(){this.name=this.rename=s["User"].getInfo().name,this.bio=this.rebio=s["User"].getInfo().bio,this.getUserProfile()}},l=u,h=(r("bfc8"),r("2877")),m=Object(h["a"])(l,n,i,!1,null,null,null);t["default"]=m.exports},bd13:function(e,t,r){"use strict";function n(e){var t=Object.prototype.toString.call(e);return t.match(/\[object (.*?)\]/)[1].toLowerCase()}r.d(t,"a",(function(){return a}));var i=n;class s{constructor(e,t){if("string"!==i(e))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=e,this._str=e,this._chain=t}toString(){return this._str}_detected(e){let t=i(e),r=["string","array","set"];if(!r.includes(t))throw new Error("[Sterilizer::remove] params should be string|array|set");return e}_sterilize(e){e=[...e].join("");let t=new RegExp(`[${e}]`,"gm");return this._str=this._str.replace(t,""),this._chain?this:this.toString()}kill(e){let t=null;if(void 0==e)t=new Set(this.regs);else{this._detected(e),t=new Set;let r=new Set(e);for(let e of r)this.symbols.includes(e)&&t.add(this._symbols[e])}return this._sterilize(t)}live(e){this._detected(e);let t=new Set(this.regs);for(let r of e)this.symbols.includes(r)&&t.delete(this._symbols[r]);return this._sterilize(t)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this._chain?this:this.toString()}remove(e,t){let r=new RegExp(""+e,"gm");return t=void 0!==t?t:"",this._str=this._str.replace(r,t),this._chain?this:this.toString()}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this._chain?this:this.toString()}}function a(e,t=!1){return new s(e,t)}},bfc8:function(e,t,r){"use strict";var n=r("5928"),i=r.n(n);i.a},c8d2:function(e,t,r){var n=r("d039"),i=r("5899"),s="​᠎";e.exports=function(e){return n((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-4c60e4cd.6fcb2324.js.map