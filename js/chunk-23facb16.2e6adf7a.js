(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23facb16"],{"1a3b":function(t,e,n){"use strict";n("d499")},"4ec9":function(t,e,n){"use strict";n("6f48")},"6f48":function(t,e,n){"use strict";var a=n("6d61"),i=n("6566");a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},a83c:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-theme m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-theme-box"},[e("div",{staticClass:"m-theme-left"},[e("div",{staticClass:"u-top"},[t.previewUrl?e("img",{staticClass:"u-img",attrs:{src:t.previewUrl,fit:"contain"}}):e("div",{staticClass:"u-no-preview"},[t._v(" 暂 无"),e("br"),t._v(" 预 览 ")])]),e("div",{staticClass:"u-bottom"},t._l(t.themeType,(function(n,a){return e("div",{key:a,staticClass:"u-type-box"},[t.isStatus(n)?e("img",{staticClass:"u-img",attrs:{src:t.getActiveImg(n),fit:"contain"},on:{click:function(e){return t.preview(n)}}}):n.statue?e("div",{staticClass:"u-no-select"},[t._v(" 暂 无"),e("br"),t._v(" 设 置 ")]):e("div",{staticClass:"u-no-select"},[t._v(" 敬 请"),e("br"),t._v(" 期 待 ")]),e("div",{staticClass:"u-title"},[t._v(t._s(n.name))])])})),0)]),e("div",{staticClass:"m-theme-right"},[e("div",{staticClass:"u-theme"},t._l(t.decoration,(function(n,a){return e("div",{key:a+n.val,staticClass:"u-decoration-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" "+t._s(n.name))]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=skin&search=".concat(n.name),target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-decoration-item"},t._l(n.list,(function(n,i){return e("div",{key:"c"+i,staticClass:"u-picbox",attrs:{title:n.name}},[e("div",{staticClass:"u-pic",class:n.isHave?n.using?"select":"":"noHave",on:{click:function(e){return t.setStatus(a,i,n)}}},[e("el-image",{attrs:{src:t._f("showDecoration")(n),fit:"contain"}})],1),e("div",{staticClass:"u-decoration-name"},[t._v(t._s(n.text))])])})),0)])})),0)])]),e("div",{staticClass:"u-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.decorationSubmit}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],c=n("ade3"),o=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("4e82"),n("e9c4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("b547")),s=n("aa38"),r=n("c9d2"),u=n("65c2"),l=n("2ef0"),d=n("46c1"),f={name:"theme",props:[],data:function(){return{tabList:d["e"],uid:r["a"].getInfo().uid,themeType:[{name:"个人名片",type:"atcard",statue:1},{name:"主页风格",type:"homebg",statue:1},{name:"侧栏主题",type:"sidebar",statue:1},{name:"首页日历",type:"calendar",statue:1},{name:"评论皮肤",type:"comment",statue:1}],previewUrl:"",decoration:[],decorationJson:[],originalActivateName:null,back:{}}},computed:{},methods:{reset:function(){var t=Object(l["cloneDeep"])(this.back);this.previewUrl="",this.decoration=t.decoration,this.originalActivateName=t.originalActivateName},loadDecoration:function(){var t=this;Object(s["c"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(s["b"])().then((function(e){var n=["atcard","homebg","sidebar","calendar","comment"],a=e.data.data.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));t.decoration=t.formattingData(a,"val"),t.back.decoration=Object(l["cloneDeep"])(t.decoration),t.back.originalActivateName=Object(l["cloneDeep"])(t.originalActivateName)}))}))},formattingData:function(t,e){var n=this,a={},i=[],o=[],s=[{type:"atcard",text:"个人名片",sort:1,isHave:0,using:0},{type:"homebg",text:"主页风格",sort:2,isHave:0,using:0},{type:"sidebar",text:"侧栏主题",sort:3,isHave:0,using:0},{type:"calendar",text:"首页日历",sort:4,isHave:0,using:0},{type:"comment",text:"评论皮肤",sort:5,isHave:0,using:0}];t.forEach((function(t,i){var c=s.find((function(e){return e.type==t.type}));c&&(t.sort=c.sort,a[t[e]]?a[t[e]].push(t):a[t[e]]=[t],t.using&&(n.originalActivateName=t[e]))}));var r=function(t){return function(e,n){return e[t]-n[t]}},u=function(t,e,n){var a=new Map,i=[],c=Object(l["cloneDeep"])(s),r=t.filter((function(t){return!a.has(t[e])&&a.set(t[e],1)}));return c.forEach((function(t,e){if(t.val=n,-1===o.indexOf(n)){var a=r.find((function(e){return e.type==t.type}));a&&(t.isHave=1,t.using=a.using)}i.push(t)})),i},d=Object(l["cloneDeep"])(this.decorationJson);return Object.keys(d).forEach((function(t,e){if(!a[t]&&1==d[t].status){o.push(t);var n=Object(l["cloneDeep"])(s),i=[];n.forEach((function(e){e.val=t,i.push(e)})),a[t]=i}})),Object.keys(a).forEach((function(t,n){var o;i.push(Object(c["a"])(Object(c["a"])(Object(c["a"])({},e,t),"name",null===(o=d[t])||void 0===o?void 0:o.desc),"list",u(a[t],"type",t).sort(r("sort"))))})),i},setStatus:function(t,e,n){var a=this;if(n.isHave){var i=n.type,c=n.val;this.decoration.forEach((function(t,e){var n=t.list;n.forEach((function(t,n){t.val!=c&&t.type==i&&1==t.using&&(a.decoration[e].list[n].using=0)}))})),1==n.using?n.using=0:n.using=1}},isStatus:function(t){var e=t.type,n=!1,a=Object(l["flatten"])(this.decoration.map((function(t){return t.list})));return a.forEach((function(t){t.type==e&&1==t.using&&(n=!0)})),!!n},preview:function(t){this.previewUrl=this.getActiveImg(t)},getActiveImg:function(t){var e=t.type,n=void 0,a=Object(l["flatten"])(this.decoration.map((function(t){return t.list})));a.forEach((function(t){t.type==e&&1==t.using&&(n=t.val)}));var i="https://cdn.jx3box.com/static/dashboard/img/no.5fe91973.svg";return n?u["__imgPath"]+"decoration/images/".concat(n,"/").concat(e,"_preview.png"):i},decorationSubmit:function(){var t=this,e=[],n="",a=Object(l["flatten"])(this.decoration.map((function(t){return t.list}))),i=a.map((function(t){return 1==t.using&&e.push(t.type),{val:t.val,using:t.using,type:t.type}}));Object(s["h"])(i).then((function(a){var i={name:n,type:e};n||(i.name=!1),localStorage.setItem("decoration_all",JSON.stringify(i)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))}},mounted:function(){this.loadDecoration()},filters:{showDecoration:function(t){return u["__imgPath"]+"decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")}},components:{uc:o["a"]}},v=f,p=(n("1a3b"),n("2877")),m=Object(p["a"])(v,a,i,!1,null,null,null);e["default"]=m.exports},aa38:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"h",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"a",(function(){return b}));n("99af");var a=n("41cb"),i=n("bc3a"),c=n.n(i),o=n("65c2");function s(t){return Object(a["a"])().get("/api/cms/user/decoration",{params:t})}function r(t){return Object(a["a"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return c.a.get(t)}function l(){return c.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,e){return Object(a["a"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function f(t){return Object(a["a"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return Object(a["a"])().get("/api/cms/user/config/honor")}function p(t){return Object(a["b"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function m(t){return Object(a["a"])().put("/api/cms/user/honor/use/".concat(t))}function b(){return Object(a["a"])().delete("/api/cms/user/honor/use")}},d499:function(t,e,n){}}]);
//# sourceMappingURL=chunk-23facb16.2e6adf7a.js.map