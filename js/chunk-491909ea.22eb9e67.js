(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-491909ea"],{1101:function(e,t,r){"use strict";r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"n",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return c})),r.d(t,"h",(function(){return d})),r.d(t,"o",(function(){return l})),r.d(t,"p",(function(){return u})),r.d(t,"i",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"m",(function(){return f})),r.d(t,"j",(function(){return b})),r.d(t,"l",(function(){return _})),r.d(t,"k",(function(){return v})),r.d(t,"b",(function(){return h})),r.d(t,"f",(function(){return g}));r("99af");var a=r("41cb");function s(e){return Object(a["e"])().get("/api/mall/ship-address",e)}function n(e){return Object(a["e"])().post("/api/mall/ship-address",e)}function o(e,t){return Object(a["e"])().put("/api/mall/ship-address/".concat(e),t)}function i(e){return Object(a["e"])().delete("/api/mall/ship-address/".concat(e))}function c(e){return Object(a["e"])().put("/api/mall/ship-address/default/".concat(e))}function d(e){return Object(a["e"])().get("/api/mall/my/orders",{params:e})}function l(e,t){return Object(a["e"])().put("/api/mall/my/orders/".concat(e,"/bind-address/").concat(t))}function u(e,t){return Object(a["e"])().put("/api/mall/my/orders/".concat(e,"/remark"),{remark:t})}function m(e){return Object(a["e"])().get("/api/mall/my/orders/".concat(e))}function p(e){return Object(a["e"])().put("/api/mall/my/orders/".concat(e,"/cancel"))}function f(e){return Object(a["e"])().post("/api/mall/my/orders/".concat(e,"/pay"))}function _(e){return Object(a["e"])().post("/api/mall/my/orders/".concat(e,"/received"))}function b(e){return Object(a["e"])().get("/api/mall/my/virtual_goods",{params:e})}function v(e){return Object(a["e"])().post("/api/mall/goods-rate",e)}function h(e,t){return Object(a["e"])().post("/api/mall/goods-rate/".concat(e,"/append-comments"),t)}function g(e){return Object(a["e"])().delete("/api/mall/goods-rate/".concat(e))}},"2dcf":function(e,t,r){},"3ed1":function(e,t,r){},"46c1":function(e){e.exports=JSON.parse('{"c":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"b":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"email","icon":"el-icon-message","label":"邮箱设置"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"}],"a":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}]}')},b547:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-dashboard-profile m-profile"},[r("h2",{staticClass:"u-title"},[r("i",{class:e.icon}),e._v(" "+e._s(e.title)+" "),e._t("header")],2),r("tabs",{attrs:{tabs:e.tabList}}),e._t("default")],2)},s=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":e.changeTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(t){return r("el-tab-pane",{key:t.name,attrs:{name:t.name}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{class:t.icon}),e._v(" "+e._s(t.label))])])})),1)},o=[],i=(r("b0c0"),{name:"",props:{tabs:{type:Array,default:function(){return[]}}},data:function(){return{active:""}},watch:{$route:function(){this.active=this.$route.name}},computed:{},methods:{changeTab:function(){this.$router.push({name:this.active})}},mounted:function(){this.active=this.$route.name},components:{}}),c=i,d=r("2877"),l=Object(d["a"])(c,n,o,!1,null,null,null),u=l.exports,m=r("46c1"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return m["b"]}}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:u}},f=p,_=(r("bdd0"),Object(d["a"])(f,a,s,!1,null,null,null));t["a"]=_.exports},bdd0:function(e,t,r){"use strict";r("3ed1")},d222:function(e,t,r){"use strict";r("2dcf")},ed5e:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("uc",{attrs:{icon:"el-icon-shopping-bag-1",title:"订单中心",tabList:e.tabList}},[r("div",{staticClass:"m-mall-detail"},[r("div",{staticClass:"m-breadcrumb"},[r("span",{staticClass:"u-back",on:{click:e.goBack}},[r("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回")])]),e.goods?r("div",{staticClass:"m-content"},[e.goods.is_virtual?e._e():r("div",{staticClass:"m-address el-card"},[r("span",[e._v("收件人："+e._s(e.address.actual_contact))]),r("span",[e._v("联系电话："+e._s(e.address.actual_phone))]),r("span",[e._v("收货地址： "+e._s(e.address.actual_address))])]),e.goods?r("div",{staticClass:"m-order el-card"},[r("div",{staticClass:"m-img"},[e.goods.goods_images?r("img",{attrs:{src:e.goods.goods_images[0]}}):e._e(),e.goods.is_virtual?r("span",{staticClass:"u-link",on:{click:function(t){return e.openVirtual(e.goods)}}},[e._v("点击查看")]):e._e()]),r("el-descriptions",{staticClass:"m-descriptions",attrs:{title:e.goods.title,direction:"vertical",column:3,border:""}},[r("el-descriptions-item",{attrs:{label:"下单时间"}},[e._v(e._s(e.order.created_at))]),r("el-descriptions-item",{attrs:{label:"订单编号",span:2}},[e._v(e._s(e.order.order_no))]),r("el-descriptions-item",{attrs:{label:"购买数量"}},[e._v(e._s(e.order.goods_num))]),r("el-descriptions-item",{attrs:{label:"邮费"}},[e._v(" "+e._s(e.goods.postage?e.goods.postage/100+"元":"包邮")+" ")]),r("el-descriptions-item",{attrs:{label:"支付状态"}},[e._v(e._s(e.payStatus[e.order.pay_status]))]),r("el-descriptions-item",{attrs:{label:"订单状态"}},[e._v(" "+e._s(e.orderStatus[e.order.order_status])+" ")]),r("el-descriptions-item",{attrs:{label:"购买消耗"}},[r("div",{staticClass:"u-box"},[e.order.goods_price_cny?r("span",[e._v(" 金箔："),r("b",[e._v(e._s(e.order.goods_price_cny*e.order.goods_num))])]):e._e(),e.order.goods_price_boxcoin?r("span",[e._v(" 盒币："),r("b",[e._v(e._s(e.order.goods_price_boxcoin*e.order.goods_num))])]):e._e(),e.order.goods_price_point?r("span",[e._v(" 银铛："),r("b",[e._v(e._s(e.order.goods_price_point*e.order.goods_num))])]):e._e()])]),r("el-descriptions-item",{attrs:{label:"是否为赠送"}},[e._v(e._s(e.order.is_vitural_gift_order?"是":"否"))]),r("el-descriptions-item",{attrs:{label:"备注"}},[e._v(e._s(e.order.remark||"-"))]),e.rate.comment?r("el-descriptions-item",{attrs:{label:"评价",span:3}},[r("div",{staticClass:"m-comment"},[r("div",{staticClass:"m-text"},[r("span",{staticClass:"u-comment"},[e._v(e._s(e.rate.comment))]),e.rate.add_comment?r("span",{staticClass:"u-add_comment"},[e._v("追加评价："+e._s(e.rate.add_comment))]):e._e(),e.append?r("el-input",{staticClass:"u-textarea",model:{value:e.content,callback:function(t){e.content=t},expression:"content"}},[r("template",{slot:"append"},[r("span",{staticStyle:{cursor:"pointer"},on:{click:e.appendComment}},[e._v("确定")])])],2):e._e()],1),r("div",{staticClass:"u-button"},[5==e.order.order_status?r("el-button",{attrs:{type:"text"},on:{click:function(t){e.append=!e.append}}},[e._v(" 追加评论 ")]):e._e(),r("el-popconfirm",{attrs:{title:"确认删除评价吗？",width:200},on:{confirm:function(t){return e.delComment(e.rate.id)}}},[r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)],1)])]):e._e()],1)],1):e._e(),r("div",{staticClass:"m-button"},[0==e.data.order.order_status?[r("el-button",{on:{click:function(t){return e.cancel(e.data.order.id)}}},[e._v("取消订单")]),r("el-button",{on:{click:function(t){return e.open(e.data.order.id,"address")}}},[e._v("修改地址")]),r("el-button",{on:{click:function(t){return e.open(e.data.order.id,"remark")}}},[e._v("添加备注")])]:e._e(),3==e.data.order.order_status?r("el-button",{on:{click:function(t){return e.toConfirm(e.data.order.id)}}},[e._v(" 确认收货 ")]):e._e(),e.showPay(e.data.order)?r("el-button",{on:{click:function(t){return e.toPay(e.data)}}},[e._v("点击付款")]):e._e()],2)]):e._e(),r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","before-close":e.close,"custom-class":"m-edit-dialog"},on:{"update:visible":function(t){e.dialogVisible=t}}},["address"==e.mode?[r("el-form",{ref:"address_form",staticClass:"demo-form-inline",attrs:{model:e.address_form,rules:e.address_rules}},[r("el-form-item",{attrs:{label:"选择收货地址",prop:"address_id"}},[r("el-select",{model:{value:e.address_form.address_id,callback:function(t){e.$set(e.address_form,"address_id",t)},expression:"address_form.address_id"}},e._l(e.addressList,(function(e,t){return r("el-option",{key:t,attrs:{label:"【 "+e.contact_name+" "+e.contact_phone+" 】 "+e.province+e.city+e.area+e.address,value:e.id}})})),1)],1),r("el-form-item",[r("div",{staticClass:"m-button"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("address_form")}}},[e._v("确定")])],1)])],1)]:[r("el-form",{ref:"remark_form",staticClass:"demo-form-inline",attrs:{model:e.remark_form,rules:e.remark_rules}},[r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注"},model:{value:e.remark_form.remark,callback:function(t){e.$set(e.remark_form,"remark",t)},expression:"remark_form.remark"}})],1),r("el-form-item",[r("div",{staticClass:"m-button"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("remark_form")}}},[e._v("确定")])],1)])],1)]],2)],1)])},s=[],n=(r("d81d"),r("4de4"),r("d3b7"),r("1101")),o=r("f03c"),i=r("b547"),c=r("46c1"),d={name:"orderDetail",components:{uc:i["a"]},data:function(){return{data:{},mode:"",dialogVisible:!1,addressList:[],address_form:{address_id:""},address_rules:{address_id:[{required:!0,message:"请选择地址",trigger:"change"}]},remark_form:{remark:""},remark_rules:{remark:[{required:!0,message:"请输入备注",trigger:"blur"}]},content:"",append:!1,tabList:c["a"]}},computed:{id:function(){return this.$route.params.id},pageIndex:function(){return this.$route.params.pageIndex},address:function(){return this.data.shipAddress||{}},order:function(){return this.data.order},goods:function(){return this.data.goods},rate:function(){return this.data.rate},payStatus:function(){return o["b"]},orderStatus:function(){return o["a"]},title:function(){return"address"==this.mode?"修改收货地址":"修改备注"}},methods:{load:function(){var e=this;Object(n["i"])(this.id).then((function(t){e.data=t.data.data}))},loadAddress:function(){var e=this;Object(n["g"])().then((function(t){e.addressList=t.data.data.list}))},closeButton:function(e){return!!e&&(1!=e.order_status&&2!=e.order_status&&7!=e.order_status)},showPay:function(e){if(e){var t=e.order_status,r=e.pay_status;return 1!=t&&2!=t&&7!=t&&0==r}return!1},toConfirm:function(e){var t=this;Object(n["l"])(e).then((function(){t.$message({message:"收货成功",type:"success"}),t.data.order.order_status=4}))},goBack:function(){this.$router.push({name:"mall",params:{pageIndex:this.pageIndex}})},open:function(e,t){this.order_id=e,"address"==t&&this.loadAddress(),void 0!==this.$refs.address_form&&this.$refs.address_form.clearValidate(),void 0!==this.$refs.remark_form&&this.$refs.remark_form.clearValidate(),this.mode=t,this.dialogVisible=!0},close:function(){this.dialogVisible=!1},cancel:function(e){var t=this;Object(n["c"])(e).then((function(r){t.$message({message:"关闭订单成功",type:"success"}),t.list=t.list.map((function(t){return t.order.id==e&&(t.order.order_status=1),t}))}))},toPay:function(e){var t=this,r=e.order.id;Object(n["m"])(r).then((function(){t.$message({message:"支付成功",type:"success"}),t.list=t.list.map((function(e){return e.order.id==r&&(e.order.pay_status=1),e}))}))},submit:function(e){var t=this;this.$refs[e].validate((function(e){e&&("address"==t.mode?Object(n["o"])(t.order_id,t.address_form.address_id).then((function(){t.$message({message:"修改地址成功",type:"success"});var e=t.addressList.filter((function(e){return e.id==t.address_form.address_id}))[0];if(e){var r=e.province,a=e.city,s=e.area,n=e.address,o=e.contact_name,i=e.contact_phone,c=r+" "+a+" "+s+" "+n;t.data.shipAddress.actual_address=c,t.data.shipAddress.actual_contact=o,t.data.shipAddress.actual_phone=i}t.close()})):Object(n["p"])(t.order_id,t.remark_form.remark).then((function(){t.$message({message:"修改备注成功",type:"success"}),t.data.order.remark=t.remark_form.remark,t.close()})))}))},openVirtual:function(e){var t=e.sub_category,r=null,a={code:this.$router.resolve({name:"card",query:{tab:"virtual"}}),emotion:this.$router.resolve({name:"emotion"}),skin:this.$router.resolve({name:"theme"}),avatar:this.$router.resolve({name:"frame"}),honor:this.$router.resolve({name:"honor"})};r=a[t],r&&window.open(r.href,"_blank")},appendComment:function(){var e=this;this.content&&Object(n["b"])(this.rate.id,{content:this.content}).then((function(t){e.$message({message:"追评成功",type:"success"}),e.data.rate.add_comment=e.content,e.data.order.order_status=8,e.append=!1}))},delComment:function(e){var t=this;Object(n["f"])(e).then((function(e){t.$message({message:"删除评价成功",type:"success"}),t.data.rate.comment=""}))}},mounted:function(){this.id&&this.load()}},l=d,u=(r("d222"),r("2877")),m=Object(u["a"])(l,a,s,!1,null,null,null);t["default"]=m.exports},f03c:function(e){e.exports=JSON.parse('{"b":{"0":"未支付","1":"已支付","2":"已退款"},"a":{"0":"未发货","1":"取消订单","2":"订单关闭","3":"已发货","4":"确认收货","5":"已评价","6":"退货退款","7":"等待退款","8":"已追评","9":"系统回复"}}')}}]);
//# sourceMappingURL=chunk-491909ea.22eb9e67.js.map