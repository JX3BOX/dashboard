(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742f405a"],{"61cb":function(t,n,c){"use strict";c.d(n,"c",(function(){return i})),c.d(n,"d",(function(){return e})),c.d(n,"g",(function(){return s})),c.d(n,"f",(function(){return o})),c.d(n,"b",(function(){return r})),c.d(n,"e",(function(){return u})),c.d(n,"h",(function(){return d})),c.d(n,"a",(function(){return f}));var a=c("41cb");function i(t){return Object(a["b"])().get("/api/cms/post/".concat(t))}function e(t){return Object(a["b"])().get("/api/cms/user/".concat(t,"/info"))}function o(t){return Object(a["b"])().get("/api/cms/post/".concat(t,"/author/my"))}function s(t){return Object(a["b"])().delete("/api/cms/post/".concat(t,"/authors/quit"))}function r(t){return Object(a["b"])().put("/api/cms/post/".concat(t,"/author/my"))}function u(t){return Object(a["b"])().get("/api/cms/user/kith/".concat(t,"/invitation"))}function d(t){return Object(a["b"])().delete("/api/cms/user/kith/".concat(t,"/invitation"))}function f(t){return Object(a["b"])().put("/api/cms/user/kith/".concat(t,"/invitation"))}},8435:function(t,n,c){"use strict";c.r(n);var a=function(){var t=this,n=t.$createElement,c=t._self._c||n;return c("div",{staticClass:"m-callback m-invitation-creators"},[t._m(0),c("p",{staticClass:"u-desc"},[t._v("你收到了一条联合创作邀请。")]),c("div",{staticClass:"u-post"},[c("div",{staticClass:"u-post-avatar"},[c("img",{attrs:{src:t._f("showAvatar")(t.userdata.user_avatar)}})]),c("div",{staticClass:"u-post-info"},[c("a",{staticClass:"u-post-title",attrs:{href:t._f("postLink")(t.data),target:"_blank"}},[t._v(t._s(t.data.post_title))]),c("a",{staticClass:"u-post-desc",attrs:{href:t._f("authorLink")(t.uid),target:"_blank"}},[t._v(" @ "),c("b",[t._v(t._s(t.userdata.display_name))]),c("time",{staticClass:"u-post-time"},[t._v(t._s(t._f("dateFormat")(t.info.updated)))])])])]),c("div",{staticClass:"u-btns"},[c("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:t.isNotExist||t.alreadyAccept},on:{click:t.accept}},[t._v(t._s(t.alreadyAccept?"已接受":"接受"))]),c("el-button",{attrs:{type:"info",icon:"el-icon-close",disabled:t.isNotExist},on:{click:t.confirmQuit}},[t._v(t._s(t.alreadyAccept?"退出联合创作":"拒绝"))])],1)])},i=[function(){var t=this,n=t.$createElement,c=t._self._c||n;return c("h1",{staticClass:"u-title"},[c("i",{staticClass:"el-icon-message"}),t._v(" 邀请 ")])}],e=c("e762"),o=c("61cb"),s=c("85e4"),r=c("fb92"),u={name:"CallbackCreators",props:[],components:{},data:function(){return{data:"",userdata:"",record:null}},computed:{info:function(){return JSON.parse(e["a"].decode(decodeURIComponent(this.$route.query.info)))},id:function(){return~~this.info.source_id},uid:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.post_author},isNotExist:function(){return!this.record},alreadyAccept:function(){return!(!this.record||!this.record.status)},post_link:function(){var t,n;return Object(s["getLink"])(null===(t=this.data)||void 0===t?void 0:t.post_type,null===(n=this.data)||void 0===n?void 0:n.ID)}},watch:{id:{immediate:!0,handler:function(t){t&&(this.loadData(),this.check())}}},methods:{loadData:function(){var t=this;Object(o["c"])(this.id).then((function(n){var c;t.data=null===(c=n.data)||void 0===c?void 0:c.data})).then((function(){Object(o["d"])(t.uid).then((function(n){var c;t.userdata=null===(c=n.data)||void 0===c?void 0:c.data}))}))},confirmQuit:function(){var t=this;this.$confirm("确定退出联合创作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.quit()})).catch((function(){}))},quit:function(){var t=this;Object(o["g"])(this.id).then((function(){t.$message({message:"操作成功",type:"success"})})),this.$router.push("/msg")},check:function(){var t=this;Object(o["f"])(this.id).then((function(n){var c;t.record=null===(c=n.data)||void 0===c?void 0:c.data}))},accept:function(){var t=this;Object(o["b"])(this.id).then((function(n){t.$message({message:"操作成功",type:"success"}),location.href=t.post_link}))}},filters:{postLink:function(t){return Object(s["getLink"])(t.post_type,t.ID)},authorLink:s["authorLink"],showAvatar:s["showAvatar"],dateFormat:function(t){return Object(r["a"])(new Date(1e3*~~t))}},created:function(){},mounted:function(){}},d=u,f=(c("8f46"),c("2877")),l=Object(f["a"])(d,a,i,!1,null,"62f4a8c0",null);n["default"]=l.exports},"8f46":function(t,n,c){"use strict";c("ed0d")},ed0d:function(t,n,c){},fb92:function(t,n,c){"use strict";c("99af");function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.getFullYear(),e=t.getMonth()+1,o=t.getDate(),s=c?"".concat(a).concat(n).concat(i(e)).concat(n).concat(i(o)):"".concat(a).concat(n).concat(e).concat(n).concat(o);return s}function i(t){return t<10?"0"+t:t}n["a"]=a}}]);
//# sourceMappingURL=chunk-742f405a.0ef7f448.js.map