(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cef4dd8"],{"0761":function(t,e,n){},"0c39":function(t,e,n){},"23e3":function(t,e,n){"use strict";var s=n("efcf"),i=n.n(s);i.a},"2b14":function(t,e,n){"use strict";var s=n("0761"),i=n.n(s);i.a},"302f":function(t,e,n){"use strict";var s=n("0c39"),i=n.n(s);i.a},"6d75":function(t,e,n){"use strict";var s=n("d570"),i=n.n(s);i.a},"7ae9":function(t,e,n){"use strict";var s=n("8d6f"),i=n.n(s);i.a},"8d6f":function(t,e,n){},c202:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-box"},[n("pubheader",{attrs:{name:t.name,localDraft:t.localDraft}},[t._t("header")],2),n("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[n("post_title",{attrs:{title:t.post.post_title}},[t._t("title")],2),t.infoEnable?n("div",{staticClass:"m-publish-info"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("信息")]),t._t("default")],2):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentEnable,expression:"contentEnable"}],staticClass:"m-publish-prepend"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("正文")]),t._t("prepend")],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentEnable,expression:"contentEnable"}],staticClass:"m-publish-content"},[n("Tinymce",{directives:[{name:"show",rawName:"v-show",value:"tinymce"==t.mode,expression:"mode == 'tinymce'"}],attrs:{attachmentEnable:!0,resourceEnable:!0},on:{update:t.updateContent},model:{value:t.post.post_content,callback:function(e){t.$set(t.post,"post_content",e)},expression:"post.post_content"}})],1),t.excerptEnable?n("div",{staticClass:"m-publish-append"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("附加")]),t.tagEnable?n("post_tag",{attrs:{tags:t.post.post_tags}}):t._e(),n("post_excerpt",{attrs:{excerpt:t.post.post_excerpt}}),t._t("append")],2):t._e(),t.notifyEnable?n("div",{staticClass:"m-publish-extend"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("扩展")]),n("post_notify",{attrs:{notify:t.extend}}),t._t("extend")],2):t._e(),t.bannerEnable?n("div",{staticClass:"m-publish-admin"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("海报")]),n("post_banner",{attrs:{banner:t.post.post_banner}})],1):t._e(),n("div",{staticClass:"m-publish-buttons"},[n("el-button",{attrs:{type:"primary",disabled:t.processing},on:{click:t.publish}},[t._v(t._s(t.publish_text||"发 布"))]),n("el-button",{attrs:{type:"plain",disabled:t.processing},on:{click:t.draft}},[t._v(t._s(t.draft_text||"保存为草稿"))])],1)],1)],1)},i=[],a=n("a0fa"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-upload"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[n("i",{staticClass:"el-icon-upload el-icon--right"}),t._v(" 上传附件")]),n("el-dialog",{staticClass:"c-large-dialog",attrs:{title:"上传",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-button",{staticClass:"u-upload-clear",attrs:{plain:"",icon:"el-icon-delete",size:"small"},on:{click:t.clear}},[t._v("清空")]),n("el-alert",{staticClass:"u-upload-tip",attrs:{title:t.tip,type:"info","show-icon":"",closable:!1}}),n("el-upload",{ref:"uploadbox",attrs:{action:t.API,"list-type":"picture-card","auto-upload":!1,limit:10,multiple:"","with-credentials":"","file-list":t.fileList,"on-change":t.change},scopedSlots:t._u([{key:"file",fn:function(e){var s=e.file;return n("div",{staticClass:"u-file-wrapper",class:{isSelected:s.selected,disabled:"success"!=s.status},on:{click:function(e){return t.select(s)}}},[s.is_img?n("img",{staticClass:"el-upload-list__item-thumbnail u-imgbox",attrs:{src:s.url,alt:""}}):n("div",{staticClass:"u-filebox"},[n("svg",{class:"u-fileplaceholder",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469.333 469.333","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M466.208 88.458L380.875 3.125c-2-2-4.708-3.125-7.542-3.125H42.667C19.146 0 0 19.135 0 42.667v384c0 23.531 19.146 42.667 42.667 42.667h384c23.521 0 42.667-19.135 42.667-42.667V96a10.665 10.665 0 00-3.126-7.542zM106.667 21.333h234.667v128c0 11.76-9.563 21.333-21.333 21.333H128c-11.771 0-21.333-9.573-21.333-21.333v-128zM384 448H85.333V256H384v192zm64-21.333c0 11.76-9.563 21.333-21.333 21.333h-21.333V245.333a10.66 10.66 0 00-10.667-10.667h-320A10.66 10.66 0 0064 245.333V448H42.667c-11.771 0-21.333-9.573-21.333-21.333v-384c0-11.76 9.563-21.333 21.333-21.333h42.667v128C85.333 172.865 104.479 192 128 192h192c23.521 0 42.667-19.135 42.667-42.667v-128h6.25L448 100.417v326.25z"}}),n("path",{attrs:{d:"M266.667 149.333h42.667a10.66 10.66 0 0010.667-10.667V53.333a10.66 10.66 0 00-10.667-10.667h-42.667A10.66 10.66 0 00256 53.333v85.333a10.66 10.66 0 0010.667 10.667zM277.333 64h21.333v64h-21.333V64z"}})]),n("span",{staticClass:"u-filename"},[t._v(t._s(s.name))])]),n("label",{directives:[{name:"show",rawName:"v-show",value:s.selected,expression:"file.selected"}],staticClass:"u-file-select-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-check"})])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.insert}},[t._v(t._s(t.buttonTXT))])],1)],1)],1)},l=[],c=(n("99af"),n("4160"),n("caad"),n("a15b"),n("a434"),n("b0c0"),n("ac1f"),n("1276"),n("159b"),n("2d81"),n("ee8f")),r=n("bc3a"),u=n.n(r),p=["jpg","png","gif","bmp"],d=c["JX3BOX"].__server+"upload",f={name:"upload",data:function(){return{API:d,dialogVisible:!1,tip:"一次最多同时上传10个文件（不超过5M），格式限常见的图片、文档、数据表及压缩包",fileList:[],selectedCount:0}},computed:{buttonTXT:function(){return this.selectedCount?"插 入":"确 定"}},methods:{change:function(t,e){var n=this;if("success"!=t.status){var s=new FormData;s.append("file",t.raw),u.a.post(d,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(e){n.$message({message:"上传成功",type:"success"}),t.url=e.data.data.list[0];var s=t.name.split(".").pop(),i=p.includes(s);t.is_img=i,t.selected=!0,t.status="success",n.fileList.push(t),n.selectedCount++})).catch((function(t){t.response.data.code?n.$message.error("[".concat(t.response.data.code,"] ").concat(t.response.data.msg)):n.$message.error("请求异常")}))}},select:function(t){"success"==t.status&&(this.$set(t,"selected",!t.selected),t.selected?this.selectedCount++:this.selectedCount--)},insert:function(){this.dialogVisible=!1,this.selectedCount&&("markdown"==this.$store.state.post.post_mode||tinyMCE.editors["tinymce"].insertContent(this.insertList()),this.resetSelectStatus())},resetSelectStatus:function(){var t=this;this.fileList.forEach((function(e,n){t.$set(t.fileList[n],"selected",!1)})),this.selectedCount=0},clear:function(){this.$refs.uploadbox.clearFiles(),this.fileList=[]},removeFile:function(t,e){t.forEach((function(n,s){n.uid==e&&t.splice(s,1)}))},insertList:function(){var t=[];return this.fileList.forEach((function(e){e.selected&&(e.is_img?t.push('<img src="'.concat(e.url,'" />')):t.push('<a target="_blank" href="'.concat(e.url,'">').concat(e.name,"</a>")))})),t.join(" \n")}},mounted:function(){},components:{}},m=f,h=(n("2b14"),n("2877")),b=Object(h["a"])(m,o,l,!1,null,null,null),v=(b.exports,n("221a")),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-editor-markdown"},[t._v(" "+t._s(t.content)+" ")])},g=[],x={name:"markdown",props:["content"],data:function(){return{data:this.content}},watch:{data:function(t){this.$store.commit("editContent",t)}},computed:{},methods:{},mounted:function(){},components:{}},y=x,w=Object(h["a"])(y,_,g,!1,null,null,null),C=(w.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-title"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("标题")]),n("el-input",{attrs:{maxlength:"50",minlength:"2","show-word-limit":"",required:"",placeholder:"请填写标题"},on:{change:t.done},model:{value:t.post_title,callback:function(e){t.post_title=e},expression:"post_title"}}),t._t("default")],2)}),E=[],$={name:"post_title",props:["title"],data:function(){return{post_title:this.title}},computed:{store:function(){return this.$store.state.post.post_title}},watch:{store:function(t){this.post_title=t}},methods:{done:function(){this.$store.commit("editTitle",this.post_title)}},mounted:function(){},components:{}},k=$,V=Object(h["a"])(k,C,E,!1,null,null,null),T=V.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-excerpt"},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"摘要信息"},on:{change:t.done},model:{value:t.post_excerpt,callback:function(e){t.post_excerpt=e},expression:"post_excerpt"}})],1)},j=[],L={name:"post_excerpt",props:["excerpt"],data:function(){return{post_excerpt:this.excerpt}},computed:{store:function(){return this.$store.state.post.post_excerpt}},watch:{store:function(t){this.post_excerpt=t}},methods:{done:function(){this.$store.commit("editExcerpt",this.post_excerpt)}},mounted:function(){},components:{}},M=L,z=(n("23e3"),Object(h["a"])(M,O,j,!1,null,null,null)),I=z.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-tag"},[t._l(t.dynamicTags,(function(e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,effect:"plain"},on:{close:function(n){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 标签")])],2)},B=[],A=(n("c975"),{name:"post_tag",props:["tags"],data:function(){return{dynamicTags:this.tags,inputVisible:!1,inputValue:""}},computed:{},methods:{handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue=""}},mounted:function(){},components:{}}),H=A,N=(n("7ae9"),Object(h["a"])(H,S,B,!1,null,null,null)),P=N.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-notify"},[n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"通知作品订阅用户",disabled:""},model:{value:t.notify.feedEnable,callback:function(e){t.$set(t.notify,"feedEnable",e)},expression:"notify.feedEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"通知粉丝",disabled:""},model:{value:t.notify.followEnable,callback:function(e){t.$set(t.notify,"followEnable",e)},expression:"notify.followEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至腾讯文档",disabled:""},model:{value:t.notify.tencentEnable,callback:function(e){t.$set(t.notify,"tencentEnable",e)},expression:"notify.tencentEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至微博头条文章",disabled:""},model:{value:t.notify.weiboEnable,callback:function(e){t.$set(t.notify,"weiboEnable",e)},expression:"notify.weiboEnable"}}),n("el-switch",{attrs:{"active-color":"#0366d6","inactive-color":"#999","active-text":"同步至推栏",disabled:""},model:{value:t.notify.tuilanEnable,callback:function(e){t.$set(t.notify,"tuilanEnable",e)},expression:"notify.tuilanEnable"}})],1)},J=[],X={name:"post_notify",props:["notify"],data:function(){return{post_notify:this.notify}},computed:{},methods:{},mounted:function(){},components:{}},F=X,q=(n("302f"),Object(h["a"])(F,D,J,!1,null,null,null)),G=q.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-banner"},[n("el-alert",{staticClass:"u-tip",attrs:{title:"图片尺寸180*100像素，非必选，部分栏目不会展示海报，分享功能将使用该图作为预览图",type:"info","show-icon":""}}),n("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.url,"show-file-list":!1,"on-success":t.done,"on-error":t.fail,"with-credentials":"",accept:"image/jpg,image/jpeg,image/gif,image/png,image/bmp"}},[t.post_banner?n("img",{attrs:{src:t._f("showBanner")(t.post_banner)}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),n("el-button",{staticClass:"u-remove",attrs:{type:"info",size:"mini",icon:"el-icon-circle-close"},on:{click:t.clearBanner}},[t._v("移除海报")])],1)},Q=[],R=n("64c7"),U=n("85e4"),W=R["__server"]+"upload",Y={name:"post_banner",props:["banner"],data:function(){return{post_banner:this.banner,url:W}},methods:{done:function(t,e){this.post_banner=t.data.list[0],this.$store.commit("editBanner",this.post_banner)},fail:function(t,e,n){try{var s=JSON.parse(t.message);this.$message.error("[".concat(s.code,"]").concat(s.msg))}catch(i){this.$message.error("网络请求异常")}},clearBanner:function(){this.post_banner="",this.$store.commit("editBanner",this.post_banner)}},filters:{showBanner:function(t){return Object(U["showMinibanner"])(t)}}},Z=Y,tt=(n("c383"),Object(h["a"])(Z,K,Q,!1,null,null,null)),et=tt.exports,nt=n("c9d2"),st=n.n(nt),it={name:"boilerplate",props:["name","type","post","meta","extend","localDraft","infoEnable","contentEnable","markdownEnable","excerptEnable","tagEnable","notifyEnable","bannerEnable","publish_text","draft_text"],data:function(){return{mode:this.post.post_mode||"tinymce",draft_key:"",isAdmin:st.a.getInfo().group>30}},computed:{processing:function(){return this.$store.state.processing}},watch:{"post.post_meta":{handler:function(t){this.$store.commit("editPostMeta",t)},deep:!0},meta:{handler:function(t){this.$store.commit("editMeta",t)},deep:!0},mode:function(t){this.$store.commit("changeMode",t)}},methods:{publish:function(){this.$store.commit("changeStatus","publish"),this.$emit("publish"),this.$store.commit("startProcess")},draft:function(){this.$store.commit("changeStatus","draft"),this.$emit("draft"),this.$store.commit("startProcess")},updateContent:function(t){this.$store.commit("editContent",t)}},mounted:function(){this.$store.commit("changeType",this.type),this.$store.commit("changeSubtype",this.post.post_subtype)},components:{pubheader:a["a"],Tinymce:v["a"],post_title:T,post_tag:P,post_excerpt:I,post_notify:G,post_banner:et}},at=it,ot=(n("6d75"),Object(h["a"])(at,s,i,!1,null,null,null));e["a"]=ot.exports},c383:function(t,e,n){"use strict";var s=n("c515"),i=n.n(s);i.a},c515:function(t,e,n){},d570:function(t,e,n){},efcf:function(t,e,n){}}]);
//# sourceMappingURL=chunk-2cef4dd8.c809601e.js.map