(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d3a9464"],{4039:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.honor))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.honor))]),n("div",{staticClass:"u-pic",class:t.setClass(a),on:{click:function(n){return t.selectChange(a)}}},[a.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(a),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],o=(a("99af"),a("d3b7"),a("159b"),a("b64b"),a("7db0"),a("ac1f"),a("466d"),a("a9e3"),a("5319"),a("14d9"),a("b547")),s=a("46c1"),r=a("c9d2"),c=a("8e44"),u=a("65c2"),l=a("aa38"),d=a("2ef0"),v={name:"honor",props:[],data:function(){return{tabList:s["d"],isVIP:!1,info:{uid:r["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(u["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},list:[],listBak:[],isSelect:{},isSelectBak:{},honorList:{}}},computed:{uid:function(){return r["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return r["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){if(t&&!t.isCustomize&&t.val)return t.isImgIndex?u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,"_").concat(t.imgIndex,".").concat(t.ext):u["__imgPath"]+"decoration/honor/".concat(t.val,"/").concat(t.val,".").concat(t.ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(c["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},loadHonor:function(){var t=this;Object(l["e"])().then((function(n){t.honorList=n.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(l["f"])(this.uid).then((function(n){var a=n||[],e=t.honorList,i=[];Object.keys(e).forEach((function(t,n){var o=a.find((function(n){var a;return(null===n||void 0===n||null===(a=n.honor)||void 0===a?void 0:a.img)==t})),s=e[t],r=function(t){var n=(null===t||void 0===t?void 0:t.honor)||{},a=s.prefix,e=s.prefix.match(/(?<=\{)(.+?)(?=\})/g),i=s.ranking,o=s.year||"";if(e?n&&(o+=(null===t||void 0===t?void 0:t[e[0]])||""):o+=a,i.length>0&&n){n.imgIndex=0;for(var r=0;r<i.length;r++)if(void 0!=(null===t||void 0===t?void 0:t.ranking)&&Object(d["inRange"])(Number(null===t||void 0===t?void 0:t.ranking),i[r][0],i[r][1])){n.imgIndex=r;var c=i[r][2],u=c.match(/(?<=\{)(.+?)(?=\})/g);o+=u?c.replace(/\{([^{}]+?)\}/g,(function(a,e){return n[e]||t[e]||""})):c;break}}return o+s.suffix};if(o){var c;o.honor=r(o),o.color=s.color,o.ext=s.ext,o.val=t,o.isHave=!0,o.imgIndex=(null===(c=o.honor)||void 0===c?void 0:c.imgIndex)||0,o.isImgIndex=s.ranking.length>0,i.push(o)}else{var u={color:s.color,ext:s.ext,honor:r(),extra:"尚未获取的称号框",using:0,type:"honor",val:t,isHave:!1,imgIndex:0,isImgIndex:s.ranking.length>0};i.push(u)}}));var o=i.find((function(t){return 1==t.using}));t.list=i||[];var s={type:"honor_customize",val:"不佩戴称号",honor:"取消佩戴称号",using:o?0:1,isHave:!0,isCustomize:!0};t.isSelect=o||s,t.list.unshift(s),t.isSelectBak=Object(d["cloneDeep"])(t.isSelect),t.listBak=Object(d["cloneDeep"])(t.list)}))},selectChange:function(t){if(t.isHave){var n=this.list,a=n.find((function(t){return 1==t.using}));a&&(a.using=0),t.using=1,this.isSelect=t}},reset:function(){this.$set(this,"list",Object(d["cloneDeep"])(this.listBak)),this.$set(this,"isSelect",Object(d["cloneDeep"])(this.isSelectBak))},showLevelColor:function(t){return u["__userLevelColor"][t]},submit:function(){var t,n=this,a=null===(t=this.list)||void 0===t?void 0:t.find((function(t){return 1==t.using}));null!==a&&void 0!==a&&a.honor_id?Object(l["i"])(a.honor_id).then((function(t){n.$message({message:"称号更新成功",type:"success"})})):Object(l["a"])().then((function(t){n.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:o["a"]}},f=v,h=(a("806e"),a("2877")),p=Object(h["a"])(f,e,i,!1,null,null,null);n["default"]=p.exports},"806e":function(t,n,a){"use strict";a("e5a3")},aa38:function(t,n,a){"use strict";a.d(n,"b",(function(){return r})),a.d(n,"h",(function(){return c})),a.d(n,"c",(function(){return u})),a.d(n,"d",(function(){return l})),a.d(n,"g",(function(){return d})),a.d(n,"j",(function(){return v})),a.d(n,"e",(function(){return f})),a.d(n,"f",(function(){return h})),a.d(n,"i",(function(){return p})),a.d(n,"a",(function(){return m}));a("99af");var e=a("41cb"),i=a("bc3a"),o=a.n(i),s=a("65c2");function r(t){return Object(e["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(e["b"])().post("/api/cms/user/decoration",t)}function u(){var t=s["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return o.a.get(t)}function l(){return o.a.get("".concat(s["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,n){return Object(e["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function v(t){return Object(e["b"])().put("/api/cms/user/my/avatar-frame",t)}function f(){return o.a.get("".concat(s["__imgPath"],"decoration/honor.json?").concat(Date.now()))}function h(t){return Object(e["c"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function p(t){return Object(e["b"])().put("/api/cms/user/honor/use/".concat(t))}function m(){return Object(e["b"])().delete("/api/cms/user/honor/use")}},e5a3:function(t,n,a){}}]);
//# sourceMappingURL=chunk-8d3a9464.111938ea.js.map