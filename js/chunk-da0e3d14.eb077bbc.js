(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da0e3d14"],{1101:function(t,e,r){"use strict";r.d(e,"g",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"n",(function(){return s})),r.d(e,"e",(function(){return i})),r.d(e,"d",(function(){return l})),r.d(e,"h",(function(){return c})),r.d(e,"o",(function(){return u})),r.d(e,"p",(function(){return d})),r.d(e,"i",(function(){return m})),r.d(e,"c",(function(){return p})),r.d(e,"m",(function(){return f})),r.d(e,"j",(function(){return h})),r.d(e,"l",(function(){return b})),r.d(e,"k",(function(){return _})),r.d(e,"b",(function(){return g})),r.d(e,"f",(function(){return y}));r("99af");var n=r("41cb");function o(t){return Object(n["d"])().get("/api/mall/ship-address",t)}function a(t){return Object(n["d"])().post("/api/mall/ship-address",t)}function s(t,e){return Object(n["d"])().put("/api/mall/ship-address/".concat(t),e)}function i(t){return Object(n["d"])().delete("/api/mall/ship-address/".concat(t))}function l(t){return Object(n["d"])().put("/api/mall/ship-address/default/".concat(t))}function c(t){return Object(n["d"])().get("/api/mall/my/orders",{params:t})}function u(t,e){return Object(n["d"])().put("/api/mall/my/orders/".concat(t,"/bind-address/").concat(e))}function d(t,e){return Object(n["d"])().put("/api/mall/my/orders/".concat(t,"/remark"),{remark:e})}function m(t){return Object(n["d"])().get("/api/mall/my/orders/".concat(t))}function p(t){return Object(n["d"])().put("/api/mall/my/orders/".concat(t,"/cancel"))}function f(t){return Object(n["d"])().post("/api/mall/my/orders/".concat(t,"/pay"))}function b(t){return Object(n["d"])().post("/api/mall/my/orders/".concat(t,"/received"))}function h(t){return Object(n["d"])().get("/api/mall/my/virtual_goods",{params:t})}function _(t){return Object(n["d"])().post("/api/mall/goods-rate",t)}function g(t,e){return Object(n["d"])().post("/api/mall/goods-rate/".concat(t,"/append-comments"),e)}function y(t){return Object(n["d"])().delete("/api/mall/goods-rate/".concat(t))}},2523:function(t,e,r){"use strict";r("4270")},4270:function(t,e,r){},b8fd:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("uc",{attrs:{icon:"el-icon-shopping-bag-1",title:"订单中心",tabList:t.tabList}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-page-record p-mall-orders"},[e("div",{staticClass:"m-content"},[e("el-table",{attrs:{data:t.list,size:"small"}},[e("el-table-column",{attrs:{prop:"order.created_at",label:"兑换时间",width:"180"}}),e("el-table-column",{attrs:{label:"兑换商品"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("div",{staticClass:"m-line"},[t._v(" "+t._s(r.row.goods.title)+" ")])]}}])}),e("el-table-column",{attrs:{label:"订单号"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("div",{staticClass:"m-line"},[t._v(" "+t._s(r.row.order.order_no)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"order.goods_num",label:"数量",width:"80"}}),e("el-table-column",{attrs:{label:"订单状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.orderStatus[e.row.order.order_status])+" ")]}}])}),e("el-table-column",{attrs:{label:"付款状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.payStatus[e.row.order.pay_status])+" ")]}}])}),e("el-table-column",{attrs:{label:"是否为赠送",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.order.is_vitural_gift_order?"是":"否")+" ")]}}])}),e("el-table-column",{attrs:{label:"操作","min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("div",{staticClass:"m-button"},[e("el-button",{attrs:{size:"small",icon:"el-icon-link"},on:{click:function(e){return t.showDetail(r.row)}}},[t._v(" 查看详情 ")]),t.showPay(r.row.order)?e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.toPay(r.row)}}},[t._v("点击支付")]):t._e(),3==r.row.order.order_status?[e("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-check"},on:{click:function(e){return t.isReceipt(r.row.order.id)}}},[t._v("确认收货")])]:t._e(),e("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info",title:"确定取消吗？"},on:{confirm:function(e){return t.cancel(r.row.order.id)}}},[0==r.row.order.order_status?e("el-button",{attrs:{slot:"reference",size:"small",type:"info",plain:"",icon:"el-icon-circle-close"},slot:"reference"},[t._v("取消订单")]):t._e()],1),4==r.row.order.order_status?[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleShow("comment",r.row.order.id)}}},[t._v(" 评价商品 ")])]:t._e()],2)]}}])})],1)],1),e("div",{staticClass:"m-record-pages"},[e("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper","page-size":t.pageSize,total:t.total,"current-page":t.pageIndex,"hide-on-single-page":!0},on:{"update:currentPage":function(e){t.pageIndex=e},"update:current-page":function(e){t.pageIndex=e}}})],1)]),e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("GoodComment",{attrs:{order_id:t.order_id,type:t.type},on:{close:t.handleClose}})],1)],1)},o=[],a=(r("14d9"),r("d81d"),r("b547")),s=function(){var t=this,e=t._self._c;return e("el-form",{ref:"form",staticClass:"m-goods-comment",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品评价",prop:"rate"}},[e("el-rate",{attrs:{max:3},model:{value:t.form.rate,callback:function(e){t.$set(t.form,"rate",e)},expression:"form.rate"}})],1),e("el-form-item",{attrs:{label:"物流评价",prop:"express_rate"}},[e("el-rate",{attrs:{max:3},model:{value:t.form.express_rate,callback:function(e){t.$set(t.form,"express_rate",e)},expression:"form.express_rate"}})],1),e("el-form-item",{attrs:{label:"评价内容",prop:"comment"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),e("el-form-item",{attrs:{label:"是否匿名",prop:"is_anonymous"}},[e("el-switch",{model:{value:t.form.is_anonymous,callback:function(e){t.$set(t.form,"is_anonymous",e)},expression:"form.is_anonymous"}})],1),e("div",{staticClass:"m-button"},[e("el-button",{on:{click:function(e){return t.close("form")}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("确定")])],1)],1)},i=[],l=r("1101"),c={name:"goodComment",props:["order_id"],data:function(){return{form:{rate:3,express_rate:3,comment:"",is_anonymous:!0,order_id:this.order_id},rules:{comment:{required:!0,message:"请填写评价内容",trigger:"blur"}}}},methods:{close:function(t){this.$emit("close",t)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){t&&Object(l["k"])(e.form).then((function(){e.$message({message:"评价成功",type:"success"}),e.close(e.order_id)}))}))}}},u=c,d=(r("2523"),r("2877")),m=Object(d["a"])(u,s,i,!1,null,null,null),p=m.exports,f=r("f03c"),b=r("46c1"),h={name:"mall",components:{uc:a["a"],GoodComment:p},data:function(){return{list:[],total:0,pageIndex:1,pageSize:10,loading:!1,payStatus:f["b"],orderStatus:f["a"],order_id:"",tabList:b["b"],dialogVisible:!1,type:""}},computed:{params:function(){var t={pageIndex:this.pageIndex,pageSize:this.pageSize};return t},params_pageIndex:function(){return this.$route.params.pageIndex},title:function(){var t={comment:"商品评价",append:"追加评价"};return t[this.type]||""}},watch:{params:{deep:!0,handler:function(){this.load()}},params_pageIndex:{immediate:!0,handler:function(t){t&&(this.pageIndex=t)}}},methods:{load:function(){var t=this;this.loading=!0,Object(l["h"])(this.params).then((function(e){t.list=e.data.data.list,t.total=e.data.data.page.total,t.loading=!1}))},showPay:function(t){var e=t.order_status,r=t.pay_status;return 1!=e&&2!=e&&7!=e&&0==r},showDetail:function(t){var e=t.order;this.$router.push({name:"order-detail",params:{id:e.id,pageIndex:this.pageIndex}})},cancel:function(t){var e=this;Object(l["c"])(t).then((function(){e.$message({message:"关闭订单成功",type:"success"}),e.list=e.list.map((function(e){return e.order.id==t&&(e.order.order_status=1),e}))}))},toPay:function(t){var e=this,r=t.order.id;Object(l["m"])(r).then((function(){e.$message({message:"付款成功",type:"success"}),e.list=e.list.map((function(t){return t.order.id==r&&(t.order.pay_status=1),t}))}))},isReceipt:function(t){var e=this;Object(l["l"])(t).then((function(){e.$message({message:"收货成功",type:"success"}),e.list=e.list.map((function(e){return e.order.id==t&&(e.order.order_status=4),e}))}))},handleShow:function(t,e){this.type=t,this.order_id=e,this.dialogVisible=!0},handleClose:function(t){this.dialogVisible=!1,this.order_id="",this.type="",t&&(this.list=this.list.map((function(e){return e.order.id==t&&(e.order.order_status=5),e})))}},mounted:function(){this.load()}},_=h,g=(r("e0b1"),Object(d["a"])(_,n,o,!1,null,null,null));e["default"]=g.exports},dcf5:function(t,e,r){},e0b1:function(t,e,r){"use strict";r("dcf5")},f03c:function(t){t.exports=JSON.parse('{"b":{"0":"未支付","1":"已支付","2":"已退款"},"a":{"0":"未发货","1":"取消订单","2":"订单关闭","3":"已发货","4":"确认收货","5":"已评价","6":"退货退款","7":"等待退款","8":"已追评","9":"系统回复"}}')}}]);
//# sourceMappingURL=chunk-da0e3d14.eb077bbc.js.map