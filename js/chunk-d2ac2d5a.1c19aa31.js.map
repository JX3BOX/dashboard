{"version":3,"sources":["webpack:///./src/views/privacy.vue","webpack:///./src/service/privacy.js","webpack:///src/views/privacy.vue","webpack:///./src/views/privacy.vue?48e6","webpack:///./src/views/privacy.vue?2b08","webpack:///./src/views/privacy.vue?8a7d"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","loading","expression","_m","on","tabChange","model","active","callback","$$v","attrs","nativeOn","$event","type","indexOf","_k","keyCode","key","handleChange","apply","arguments","keyword","slot","_v","_e","list","length","_l","item","i","kith_id","id","userLink","_f","kith_info","user_avatar","user_id","_s","display_name","status","remark","remove","edit","removeOther","pagination","pageIndex","total","currentChange","sideTitle","search","uid","_n","userdata","ID","isNewKith","isNull","allowAppend","add","btnText","staticRenderFns","getKithList","$cms","get","searchUserById","concat","addKith","post","removeKith","delete","editKith","data","put","getBlackList","params","$next","getMyFollowList","getMyFansList","follow","userId","unfollow","deny","undeny","removeFans","props","flag","limit_map","member","vip","pro","identity","pageSize","computed","limit","_this$userdata","currentIdList","includes","map","_this$list","fns","blacklist","myfollow","myfans","removeFns","addFns","whitelist","methods","loadList","$route","query","val","_this","isNaN","then","res","finally","_this2","_this3","$notify","title","message","push","level","_this4","_this5","_this6","$router","tab","sort","a","b","page","_this7","splice","_this8","$prompt","confirmButtonText","cancelButtonText","_ref","_this9","msgs","$confirm","bind_user_id","authorLink","mounted","_this10","User","getAsset","asset","_isPRO","_isVIP","filters","showAvatar","component"],"mappings":"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","file":"js/chunk-d2ac2d5a.1c19aa31.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-dashboard m-dashboard-profile m-dashboard-work m-dashboard-whitelist m-whitelist\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-whitelist-primary\"},[_vm._m(0),_c('el-tabs',{on:{\"tab-click\":_vm.tabChange},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('el-tab-pane',{attrs:{\"label\":\"我的亲友\",\"name\":\"whitelist\"}}),_c('el-tab-pane',{attrs:{\"label\":\"黑名单\",\"name\":\"blacklist\"}}),_c('el-tab-pane',{attrs:{\"label\":\"我的关注\",\"name\":\"myfollow\"}}),_c('el-tab-pane',{attrs:{\"label\":\"我的粉丝\",\"name\":\"myfans\"}})],1),(_vm.active !== 'whitelist')?_c('el-input',{staticClass:\"m-privacy-search\",attrs:{\"placeholder\":\"请输入搜索内容\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleChange.apply(null, arguments)}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"关键词\")]),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleChange},slot:\"append\"})],2):_vm._e(),(_vm.list && _vm.list.length)?_c('div',{staticClass:\"m-whitelist-list u-list\"},_vm._l((_vm.list),function(item,i){return _c('div',{key:item.kith_id || item.id,staticClass:\"u-item\"},[_c('a',{staticClass:\"u-item-pic\",attrs:{\"href\":_vm.userLink(item),\"target\":\"_blank\"}},[_c('img',{staticClass:\"u-item-avatar\",attrs:{\"src\":_vm._f(\"showAvatar\")((item.kith_info || item).user_avatar)}})]),_c('a',{staticClass:\"u-item-name\",attrs:{\"href\":_vm._f(\"authorLink\")((item.kith_id || item.user_id)),\"target\":\"_blank\"}},[_vm._v(_vm._s((item.kith_info || item).display_name))]),(_vm.active === 'whitelist')?[(item.status)?_c('span',{staticClass:\"u-item-remark\"},[_vm._v(\"备注：\"+_vm._s(item.remark || '无'))]):_c('span',{staticClass:\"u-item-remark\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 等待确认中... \")])]:_vm._e(),_c('div',{staticClass:\"u-item-btns\"},[(_vm.active === 'whitelist')?[_c('el-popconfirm',{attrs:{\"title\":\"确认删除亲友关系吗？\"},on:{\"confirm\":function($event){return _vm.remove(item.kith_id,i)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"warning\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},slot:\"reference\"},[_vm._v(\"删除\")])],1),_c('el-button',{staticClass:\"u-btn-edit\",attrs:{\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.edit(item.kith_id,item)}}},[_vm._v(\"编辑\")])]:[_c('el-button',{staticClass:\"u-btn-delete\",attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.removeOther(item)}}},[_vm._v(\"移除\")])]],2)],2)}),0):_vm._e(),(_vm.active !== 'whitelist')?_c('el-pagination',{attrs:{\"background\":\"\",\"hide-on-single-page\":\"\",\"current-page\":_vm.pagination.pageIndex,\"total\":_vm.pagination.total},on:{\"current-change\":_vm.currentChange}}):_vm._e()],1),(_vm.active !== 'myfans')?_c('div',{staticClass:\"m-whitelist-sidebar\"},[_c('div',{staticClass:\"u-title\"},[_c('i',{staticClass:\"el-icon-news\"}),_vm._v(\" \"+_vm._s(_vm.sideTitle)+\" \")]),_c('el-input',{staticClass:\"u-input\",attrs:{\"placeholder\":\"输入UID添加\",\"suffix-icon\":\"el-icon-search\"},on:{\"change\":_vm.search},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.uid),callback:function ($$v) {_vm.uid=_vm._n($$v)},expression:\"uid\"}}),(_vm.userdata)?_c('div',{staticClass:\"u-list\"},[_c('div',{staticClass:\"u-item\"},[_c('img',{staticClass:\"u-item-avatar\",attrs:{\"src\":_vm._f(\"showAvatar\")(_vm.userdata.user_avatar),\"alt\":_vm.userdata.display_name}}),_c('div',{staticClass:\"u-item-info\"},[_c('span',{staticClass:\"u-item-uid\"},[_vm._v(\"UID：\"+_vm._s(_vm.userdata.ID))]),_c('b',{staticClass:\"u-item-name\"},[_vm._v(_vm._s(_vm.userdata.display_name))])]),(!_vm.isNewKith)?_c('i',{staticClass:\"u-item-exist\"},[_vm._v(\"已添加\")]):_vm._e()])]):_vm._e(),(_vm.isNull)?_c('div',{staticClass:\"u-null\"},[_c('el-alert',{attrs:{\"title\":\"无搜索结果\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}})],1):_vm._e(),_c('el-button',{staticClass:\"u-submit\",attrs:{\"type\":\"success\",\"disabled\":_vm.active === 'wihtelist' && !_vm.allowAppend},on:{\"click\":_vm.add}},[_vm._v(_vm._s(_vm.btnText))])],1):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',{staticClass:\"m-whitelist-title u-title\"},[_c('i',{staticClass:\"el-icon-ship\"}),_vm._v(\" 隐私设置 \")])\n}]\n\nexport { render, staticRenderFns }","import { $cms, $next } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getKithList() {\n    return $cms().get(\"/api/cms/user/kith/my\");\n}\nfunction searchUserById(id) {\n    return $cms().get(`/api/cms/user/${id}/info`);\n}\nfunction addKith(id) {\n    return $cms().post(`/api/cms/user/kith/${id}`);\n}\n\nfunction removeKith(id) {\n    return $cms().delete(`/api/cms/user/kith/${id}`);\n}\n\nfunction sortKith(data) {\n    return $cms().put(\"/api/cms/user/kith\", data);\n}\nfunction editKith(id, data) {\n    return $cms().put(`/api/cms/user/kith/${id}`, data);\n}\n\n/**\n * 获取黑名单列表\n * @param {*} params 查询参数\n * @param {*} params.pageIndex 分页参数\n * @param {*} params.pageSize 分页参数\n * @param {*} params.user_id 用户id\n * @param {*} params.display_name 用户昵称\n * @returns\n */\nfunction getBlackList(params) {\n    return $next().get(\"/api/my-userlist/deny\", {\n        params\n    });\n}\n\n/**\n * 获取我的关注列表\n * @param {*} param 参数\n * @param {*} param.pageIndex 页码\n * @param {*} param.pageSize 每页数量\n * @param {*} param.user_id 用户id\n * @param {*} param.display_name 用户昵称\n */\n function getMyFollowList(params) {\n    return $next().get(`/api/my-userlist/follow`, {\n        params\n    })\n}\n\n/**\n * 获取我的粉丝列表\n * @param {*} param 参数\n * @param {*} param.pageIndex 页码\n * @param {*} param.pageSize 每页数量\n * @param {*} param.user_id 用户id\n * @param {*} param.display_name 用户昵称\n */\nfunction getMyFansList(params) {\n    return $next().get(`/api/my-userlist/follow-me`, {\n        params\n    })\n}\n\n/**\n * 关注用户\n * @param {*} userId 用户id\n */\n function follow(userId) {\n    return $next().post(`/api/my-userlist/follow/${userId}`)\n}\n\n/**\n * 取消关注用户\n * @param {*} userId 用户id\n */\nfunction unfollow(userId) {\n    return $next().delete(`/api/my-userlist/follow/${userId}`)\n}\n\n/**\n * 拉黑用户\n * @param {*} userId 用户id\n */\nfunction deny(userId) {\n    return $next().post(`/api/my-userlist/deny/${userId}`)\n}\n\n/**\n * 取消拉黑用户\n * @param {*} userId 用户id\n */\nfunction undeny(userId) {\n    return $next().delete(`/api/my-userlist/deny/${userId}`)\n}\n\n/**\n * 移除粉丝\n * @param {*} userId 用户id\n */\nfunction removeFans(userId) {\n    return $next().delete(`/api/my-userlist/follow-me/${userId}`)\n}\n\n\nexport {\n    getKithList,\n    editKith,\n    removeKith,\n    addKith,\n    searchUserById,\n    sortKith,\n\n    getBlackList,\n    getMyFollowList,\n    getMyFansList,\n    follow,\n    unfollow,\n    deny,\n    undeny,\n    removeFans\n};\n","<template>\n    <div class=\"m-dashboard m-dashboard-profile m-dashboard-work m-dashboard-whitelist m-whitelist\">\n        <div class=\"m-whitelist-primary\" v-loading=\"loading\">\n            <h2 class=\"m-whitelist-title u-title\">\n                <i class=\"el-icon-ship\"></i> 隐私设置\n            </h2>\n\n            <el-tabs v-model=\"active\" @tab-click=\"tabChange\">\n                 <el-tab-pane label=\"我的亲友\" name=\"whitelist\"></el-tab-pane>\n                 <el-tab-pane label=\"黑名单\" name=\"blacklist\"></el-tab-pane>\n                 <el-tab-pane label=\"我的关注\" name=\"myfollow\"></el-tab-pane>\n                 <el-tab-pane label=\"我的粉丝\" name=\"myfans\"></el-tab-pane>\n            </el-tabs>\n\n            <el-input v-if=\"active !== 'whitelist'\" class=\"m-privacy-search\" placeholder=\"请输入搜索内容\" v-model=\"keyword\" @keyup.enter.native=\"handleChange\">\n                <template slot=\"prepend\">关键词</template>\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleChange\"></el-button>\n            </el-input>\n\n            <div\n                class=\"m-whitelist-list u-list\"\n                v-if=\"list && list.length\"\n            >\n                <div class=\"u-item\" v-for=\"(item,i) in list\" :key=\"item.kith_id || item.id\">\n                    <a class=\"u-item-pic\" :href=\"userLink(item)\" target=\"_blank\">\n                        <img\n                            class=\"u-item-avatar\"\n                            :src=\"(item.kith_info || item).user_avatar | showAvatar\"\n                        />\n                    </a>\n                    <a\n                        class=\"u-item-name\"\n                        :href=\"(item.kith_id || item.user_id) | authorLink\"\n                        target=\"_blank\"\n                    >{{ (item.kith_info || item).display_name }}</a>\n                    <template v-if=\"active === 'whitelist'\">\n                        <span class=\"u-item-remark\" v-if=\"item.status\">备注：{{ item.remark || '无' }}</span>\n                        <span class=\"u-item-remark\" v-else>\n                            <i class=\"el-icon-loading\"></i> 等待确认中...\n                        </span>\n                    </template>\n                    <div class=\"u-item-btns\">\n                        <template v-if=\"active === 'whitelist'\">\n                            <el-popconfirm title=\"确认删除亲友关系吗？\" @confirm=\"remove(item.kith_id,i)\">\n                                <el-button\n                                    slot=\"reference\"\n                                    type=\"warning\"\n                                    size=\"mini\"\n                                    icon=\"el-icon-delete\"\n                                >删除</el-button>\n                            </el-popconfirm>\n\n                            <el-button\n                                @click=\"edit(item.kith_id,item)\"\n                                size=\"mini\"\n                                icon=\"el-icon-edit\"\n                                class=\"u-btn-edit\"\n                            >编辑</el-button>\n                        </template>\n                        <template v-else>\n                            <el-button\n                                @click=\"removeOther(item)\"\n                                size=\"mini\"\n                                icon=\"el-icon-delete\"\n                                class=\"u-btn-delete\"\n                            >移除</el-button>\n                        </template>\n                    </div>\n                </div>\n            </div>\n            <el-pagination background v-if=\"active !== 'whitelist'\" hide-on-single-page :current-page=\"pagination.pageIndex\" @current-change=\"currentChange\" :total=\"pagination.total\"></el-pagination>\n        </div>\n        <div class=\"m-whitelist-sidebar\" v-if=\"active !== 'myfans'\">\n            <div class=\"u-title\">\n                <i class=\"el-icon-news\"></i> {{ sideTitle }}\n            </div>\n            <el-input\n                class=\"u-input\"\n                v-model.number=\"uid\"\n                placeholder=\"输入UID添加\"\n                suffix-icon=\"el-icon-search\"\n                @keyup.enter.native=\"search\"\n                @change=\"search\"\n            ></el-input>\n            <div class=\"u-list\" v-if=\"userdata\">\n                <div class=\"u-item\">\n                    <img\n                        class=\"u-item-avatar\"\n                        :src=\"userdata.user_avatar | showAvatar\"\n                        :alt=\"userdata.display_name\"\n                    />\n                    <div class=\"u-item-info\">\n                        <span class=\"u-item-uid\">UID：{{ userdata.ID }}</span>\n                        <b class=\"u-item-name\">{{ userdata.display_name }}</b>\n                    </div>\n                    <i class=\"u-item-exist\" v-if=\"!isNewKith\">已添加</i>\n                </div>\n            </div>\n            <div class=\"u-null\" v-if=\"isNull\">\n                <el-alert title=\"无搜索结果\" type=\"info\" show-icon :closable=\"false\"></el-alert>\n            </div>\n            <el-button\n                class=\"u-submit\"\n                type=\"success\"\n                :disabled=\"active === 'wihtelist' && !allowAppend\"\n                @click=\"add\"\n            >{{ btnText }}</el-button>\n        </div>\n    </div>\n</template>\n<script>\nimport {\n    searchUserById,\n    addKith,\n    getKithList,\n    editKith,\n    removeKith,\n\n    getBlackList,\n    getMyFollowList,\n    getMyFansList,\n    follow,\n    unfollow,\n    deny,\n    undeny,\n    removeFans\n} from \"@/service/privacy.js\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { showAvatar, authorLink } from \"@jx3box/jx3box-common/js/utils\";\nexport default {\n    name: \"privacy\",\n    props: [],\n    data: function () {\n        return {\n            // 列表区\n            list: [],\n            loading: false,\n\n            // 侧边栏\n            uid: \"\",\n            userdata: \"\",\n            flag : false,\n\n            // 上限\n            limit_map : {\n                member : 5,\n                vip : 20,\n                pro : 100,\n            },\n            identity : 'member',\n\n            active: 'whitelist',\n            keyword: '',\n            pagination: {\n                pageIndex: 1,\n                pageSize: 10,\n                total: 0\n            }\n        };\n    },\n    computed: {\n        allowAppend: function () {\n            // 有搜索结果\n            // 且未达到上限\n            // 且未重复添加\n            return this.userdata && (this.total < this.limit) && this.isNewKith\n        },\n        // 未重复\n        isNewKith : function (){\n            let kith_id = this.userdata?.ID\n            return !this.currentIdList.includes(kith_id)\n        },\n        // 当前用户UID列表\n        currentIdList : function (){\n            return this.list.map((item) => {return item.kith_id})\n        },\n        // 上限\n        limit: function () {\n            return this.limit_map[this.identity] || 5\n        },\n        // 当前亲友总数\n        total: function () {\n            return this.list?.length;\n        },\n        // 无搜索结果\n        isNull: function () {\n            return this.uid && !this.userdata && this.flag;\n        },\n        fns() {\n            return {\n                blacklist: getBlackList,\n                myfollow: getMyFollowList,\n                myfans: getMyFansList,\n            }\n        },\n        removeFns() {\n            return {\n                blacklist: undeny,\n                myfollow: unfollow,\n                myfans: removeFans,\n            }\n        },\n        addFns() {\n            return {\n                blacklist: deny,\n                myfollow: follow,\n                whitelist: addKith,\n            }\n        },\n        btnText() {\n            return {\n                blacklist: \"拉黑\",\n                myfollow: \"关注\",\n                whitelist: `添加亲友 (${ this.total } / ${ this.limit })`\n            }[this.active]\n        },\n        sideTitle() {\n            return {\n                blacklist: \"添加黑名单\",\n                myfollow: \"添加关注\",\n                whitelist: \"添加亲友\"\n            }[this.active]\n        }\n    },\n    methods: {\n        handleChange() {\n            this.pagination.pageIndex = 1;\n            this.loadList();\n        },\n        tabChange() {\n            this.keyword = this.$route.query.keyword || \"\";\n            this.pagination.pageIndex = 1;\n            this.loadList();\n        },\n        currentChange(val) {\n            this.pagination.pageIndex = val;\n            this.loadList();\n        },\n        // 搜索\n        search(val){\n            if (!val || isNaN(val)) return;\n\n            this.flag = false\n            searchUserById(val).then((res) => {\n                this.userdata = res.data.data;\n            }).finally(() => {\n                this.flag = true\n            })\n        },\n        add() {\n            this.addFns[this.active](this.userdata.ID).then((res) => {\n                this.loadList();\n            });\n        },\n        // 添加亲友\n        addKith() {\n            this.allowAppend && addKith(this.uid).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"添加成功\",\n                    type: \"success\",\n                });\n                this.list.push({\n                    kith_id : this.uid,\n                    level : 0,\n                    status : 0,\n                    kith_info : this.userdata\n                })\n            });\n        },\n        // 添加关注\n        follow() {\n            follow(this.userdata.ID).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"关注成功\",\n                    type: \"success\",\n                });\n                this.loadList();\n            });\n        },\n        // 添加黑名单\n        deny() {\n            deny(this.userdata.ID).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"拉黑成功\",\n                    type: \"success\",\n                });\n                this.loadList();\n            });\n        },\n        // 加载列表\n        loadList() {\n            this.loading = true;\n            this.$router.push({\n                name: 'privacy',\n                query: {\n                    tab: this.active,\n                }\n            })\n            if (this.active === 'whitelist') {\n                getKithList()\n                    .then((res) => {\n                        let list = res.data.data;\n                        list = list.sort((a, b) => {\n                            return b.level - a.level;\n                        });\n                        this.list = list;\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n            } else {\n                const params = {\n                    pageIndex: this.pagination.pageIndex,\n                    pageSize: this.pagination.pageSize,\n                    display_name: this.keyword,\n                }\n                this.fns[this.active](params).then((res) => {\n                    this.list = res.data.data.list || [];\n                    this.pagination.total = res.data.data.page.total;\n                }).finally(() => {\n                    this.loading = false;\n                });\n            }\n        },\n        // 删除亲友\n        remove(kith_id, i) {\n            removeKith(kith_id).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"删除成功\",\n                    type: \"success\",\n                });\n                this.list.splice(i, 1);\n            });\n        },\n        // 编辑备注\n        edit(kith_id, item) {\n            this.$prompt(\"请输入备注\", \"设置\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n            }).then(({ value }) => {\n                editKith(kith_id, { remark: value }).then(() => {\n                    this.$notify({\n                        title: \"成功\",\n                        message: \"编辑成功\",\n                        type: \"success\",\n                    });\n                    item.remark = value;\n                });\n            });\n        },\n        // 移除\n        removeOther(item) {\n            const msgs = {\n                blacklist: \"确认解除对该用户的屏蔽？\",\n                myfollow: \"确认不再关注该用户？\",\n                myfans: \"确认要移除粉丝？\",\n            }\n            this.$confirm(msgs[this.active], \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n            }).then(() => {\n                const id = this.active === 'myfans' ? item.user_id : item.bind_user_id;\n                this.removeFns[this.active](id).then(() => {\n                    this.$notify({\n                        title: \"成功\",\n                        message: \"操作成功\",\n                        type: \"success\",\n                    });\n                    this.loadList();\n                });\n            }).finally(() => {})\n        },\n        // 用户链接\n        userLink(item) {\n            let id = ''\n            if (this.active === 'whitelist') {\n                id = item.kith_id\n            } else {\n                id = this.active !== 'myfans' ? item.bind_user_id : item.user_id\n            }\n            return authorLink(id)\n        }\n    },\n    mounted: function () {\n        this.active = this.$route.query.tab || \"whitelist\";\n        this.loadList();\n        User.getAsset().then((asset) => {\n            if(User._isPRO(asset)){\n                this.identity = 'pro'\n            }else if(User._isVIP(asset)){\n                this.identity = 'vip'\n            }else{\n                this.identity = 'member'\n            }\n        });\n    },\n    filters: {\n        showAvatar: function (val) {\n            return showAvatar(val, 'm');\n        },\n        authorLink,\n    }\n};\n</script>\n\n<style scoped lang=\"less\">\n@import \"../assets/css/whitelist.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./privacy.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./privacy.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./privacy.vue?vue&type=template&id=27b6be61&scoped=true\"\nimport script from \"./privacy.vue?vue&type=script&lang=js\"\nexport * from \"./privacy.vue?vue&type=script&lang=js\"\nimport style0 from \"./privacy.vue?vue&type=style&index=0&id=27b6be61&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27b6be61\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./privacy.vue?vue&type=style&index=0&id=27b6be61&prod&scoped=true&lang=less\""],"sourceRoot":""}