(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bc81ea2"],{"13d5":function(t,a,s){"use strict";var n=s("23e7"),e=s("d58f").left,i=s("a640"),o=s("1212"),r=s("9adc"),c=!r&&o>79&&o<83,u=c||!i("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(t){var a=arguments.length;return e(this,t,a,a>1?arguments[1]:void 0)}})},"6d24":function(t,a,s){"use strict";s.r(a);s("b0c0"),s("b64b");var n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-credit m-tasks"},[t._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-tasks-list"},[t._l(t.list,(function(s,n){return a("taskItem",{key:n,attrs:{data:s},on:{update:t.checkFinish}})})),Object.keys(t.group).length?t._l(t.group,(function(s,n){return a("div",{key:n,staticClass:"u-item u-group",class:t.groupInfo[n].open?"open":"close"},[a("div",{staticClass:"u-parent u-item"},[a("img",{staticClass:"u-img",attrs:{src:t.groupInfo[n].img,alt:t.groupInfo[n].name}}),a("div",{staticClass:"u-box"},[a("a",{staticClass:"u-title",attrs:{href:t.groupInfo[n].url,target:"_blank"}},[t._v(t._s(t.groupInfo[n].name))]),a("el-button",{attrs:{size:"small",type:t.groupInfo[n].open?"primary":""},on:{click:function(a){t.groupInfo[n].open=!t.groupInfo[n].open}}},[t._v(t._s(t.groupInfo[n].open?"折叠":"展开")),a("i",{class:t.groupInfo[n].open?"el-icon-caret-top":"el-icon-caret-right"})])],1)]),t._l(s,(function(s,n){return a("taskItem",{key:n,attrs:{data:s},on:{update:t.checkFinish}})}))],2)})):t._e()],2)])},e=[function(){var t=this,a=t._self._c;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-coffee-cup"}),t._v(" 任务中心")])}],i=(s("4de4"),s("14d9"),s("13d5"),s("4e82"),s("d3b7"),s("ac1f"),s("5319"),s("41cb"));function o(t){return Object(i["c"])().get("/api/personal/task",{params:t})}function r(t){return Object(i["c"])().get("/api/personal/task/".concat(t,"/check-status"))}var c=s("65c2"),u=function(){var t=this,a=t._self._c;return t.data?a("div",{staticClass:"u-item"},[a("img",{staticClass:"u-img",attrs:{src:t.data.task.task_icon||t.defaultTaskIcon,alt:t.data.task.action_type_desc}}),a("div",{staticClass:"u-box"},[a("div",{staticClass:"u-info"},[a("a",{staticClass:"u-title",attrs:{href:t.data.task.task_url,target:"_blank"}},[t._v(t._s(t.data.task.action_type_desc))]),a("span",{staticClass:"u-desc"},[t._v(" "+t._s(t.data.task.task_detail)+" ∕ "),t._l(t.data.attr,(function(s,n){return a("span",{key:n,staticClass:"u-attr"},[t._v(" "+t._s(t.attr_name[s.name])+" +"+t._s(s.count)+" ")])}))],2)]),a("div",{staticClass:"u-btn"},[a("el-button",{attrs:{size:"small",type:t.data.hasFinish?"success":"warning",disabled:t.data.hasFinish,icon:t.data.hasFinish?"el-icon-check":""},on:{click:function(a){return t.checkFinish(t.data.task.id)}}},[t._v(t._s(t.data.hasFinish?"已完成":"领取奖励"))])],1)])]):t._e()},l=[],d={name:"tasks",props:["data"],data:function(){return{attr_name:{experience:"经验",points:"积分"}}},computed:{defaultTaskIcon:function(){return c["__imgPath"]+"image/common/jx3box_black.svg"}},methods:{checkFinish:function(t){this.$emit("update",t)}}},p=d,f=s("2877"),k=Object(f["a"])(p,u,l,!1,null,null,null),_=k.exports,h=s("cc9a"),g={name:"tasks",components:{taskItem:_},data:function(){return{loading:!1,list:[],group:{},groupInfo:{}}},methods:{loadTasks:function(){var t=this;this.loading=!0,o({is_limit_everyday:0,os_visible:1}).then((function(a){var s=a.data.data.list;t.list=s.filter((function(t){return""==t.task.task_group})),t.group=s.sort((function(t,a){var s=parseInt(t.task.action_type.split("_").pop(),10),n=parseInt(a.task.action_type.split("_").pop(),10);return s-n})).reduce((function(t,a){return a.task.task_group&&(t[a.task.task_group]||(t[a.task.task_group]=[]),t[a.task.task_group].push(a)),t}),{})})).finally((function(){t.loading=!1}))},loadAc:function(){var t=this;Object(h["b"])("task_group_info").then((function(a){a=a.replace(/ /g,""),t.groupInfo=JSON.parse(a)}))},checkFinish:function(t){var a=this;r(t).then((function(t){t.data.data.hasFinish?(a.$notify({title:"成功",message:"完成任务，获得奖励",type:"success"}),location.reload()):a.$notify({title:"提示",message:"您没有完成任务",type:"warning"})}))}},mounted:function(){this.loadTasks(),this.loadAc()}},m=g,v=(s("6eaa"),Object(f["a"])(m,n,e,!1,null,null,null));a["default"]=v.exports},"6eaa":function(t,a,s){"use strict";s("81c6")},"81c6":function(t,a,s){},d58f:function(t,a,s){"use strict";var n=s("59ed"),e=s("7b0b"),i=s("44ad"),o=s("07fa"),r=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(a,s,u,l){var d=e(a),p=i(d),f=o(d);if(n(s),0===f&&u<2)throw new r(c);var k=t?f-1:0,_=t?-1:1;if(u<2)while(1){if(k in p){l=p[k],k+=_;break}if(k+=_,t?k<0:f<=k)throw new r(c)}for(;t?k>=0:f>k;k+=_)k in p&&(l=s(l,p[k],k,d));return l}};t.exports={left:u(!1),right:u(!0)}}}]);
//# sourceMappingURL=chunk-0bc81ea2.b44c8c04.js.map