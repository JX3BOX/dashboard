(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17d79e15"],{"1a3b":function(t,e,n){"use strict";n("d499")},"3f7e":function(t,e,n){"use strict";var a=n("b5db"),i=a.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"4e82":function(t,e,n){"use strict";var a=n("23e7"),i=n("e330"),r=n("59ed"),o=n("7b0b"),c=n("07fa"),s=n("083a"),u=n("577e"),d=n("d039"),f=n("addb"),l=n("a640"),v=n("3f7e"),p=n("99f4"),m=n("1212"),b=n("ea83"),h=[],g=i(h.sort),y=i(h.push),_=d((function(){h.sort(void 0)})),j=d((function(){h.sort(null)})),C=l("sort"),O=!d((function(){if(m)return m<70;if(!(v&&v>3)){if(p)return!0;if(b)return b<603;var t,e,n,a,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)h.push({k:e+a,v:n})}for(h.sort((function(t,e){return e.v-t.v})),a=0;a<h.length;a++)e=h[a].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),k=_||!j||!C||!O,w=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}};a({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&r(t);var e=o(this);if(O)return void 0===t?g(e):g(e,t);var n,a,i=[],u=c(e);for(a=0;a<u;a++)a in e&&y(i,e[a]);f(i,w(t)),n=c(i),a=0;while(a<n)e[a]=i[a++];while(a<u)s(e,a++);return e}})},"4ec9":function(t,e,n){"use strict";n("6f48")},"6f48":function(t,e,n){"use strict";var a=n("6d61"),i=n("6566");a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"99f4":function(t,e,n){"use strict";var a=n("b5db");t.exports=/MSIE|Trident/.test(a)},a83c:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-theme m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-theme-box"},[e("div",{staticClass:"m-theme-left"},[e("div",{staticClass:"u-top"},[t.previewUrl?e("img",{staticClass:"u-img",attrs:{src:t.previewUrl,fit:"contain"}}):e("div",{staticClass:"u-no-preview"},[t._v(" 暂 无"),e("br"),t._v(" 预 览 ")])]),e("div",{staticClass:"u-bottom"},t._l(t.themeType,(function(n,a){return e("div",{key:a,staticClass:"u-type-box"},[t.isStatus(n)?e("img",{staticClass:"u-img",attrs:{src:t.getActiveImg(n),fit:"contain"},on:{click:function(e){return t.preview(n)}}}):n.statue?e("div",{staticClass:"u-no-select"},[t._v(" 暂 无"),e("br"),t._v(" 设 置 ")]):e("div",{staticClass:"u-no-select"},[t._v(" 敬 请"),e("br"),t._v(" 期 待 ")]),e("div",{staticClass:"u-title"},[t._v(t._s(n.name))])])})),0)]),e("div",{staticClass:"m-theme-right"},[e("div",{staticClass:"u-theme"},t._l(t.decoration,(function(n,a){return e("div",{key:a+n.val,staticClass:"u-decoration-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" "+t._s(n.name))]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=skin&search=".concat(n.name),target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-decoration-item"},t._l(n.list,(function(n,i){return e("div",{key:"c"+i,staticClass:"u-picbox",attrs:{title:n.name}},[e("div",{staticClass:"u-pic",class:n.isHave?n.using?"select":"":"noHave",on:{click:function(e){return t.setStatus(a,i,n)}}},[e("el-image",{attrs:{src:t._f("showDecoration")(n),fit:"contain"}})],1),e("div",{staticClass:"u-decoration-name"},[t._v(t._s(n.text))])])})),0)])})),0)])]),e("div",{staticClass:"u-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.decorationSubmit}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],r=n("ade3"),o=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("4e82"),n("e9c4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("b547")),c=n("aa38"),s=n("c9d2"),u=n("65c2"),d=n("2ef0"),f=n("46c1"),l={name:"theme",props:[],data:function(){return{tabList:f["e"],uid:s["a"].getInfo().uid,themeType:[{name:"个人名片",type:"atcard",statue:1},{name:"主页风格",type:"homebg",statue:1},{name:"侧栏主题",type:"sidebar",statue:1},{name:"首页日历",type:"calendar",statue:1},{name:"评论皮肤",type:"comment",statue:1}],previewUrl:"",decoration:[],decorationJson:[],originalActivateName:null,back:{}}},computed:{},methods:{reset:function(){var t=Object(d["cloneDeep"])(this.back);this.previewUrl="",this.decoration=t.decoration,this.originalActivateName=t.originalActivateName},loadDecoration:function(){var t=this;Object(c["c"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(c["b"])().then((function(e){var n=["atcard","homebg","sidebar","calendar","comment"],a=e.data.data.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));t.decoration=t.formattingData(a,"val"),t.back.decoration=Object(d["cloneDeep"])(t.decoration),t.back.originalActivateName=Object(d["cloneDeep"])(t.originalActivateName)}))}))},formattingData:function(t,e){var n=this,a={},i=[],o=[],c=[{type:"atcard",text:"个人名片",sort:1,isHave:0,using:0},{type:"homebg",text:"主页风格",sort:2,isHave:0,using:0},{type:"sidebar",text:"侧栏主题",sort:3,isHave:0,using:0},{type:"calendar",text:"首页日历",sort:4,isHave:0,using:0},{type:"comment",text:"评论皮肤",sort:5,isHave:0,using:0}];t.forEach((function(t,i){var r=c.find((function(e){return e.type==t.type}));r&&(t.sort=r.sort,a[t[e]]?a[t[e]].push(t):a[t[e]]=[t],t.using&&(n.originalActivateName=t[e]))}));var s=function(t){return function(e,n){return e[t]-n[t]}},u=function(t,e,n){var a=new Map,i=[],r=Object(d["cloneDeep"])(c),s=t.filter((function(t){return!a.has(t[e])&&a.set(t[e],1)}));return r.forEach((function(t,e){if(t.val=n,-1===o.indexOf(n)){var a=s.find((function(e){return e.type==t.type}));a&&(t.isHave=1,t.using=a.using)}i.push(t)})),i},f=Object(d["cloneDeep"])(this.decorationJson);return Object.keys(f).forEach((function(t,e){if(!a[t]&&1==f[t].status){o.push(t);var n=Object(d["cloneDeep"])(c),i=[];n.forEach((function(e){e.val=t,i.push(e)})),a[t]=i}})),Object.keys(a).forEach((function(t,n){var o;i.push(Object(r["a"])(Object(r["a"])(Object(r["a"])({},e,t),"name",null===(o=f[t])||void 0===o?void 0:o.desc),"list",u(a[t],"type",t).sort(s("sort"))))})),i},setStatus:function(t,e,n){var a=this;if(n.isHave){var i=n.type,r=n.val;this.decoration.forEach((function(t,e){var n=t.list;n.forEach((function(t,n){t.val!=r&&t.type==i&&1==t.using&&(a.decoration[e].list[n].using=0)}))})),1==n.using?n.using=0:n.using=1}},isStatus:function(t){var e=t.type,n=!1,a=Object(d["flatten"])(this.decoration.map((function(t){return t.list})));return a.forEach((function(t){t.type==e&&1==t.using&&(n=!0)})),!!n},preview:function(t){this.previewUrl=this.getActiveImg(t)},getActiveImg:function(t){var e=t.type,n=void 0,a=Object(d["flatten"])(this.decoration.map((function(t){return t.list})));a.forEach((function(t){t.type==e&&1==t.using&&(n=t.val)}));var i="https://cdn.jx3box.com/static/dashboard/img/no.5fe91973.svg";return n?u["__imgPath"]+"decoration/images/".concat(n,"/").concat(e,"_preview.png"):i},decorationSubmit:function(){var t=this,e=[],n="",a=Object(d["flatten"])(this.decoration.map((function(t){return t.list}))),i=a.map((function(t){return 1==t.using&&e.push(t.type),{val:t.val,using:t.using,type:t.type}}));Object(c["h"])(i).then((function(a){var i={name:n,type:e};n||(i.name=!1),localStorage.setItem("decoration_all",JSON.stringify(i)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))}},mounted:function(){this.loadDecoration()},filters:{showDecoration:function(t){return u["__imgPath"]+"decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")}},components:{uc:o["a"]}},v=l,p=(n("1a3b"),n("2877")),m=Object(p["a"])(v,a,i,!1,null,null,null);e["default"]=m.exports},aa38:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"j",(function(){return l})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"a",(function(){return b}));n("99af");var a=n("41cb"),i=n("bc3a"),r=n.n(i),o=n("65c2");function c(t){return Object(a["a"])().get("/api/cms/user/decoration",{params:t})}function s(t){return Object(a["a"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return r.a.get(t)}function d(){return r.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function f(t,e){return Object(a["a"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function l(t){return Object(a["a"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return Object(a["a"])().get("/api/cms/user/config/honor")}function p(t){return Object(a["b"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function m(t){return Object(a["a"])().put("/api/cms/user/honor/use/".concat(t))}function b(){return Object(a["a"])().delete("/api/cms/user/honor/use")}},d499:function(t,e,n){},ea83:function(t,e,n){"use strict";var a=n("b5db"),i=a.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]}}]);
//# sourceMappingURL=chunk-17d79e15.726cb268.js.map