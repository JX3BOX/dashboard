(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56d3fff5"],{4208:function(a,t,s){"use strict";s.r(t);var e=function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("uc",{staticClass:"m-dashboard-avatar"},[s("div",{staticClass:"m-profile-avatar"},[s("div",{staticClass:"m-profile-avatar-primary"},[s("div",{staticClass:"u-avatar"},[s("img",{staticClass:"u-avatar u-avatar-l",attrs:{src:a._f("showAvatar")(a.avatar)}})]),s("el-upload",{staticClass:"u-upload",attrs:{drag:"",accept:"image/png, image/gif, image/jpeg","on-change":a.upload,action:"upload/avatar","auto-upload":!1}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[a._v(" 将文件拖到此处，或 "),s("em",[a._v("点击上传")]),s("br"),s("span",{staticClass:"u-tip"},[a._v("只能上传jpg/png/gif文件")])])]),s("p",{staticClass:"u-btng"},[s("el-button",{attrs:{type:"primary"},on:{click:a.submit}},[a._v("确认")]),s("el-button",{on:{click:a.reset}},[a._v("重置")])],1)],1),s("div",{staticClass:"m-profile-avatar-frame"},[s("h3",{staticClass:"u-title"},[a._v(" 自定义头像框 "),s("span",{staticClass:"u-limit",class:{on:a.isVIP}},[a._v(" ( "),s("i",{class:a.isVIP?"el-icon-unlock":"el-icon-lock"}),a._v("仅"),s("a",{attrs:{href:"/vip/premium?from=dashboard_avatar",target:"_blank"}},[a._v("高级/专业版")]),a._v("账户适用 ) ")])]),a.frames?s("div",{staticClass:"u-list"},[s("li",{staticClass:"u-item",class:{on:!a.frame},on:{click:function(t){return a.selectFrame("")}}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"无边框",placement:"top","open-delay":200}},[s("div",[s("img",{directives:[{name:"show",rawName:"v-show",value:!a.frame,expression:"!frame"}],staticClass:"u-pic",attrs:{src:a._f("showSmallAvatar")(a.avatar)}}),s("i",{staticClass:"u-frame u-frame-none"})])])],1),a._l(a.frames,(function(t,e){return s("li",{key:e,staticClass:"u-item",class:{on:e==a.frame},on:{click:function(s){return a.selectFrame(t)}}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.desc,placement:"top","open-delay":300}},[s("div",{class:{"u-blocked":!t.status}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e==a.frame,expression:"name == frame"}],staticClass:"u-pic",class:{isCircle:"circle"==t.style},attrs:{src:a._f("showSmallAvatar")(a.avatar)}}),s("i",{staticClass:"u-frame"},[s("img",{attrs:{src:a.showFrame(t.name,t.files.s.file)}})])])])],1)}))],2):a._e(),s("div",{staticClass:"u-tip"},[s("i",{staticClass:"el-icon-warning-outline"}),a._v(" 「限定头像框」仅在指定时间段可选择激活。 ")])])])])},i=[],r=(s("99af"),s("b0c0"),s("b547")),n=s("46e8"),c=s("c9d2"),l=s("85e4"),o=s("1645"),u=s("65c2"),m={name:"avatar",props:[],data:function(){return{bak:"",avatar:"",frame:"",isVIP:!1,uid:c["a"].getInfo().uid,frames:o}},computed:{data:function(){return{user_avatar:this.avatar,user_avatar_frame:this.frame}}},methods:{upload:function(a,t){var s=this,e=new FormData,i=a.raw;e.append("avatar",i),Object(n["m"])(e).then((function(a){s.$message({message:"上传成功",type:"success"}),s.avatar=a.data.data[0]}))},reset:function(){this.avatar=this.bak},submit:function(){var a=this;this.isVIP||(this.frame&&this.$notify({title:"头像框未生效",message:"头像框仅高级/专业账号可用",type:"warning"}),this.frame=""),Object(n["j"])(this.data).then((function(t){c["a"].refresh("avatar",a.avatar),a.$message({message:"头像更新成功",type:"success"})}))},loadFrames:function(){var a=this;Object(n["d"])().then((function(t){a.frames=t.data}))},showFrame:function(a,t){return u["__imgPath"]+"avatar/images/".concat(a,"/").concat(t)},selectFrame:function(a){a?a.status&&(this.frame=a.name):this.frame=""},init:function(){var a=this;this.loadFrames(),c["a"].isVIP().then((function(t){a.isVIP=t})),this.avatar=this.bak=c["a"].getInfo().avatar_origin,Object(n["f"])(this.uid).then((function(t){a.frame=t.data.data.user_avatar_frame||""}))}},filters:{showAvatar:function(a){return Object(l["showAvatar"])(a,"l",!1)},showSmallAvatar:function(a){return Object(l["showAvatar"])(a,68,!1)}},created:function(){this.init()},components:{uc:r["a"]}},f=m,v=(s("bfad"),s("2877")),d=Object(v["a"])(f,e,i,!1,null,null,null);t["default"]=d.exports},bfad:function(a,t,s){"use strict";s("d38b")},d38b:function(a,t,s){}}]);
//# sourceMappingURL=chunk-56d3fff5.5e2cd52a.js.map