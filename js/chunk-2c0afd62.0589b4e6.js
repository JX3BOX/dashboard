(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0afd62"],{"0c1b":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return c}));var r=i("64c7"),a=i("2777"),n=r["__bb"]+"api/wiki/user_item";function s(t){return a["a"].post(n,t)}var o=r["__bb"]+"api/wiki/";function u(t){return a["a"].get(o+t)}var l=r["__bb"]+"api/wiki/user_item/";function c(t){return a["a"].get(l,{params:t})}},"3f87":function(t,e,i){},"498a":function(t,e,i){"use strict";var r=i("23e7"),a=i("58a8").trim,n=i("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var r=i("1d80"),a=i("5899"),n="["+a+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),u=function(t){return function(e){var i=String(r(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(o,"")),i}};t.exports={start:u(1),end:u(2),trim:u(3)}},9444:function(t){t.exports=JSON.parse('{"game":"玩法","jargon":"术语","plot":"剧情","bigbang":"事件","gossip":"八卦","organization":"帮会","player":"玩家","other":"其它"}')},a6231:function(t,e,i){"use strict";var r=i("23e7"),a=i("b727").every,n=i("a640"),s=i("ae40"),o=n("every"),u=s("every");r({target:"Array",proto:!0,forced:!o||!u},{every:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},a64c:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-publish-box"},[i("pubheader",{attrs:{name:"百科词条"}},[t._t("header")],2),i("h1",{staticClass:"m-publish-wiki-header"},[t._v("贡献词条")]),i("el-form",{staticClass:"m-publish-wiki",attrs:{"label-position":"left","label-width":"80px"},model:{value:t.primary,callback:function(e){t.primary=e},expression:"primary"}},[i("el-form-item",{staticClass:"m-publish-wiki-type isRequired",attrs:{label:"类别"}},[i("el-radio-group",{model:{value:t.primary.type,callback:function(e){t.$set(t.primary,"type",e)},expression:"primary.type"}},t._l(t.types,(function(e,r){return i("el-radio",{key:r,attrs:{label:r,border:""}},[t._v(t._s(e))])})),1)],1),i("el-form-item",{staticClass:"m-publish-wiki-title isRequired",attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"请输入词条名称",minlength:1,maxlength:50,disabled:!!t.id&&!t.isSuper},model:{value:t.primary.title,callback:function(e){t.$set(t.primary,"title",e)},expression:"primary.title"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-content isRequired",attrs:{label:"内容"}},[i("Tinymce",{attrs:{attachmentEnable:!0,resourceEnable:!0,height:600},model:{value:t.primary.content,callback:function(e){t.$set(t.primary,"content",e)},expression:"primary.content"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-tags",attrs:{label:"标签"}},[t._l(t.primary.tag,(function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",placeholder:"回车以添加"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 添加标签")])],2),i("el-form-item",{staticClass:"m-publish-wiki-remark isRequired",attrs:{label:"批注"}},[i("el-input",{attrs:{maxlength:200,minlength:2,"show-word-limit":"",required:"",rows:3,type:"textarea",placeholder:"填写本次修订说明"},model:{value:t.primary.remark,callback:function(e){t.$set(t.primary,"remark",e)},expression:"primary.remark"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-publish",attrs:{label:""}},[i("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:t.processing},on:{click:t.publish}},[t._v("提交词条")]),i("el-checkbox",{staticClass:"u-anonymous",model:{value:t.primary.anonymous,callback:function(e){t.$set(t.primary,"anonymous",e)},expression:"primary.anonymous"}},[t._v("匿名")])],1)],1)],1)},a=[],n=(i("a6231"),i("c975"),i("a434"),i("498a"),i("a0fa")),s=i("9444"),o=i("221a"),u=i("c9d2"),l=i.n(u),c=i("0c1b"),p=i("64c7"),m={name:"wiki",props:[],data:function(){return{primary:{wiki_id:"",type:"",title:"",content:"",remark:"",tag:[],reference:[],anonymous:0},types:s,inputVisible:!1,inputValue:"",isSuper:l.a.getInfo().group>60}},computed:{id:function(){return this.$route.params.id},processing:function(){return this.$store.state.processing}},watch:{},methods:{publish:function(){var t=this,e=this.validate();e&&(this.$store.commit("startProcess"),this.primary.anonymous=~~this.primary.anonymous,Object(c["a"])(this.primary).then((function(e){t.success(e)})))},success:function(t){this.$message({message:"提交成功请等待审核",type:"success"}),location.href=p["__Root"]+"wiki/?pid="+this.id},loadData:function(){var t=this;Object(c["b"])(this.id).then((function(e){var i=e.data.data;t.primary.wiki_id=i.id,t.primary.type=i.type,t.primary.title=i.title,t.primary.content=i.content,t.primary.tag=i.tag,t.primary.anonymous=!!i.anonymous}))},validate:function(){var t=this,e=["title","type","content","remark"],i=e.every((function(e){return!!t.primary[e]}));return i||this.$message.error("请完成必填项"),i},handleClose:function(t){this.primary.tag.splice(this.primary.tag.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue.trim();t&&this.primary.tag.push(t),this.inputVisible=!1,this.inputValue=""}},created:function(){this.id&&this.loadData()},components:{pubheader:n["a"],Tinymce:o["a"]}},f=m,h=(i("efcf0"),i("2877")),d=Object(h["a"])(f,r,a,!1,null,null,null);e["default"]=d.exports},c8d2:function(t,e,i){var r=i("d039"),a=i("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}},efcf0:function(t,e,i){"use strict";var r=i("3f87"),a=i.n(r);a.a}}]);
//# sourceMappingURL=chunk-2c0afd62.0589b4e6.js.map