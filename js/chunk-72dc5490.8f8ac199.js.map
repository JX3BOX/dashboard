{"version":3,"sources":["webpack:///./src/utils/filters.js","webpack:///./src/views/role/BindRole.vue","webpack:///src/views/role/BindRole.vue","webpack:///./src/views/role/BindRole.vue?aca0","webpack:///./src/views/role/BindRole.vue?577d","webpack:///./src/service/role.js","webpack:///./src/components/role/roleform.vue?3a08","webpack:///./src/components/role/roleform.vue","webpack:///src/components/role/roleform.vue","webpack:///./src/components/role/roleform.vue?941c","webpack:///./src/components/role/roleform.vue?2b9e","webpack:///./src/views/role/BindRole.vue?aaca"],"names":["showBodyType","val","_bodyMap$val","bodyMap","label","showSchoolIcon","id","__imgPath","showSchoolName","school_id_map","render","_vm","this","_c","_self","staticClass","_v","attrs","on","goBack","slot","model","value","tab","callback","$$v","expression","directives","name","rawName","loading","token","arg","onCopy","onError","_s","demo_url","form","processing","submit","staticRenderFns","props","data","__ossMirror","location","href","includes","server","localStorage","getItem","mount","body_type","note","custom","computed","methods","$notify","title","message","text","type","error","_this","createRole","then","res","$message","$router","push","finally","mounted","_this2","getToken","components","roleform","component","getRoles","params","$team","get","unbindRole","noteRole","role_id","put","concat","post","updateRole","getRole","deleteRole","delete","starRole","unstarRole","getRoleBelongTeams","ref","position","$set","setDefaultServer","_l","servers","key","school_map","_f","body_map","building","btn_txt","window","innerWidth","prop","event","watch","newval","deep","handler","$emit","$alert","confirmButtonText","setItem","filters"],"mappings":"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","file":"js/chunk-72dc5490.8f8ac199.js","sourcesContent":["import { bodyMap } from \"@jx3box/jx3box-facedat/assets/data/index.json\";\nfunction showBodyType(val) {\n    return bodyMap[val]?.label || \"未知\";\n}\n\nimport school_id_map from \"@jx3box/jx3box-data/data/xf/schoolid.json\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nfunction showSchoolIcon(val) {\n    let id = val || 0;\n    return __imgPath + \"image/school/\" + id + \".png\";\n}\n\nfunction showSchoolName(val) {\n    let id = val || 0;\n    return (id && school_id_map[id]) || \"未知\";\n}\n\nimport { showTime } from \"@jx3box/jx3box-common/js/moment.js\";\nimport { getThumbnail, authorLink, showAvatar } from \"@jx3box/jx3box-common/js/utils\";\n\nexport {\n    showBodyType,\n    showSchoolIcon,\n    showSchoolName,\n    showTime,\n    getThumbnail,\n    authorLink,\n    showAvatar\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"v-role-bind\"},[_c('h2',{staticClass:\"u-title\"},[_c('i',{staticClass:\"el-icon-connection\"}),_vm._v(\" 绑定角色 \"),_c('el-button',{staticClass:\"u-back\",attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"icon\":\"el-icon-arrow-left\"},on:{\"click\":_vm.goBack},slot:\"reference\"},[_vm._v(\"返回列表\")])],1),_c('div',{staticClass:\"m-role-bind\"},[_c('el-tabs',{model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"插件绑定（仅正式服可用）\",\"name\":\"std\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"插件绑定\"),_c('span',{staticClass:\"u-tab-tip\"},[_vm._v(\"（仅正式服可用）\")])]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-token\"},[_c('h2',{staticClass:\"u-title-name\"},[_vm._v(\" 绑定令牌 \"),_c('span',{staticClass:\"u-desc\"},[_vm._v(\"( 10分钟内有效，超时请刷新页面 )\")])]),_c('span',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(_vm.token),expression:\"token\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.onCopy),expression:\"onCopy\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:(_vm.onError),expression:\"onError\",arg:\"error\"}],staticClass:\"u-token\",attrs:{\"title\":\"点击复制\"}},[_c('i',{staticClass:\"el-icon-document-copy\"}),_vm._v(\" \"+_vm._s(_vm.token)+\" \")])]),_c('div',{staticClass:\"m-tutorial\"},[_c('h2',{staticClass:\"u-title-name\"},[_c('i',{staticClass:\"el-icon-question\"}),_vm._v(\" 绑定步骤 \")]),_c('p',[_vm._v(\" 打开【茗伊插件集】-【团队】-【团队平台】 \"),_c('br'),_vm._v(\"【点击绑定】并【填入上方密钥】以绑定角色到魔盒账号 \"),_c('br'),_vm._v(\"可以将多个角色绑定至同一个魔盒账号 \")]),_c('img',{staticClass:\"u-demo\",attrs:{\"src\":_vm.demo_url}})])]),_c('el-tab-pane',{attrs:{\"label\":\"自定义创建\",\"name\":\"origin\"}},[_c('roleform',{attrs:{\"data\":_vm.form,\"btn_txt\":\"创建\",\"processing\":_vm.processing},on:{\"submit\":_vm.submit}})],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-role-bind\">\n        <h2 class=\"u-title\">\n            <i class=\"el-icon-connection\"></i> 绑定角色\n            <!-- <div class=\"u-op\">\n                <router-link to=\"/role/add\" class=\"el-button el-button--primary el-button--mini\">\n                    <i class=\"el-icon-plus\"></i> 自定义角色\n                </router-link>\n            </div> -->\n            <el-button\n                slot=\"reference\"\n                class=\"u-back\"\n                size=\"mini\"\n                icon=\"el-icon-arrow-left\"\n                @click=\"goBack\"\n            >返回列表</el-button>\n        </h2>\n        <div class=\"m-role-bind\">\n            <el-tabs v-model=\"tab\">\n                <el-tab-pane label=\"插件绑定（仅正式服可用）\" name=\"std\">\n                    <span slot=\"label\">插件绑定<span class=\"u-tab-tip\">（仅正式服可用）</span></span>\n                    <div class=\"m-token\" v-loading=\"loading\">\n                        <h2 class=\"u-title-name\">\n                            绑定令牌\n                            <span class=\"u-desc\">( 10分钟内有效，超时请刷新页面 )</span>\n                        </h2>\n                        <span\n                            class=\"u-token\"\n                            title=\"点击复制\"\n                            v-clipboard:copy=\"token\"\n                            v-clipboard:success=\"onCopy\"\n                            v-clipboard:error=\"onError\"\n                        >\n                        <i class=\"el-icon-document-copy\"></i>\n                        {{ token }}\n                    </span>\n                    </div>\n                    <div class=\"m-tutorial\">\n                        <h2 class=\"u-title-name\">\n                            <i class=\"el-icon-question\"></i> 绑定步骤\n                        </h2>\n                        <p>\n                            打开【茗伊插件集】-【团队】-【团队平台】\n                            <br />【点击绑定】并【填入上方密钥】以绑定角色到魔盒账号\n                            <br />可以将多个角色绑定至同一个魔盒账号\n                        </p>\n                        <img class=\"u-demo\" :src=\"demo_url\" />\n                    </div>\n                </el-tab-pane>\n                <el-tab-pane label=\"自定义创建\" name=\"origin\">\n                    <roleform :data=\"form\" @submit=\"submit\" btn_txt=\"创建\" :processing=\"processing\" />\n                </el-tab-pane>\n            </el-tabs>\n        </div>\n\n        <!-- <div class=\"m-custom-tip\">\n            <el-alert type=\"info\" :closable=\"false\">\n                <i class=\"el-icon-info\"></i> 添加一个不属于自己账号的角色，可尝试添加<router-link to=\"/role/add\">自定义角色</router-link>\n            </el-alert>\n        </div>-->\n    </div>\n</template>\n\n<script>\nimport { getToken } from \"@/service/role.js\";\nimport { __imgPath, __ossMirror } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport roleform from \"@/components/role/roleform.vue\";\nimport { createRole } from \"@/service/role.js\";\nexport default {\n    name: \"BindRole\",\n    props: [],\n    data: function () {\n        return {\n            token: \"INVALIDTESTTOKEN\",\n            demo_url: __ossMirror + \"upload/post/2021/7/4/6658485.png\",\n            loading: false,\n            tab : location.href.includes('origin') ? 'origin' : 'std',\n\n            form: {\n                name: \"\",\n                server:\n                    (localStorage &&\n                        localStorage.getItem(\"team_role_default_server\")) ||\n                    \"\",\n                mount: \"0\",\n                body_type: \"1\",\n                note: \"\",\n                custom: 1,\n            },\n            processing: false,\n        };\n    },\n    computed: {},\n    methods: {\n        onCopy: function (val) {\n            this.$notify({\n                title: \"复制成功\",\n                message: val.text,\n                type: \"success\",\n            });\n        },\n        onError: function () {\n            this.$notify.error({\n                title: \"复制失败\",\n                message: \"请手动复制\",\n            });\n        },\n        submit: function () {\n            this.processing = true;\n            createRole(this.form)\n                .then((res) => {\n                    this.$message({\n                        message: \"更新成功\",\n                        type: \"success\",\n                    });\n                    this.$router.push(\"/role\");\n                })\n                .finally(() => {\n                    this.processing = false;\n                });\n        },\n        goBack : function (){\n            this.$router.push('/role')\n        }\n    },\n    mounted: function () {\n        this.loading = true;\n        getToken()\n            .then((res) => {\n                this.token = res.data.data.token;\n            })\n            .finally(() => {\n                this.loading = false;\n            });\n    },\n    components: {\n        roleform\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../assets/css/role/bind_role.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./BindRole.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./BindRole.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BindRole.vue?vue&type=template&id=18f48f66\"\nimport script from \"./BindRole.vue?vue&type=script&lang=js\"\nexport * from \"./BindRole.vue?vue&type=script&lang=js\"\nimport style0 from \"./BindRole.vue?vue&type=style&index=0&id=18f48f66&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $team} from '@jx3box/jx3box-common/js/https';\n\nfunction getRoles(params) {\n    return $team().get(\"/api/team/my-game-roles\", {\n        params: params,\n    });\n}\n\nfunction unbindRole(id) {\n    return $team().get(\"/api/team/role-unbind/\" + id);\n}\n\nfunction getToken() {\n    return $team().get(\"/api/team/role-bind-token\");\n}\n\nfunction noteRole(role_id, note) {\n    return $team().put(`/api/team/role-update-note/${role_id}`, {\n        note: note,\n    });\n}\n\nfunction createRole(data) {\n    return $team().post(\"/api/team/custom-role\", data);\n}\n\nfunction updateRole(role_id, data) {\n    return $team().put(`/api/team/custom-role/${role_id}`, data);\n}\n\nfunction getRole(role_id) {\n    return $team().get(`/api/team/custom-role/${role_id}`);\n}\n\nfunction deleteRole(role_id) {\n    return $team().delete(`/api/team/custom-role/${role_id}`);\n}\n\nfunction starRole(role_id){\n    return $team().put(`/api/team/role-priority/${role_id}/top`)\n}\nfunction unstarRole(role_id){\n    return $team().put(`/api/team/role-priority/${role_id}/untop`)\n}\n\nfunction getRoleBelongTeams(role_id) {\n    return $team().get(`/api/team/relation/role/${role_id}/teams`);\n}\n\nexport {\n    getRoles,\n    unbindRole,\n    getToken,\n    noteRole,\n    createRole,\n    updateRole,\n    getRole,\n    deleteRole,\n    starRole,\n    unstarRole,\n    getRoleBelongTeams,\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./roleform.vue?vue&type=style&index=0&id=d4df263e&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-role-form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"label-position\":_vm.position}},[_c('el-form-item',{attrs:{\"label\":\"角色名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色名称\",\"show-word-limit\":\"\",\"minlength\":2,\"maxlength\":20},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"服务器\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择服务器\",\"filterable\":\"\"},on:{\"change\":_vm.setDefaultServer},model:{value:(_vm.form.server),callback:function ($$v) {_vm.$set(_vm.form, \"server\", $$v)},expression:\"form.server\"}},_vm._l((_vm.servers),function(server){return _c('el-option',{key:server,attrs:{\"label\":server,\"value\":server}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"门派\"}},[_c('el-radio-group',{attrs:{\"size\":\"medium\"},model:{value:(_vm.form.mount),callback:function ($$v) {_vm.$set(_vm.form, \"mount\", $$v)},expression:\"form.mount\"}},_vm._l((_vm.school_map),function(label,key){return _c('el-radio',{key:key,attrs:{\"label\":key,\"border\":\"\"}},[_c('img',{staticClass:\"u-icon-school\",attrs:{\"src\":_vm._f(\"showSchoolIcon\")(key)}}),_vm._v(\" \"+_vm._s(label)+\" \")])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"体型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择体型\"},model:{value:(_vm.form.body_type),callback:function ($$v) {_vm.$set(_vm.form, \"body_type\", $$v)},expression:\"form.body_type\"}},_vm._l((_vm.body_map),function(label,key){return _c('el-option',{key:key,attrs:{\"label\":label.label,\"value\":key}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入备注信息\",\"show-word-limit\":\"\",\"minlength\":2,\"maxlength\":20},model:{value:(_vm.form.note),callback:function ($$v) {_vm.$set(_vm.form, \"note\", $$v)},expression:\"form.note\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.building},on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.btn_txt))])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-role-form\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" :label-position=\"position\">\n            <el-form-item label=\"角色名\">\n                <el-input\n                    v-model=\"form.name\"\n                    placeholder=\"请输入角色名称\"\n                    show-word-limit\n                    :minlength=\"2\"\n                    :maxlength=\"20\"\n                ></el-input>\n            </el-form-item>\n            <el-form-item label=\"服务器\">\n                <el-select\n                    v-model=\"form.server\"\n                    placeholder=\"请选择服务器\"\n                    filterable\n                    @change=\"setDefaultServer\"\n                >\n                    <el-option\n                        v-for=\"server in servers\"\n                        :key=\"server\"\n                        :label=\"server\"\n                        :value=\"server\"\n                    ></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"门派\">\n                <el-radio-group v-model=\"form.mount\" size=\"medium\">\n                    <el-radio :label=\"key\" v-for=\"(label, key) in school_map\" :key=\"key\" border>\n                        <img class=\"u-icon-school\" :src=\"key | showSchoolIcon\" />\n                        {{ label }}\n                    </el-radio>\n                </el-radio-group>\n            </el-form-item>\n            <el-form-item label=\"体型\">\n                <el-select v-model=\"form.body_type\" placeholder=\"请选择体型\">\n                    <el-option\n                        v-for=\"(label, key) in body_map\"\n                        :key=\"key\"\n                        :label=\"label.label\"\n                        :value=\"key\"\n                    ></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"备注\">\n                <el-input\n                    v-model=\"form.note\"\n                    placeholder=\"请输入备注信息\"\n                    show-word-limit\n                    :minlength=\"2\"\n                    :maxlength=\"20\"\n                ></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button\n                    class=\"u-btn\"\n                    type=\"primary\"\n                    @click=\"submit\"\n                    :disabled=\"building\"\n                >{{ btn_txt }}</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport servers from \"@jx3box/jx3box-data/data/server/server_list.json\";\nimport school_map from \"@jx3box/jx3box-data/data/xf/schoolid.json\";\nimport { bodyMap  } from \"@jx3box/jx3box-facedat/assets/data/index.json\";\nimport { showSchoolIcon } from \"@/utils/filters\"\nexport default {\n    props: [\"data\", \"btn_txt\", \"processing\"],\n    data: function () {\n        return {\n            position: window.innerWidth < 768 ? \"top\" : \"left\",\n            form: this.data || {\n                name: \"\",\n                server: \"\",\n                mount: \"0\",\n                body_type: \"1\",\n                note: \"\",\n            },\n            building: this.processing || false,\n\n            servers,\n            body_map : bodyMap,\n            school_map,\n        };\n    },\n    model: {\n        prop: \"data\",\n        event: \"update\",\n    },\n    watch: {\n        data: function (newval) {\n            this.form = newval;\n        },\n        form: {\n            deep: true,\n            handler: function (newval) {\n                this.$emit(\"update\", newval);\n            },\n        },\n        processing: function (val) {\n            this.building = val;\n        },\n    },\n    computed: {},\n    methods: {\n        submit: function () {\n            if (!this.form.name) {\n                this.$alert(\"角色名不能为空\", \"提醒\", {\n                    confirmButtonText: \"确定\",\n                });\n                return;\n            }\n\n            this.$emit(\"submit\");\n        },\n        setDefaultServer: function (val) {\n            // 下次新建角色时无需再选择服务器\n            localStorage &&\n                localStorage.setItem(\"team_role_default_server\", val);\n        },\n    },\n    filters: {\n        showSchoolIcon\n    },\n    mounted: function () {},\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../assets/css/role/roleform.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./roleform.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./roleform.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./roleform.vue?vue&type=template&id=d4df263e\"\nimport script from \"./roleform.vue?vue&type=script&lang=js\"\nexport * from \"./roleform.vue?vue&type=script&lang=js\"\nimport style0 from \"./roleform.vue?vue&type=style&index=0&id=d4df263e&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./BindRole.vue?vue&type=style&index=0&id=18f48f66&prod&lang=less\""],"sourceRoot":""}