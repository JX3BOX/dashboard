(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e881eb3"],{"685b":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var o=s("4328"),i=s.n(o),n=s("41cb");let a={newest(e,t,s=1){if(t)return Object(n["c"])()({method:"GET",url:"/api/wiki/post",params:{type:e,source_id:t,supply:s}})},newests(e){return Object(n["c"])()({method:"GET",url:"/api/wiki/posts/newest",params:{type:e}})},versions(e,t){if(t)return Object(n["c"])()({method:"GET",url:"/api/wiki/post/versions",params:{type:e,source_id:t}})},view(e){return e?Object(n["c"])()({method:"GET",url:"/api/wiki/post/"+e}):null},save(e){return Object(n["c"])()({method:"POST",url:"/api/wiki/post",data:i.a.stringify({post:e})})},myList(e){return Object(n["c"])()({method:"GET",url:"/api/my/wiki/posts",params:e})},myRemove(e){return e?Object(n["c"])()({method:"PUT",url:`/api/my/wiki/post/${e}/remove`}):null}}},"762a":function(e,t,s){},"818b":function(e){e.exports=JSON.parse('{"title":" &raquo; 魔盒（JX3BOX） - 一站式剑网3资源工具站","keys":"jx3box,剑三魔盒,剑三宏,剑三插件,剑三辅助,副本攻略,副本解包,团队监控,捏脸数据,剑3数据库,成就百科,剑三成就,剑3,剑网3,剑三box,通识百科","desc":"JX3BOX - 剑三魔盒是一个以剑网3游戏为主的专业攻略资源站，这里干货满满，大神多多，为你的武侠江湖之路助力。剑三魔盒，玩家贴心的小助手。"}')},9199:function(e,t,s){"use strict";s("762a")},ee8f:function(e,t,s){const o=s("65c2"),i=s("818b");e.exports={JX3BOX:o,SEO:i}},f3f0:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"m-publish-box"},[s("pubheader",{attrs:{name:"成就百科"}},[e._t("header")],2),s("el-form",{staticClass:"m-publish-post"},[s("div",{staticClass:"m-publish-source"},[s("el-divider",{attrs:{"content-position":"left"}},[e._v("选择成就 *")]),s("el-select",{staticClass:"u-source-id",attrs:{filterable:"",remote:"",disabled:!!e.post.id,placeholder:"输入成就名称/成就描述/称号/奖励物品并按『回车』进行搜索","remote-method":e.search_handle,loading:e.options.loading},model:{value:e.post.source_id,callback:function(t){e.$set(e.post,"source_id",t)},expression:"post.source_id"}},e._l(e.options.sources,(function(t){return s("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}},[s("div",{staticClass:"m-selector-item"},[s("img",{staticClass:"u-icon",attrs:{src:e.icon_url_filter(t.IconID),alt:t.Name}}),s("span",{staticClass:"u-name",domProps:{textContent:e._s(t.Name)}})])])})),1)],1),s("div",{staticClass:"m-publish-level"},[s("el-divider",{attrs:{"content-position":"left"}},[e._v("综合难度 *")]),s("el-rate",{staticClass:"u-level",model:{value:e.post.level,callback:function(t){e.$set(e.post,"level",t)},expression:"post.level"}})],1),s("div",{staticClass:"m-publish-remark"},[s("el-divider",{attrs:{"content-position":"left"}},[e._v("修订说明 *")]),s("el-input",{attrs:{maxlength:200,minlength:1,"show-word-limit":"",required:"",placeholder:"请简单描述一下本次修订的说明"},model:{value:e.post.remark,callback:function(t){e.$set(e.post,"remark",t)},expression:"post.remark"}})],1),s("div",{staticClass:"m-publish-content"},[s("el-divider",{attrs:{"content-position":"left"}},[e._v("攻略正文 *")]),s("Tinymce",{attrs:{attachmentEnable:!0,resourceEnable:!0,height:400},model:{value:e.post.content,callback:function(t){e.$set(e.post,"content",t)},expression:"post.content"}})],1),s("div",{staticClass:"m-publish-commit"},[s("el-divider",{attrs:{"content-position":"left"}}),s("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:e.processing},on:{click:e.toPublish}},[e._v("提交攻略 ")])],1)])],1)},i=[],n=(s("b0c0"),s("99af"),s("5319"),s("ac1f"),s("a0fa")),a=s("221a"),r=s("ee8f"),c=s("685b"),l=s("c9d2"),p=s("2777");function u(e){return Object(p["d"])({method:"GET",url:"/api/achievement/search",params:e})}var m={name:"achievement",data:function(){return{options:{sources:null,loading:!1},post:{id:"",content:"",source_id:"",level:0,remark:""}}},computed:{processing:function(){return this.$store.state.processing}},methods:{toPublish:function(){var e=this;this.post.source_id?this.post.content?this.post.level>=1&&this.post.level<=5?this.post.remark?(this.$store.commit("startProcess"),c["a"].save({type:"achievement",source_id:this.post.source_id,level:this.post.level,user_nickname:l["a"].getInfo().name,content:this.post.content,remark:this.post.remark}).then((function(t){t=t.data,200===t.code?(e.$message({message:"提交成功，请等待审核",type:"success"}),setTimeout((function(){location.href=r["JX3BOX"].__Root+"/dashboard/#/wiki"}),500)):(e.$message({message:"".concat(t.message),type:"warning"}),e.$store.commit("endProcess"))})).catch((function(){e.$store.commit("endProcess")}))):this.$message({message:"请简单描述本次修订说明",type:"warning"}):this.$message({message:"请选择适合的综合难度",type:"warning"}):this.$message({message:"要编写攻略正文哦",type:"warning"}):this.$message({message:"请选择要修订攻略的成就",type:"warning"})},icon_url_filter:function(e){return isNaN(parseInt(e))?"".concat(r["JX3BOX"].__imgPath,"image/common/nullicon.png"):"".concat(r["JX3BOX"].__iconPath,"icon/").concat(e,".png")},search_handle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options.loading=!0,u({keyword:t,limit:10}).then((function(t){t=t.data,200===t.code&&(e.options.sources=t.data.achievements),e.options.loading=!1}))}},created:function(){this.search_handle("");var e=this.$route.params.achievement_id;this.post.source_id=e?parseInt(e):null},watch:{"post.source_id":{handler:function(){var e=this;this.post.source_id&&c["a"].newest("achievement",this.post.source_id,0).then((function(t){var s=t.data;if(200===s.code){var o=s.data.post,i=s.data.source;if(o){e.post.source_id=parseInt(o.source_id),e.post.level=o.level||1,e.post.remark="";var n=o.content;n=n.replace(/(<p>)?\s*◆成就难度 [★]+\s*(<\/p>)?/gi,""),n=n.replace(/(<p>)?\s*◆花费时长 [★]+\s*(<\/p>)?/gi,""),n=n.replace(/(<p>)?\s*◆成就攻略\s*(<\/p>)?/gi,""),e.post.content=n}else e.post.source_id=e.post.source_id?parseInt(e.post.source_id):"",e.post.level=0,e.post.remark="",e.post.content="";if(i){var a=!1;for(var r in e.options.sources=e.options.sources||[],e.options.sources)if(e.options.sources[r].ID==i.ID){a=!0;break}a||e.options.sources.push(i)}}}))}}},components:{pubheader:n["a"],Tinymce:a["a"]}},d=m,h=(s("9199"),s("2877")),v=Object(h["a"])(d,o,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-0e881eb3.086bf650.js.map