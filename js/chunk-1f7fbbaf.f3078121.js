(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f7fbbaf"],{"04d1":function(t,e,n){var r=n("342f"),a=r.match(/firefox\/(\d+)/i);t.exports=!!a&&+a[1]},1645:function(t){t.exports=JSON.parse('{"default":{"name":"default","style":"square","files":{"xs":{"w":48,"width":60,"file":"default-xs.gif"},"s":{"w":68,"width":84,"file":"default-s.gif"},"m":{"w":108,"width":136,"file":"default-m.png"},"l":{"w":180,"width":224,"file":"default-l.png"},"xl":{"w":240,"width":300,"file":"default-xl.png"}}},"flower_1":{"name":"flower_1","style":"circle","files":{"xs":{"w":48,"width":60,"file":"flower_1-xs.png"},"s":{"w":68,"width":84,"file":"flower_1-s.png"},"m":{"w":108,"width":136,"file":"flower_1-m.png"},"l":{"w":180,"width":224,"file":"flower_1-l.png"},"xl":{"w":240,"width":300,"file":"flower_1-xl.png"}}}}')},4208:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("uc",{staticClass:"m-dashboard-avatar"},[n("div",{staticClass:"m-profile-avatar"},[n("div",{staticClass:"m-profile-avatar-primary"},[n("div",{staticClass:"u-avatar"},[n("img",{staticClass:"u-avatar u-avatar-l",attrs:{src:t._f("showAvatar")(t.avatar)}})]),n("el-upload",{staticClass:"u-upload",attrs:{drag:"",accept:"image/png, image/gif, image/jpeg","on-change":t.upload,action:"upload/avatar","auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),n("em",[t._v("点击上传")]),n("br"),n("span",{staticClass:"u-tip"},[t._v("只能上传jpg/png/gif文件")])])]),n("p",{staticClass:"u-btng"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)])])},a=[],i=n("ade3"),o=(n("d81d"),n("b0c0"),n("e9c4"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("159b"),n("b64b"),n("4e82"),n("7db0"),n("99af"),n("b547")),s=n("46e8"),c=n("aa38"),u=n("c9d2"),f=n("85e4"),d=n("1645"),l=n("65c2"),v=n("2ef0"),h={name:"avatar",props:[],data:function(){return{bak:"",avatar:"",frame:"",isVIP:!1,uid:u["a"].getInfo().uid,frames:d,tabActivate:"0",decorationJson:{},decoration:[],decorationActivate:null,originalActivateName:null,selectAll:[],noDecoration:!1}},computed:{data:function(){return{user_avatar:this.avatar,user_avatar_frame:this.frame}}},methods:{upload:function(t,e){var n=this,r=new FormData,a=t.raw;r.append("avatar",a),Object(s["m"])(r).then((function(t){n.$message({message:"上传成功",type:"success"}),n.avatar=t.data.data[0]}))},reset:function(){this.avatar=this.bak},submit:function(){var t=this;Object(s["j"])(this.data).then((function(e){u["a"].refresh("avatar",t.avatar),t.$message({message:"头像更新成功",type:"success"})}))},decorationSubmit:function(){var t=this,e=this.decorationActivate,n=e?this.decoration[e].val:"",r=Object(v["flatten"])(this.decoration.map((function(t){return t.list}))),a=this.getActivate(),i=r.map((function(t){return{val:t.val,using:t.using,type:t.type}}));Object(c["e"])(i).then((function(e){var r={name:n,type:a};n||(r.name=!1),localStorage.setItem("decoration_all",JSON.stringify(r)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))},formattingData:function(t,e){for(var n=this,r={"无主题":[]},a=[],o=this,s=[{name:"atcard",text:"个人名片",sort:2},{name:"homebg",text:"主页风格",sort:3},{name:"sidebar",text:"侧边栏主题",sort:4},{name:"calendar",text:"首页日历",sort:5}],c=function(a){var i=t[a],o=s.find((function(t){return t.name==i.type}));o&&(i.sort=o.sort,r[i[e]]?r[i[e]].push(i):r[i[e]]=[i],i.using&&(n.originalActivateName=i[e]))},u=0;u<t.length;u++)c(u);var f=function(t){return function(e,n){return e[t]-n[t]}},d=function(t,e){var n=new Map;return t.filter((function(t){return!n.has(t[e])&&n.set(t[e],1)}))};return Object.keys(r).forEach((function(t,n){var s;0!==n&&t==o.originalActivateName&&(o.decorationActivate=n),a.push((s={},Object(i["a"])(s,e,t),Object(i["a"])(s,"list",d(r[t],"type").sort(f("sort"))),s))})),a},loadFrames:function(){var t=this;Object(s["d"])().then((function(e){t.frames=e.data})),Object(c["b"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(c["a"])().then((function(e){var n=e.data.data.filter((function(t){return""!=t.type}));t.decoration=t.formattingData(n,"val"),t.selectAllInit()}))}))},showFrame:function(t){return l["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},selectFrame:function(t){t?t.status&&(this.frame=t.name):this.frame=""},init:function(){var t=this;this.loadFrames(),u["a"].isVIP().then((function(e){t.isVIP=e})),this.avatar=this.bak=u["a"].getInfo().avatar_origin,Object(s["f"])(this.uid).then((function(e){t.frame=e.data.data.user_avatar_frame||""}))},decorationStatus:function(t,e,n){if("homebanner"!=t.type)if(1==t.using?t.using=0:t.using=1,n!=this.decorationActivate){for(var r=this.decoration[this.decorationActivate]?this.decoration[this.decorationActivate].list:[],a=0;a<r.length;a++)r[a].using=0;this.selectAll[this.decorationActivate]=!1,this.decorationActivate=n}else{for(var i=this.decoration[n].list,o=!1,s=!0,c=0;c<i.length;c++)i[c].using&&"homebanner"!=i[c].type?o=!0:s=!1;this.decorationActivate=o?n:null,this.selectAll[n]=s}},getActivate:function(){for(var t=this.decorationActivate,e=[],n=t?this.decoration[t].list:[],r=0;r<n.length;r++)n[r].using&&e.push(n[r].type);return e},selectAllInit:function(){var t=this.decorationActivate;if(null!=t){for(var e=!0,n=this.decoration[t].list,r=0;r<n.length;r++)n[r].using||(e=!1);this.selectAll[t]=e}else this.selectAll[0]=!0},selectAllChange:function(t,e){this.decorationActivate=t?e:null;for(var n=[],r=0;r<this.selectAll.length;r++)r!=e?n.push(!1):n.push(t);for(var a=this.decoration,i=0;i<a.length;i++)for(var o=a[i].list,s=0;s<o.length;s++)o[s].using=i===e&&t?1:0;this.$set(this,"decoration",a),this.selectAll=n}},filters:{showAvatar:function(t){return Object(f["showAvatar"])(t,480,!1)},showSmallAvatar:function(t){return Object(f["showAvatar"])(t,136,!1)},showDecoration:function(t){return l["__imgPath"]+"decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")},showDecorationName:function(t){var e=[{name:"homebanner",text:"资料卡(默认)"},{name:"atcard",text:"个人名片"},{name:"homebg",text:"主页风格"},{name:"sidebar",text:"侧边栏主题"},{name:"calendar",text:"首页日历"}],n=e.find((function(e){return e.name==t}));return n?n.text:"无"}},created:function(){this.init()},components:{uc:o["a"]}},p=h,b=(n("bfad"),n("2877")),m=Object(b["a"])(p,r,a,!1,null,null,null);e["default"]=m.exports},"46e8":function(t,e,n){"use strict";n.d(e,"l",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return p})),n.d(e,"g",(function(){return m})),n.d(e,"i",(function(){return x})),n.d(e,"c",(function(){return w})),n.d(e,"m",(function(){return d})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return v}));var r=n("41cb"),a=n("bc3a"),i=n.n(a),o=n("65c2"),s=Object(r["a"])("server",{proxy:!1});function c(){return Object(r["b"])().get("/api/cms/user/my/profile")}function u(t){return Object(r["b"])().put("/api/cms/user/my/profile",t)}function f(t){return Object(r["b"])().put("/api/cms/user/my/avatar",t)}function d(t){return Object(r["b"])().post("/api/cms/upload/avatar",t)}function l(){var t=o["__imgPath"]+"avatar/index.json";return i.a.get(t)}function v(t){return Object(r["b"])().get("/api/cms/user/".concat(t,"/info"))}function h(t){return s.post("profile/password",t)}function p(){return s.get("profile/email/check")}function b(t){return s.get("profile/email/available",{params:{user_email:t}})}function m(t){return s.post("profile/email/bind",t)}function g(){return s.post("profile/email/verify")}function w(){return Object(r["b"])().get("/api/cms/account/oauth/status")}function x(t){return Object(r["b"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}},"4e82":function(t,e,n){"use strict";var r=n("23e7"),a=n("e330"),i=n("59ed"),o=n("7b0b"),s=n("07fa"),c=n("083a"),u=n("577e"),f=n("d039"),d=n("addb"),l=n("a640"),v=n("04d1"),h=n("d998"),p=n("2d00"),b=n("512ce"),m=[],g=a(m.sort),w=a(m.push),x=f((function(){m.sort(void 0)})),y=f((function(){m.sort(null)})),j=l("sort"),A=!f((function(){if(p)return p<70;if(!(v&&v>3)){if(h)return!0;if(b)return b<603;var t,e,n,r,a="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:e+r,v:n})}for(m.sort((function(t,e){return e.v-t.v})),r=0;r<m.length;r++)e=m[r].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}})),_=x||!y||!j||!A,O=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}};r({target:"Array",proto:!0,forced:_},{sort:function(t){void 0!==t&&i(t);var e=o(this);if(A)return void 0===t?g(e):g(e,t);var n,r,a=[],u=s(e);for(r=0;r<u;r++)r in e&&w(a,e[r]);d(a,O(t)),n=a.length,r=0;while(r<n)e[r]=a[r++];while(r<u)c(e,r++);return e}})},"4ec9":function(t,e,n){n("6f48")},"4fad":function(t,e,n){var r=n("d039"),a=n("861d"),i=n("c6b6"),o=n("d86b"),s=Object.isExtensible,c=r((function(){s(1)}));t.exports=c||o?function(t){return!!a(t)&&((!o||"ArrayBuffer"!=i(t))&&(!s||s(t)))}:s},"512ce":function(t,e,n){var r=n("342f"),a=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!a&&+a[1]},6566:function(t,e,n){"use strict";var r=n("9bf2").f,a=n("7c73"),i=n("6964"),o=n("0366"),s=n("19aa"),c=n("2266"),u=n("7dd0"),f=n("2626"),d=n("83ab"),l=n("f183").fastKey,v=n("69f3"),h=v.set,p=v.getterFor;t.exports={getConstructor:function(t,e,n,u){var f=t((function(t,r){s(t,v),h(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=r&&c(r,t[u],{that:t,AS_ENTRIES:n})})),v=f.prototype,b=p(e),m=function(t,e,n){var r,a,i=b(t),o=g(t,e);return o?o.value=n:(i.last=o={index:a=l(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),d?i.size++:t.size++,"F"!==a&&(i.index[a]=o)),t},g=function(t,e){var n,r=b(t),a=l(e);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(v,{clear:function(){var t=this,e=b(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=b(e),r=g(e,t);if(r){var a=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=a),a&&(a.previous=i),n.first==r&&(n.first=a),n.last==r&&(n.last=i),d?n.size--:e.size--}return!!r},forEach:function(t){var e,n=b(this),r=o(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),i(v,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&r(v,"size",{get:function(){return b(this).size}}),f},setStrong:function(t,e,n){var r=e+" Iterator",a=p(e),i=p(r);u(t,e,(function(t,e){h(this,{type:r,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),f(e)}}},"6d61":function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("e330"),o=n("94ca"),s=n("cb2d"),c=n("f183"),u=n("2266"),f=n("19aa"),d=n("1626"),l=n("861d"),v=n("d039"),h=n("1c7e"),p=n("d44e"),b=n("7156");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),w=m?"set":"add",x=a[t],y=x&&x.prototype,j=x,A={},_=function(t){var e=i(y[t]);s(y,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})},O=o(t,!d(x)||!(g||y.forEach&&!v((function(){(new x).entries().next()}))));if(O)j=n.getConstructor(e,t,m,w),c.enable();else if(o(t,!0)){var k=new j,S=k[w](g?{}:-0,1)!=k,I=v((function(){k.has(1)})),C=h((function(t){new x(t)})),E=!g&&v((function(){var t=new x,e=5;while(e--)t[w](e,e);return!t.has(-0)}));C||(j=e((function(t,e){f(t,y);var n=b(new x,t,j);return void 0!=e&&u(e,n[w],{that:n,AS_ENTRIES:m}),n})),j.prototype=y,y.constructor=j),(I||E)&&(_("delete"),_("has"),m&&_("get")),(E||S)&&_(w),g&&y.clear&&delete y.clear}return A[t]=j,r({global:!0,constructor:!0,forced:j!=x},A),p(j,t),g||n.setStrong(j,t,m),j}},"6f48":function(t,e,n){"use strict";var r=n("6d61"),a=n("6566");r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},aa38:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));n("99af");var r=n("41cb"),a=n("bc3a"),i=n.n(a),o=n("65c2");function s(t){return Object(r["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(r["b"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json";return i.a.get(t)}function f(){return i.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json"))}function d(t,e){return Object(r["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}},ade3:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},b64b:function(t,e,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),o=n("d039"),s=o((function(){i(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return i(a(t))}})},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bfad:function(t,e,n){"use strict";n("d38b")},d38b:function(t,e,n){},d86b:function(t,e,n){var r=n("d039");t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},d998:function(t,e,n){var r=n("342f");t.exports=/MSIE|Trident/.test(r)},f183:function(t,e,n){var r=n("23e7"),a=n("e330"),i=n("d012"),o=n("861d"),s=n("1a2d"),c=n("9bf2").f,u=n("241c"),f=n("057f"),d=n("4fad"),l=n("90e3"),v=n("bb2f"),h=!1,p=l("meta"),b=0,m=function(t){c(t,p,{value:{objectID:"O"+b++,weakData:{}}})},g=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,p)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[p].objectID},w=function(t,e){if(!s(t,p)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[p].weakData},x=function(t){return v&&h&&d(t)&&!s(t,p)&&m(t),t},y=function(){j.enable=function(){},h=!0;var t=u.f,e=a([].splice),n={};n[p]=1,t(n).length&&(u.f=function(n){for(var r=t(n),a=0,i=r.length;a<i;a++)if(r[a]===p){e(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},j=t.exports={enable:y,fastKey:g,getWeakData:w,onFreeze:x};i[p]=!0}}]);
//# sourceMappingURL=chunk-1f7fbbaf.f3078121.js.map