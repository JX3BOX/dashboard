(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4e3841a"],{2961:function(t,n,a){},4039:function(t,n,a){"use strict";a.r(n);a("b0c0");var i=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.name))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.honorList,(function(a,i){return n("div",{key:i,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.name))]),n("div",{staticClass:"u-pic",class:t.setClass(a),on:{click:function(n){return t.selectChange(a)}}},[a.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(a),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},e=[],o=a("5530"),s=(a("99af"),a("7db0"),a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("466d"),a("5319"),a("159b"),a("b547")),r=a("46c1"),c=a("c9d2"),u=a("8e44"),l=a("65c2"),d=a("aa38"),f=a("2ef0"),v={name:"honor",props:[],data:function(){return{tabList:r["e"],isVIP:!1,info:{uid:c["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(l["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},isSelect:{},honorList:[],list:[],isSelectBak:{}}},computed:{uid:function(){return c["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return c["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){return l["__imgPath"]+"decoration/honor/".concat(t.img,"/").concat(t.img,".").concat(t.img_ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(u["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},disposeHonor:function(t){var n=t||{},a=(null===t||void 0===t?void 0:t.honor)||{},i=a.only,e=a.prefix,o=a.prefix.match(/(?<=\{)(.+?)(?=\})/g),s=a.ranking,r=a.year||"";if(i?r=e:o?n&&(r+=(null===t||void 0===t?void 0:t[o[0]])||""):r+=e,(null===s||void 0===s?void 0:s.length)>0&&n){n.imgIndex=0;for(var c=0;c<s.length;c++)if(void 0!=(null===t||void 0===t?void 0:t.ranking)&&Object(f["inRange"])(Number(null===t||void 0===t?void 0:t.ranking),s[c][0],s[c][1])){n.imgIndex=c;var u=s[c][2],l=u.match(/(?<=\{)(.+?)(?=\})/g);r+=l?u.replace(/\{([^{}]+?)\}/g,(function(a,i){return n[i]||t[i]||""})):u;break}}return r+a.suffix},loadHonor:function(){var t=this;Object(d["e"])().then((function(n){t.honorList=n.data.data.list,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(d["f"])(this.uid).then((function(n){var a=n;t.honorList=t.honorList.map((function(n){var i=a.find((function(t){return t.honor_id==n.id}));i&&(n.isHave=!0);var e=a.find((function(t){return t.honor_id==n.id&&1==t.using}));return e&&(n.using=1),n.name=t.disposeHonor(Object(o["a"])(Object(o["a"])({},i),{},{honor:n})),n}));var i=t.honorList.find((function(t){return 1==t.using})),e={type:"honor_customize",img:"不佩戴称号",name:"取消佩戴称号",using:i?0:1,isHave:!0,isCustomize:!0};t.isSelect=i||e,t.honorList.unshift(e),t.list=Object(f["cloneDeep"])(t.honorList),t.isSelectBak=Object(f["cloneDeep"])(t.isSelect)}))},selectChange:function(t){t.isHave&&(this.honorList.forEach((function(t){t.using=0})),t.using=1,this.isSelect=t)},reset:function(){this.$set(this,"honorList",Object(f["cloneDeep"])(this.list)),this.$set(this,"isSelect",Object(f["cloneDeep"])(this.isSelectBak))},showLevelColor:function(t){return l["__userLevelColor"][t]},submit:function(){var t,n=this,a=null===(t=this.honorList)||void 0===t?void 0:t.find((function(t){return 1==t.using}));null!==a&&void 0!==a&&a.id?Object(d["i"])(a.id).then((function(t){n.$message({message:"称号更新成功",type:"success"})})):Object(d["a"])().then((function(t){n.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:s["a"]}},h=v,p=(a("af96"),a("2877")),m=Object(p["a"])(h,i,e,!1,null,null,null);n["default"]=m.exports},aa38:function(t,n,a){"use strict";a.d(n,"b",(function(){return r})),a.d(n,"h",(function(){return c})),a.d(n,"c",(function(){return u})),a.d(n,"d",(function(){return l})),a.d(n,"g",(function(){return d})),a.d(n,"j",(function(){return f})),a.d(n,"e",(function(){return v})),a.d(n,"f",(function(){return h})),a.d(n,"i",(function(){return p})),a.d(n,"a",(function(){return m}));a("99af");var i=a("41cb"),e=a("bc3a"),o=a.n(e),s=a("65c2");function r(t){return Object(i["a"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(i["a"])().post("/api/cms/user/decoration",t)}function u(){var t=s["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return o.a.get(t)}function l(){return o.a.get("".concat(s["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,n){return Object(i["a"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function f(t){return Object(i["a"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return Object(i["a"])().get("/api/cms/user/config/honor")}function h(t){return Object(i["b"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function p(t){return Object(i["a"])().put("/api/cms/user/honor/use/".concat(t))}function m(){return Object(i["a"])().delete("/api/cms/user/honor/use")}},af96:function(t,n,a){"use strict";a("2961")}}]);
//# sourceMappingURL=chunk-f4e3841a.4d20b3ce.js.map