(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e40e3d8"],{1229:function(e,t,a){},"1ed1":function(e,t,a){},"208a":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var s=a("2777"),i=a("4328");function r(e){return Object(s["b"])({method:"GET",url:"/api/item_plan/".concat(e),headers:{Accept:"application/prs.helper.v2+json"}})}function n(e){var t=e.id?"update":"create",a={action:t,plan:e};return Object(s["b"])({method:"POST",url:"/api/item_plan",headers:{Accept:"application/prs.helper.v2+json"},data:i.stringify(a)})}function o(e){return Object(s["b"])({method:"GET",url:"/api/my/item_plans",headers:{Accept:"application/prs.helper.v2+json"},params:e})}function l(e){return Object(s["b"])({method:"PUT",url:"/api/item_plan/remove",headers:{Accept:"application/prs.helper.v2+json"},data:i.stringify({plan_id:e})})}},"2d41":function(e,t,a){},"85ca":function(e,t,a){"use strict";var s=a("1229"),i=a.n(s);i.a},a1e2:function(e,t,a){},a457:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-publish-box"},[a("pubheader",{attrs:{name:"物品百科",localDraft:!1}},[e._t("header")],2),a("h1",{staticClass:"m-publish-item-header"},[e._v("物品清单")]),a("el-form",{staticClass:"m-publish-item",attrs:{"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入物品清单的标题",maxlength:"20","show-word-limit":""},model:{value:e.plan.title,callback:function(t){e.$set(e.plan,"title",t)},expression:"plan.title"}})],1),a("el-form-item",{attrs:{label:"可见性"}},[a("el-radio",{attrs:{label:1},model:{value:e.plan.public,callback:function(t){e.$set(e.plan,"public",t)},expression:"plan.public"}},[e._v("公开")]),a("el-radio",{attrs:{label:0},model:{value:e.plan.public,callback:function(t){e.$set(e.plan,"public",t)},expression:"plan.public"}},[e._v("私有")])],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简单说明一下你的物品清单",maxlength:"2000","show-word-limit":""},model:{value:e.plan.description,callback:function(t){e.$set(e.plan,"description",t)},expression:"plan.description"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.plan.type,callback:function(t){e.$set(e.plan,"type",t)},expression:"plan.type"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("道具清单")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("装备清单")])],1)],1),a("el-form-item",{attrs:{label:"清单"}},[a("el-row",{staticStyle:{"line-height":"initial"}},[a("el-col",{staticClass:"c-item-search",attrs:{xs:24,sm:5}},[a("el-input",{attrs:{placeholder:"请输入物品名称（可适配中括号形式）","prefix-icon":"el-icon-search"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e.items&&e.items.length?a("draggable",{staticClass:"m-search-items",attrs:{tag:"ul",list:e.items,sort:!1,group:{name:"draggable-item",pull:"clone",put:!1},move:e.move_handle,"ghost-class":"ghost"}},e._l(e.items,(function(e,t){return a("li",{key:t,staticClass:"m-search-item"},[a("jx3-item-simple",{attrs:{item:e}})],1)})),0):e._e(),e.items&&!e.items.length?a("div",{staticClass:"m-no-item"},[a("i",{staticClass:"el-icon-chat-line-round"}),a("span",[e._v(" 查找不到相关记录")])]):e._e()],1),1==e.plan.type?a("el-col",{staticClass:"c-plan-relation c-normal-relation",attrs:{xs:24,sm:19}},[a("el-row",{staticClass:"m-positions",attrs:{gutter:15}},e._l(e.normal_relation,(function(t,s){return a("el-col",{key:s,attrs:{xs:24,sm:6}},[a("div",{staticClass:"m-position"},[a("el-input",{staticClass:"u-title",attrs:{placeholder:"子清单标题（选填）",maxlength:"20","show-word-limit":""},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"position.title"}}),a("div",{staticClass:"c-selected-items"},[a("draggable",{staticClass:"m-selected-items",class:{empty:!t.data||t.data&&!t.data.length},attrs:{tag:"ul",list:t.data,group:"draggable-item","ghost-class":"ghost"}},e._l(t.data,(function(e,s){return a("li",{key:s,staticClass:"m-selected-item"},[a("jx3-item-simple",{attrs:{item:e}}),a("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(e){return t.data.splice(s,1)}}})],1)})),0),!t.data||t.data&&!t.data.length?a("span",{staticClass:"u-tip"},[e._v("拖拽所需道具到此处")]):e._e()],1),a("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(t){return e.normal_relation.splice(s,1)}}})],1)])})),1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:6}},[a("div",{staticClass:"m-position-add",on:{click:e.add_normal_relation}},[e._v(" + ")])])],1)],1):e._e(),2==e.plan.type?a("el-col",{staticClass:"c-plan-relation",attrs:{xs:24,sm:19}},[a("el-row",{staticClass:"m-positions",attrs:{gutter:15}},e._l(e.positions,(function(t,s){return a("el-col",{key:s,attrs:{xs:24,sm:6}},e._l(t,(function(t,s){return a("div",{key:s,staticClass:"m-position"},[a("h3",{staticClass:"u-title",domProps:{textContent:e._s(t.label)}}),a("div",{staticClass:"c-selected-items"},[a("draggable",{staticClass:"m-selected-items m-selected-equips",class:{empty:!e.equip_relation[s]||e.equip_relation[s]&&!e.equip_relation[s].length},attrs:{tag:"ul",list:e.equip_relation[s],group:"draggable-item",move:e.move_handle,"data-AucGenre":t.AucGenre,"data-AucSubType":t.AucSubType,"ghost-class":"ghost"}},e._l(e.equip_relation[s],(function(t,i){return a("li",{key:i,staticClass:"m-selected-item"},[a("jx3-item-simple",{attrs:{item:t}}),a("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(t){e.equip_relation[s].splice(i,1)}}}),0==i?a("span",{staticClass:"u-main"},[e._v("主")]):e._e()],1)})),0),!e.equip_relation[s]||e.equip_relation[s]&&!e.equip_relation[s].length?a("span",{staticClass:"u-tip"},[e._v("拖拽所需装备到此处")]):e._e()],1)])})),0)})),1)],1):e._e()],1)],1),a("el-form-item",[a("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"success",loading:e.$store.state.processing},on:{click:e.submit}},[e._v("提交物品清单 ")])],1)],1)],1)},i=[],r=(a("99af"),a("ac1f"),a("841c"),a("a0fa")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item?a("el-popover",{attrs:{placement:"right-end","popper-class":"m-simple-item-popup",width:"auto","visible-arrow":!1,trigger:"hover",transition:"none","close-delay":0},on:{show:function(t){e.item_id=e.item.id}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"m-simple-item",class:{onlyIcon:e.onlyIcon,withName:e.withName},attrs:{slot:"reference"},on:{mousedown:function(t){e.visible=!1}},slot:"reference"},[a("div",{staticClass:"m-icon"},[a("div",{staticClass:"u-border",style:{backgroundImage:e.item_border(e.item),opacity:5==e.item.Quality?.9:1}}),a("div",{staticClass:"u-border-quest",style:{backgroundImage:e.item_border_quest(e.item)}}),a("img",{staticClass:"u-icon",style:{width:e.iconSize,height:e.iconSize},attrs:{src:e.icon_url(e.item.IconID),alt:"IconID:"+e.item.IconID}})]),a("span",{staticClass:"u-name",style:{color:e.item_color(e.item.Quality)},domProps:{textContent:e._s(e.item.Name)}}),a("span",{staticClass:"u-uiid fr",domProps:{textContent:e._s("ID: "+e.item.id)}})]),a("jx3-item",{attrs:{item_id:e.item_id}})],1):e._e()},o=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.source?a("div",{staticClass:"c-item",class:{"c-item-equipment":e.source.AucGenre>=1&&e.source.AucGenre<=4}},[a("div",{staticClass:"c-item-wrapper"},[e.source.MaxStrengthLevel?a("div",{staticClass:"u-max-strength-level"},[a("span",{domProps:{textContent:e._s("精炼等级：0 / "+e.source.MaxStrengthLevel)}})]):e._e(),a("h4",{staticClass:"u-title",style:{color:e.color(e.source.Quality)},domProps:{textContent:e._s(e.source.Name)}}),e.source.BindType>1?a("div",{staticClass:"u-bind",domProps:{textContent:e._s(e.bind(e.source.BindType))}}):e._e(),1===parseInt(e.source.MaxExistAmount)?a("div",{staticClass:"unique",domProps:{textContent:e._s("唯一")}}):e._e(),parseInt(e.source.MaxExistTime)>0?a("div",{staticClass:"u-max-exist-time",domProps:{textContent:e._s("存在时间："+e.second_format(e.source.MaxExistTime))}}):e._e(),parseInt(e.source.MaxExistAmount)>1?a("div",{staticClass:"u-max-exist-amount",domProps:{textContent:e._s("最大拥有数："+e.source.MaxExistAmount)}}):e._e(),1==e.source.AucGenre?a("div",{staticClass:"u-weapon-type-label"},[e._v(" 近身武器 ")]):e._e(),2==e.source.AucGenre?a("div",{staticClass:"u-weapon-type-label"},[e._v(" 远程武器 ")]):e._e(),e.source.TypeLabel?a("div",{staticClass:"u-type-label",domProps:{textContent:e._s(e.source.TypeLabel)}}):e._e(),e.source.attributes&&e.source.attributes.length?a("div",{staticClass:"u-attributes"},e._l(e.source.attributes,(function(t,s){return a("div",{key:s,staticClass:"u-field",class:["u-"+t.color]},["atMeleeWeaponAttackSpeedBase"==t.type||"atRangeWeaponAttackSpeedBase"==t.type?a("span",{staticClass:"u-value u-speed",domProps:{textContent:e._s(t.label)}}):"atHorseAttribute"==t.type?a("span",{staticClass:"u-value u-horse-attribute"},[t.icon_id>0?a("img",{staticClass:"u-horse-icon",attrs:{src:e.icon_url(t.icon_id)}}):e._e(),a("div",{staticClass:"u-horse-desc",domProps:{innerHTML:e._s(t.label)}})]):a("span",{staticClass:"u-value"},[a("span",{domProps:{textContent:e._s(t.label)}}),a("span",{staticClass:"u-yellow",domProps:{textContent:e._s(e.attribute_percent(t.type,t.value))}})])])})),0):e._e(),e.source.Diamonds?a("ul",{staticClass:"u-diamonds u-gray"},[e._l(e.source.Diamonds,(function(t,s){return a("li",{key:s,staticClass:"u-diamond"},[a("span",{staticClass:"u-square"}),a("span",{staticClass:"u-text",domProps:{textContent:e._s("镶嵌孔："+t)}})])})),1==e.source.AucGenre?a("li",{staticClass:"u-diamond"},[a("span",{staticClass:"u-square"}),a("span",{staticClass:"u-text"},[e._v("<只能镶嵌五彩石>")])]):e._e()],2):e._e(),e.source.Requires&&e.source.Requires[7]?a("div",{staticClass:"u-require-sex",domProps:{textContent:e._s(e.source.Requires[7])}}):e._e(),e.source.Requires&&e.source.Requires[6]?a("div",{staticClass:"u-require-school",domProps:{textContent:e._s(e.source.Requires[6])}}):e._e(),e.source.Requires&&e.source.Requires[5]?a("div",{staticClass:"u-require-level",domProps:{textContent:e._s(e.source.Requires[5])}}):e._e(),e.source.Requires&&e.source.Requires[100]?a("div",{staticClass:"u-require-level",domProps:{textContent:e._s(e.source.Requires[5])}}):e._e(),e.source.AucGenre>=1&&e.source.AucGenre<=3?a("div",{staticClass:"u-max-durability",domProps:{textContent:e._s("最大耐久度"+e.source.MaxDurability)}}):e._e(),e.source.Set?a("div",{staticClass:"u-set"},[a("br"),a("div",{staticClass:"u-yellow",domProps:{textContent:e._s(e.source.Set.name+"(1/"+e.source.Set.siblings.length+")")}}),a("ul",{staticClass:"u-set-siblings u-gray"},e._l(e.source.Set.siblings,(function(t,s){return a("li",{key:s,class:{"u-yellow":t==e.source.Name},domProps:{textContent:e._s(t)}})})),0),a("br"),a("ul",{staticClass:"u-set-attributes u-gray"},e._l(e.source.Set.attributes,(function(t,s){return a("li",{key:s,domProps:{textContent:e._s("["+s+"]"+t)}})})),0),a("br")]):e._e(),e.source.DescHtml?a("p",{staticClass:"u-desc u-yellow",domProps:{innerHTML:e._s(e.source.DescHtml)}}):e._e(),e.source.WuCaiHtml?a("p",{staticClass:"u-desc",domProps:{innerHTML:e._s(e.source.WuCaiHtml)}}):e._e(),e.source.Level?a("div",{staticClass:"u-level u-yellow",domProps:{textContent:e._s("品质等级"+e.source.Level)}}):e._e(),e.source.EquipmentRating?a("div",{staticClass:"u-equipment-rating u-orange",domProps:{textContent:e._s("装备分数"+e.source.EquipmentRating)}}):e._e(),e.source.Recommend?a("div",{staticClass:"u-equipment-recommend",domProps:{textContent:e._s("推荐门派："+e.source.Recommend)}}):e._e(),e.source.CoolDown?a("div",{staticClass:"u-equipment-recommend",domProps:{textContent:e._s("使用间隔"+e.second_format(e.source.CoolDown))}}):e._e(),e.source.Appearance?a("div",{staticClass:"u-appearance",domProps:{textContent:e._s("外观名称："+e.source.Appearance)}}):e._e(),e.source.CanExterior?a("div",{staticClass:"u-can-exterior",domProps:{textContent:e._s("外观："+e.source.CanExterior)}}):e._e(),!e.source.CanShared||e.source.AucGenre>=1&&e.source.AucGenre<=4?e._e():a("div",{staticClass:"u-can-shared"},[e._v(" 该物品可以放入账号储物箱共享。 ")]),e.source.CanShared&&e.source.AucGenre>=1&&e.source.AucGenre<=4?a("div",{staticClass:"u-can-shared"},[e._v(" 该装备未精炼、镶嵌、附魔、穿戴前可以放入账号储物箱共享。 ")]):e._e()])]):e._e()},c=[],u=a("9ec4"),p=a.n(u),m=a("64c7");function d(e){if(e)return p()({url:`${m["__helperUrl"]}api/item/${e}`,headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0})}const{__imgPath:_,__iconPath:h}=a("64c7");var b=e=>isNaN(parseInt(e))?_+"image/common/nullicon.png":`${h}icon/${e}.png`,g=e=>{let t=Math.floor(e/86400),a=Math.floor((e-24*t*3600)/3600),s=Math.floor((e-24*t*3600-3600*a)/60);e=e-24*t*3600-3600*a-60*s;let i="";return t&&(i+=t+"天"),a&&(i+=a+"小时"),s&&(i+=s+"分钟"),e&&(i+=e+"秒"),i},v=(e,t)=>{let a="";switch(t=t?parseInt(t):0,e){case"atAllTypeCriticalStrike":case"atLunarCriticalStrike":case"atMagicCriticalStrike":case"atNeutralCriticalStrike":case"atPhysicsCriticalStrike":case"atPoisonCriticalStrike":case"atSolarAndLunarCriticalStrike":case"atSolarCriticalStrike":a=`+${(t/35737.5*100).toFixed(2)}%`;break;case"atAllTypeCriticalDamagePowerBase":case"atLunarCriticalDamagePowerBase":case"atMagicCriticalDamagePowerBase":case"atNeutralCriticalDamagePowerBase":case"atPhysicsCriticalDamagePowerBase":case"atPoisonCriticalDamagePowerBase":case"atSolarAndLunarCriticalDamagePowerBase":case"atSolarCriticalDamagePowerBase":a=`+${(t/12506.25*100).toFixed(2)}%`;break;case"atToughnessBase":a=`+${(t/35737.5*100).toFixed(2)}% +${(t/9588.75*100).toFixed(2)}%会心减害`;break;case"atDecriticalDamagePowerBase":a="";break;case"atAllTypeHitValue":case"atLunarHitValue":case"atMagicHitValue":case"atNeutralHitValue":case"atPhysicsHitValue":case"atPoisonHitValue":case"atSolarAndLunarHitValue":case"atSolarHitValue":a=`+${(t/25991.25*100).toFixed(2)}%`;break;case"atDodge":a="";break;case"atParryBase":a="";break;case"atStrainBase":a=`+${(t/34458.75*100).toFixed(2)}%`;break;case"atPhysicsDefenceAdd":case"atPhysicsShieldAdditional":case"atPhysicsShieldBase":a="";break;case"atLunarMagicShieldBase":case"atMagicShield":case"atNeutralMagicShieldBase":case"atPoisonMagicShieldBase":case"atSolarMagicShieldBase":a="";break;case"atLunarOvercomeBase":case"atMagicOvercome":case"atNeutralOvercomeBase":case"atPhysicsOvercomeBase":case"atPoisonOvercomeBase":case"atSolarAndLunarOvercomeBase":case"atSolarOvercomeBase":a=`+${(t/35737.5*100).toFixed(2)}%`;break;case"atHasteBase":a=`+${(t/43856.25*100).toFixed(2)}%`;break;default:break}return a?` (${a})`:""},C=e=>{switch(e){case 1:return"不绑定";case 2:return"装备后绑定";case 3:return"拾取后绑定";default:return"未知"}},f=e=>{switch(e=parseInt(e),e){case 0:return"rgb(167,167,167)";case 1:return"rgb(255,255,255)";case 2:return"rgb(0,210,75)";case 3:return"rgb(0,126,255)";case 4:return"rgb(254,45,254)";case 5:return"rgb(255,165,0)";default:return"rgb(167,167,167)"}},y={name:"Item",props:["item","item_id"],data:function(){return{source:null}},methods:{icon_url:b,second_format:g,attribute_percent:v,bind:C,color:f},watch:{item:{immediate:!0,handler:function(){"undefined"!==typeof this.item&&(this.source=this.item)}},item_id:{immediate:!0,handler:function(){var e=this;if(this.item_id){var t=sessionStorage.getItem("item-".concat(this.item_id)),a=sessionStorage.getItem("item-".concat(this.item_id,"-created"));if((!1===t||t)&&Math.round(new Date/1e3)-a<=3600)return void(this.source=!1===t?null:JSON.parse(t));d(this.item_id).then((function(t){var a=t.data;if(200===a.code){var s=a.data.item;e.source="{}"!==JSON.stringify(s)?s:null,sessionStorage.setItem("item-".concat(e.source.id),!!e.source&&JSON.stringify(e.source)),sessionStorage.setItem("item-".concat(e.source.id,"-created"),Math.round(new Date/1e3))}}))}else"undefined"!==typeof this.item_id&&(this.source=null)}}}},A=y,S=(a("eb63"),a("2877")),x=Object(S["a"])(A,l,c,!1,null,"3be402db",null),P=x.exports;const{__imgPath:E}=a("64c7");var N=e=>{switch(e.Quality){case 3:return`url(${E}image/item/blue.png)`;case 4:return`url(${E}image/item/purple.png)`;case 5:return`url(${E}image/item/orange.gif)`;default:return""}};const{__imgPath:T}=a("64c7");var w=e=>e.IsQuest>0?`url(${T}image/item/renwu.png)`:"",O={name:"ItemSimple",props:["item","onlyIcon","iconSize","withName"],data:function(){return{visible:!1,item_id:null}},methods:{icon_url:b,item_color:f,item_border:N,item_border_quest:w},components:{"jx3-item":P}},k=O,G=(a("ecd9"),a("85ca"),Object(S["a"])(k,n,o,!1,null,null,null)),M=G.exports,I=a("b76a"),L=a.n(I),q=a("b78a"),B=a("208a");const $=Object.freeze({HELM:"helm",CHEST:"chest",WAIST:"waist",BANGLE:"bangle",PANTS:"pants",BOOTS:"boots",AMULET:"amulet",PENDANT:"pendant",RING:"ring",MELEE_WEAPON:"melee_weapon",RANGE_WEAPON:"range_weapon",AMMO_POUCH:"ammo_pouch",all(){return[this.HELM,this.CHEST,this.WAIST,this.BANGLE,this.PANTS,this.BOOTS,this.AMULET,this.PENDANT,this.RING,this.MELEE_WEAPON,this.RANGE_WEAPON,this.AMMO_POUCH]}});var D=$;const R=Object.freeze({HELM:D.HELM,CHEST:D.CHEST,WAIST:D.WAIST,BANGLE:D.BANGLE,PANTS:D.PANTS,BOOTS:D.BOOTS,AMULET:D.AMULET,PENDANT:D.PENDANT,RING_1:D.RING+"_1",RING_2:D.RING+"_2",MELEE_WEAPON:D.MELEE_WEAPON,RANGE_WEAPON:D.RANGE_WEAPON,all(){let e=[{type:this.MELEE_WEAPON,label:"武器",AucGenre:1},{type:this.RANGE_WEAPON,label:"暗器",AucGenre:2},{type:this.HELM,label:"帽子",AucGenre:3,AucSubType:2},{type:this.CHEST,label:"上衣",AucGenre:3,AucSubType:1},{type:this.WAIST,label:"腰带",AucGenre:3,AucSubType:3},{type:this.BANGLE,label:"护腕",AucGenre:3,AucSubType:6},{type:this.PANTS,label:"下装",AucGenre:3,AucSubType:4},{type:this.BOOTS,label:"鞋子",AucGenre:3,AucSubType:5},{type:this.AMULET,label:"项链",AucGenre:4,AucSubType:1},{type:this.PENDANT,label:"腰坠",AucGenre:4,AucSubType:3},{type:this.RING_1,label:"戒指",AucGenre:4,AucSubType:2},{type:this.RING_2,label:"戒指",AucGenre:4,AucSubType:2}],t={};for(let a in e){let s=e[a];t[s.type]=s}return t}});var H=R,j=(a("4328"),a("2ef0")),W=a("64c7"),U=W.__Root,J={name:"item",props:[],data:function(){var e=[[H.MELEE_WEAPON,H.RANGE_WEAPON],[H.HELM,H.CHEST,H.WAIST],[H.BANGLE,H.PANTS,H.BOOTS],[H.AMULET,H.PENDANT,H.RING_1,H.RING_2]],t=H.all();for(var a in e){var s={};for(var i in e[a]){var r=j.get(e,"".concat(a,".").concat(i));s[r]=t[r]}j.set(e,a,s)}var n={};for(var o in t){var l=t[o];n[l.type]=[]}return{keyword:"",items:null,normal_relation:[{title:"",data:[]}],equip_relation:n,plan:{id:"",title:"",public:1,type:1,relation:null,description:""},positions:e}},mounted:function(){var e=this;this.$route.params.plan_id&&Object(B["b"])(this.$route.params.plan_id).then((function(t){t=t.data,200===t.code?(e.plan=t.data.plan,e.plan?1==e.plan.type?e.normal_relation=e.plan.relation_items:2==e.plan.type?e.equip_relation=e.plan.relation_items:e.$message.error("物品清单类型异常，请联系管理员"):(e.$message.error(t.message),e.$router.push({name:"item_plan"}))):e.$message.error("获取物品清单异常，请联系管理员")}))},methods:{add_normal_relation:function(){this.normal_relation.push({title:"",data:[]})},move_handle:function(e){if(!e.to.classList.contains("m-selected-items"))return!1;if(!e.to.classList.contains("m-selected-equips"))return!0;var t=e.to.getAttribute("data-AucGenre"),a=e.to.getAttribute("data-AucSubType"),s=e.draggedContext.element.AucGenre==t;return null!==a&&(s=s&&e.draggedContext.element.AucSubType==a),s},search:function(){var e=this;Object(q["b"])(this.keyword,15,["id","UiID","Name","IconID","Quality","AucGenre","AucSubType"],2==this.plan.type).then((function(t){t=t.data,e.items=200===t.code?t.data.data:[]}),(function(){e.options.items=!1}))},submit:function(){var e=this;if(1==this.plan.type){var t=JSON.parse(JSON.stringify(this.normal_relation));for(var a in t)for(var s in t[a].data)t[a].data[s]=t[a].data[s].id;this.plan.relation=JSON.stringify(t)}else{if(2!=this.plan.type)return void this.$message.error("物品清单类型异常，请联系管理员");var i=JSON.parse(JSON.stringify(this.equip_relation));for(var r in i)for(var n in i[r])i[r][n]=i[r][n].id;this.plan.relation=JSON.stringify(i)}this.$store.commit("startProcess"),Object(B["d"])(this.plan).then((function(t){t=t.data,200===t.code?(e.$message({message:"物品清单提交成功",type:"success"}),location.href="".concat(U,"item/#/plan_view/").concat(t.data.id)):e.$message({message:"".concat(t.message),type:"warning"})}))}},watch:{keyword:{immediate:!0,handler:function(){this.search()}},"plan.type":function(){this.search()}},components:{draggable:L.a,pubheader:r["a"],"jx3-item-simple":M}},F=J,V=(a("f9c3"),Object(S["a"])(F,s,i,!1,null,null,null));t["default"]=V.exports},b78a:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));var s=a("2777"),i=a("ee8f"),r=a("ee8f");r.User,a("4328");function n(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n={keyword:e,limit:t,fields:a};return null!==r&&(n.is_equip=r?1:0),Object(s["a"])({method:"GET",url:"".concat(i["JX3BOX"].__helperUrl,"api/item/search"),headers:{Accept:"application/prs.helper.v2+json"},params:n})}function o(e){return Object(s["a"])({method:"GET",url:"".concat(i["JX3BOX"].__helperUrl,"api/wiki/post"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:e,supply:0}})}},eb63:function(e,t,a){"use strict";var s=a("1ed1"),i=a.n(s);i.a},ecd9:function(e,t,a){"use strict";var s=a("2d41"),i=a.n(s);i.a},f9c3:function(e,t,a){"use strict";var s=a("a1e2"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-3e40e3d8.ef2afecb.js.map