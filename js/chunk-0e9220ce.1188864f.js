(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e9220ce"],{"1f07":function(t,i,n){},2613:function(t,i,n){"use strict";n("1f07")},"3f95":function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("uc",{staticClass:"m-dashboard-frame m-dashboard-emotion",attrs:{icon:"el-icon-brush",title:"主题装扮",tabList:t.tabList}},[n("div",{staticClass:"u-tips"},[n("i",{staticClass:"el-icon-warning-outline"}),t._v("自定义表情包最多只能同时激活三个，"),n("a",{attrs:{href:"/vip/mall/#/list?type=virtual&subtype=emotion",target:"_blank"}},[t._v("前往购买表情包")]),t._v("。 ")]),n("div",{staticClass:"u-list"},t._l(t.emotions,(function(i){return n("div",{key:i.group_id,staticClass:"u-item",class:{"is-using":t.isUsing(i.group_name),disabled:t.isDisabled(i.group_name),hidden:t.isHidden(i.group_name)},on:{click:function(n){return n.stopPropagation(),t.handleEmotionClick(i)}}},[n("img",{staticClass:"u-img",attrs:{src:t.imgSrc(i.group_name),alt:i.group_name}}),n("div",{staticClass:"u-title"},[t._v(t._s(i.group_name))])])})),0),n("div",{staticClass:"u-actions"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",loading:t.loading},on:{click:t.handleSave}},[t._v("保存")])],1)])},o=[],a=(n("d81d"),n("4de4"),n("d3b7"),n("e9c4"),n("7db0"),n("caad"),n("2532"),n("b547")),s=n("aa38"),r=n("65c2"),c=n("46c1"),u={name:"emotion",props:[],data:function(){return{tabList:c["c"],emotionList:[],emotions:[],active:[],loading:!1}},computed:{},methods:{loadDecoration:function(){var t=this;Object(s["a"])({type:"emotion"}).then((function(i){t.emotionList=i.data.data,t.active=t.emotionList.filter((function(t){return t.using})).map((function(t){return t.val}))}))},getEmotion:function(){var t=this;try{var i=JSON.parse(sessionStorage.getItem("jx3_emotion"));if(i)return void(this.emotions=i);Object(s["c"])().then((function(i){t.emotions=i.data,sessionStorage.setItem("jx3_emotion",JSON.stringify(i.data))}))}catch(n){console.log(n),this.emotions=[]}},imgSrc:function(t){var i,n=this.emotions.find((function(i){return i.group_name===t})),e=null===(i=n.items)||void 0===i?void 0:i[0];return r["__imgPath"]+"emotion/output/"+(null===e||void 0===e?void 0:e.filename)},isUsing:function(t){return this.active.includes(t)||"默认"===t},isDisabled:function(t){return!this.emotionList.map((function(t){return t.val})).includes(t)&&"默认"!==t},isHidden:function(t){return"默认"===t},handleEmotionClick:function(t){this.isDisabled(t.group_name)||(this.active.length>=3&&!this.isUsing(t.group_name)?this.$message.error("最多只能选择三个表情包"):this.isUsing(t.group_name)?this.active=this.active.filter((function(i){return i!==t.group_name})):this.active.push(t.group_name))},handleSave:function(){var t=this;this.loading=!0;var i=this.emotionList.map((function(i){return{type:"emotion",val:i.val,using:t.active.includes(i.val)}}));Object(s["d"])(i).then((function(i){t.$message.success("保存成功"),t.loading=!1}))}},mounted:function(){this.loadDecoration(),this.getEmotion()},components:{uc:a["a"]}},d=u,l=(n("2613"),n("2877")),m=Object(l["a"])(d,e,o,!1,null,null,null);i["default"]=m.exports},aa38:function(t,i,n){"use strict";n.d(i,"a",(function(){return r})),n.d(i,"d",(function(){return c})),n.d(i,"b",(function(){return u})),n.d(i,"c",(function(){return d}));var e=n("41cb"),o=n("bc3a"),a=n.n(o),s=n("65c2");function r(t){return Object(e["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(e["b"])().post("/api/cms/user/decoration",t)}function u(){var t=s["__imgPath"]+"decoration/index.json";return a.a.get(t)}function d(){return a.a.get("".concat(s["__dataPath"],"emotion/output/catalog.json"))}},d81d:function(t,i,n){"use strict";var e=n("23e7"),o=n("b727").map,a=n("1dde"),s=a("map");e({target:"Array",proto:!0,forced:!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-0e9220ce.1188864f.js.map