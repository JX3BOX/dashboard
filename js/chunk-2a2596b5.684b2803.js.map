{"version":3,"sources":["webpack:///./node_modules/lie/lib/browser.js","webpack:///./src/components/publish/post_excerpt.vue?0ff6","webpack:///./src/components/publish/upload.vue?3616","webpack:///./src/components/publish/post_notify.vue?fd54","webpack:///./node_modules/lie/polyfill.js","webpack:///./src/components/publish/boilerplate.vue?3973","webpack:///./src/components/publish/post_tag.vue?dfad","webpack:///./src/components/publish/boilerplate.vue?1992","webpack:///./src/components/publish/upload.vue?faf1","webpack:///src/components/publish/upload.vue","webpack:///./src/components/publish/upload.vue?78a3","webpack:///./src/components/publish/upload.vue","webpack:///./src/components/publish/markdown.vue?138d","webpack:///src/components/publish/markdown.vue","webpack:///./src/components/publish/markdown.vue?98d3","webpack:///./src/components/publish/markdown.vue","webpack:///./src/components/publish/post_title.vue?eabd","webpack:///src/components/publish/post_title.vue","webpack:///./src/components/publish/post_title.vue?8747","webpack:///./src/components/publish/post_title.vue","webpack:///./src/components/publish/post_excerpt.vue?0b31","webpack:///src/components/publish/post_excerpt.vue","webpack:///./src/components/publish/post_excerpt.vue?5464","webpack:///./src/components/publish/post_excerpt.vue","webpack:///./src/components/publish/post_tag.vue?0560","webpack:///src/components/publish/post_tag.vue","webpack:///./src/components/publish/post_tag.vue?b9d7","webpack:///./src/components/publish/post_tag.vue","webpack:///./src/components/publish/post_notify.vue?32a7","webpack:///src/components/publish/post_notify.vue","webpack:///./src/components/publish/post_notify.vue?12b9","webpack:///./src/components/publish/post_notify.vue","webpack:///./src/components/publish/post_banner.vue?c09e","webpack:///src/components/publish/post_banner.vue","webpack:///./src/components/publish/post_banner.vue?7da6","webpack:///./src/components/publish/post_banner.vue","webpack:///./node_modules/@jx3box/jx3box-common/js/idb.js","webpack:///./src/utils/autoSave.js","webpack:///src/components/publish/boilerplate.vue","webpack:///./src/components/publish/boilerplate.vue?f8d4","webpack:///./src/components/publish/boilerplate.vue","webpack:///./src/components/publish/post_banner.vue?1f42","webpack:///./node_modules/immediate/lib/browser.js","webpack:///./node_modules/localforage/src/utils/idb.js","webpack:///./node_modules/localforage/src/utils/isIndexedDBValid.js","webpack:///./node_modules/localforage/src/utils/createBlob.js","webpack:///./node_modules/localforage/src/utils/promise.js","webpack:///./node_modules/localforage/src/utils/executeCallback.js","webpack:///./node_modules/localforage/src/utils/executeTwoCallbacks.js","webpack:///./node_modules/localforage/src/utils/normalizeKey.js","webpack:///./node_modules/localforage/src/utils/getCallback.js","webpack:///./node_modules/localforage/src/drivers/indexeddb.js","webpack:///./node_modules/localforage/src/utils/isWebSQLValid.js","webpack:///./node_modules/localforage/src/utils/serializer.js","webpack:///./node_modules/localforage/src/drivers/websql.js","webpack:///./node_modules/localforage/src/utils/isLocalStorageValid.js","webpack:///./node_modules/localforage/src/drivers/localstorage.js","webpack:///./node_modules/localforage/src/utils/includes.js","webpack:///./node_modules/localforage/src/utils/isArray.js","webpack:///./node_modules/localforage/src/localforage.js"],"names":["immediate","INTERNAL","handlers","REJECTED","FULFILLED","PENDING","Promise","resolver","TypeError","this","state","queue","outcome","safelyResolveThenable","QueueItem","promise","onFulfilled","onRejected","callFulfilled","otherCallFulfilled","callRejected","otherCallRejected","unwrap","func","value","returnValue","e","reject","resolve","getThen","obj","then","apply","arguments","self","thenable","called","onError","onSuccess","tryToUnwrap","result","tryCatch","status","out","reason","all","iterable","Object","prototype","toString","call","len","length","values","Array","resolved","i","allResolver","resolveFromAll","outValue","error","race","response","module","exports","constructor","push","global","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","name","localDraft","_t","post","post_title","_v","_e","directives","rawName","expression","mode","on","updateContent","model","callback","$$v","$set","post_tags","post_excerpt","extend","post_banner","processing","publish","_s","publish_text","draft","draft_text","staticRenderFns","$event","dialogVisible","clear","tip","ref","API","fileList","change","scopedSlots","_u","key","fn","file","class","isSelected","selected","disabled","select","url","slot","insert","buttonTXT","component","content","done","_l","tag","handleClose","handleInputConfirm","nativeOn","type","indexOf","_k","keyCode","inputValue","showInput","notify","fail","_f","clearBanner","localforage","IDB","dbName","storeName","window","indexedDB","console","log","db","createInstance","driver","INDEXEDDB","_","require","DB","INTERVAL","savePost","data","ready","setItem","throttle","scheduleDrain","draining","Mutation","MutationObserver","WebKitMutationObserver","observer","nextTick","element","document","createTextNode","observe","characterData","setImmediate","MessageChannel","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","setTimeout","channel","port1","onmessage","port2","postMessage","oldQueue","task","getIDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","isIndexedDBValid","open","isSafari","openDatabase","test","navigator","userAgent","platform","hasFetch","fetch","IDBKeyRange","createBlob","parts","properties","Blob","Builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","builder","append","getBlob","executeCallback","executeTwoCallbacks","errorCallback","catch","normalizeKey","warn","String","getCallback","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","READ_ONLY","READ_WRITE","_binStringToArrayBuffer","bin","buf","ArrayBuffer","arr","Uint8Array","charCodeAt","_checkBlobSupportWithoutCaching","idb","txn","transaction","blob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","match","matchedEdge","parseInt","_checkBlobSupport","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","pop","_rejectReadiness","err","_getConnection","upgradeNeeded","createDbContext","close","dbArgs","version","openreq","onupgradeneeded","createObjectStore","oldVersion","ex","newVersion","onerror","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","contains","isDowngrade","isUpgrade","incVersion","_encodeBlob","reader","FileReader","onloadend","base64","btoa","target","__local_forage_encoded_blob","readAsBinaryString","_decodeBlob","encodedBlob","arrayBuff","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","_tryReconnect","forages","forage","createTransaction","retries","undefined","tx","_initStorage","options","initPromises","ignoreErrors","j","slice","_defaultConfig","k","getItem","store","req","get","iterate","iterator","openCursor","iterationNumber","cursor","continue","blobSupport","removeItem","delete","count","n","advanced","openKeyCursor","advance","keys","dropInstance","currentConfig","config","isCurrentDb","dbPromise","dropObjectPromise","deleteObjectStore","dropDBPromise","deleteDatabase","onblocked","asyncStorage","_driver","_support","isWebSQLValid","BASE_CHARS","BLOB_TYPE_PREFIX","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT16ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","TYPE_SERIALIZED_MARKER_LENGTH","stringToBuffer","serializedString","encoded1","encoded2","encoded3","encoded4","bufferLength","p","buffer","bytes","bufferToString","base64String","substring","serialize","valueType","marker","Error","fileReader","onload","str","readAsArrayBuffer","JSON","stringify","deserialize","parse","blobType","matcher","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","localforageSerializer","createDbTable","t","executeSql","dbInfoPromise","description","size","serializer","tryExecuteSql","sqlStatement","args","code","SYNTAX_ERR","results","rows","item","_setItem","retriesLeft","originalValue","sqlError","QUOTA_ERR","c","getAllStoreNames","storeNames","operationInfo","dropTable","operations","webSQLStorage","isLocalStorageValid","localStorage","_getKeyPrefix","defaultConfig","keyPrefix","checkIfLocalStorageThrows","localStorageTestKey","_isLocalStorageUsable","keyPrefixLength","itemKey","localStorageWrapper","sameValue","x","y","isNaN","includes","array","searchElement","isArray","arg","DefinedDrivers","DriverSupport","DefaultDrivers","WEBSQL","websql","LOCALSTORAGE","localstorage","DefaultDriverOrder","OptionalDriverMethods","LibraryMethods","concat","DefaultConfig","callWhenReady","localForageInstance","libraryMethod","_args","hasOwnProperty","driverTypeKey","driverName","defineDriver","_config","_driverSet","_initDriver","_ready","_wrapLibraryMethodsWithReady","setDriver","replace","driverObject","complianceError","driverMethods","driverMethodName","isRequired","configureMissingMethods","methodNotImplementedFactory","methodName","optionalDriverMethod","setDriverSupport","support","info","getDriverPromise","serializerPromise","drivers","supportedDrivers","_getSupportedDrivers","setDriverToConfig","extendSelfWithDriver","_extend","initDriver","currentDriverIndex","driverPromiseLoop","getDriver","oldDriverSetDone","libraryMethodsAndProperties","supports"],"mappings":"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","file":"js/chunk-2a2596b5.684b2803.js","sourcesContent":["'use strict';\nvar immediate = require('immediate');\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nPromise.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nPromise.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nPromise.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nPromise.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_excerpt.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_excerpt.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./upload.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./upload.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_notify.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_notify.vue?vue&type=style&index=0&lang=less&\"","'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = require('./lib');\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./boilerplate.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./boilerplate.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_tag.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_tag.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-box\"},[_c('pubheader',{attrs:{\"name\":_vm.name,\"localDraft\":_vm.localDraft}},[_vm._t(\"header\")],2),_c('el-form',{attrs:{\"label-position\":\"left\",\"label-width\":\"80px\"}},[_c('post_title',{attrs:{\"title\":_vm.post.post_title}},[_vm._t(\"title\")],2),(_vm.infoEnable)?_c('div',{staticClass:\"m-publish-info\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"信息\")]),_vm._t(\"default\")],2):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.contentEnable),expression:\"contentEnable\"}],staticClass:\"m-publish-prepend\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"正文\")]),_vm._t(\"prepend\")],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.contentEnable),expression:\"contentEnable\"}],staticClass:\"m-publish-content\"},[_c('Tinymce',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode == 'tinymce'),expression:\"mode == 'tinymce'\"}],attrs:{\"attachmentEnable\":true,\"resourceEnable\":true},on:{\"update\":_vm.updateContent},model:{value:(_vm.post.post_content),callback:function ($$v) {_vm.$set(_vm.post, \"post_content\", $$v)},expression:\"post.post_content\"}})],1),(_vm.excerptEnable)?_c('div',{staticClass:\"m-publish-append\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"附加\")]),(_vm.tagEnable)?_c('post_tag',{attrs:{\"tags\":_vm.post.post_tags}}):_vm._e(),_c('post_excerpt',{attrs:{\"excerpt\":_vm.post.post_excerpt}}),_vm._t(\"append\")],2):_vm._e(),(_vm.notifyEnable)?_c('div',{staticClass:\"m-publish-extend\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"扩展\")]),_c('post_notify',{attrs:{\"notify\":_vm.extend}}),_vm._t(\"extend\")],2):_vm._e(),(_vm.bannerEnable)?_c('div',{staticClass:\"m-publish-admin\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"海报\")]),_c('post_banner',{attrs:{\"banner\":_vm.post.post_banner}})],1):_vm._e(),_c('div',{staticClass:\"m-publish-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.publish}},[_vm._v(_vm._s(_vm.publish_text || \"发 布\"))]),_c('el-button',{attrs:{\"type\":\"plain\",\"disabled\":_vm.processing},on:{\"click\":_vm.draft}},[_vm._v(_vm._s(_vm.draft_text || \"保存为草稿\"))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"c-upload\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_c('i',{staticClass:\"el-icon-upload el-icon--right\"}),_vm._v(\" 上传附件\")]),_c('el-dialog',{staticClass:\"c-large-dialog\",attrs:{\"title\":\"上传\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-button',{staticClass:\"u-upload-clear\",attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"small\"},on:{\"click\":_vm.clear}},[_vm._v(\"清空\")]),_c('el-alert',{staticClass:\"u-upload-tip\",attrs:{\"title\":_vm.tip,\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}}),_c('el-upload',{ref:\"uploadbox\",attrs:{\"action\":_vm.API,\"list-type\":\"picture-card\",\"auto-upload\":false,\"limit\":10,\"multiple\":\"\",\"with-credentials\":\"\",\"file-list\":_vm.fileList,\"on-change\":_vm.change},scopedSlots:_vm._u([{key:\"file\",fn:function(ref){\nvar file = ref.file;\nreturn _c('div',{staticClass:\"u-file-wrapper\",class:{\n                    isSelected: file.selected,\n                    disabled: file.status != 'success',\n                },on:{\"click\":function($event){return _vm.select(file)}}},[(file.is_img)?_c('img',{staticClass:\"el-upload-list__item-thumbnail u-imgbox\",attrs:{\"src\":file.url,\"alt\":\"\"}}):_c('div',{staticClass:\"u-filebox\"},[_c('svg',{class:'u-fileplaceholder',attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 469.333 469.333\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M466.208 88.458L380.875 3.125c-2-2-4.708-3.125-7.542-3.125H42.667C19.146 0 0 19.135 0 42.667v384c0 23.531 19.146 42.667 42.667 42.667h384c23.521 0 42.667-19.135 42.667-42.667V96a10.665 10.665 0 00-3.126-7.542zM106.667 21.333h234.667v128c0 11.76-9.563 21.333-21.333 21.333H128c-11.771 0-21.333-9.573-21.333-21.333v-128zM384 448H85.333V256H384v192zm64-21.333c0 11.76-9.563 21.333-21.333 21.333h-21.333V245.333a10.66 10.66 0 00-10.667-10.667h-320A10.66 10.66 0 0064 245.333V448H42.667c-11.771 0-21.333-9.573-21.333-21.333v-384c0-11.76 9.563-21.333 21.333-21.333h42.667v128C85.333 172.865 104.479 192 128 192h192c23.521 0 42.667-19.135 42.667-42.667v-128h6.25L448 100.417v326.25z\"}}),_c('path',{attrs:{\"d\":\"M266.667 149.333h42.667a10.66 10.66 0 0010.667-10.667V53.333a10.66 10.66 0 00-10.667-10.667h-42.667A10.66 10.66 0 00256 53.333v85.333a10.66 10.66 0 0010.667 10.667zM277.333 64h21.333v64h-21.333V64z\"}})]),_c('span',{staticClass:\"u-filename\"},[_vm._v(_vm._s(file.name))])]),_c('label',{directives:[{name:\"show\",rawName:\"v-show\",value:(file.selected),expression:\"file.selected\"}],staticClass:\"u-file-select-label\"},[_c('i',{staticClass:\"el-icon-upload-success el-icon-check\"})])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.insert}},[_vm._v(_vm._s(_vm.buttonTXT))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"c-upload\">\n        <!-- 上传触发按钮 -->\n        <el-button type=\"primary\" @click=\"dialogVisible = true\"\n            ><i class=\"el-icon-upload el-icon--right\"></i> 上传附件</el-button\n        >\n\n        <!-- 弹出界面 -->\n        <el-dialog\n            class=\"c-large-dialog\"\n            title=\"上传\"\n            :visible.sync=\"dialogVisible\"\n        >\n            <!-- 清空按钮 -->\n            <el-button\n                class=\"u-upload-clear\"\n                plain\n                icon=\"el-icon-delete\"\n                size=\"small\"\n                @click=\"clear\"\n                >清空</el-button\n            >\n\n            <!-- 限制提示 -->\n            <el-alert\n                class=\"u-upload-tip\"\n                :title=\"tip\"\n                type=\"info\"\n                show-icon\n                :closable=\"false\"\n            >\n            </el-alert>\n\n            <!-- 文件区 -->\n            <el-upload\n                :action=\"API\"\n                list-type=\"picture-card\"\n                :auto-upload=\"false\"\n                :limit=\"10\"\n                multiple\n                with-credentials\n                :file-list=\"fileList\"\n                :on-change=\"change\"\n                ref=\"uploadbox\"\n            >\n            <!-- :accept=\"accept\" -->\n                <i slot=\"default\" class=\"el-icon-plus\"></i>\n\n                <!-- 文件项 -->\n                <div\n                    slot=\"file\"\n                    slot-scope=\"{ file }\"\n                    class=\"u-file-wrapper\"\n                    @click=\"select(file)\"\n                    :class=\"{\n                        isSelected: file.selected,\n                        disabled: file.status != 'success',\n                    }\"\n                >\n                    <!-- 图片类型 -->\n                    <img\n                        v-if=\"file.is_img\"\n                        class=\"el-upload-list__item-thumbnail u-imgbox\"\n                        :src=\"file.url\"\n                        alt=\"\"\n                    />\n                    <!-- 其他类型 -->\n                    <div v-else class=\"u-filebox\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 469.333 469.333\" v-bind:class=\"'u-fileplaceholder'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M466.208 88.458L380.875 3.125c-2-2-4.708-3.125-7.542-3.125H42.667C19.146 0 0 19.135 0 42.667v384c0 23.531 19.146 42.667 42.667 42.667h384c23.521 0 42.667-19.135 42.667-42.667V96a10.665 10.665 0 00-3.126-7.542zM106.667 21.333h234.667v128c0 11.76-9.563 21.333-21.333 21.333H128c-11.771 0-21.333-9.573-21.333-21.333v-128zM384 448H85.333V256H384v192zm64-21.333c0 11.76-9.563 21.333-21.333 21.333h-21.333V245.333a10.66 10.66 0 00-10.667-10.667h-320A10.66 10.66 0 0064 245.333V448H42.667c-11.771 0-21.333-9.573-21.333-21.333v-384c0-11.76 9.563-21.333 21.333-21.333h42.667v128C85.333 172.865 104.479 192 128 192h192c23.521 0 42.667-19.135 42.667-42.667v-128h6.25L448 100.417v326.25z\"/><path d=\"M266.667 149.333h42.667a10.66 10.66 0 0010.667-10.667V53.333a10.66 10.66 0 00-10.667-10.667h-42.667A10.66 10.66 0 00256 53.333v85.333a10.66 10.66 0 0010.667 10.667zM277.333 64h21.333v64h-21.333V64z\"/></svg>\n                        <span class=\"u-filename\">{{ file.name }}</span>\n                    </div>\n                    <!-- 勾选角标 -->\n                    <label v-show=\"file.selected\" class=\"u-file-select-label\"\n                        ><i class=\"el-icon-upload-success el-icon-check\"></i\n                    ></label>\n                </div>\n            </el-upload>\n\n            <!-- 插入按钮 -->\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"insert\">{{\n                    buttonTXT\n                }}</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport allow_types from \"@jx3box/jx3box-common/js/conf\";\nimport { JX3BOX } from \"@jx3box/jx3box-common\";\nimport axios from \"axios\";\nconst imgtypes = [\"jpg\", \"png\", \"gif\", \"bmp\"];\nconst API = JX3BOX.__server + \"upload\";\n// const API = \"http://localhost:5160/\" + \"publish/upload\";\n\nexport default {\n    name: \"upload\",\n    data: function() {\n        return {\n            API: API,\n            dialogVisible: false,\n            tip:\n                \"一次最多同时上传10个文件（不超过5M），格式限常见的图片、文档、数据表及压缩包\",\n\n            fileList: [],\n            selectedCount: 0,\n\n            // accept: allow_types.accept,\n            // sizeLimit: allow_types.sizeLimit,\n        };\n    },\n    computed: {\n        buttonTXT: function() {\n            return this.selectedCount ? \"插 入\" : \"确 定\";\n        },\n    },\n    methods: {\n        change: function(file, fileList) {\n            if (file.status != \"success\") {\n                // 判断大小\n                // if (file.size > this.sizeLimit) {\n                //     this.$message.error(\"文件超出大小限制\");\n                //     this.removeFile(fileList, file.uid);\n                //     return;\n                // }\n\n                // 构建数据\n                let fdata = new FormData();\n                fdata.append(\"file\", file.raw);\n\n                // 异步上传\n                axios\n                    .post(API, fdata, {\n                        headers: { \"Content-Type\": \"multipart/form-data\" },\n                        withCredentials: true,\n                    })\n                    .then((res) => {\n                        // 提醒\n                        this.$message({\n                            message: \"上传成功\",\n                            type: \"success\",\n                        });\n\n                        // 修改path\n                        file.url = res.data.data.list[0];\n\n                        // 分析文件类型\n                        let ext = file.name.split(\".\").pop();\n                        let is_img = imgtypes.includes(ext);\n\n                        // 额外赋值\n                        file.is_img = is_img;\n                        file.selected = true;\n\n                        // 修改状态加入仓库\n                        file.status = \"success\";\n                        this.fileList.push(file);\n                        this.selectedCount++\n                    })\n                    .catch((err) => {\n                        if (err.response.data.code) {\n                            this.$message.error(\n                                `[${err.response.data.code}] ${err.response.data.msg}`\n                            );\n                        } else {\n                            this.$message.error(\"请求异常\");\n                        }\n                    });\n            }\n        },\n        select: function(file) {\n            if (file.status == \"success\") {\n                this.$set(file,'selected',!file.selected)\n                file.selected ? this.selectedCount++ : this.selectedCount--;\n            }\n        },\n        insert: function() {\n            this.dialogVisible = false;\n\n            //为空不执行插入\n            if (!this.selectedCount) return;\n\n            if (this.$store.state.post.post_mode == \"markdown\") {\n                // tinymce\n            } else {\n                tinyMCE.editors[\"tinymce\"].insertContent(this.insertList());\n            }\n\n            //移除所有选择状态\n            this.resetSelectStatus();\n            \n        },\n        resetSelectStatus: function() {\n            this.fileList.forEach((file,i) => {\n                this.$set(this.fileList[i],'selected',false)\n            });\n            this.selectedCount = 0\n        },\n        clear: function() {\n            this.$refs.uploadbox.clearFiles();\n            this.fileList = []\n        },\n        removeFile: function(fileList, uid) {\n            fileList.forEach((file, i) => {\n                if (file.uid == uid) {\n                    fileList.splice(i, 1);\n                }\n            });\n        },\n        insertList: function() {\n            let list = [];\n            this.fileList.forEach((file) => {\n                if (file.selected) {\n                    file.is_img\n                        ? list.push(`<img src=\"${file.url}\" />`)\n                        : list.push(\n                              `<a target=\"_blank\" href=\"${file.url}\">${file.name}</a>`\n                          );\n                }\n            });\n            return list.join(\" \\n\");\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../assets/css/components/large-dialog.less\";\n\n.c-upload {\n    .u-upload-clear {\n        .pa;\n        .lt(70px, 16px);\n    }\n    .u-upload-tip {\n        padding-right: 10px;\n        .el-alert__content {\n            line-height: 16px;\n            padding-right: 20px;\n            .db;\n            .nobreak;\n        }\n        .mb(20px);\n    }\n\n    .el-dialog__body {\n        padding-top: 0;\n    }\n\n    .el-upload-list li {\n        outline: none;\n    }\n\n    .el-upload-list__item {\n        &:hover {\n            border: 1px solid #13ce66;\n        }\n    }\n\n    // 列表\n    .u-file-wrapper {\n        .size(100%);\n        &.isSelected {\n        }\n        &.disabled {\n            cursor: default;\n            opacity: 0.38;\n            border-color: #eee;\n            .u-fileplaceholder {\n                fill: #aaa;\n            }\n        }\n        .pointer;\n    }\n    .u-filebox {\n        .x;\n        padding: 37px;\n    }\n    .u-fileplaceholder {\n        width: 40px;\n        height: 40px;\n        fill: @primary;\n    }\n    .u-filename {\n        .db;\n        .nobreak;\n    }\n\n    // 勾选\n    .u-file-select-label {\n        position: absolute;\n        right: -15px;\n        top: -6px;\n        width: 40px;\n        height: 24px;\n        background: #13ce66;\n        text-align: center;\n        -webkit-transform: rotate(45deg);\n        transform: rotate(45deg);\n        -webkit-box-shadow: 0 0 1pc 1px rgba(0, 0, 0, 0.2);\n        box-shadow: 0 0 1pc 1px rgba(0, 0, 0, 0.2);\n\n        i {\n            font-size: 12px;\n            margin-top: 12px;\n            transform: rotate(-45deg);\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=b3a58314&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"c-editor-markdown\"},[_vm._v(\" \"+_vm._s(_vm.content)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"c-editor-markdown\">\n        {{content}}\n    </div>\n</template>\n\n<script>\nexport default {\n    name : 'markdown',\n    props:['content'],\n    data : function(){\n        return {\n            data : this.content\n        }\n    },\n    watch: {\n        data(val) {\n            this.$store.commit('editContent',val)\n        },\n    },\n    computed:{},\n    methods:{},\n    mounted:function(){},\n    components : {\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./markdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./markdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./markdown.vue?vue&type=template&id=6ed87f96&\"\nimport script from \"./markdown.vue?vue&type=script&lang=js&\"\nexport * from \"./markdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-title\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"标题\")]),_c('el-input',{attrs:{\"maxlength\":\"50\",\"minlength\":\"2\",\"show-word-limit\":\"\",\"required\":\"\",\"placeholder\":\"请填写标题\"},on:{\"change\":_vm.done},model:{value:(_vm.post_title),callback:function ($$v) {_vm.post_title=$$v},expression:\"post_title\"}}),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-publish-title\">\n        <el-divider content-position=\"left\">标题</el-divider>\n            <el-input\n                v-model=\"post_title\"\n                maxlength=\"50\"\n                minlength=\"2\"\n                show-word-limit\n                required\n                placeholder=\"请填写标题\"\n                @change=\"done\"\n            ></el-input>\n        <slot></slot>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"post_title\",\n    props: [\"title\"],\n    data: function() {\n        return {\n            post_title: this.title,\n        };\n    },\n    computed: {\n        store : function (){\n            return this.$store.state.post.post_title\n        }\n    },\n    watch : {\n        store : function (val){\n            this.post_title = val\n        }\n    },\n    methods: {\n        done: function() {\n            this.$store.commit(\"editTitle\", this.post_title);\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_title.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_title.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post_title.vue?vue&type=template&id=2e3a2e94&\"\nimport script from \"./post_title.vue?vue&type=script&lang=js&\"\nexport * from \"./post_title.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-excerpt\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"摘要信息\"},on:{\"change\":_vm.done},model:{value:(_vm.post_excerpt),callback:function ($$v) {_vm.post_excerpt=$$v},expression:\"post_excerpt\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-publish-excerpt\">\n        <el-input\n            type=\"textarea\"\n            :rows=\"2\"\n            placeholder=\"摘要信息\"\n            v-model=\"post_excerpt\"\n            @change=\"done\"\n        >\n        </el-input>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"post_excerpt\",\n    props: [\"excerpt\"],\n    data: function() {\n        return {\n            post_excerpt: this.excerpt,\n        };\n    },\n    computed: {\n        store: function() {\n            return this.$store.state.post.post_excerpt;\n        },\n    },\n    watch: {\n        store: function(val) {\n            this.post_excerpt = val;\n        },\n    },\n    methods: {\n        done: function() {\n            this.$store.commit(\"editExcerpt\", this.post_excerpt);\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n.m-publish-excerpt {\n    .mt(10px);\n\n    textarea {\n        font-family: inherit;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_excerpt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_excerpt.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post_excerpt.vue?vue&type=template&id=0587def5&\"\nimport script from \"./post_excerpt.vue?vue&type=script&lang=js&\"\nexport * from \"./post_excerpt.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post_excerpt.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-tag\"},[_vm._l((_vm.dynamicTags),function(tag){return _c('el-tag',{key:tag,attrs:{\"closable\":\"\",\"disable-transitions\":false,\"effect\":\"plain\"},on:{\"close\":function($event){return _vm.handleClose(tag)}}},[_vm._v(\" \"+_vm._s(tag)+\" \")])}),(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":_vm.handleInputConfirm},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=$$v},expression:\"inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showInput}},[_vm._v(\"+ 标签\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-publish-tag\">\n        <el-tag\n            :key=\"tag\"\n            v-for=\"tag in dynamicTags\"\n            closable\n            :disable-transitions=\"false\"\n            @close=\"handleClose(tag)\"\n            effect=\"plain\"\n        >\n            {{ tag }}\n        </el-tag>\n        <el-input\n            class=\"input-new-tag\"\n            v-if=\"inputVisible\"\n            v-model=\"inputValue\"\n            ref=\"saveTagInput\"\n            size=\"small\"\n            @keyup.enter.native=\"handleInputConfirm\"\n            @blur=\"handleInputConfirm\"\n        >\n        </el-input>\n        <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\"\n            >+ 标签</el-button\n        >\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"post_tag\",\n    props: ['tags'],\n    data: function() {\n        return {\n            dynamicTags: this.tags,\n            inputVisible: false,\n            inputValue: \"\",\n        };\n    },\n    computed: {},\n    methods: {\n        handleClose(tag) {\n            this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n        },\n\n        showInput() {\n            this.inputVisible = true;\n            this.$nextTick((_) => {\n                this.$refs.saveTagInput.$refs.input.focus();\n            });\n        },\n\n        handleInputConfirm() {\n            let inputValue = this.inputValue;\n            if (inputValue) {\n                this.dynamicTags.push(inputValue);\n            }\n            this.inputVisible = false;\n            this.inputValue = \"\";\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n.m-dashboard-publish-tag {\n    .el-tag{\n        margin-right: 10px;\n    }\n    .button-new-tag {\n        height: 32px;\n        line-height: 30px;\n        padding-top: 0;\n        padding-bottom: 0;\n    }\n    .input-new-tag {\n        width: 90px;\n        margin-right: 10px;\n        vertical-align: bottom;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_tag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post_tag.vue?vue&type=template&id=c6a9e262&\"\nimport script from \"./post_tag.vue?vue&type=script&lang=js&\"\nexport * from \"./post_tag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post_tag.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-notify\"},[_c('el-switch',{attrs:{\"active-color\":\"#0366d6\",\"inactive-color\":\"#999\",\"active-text\":\"通知作品订阅用户\",\"disabled\":\"\"},model:{value:(_vm.notify.feedEnable),callback:function ($$v) {_vm.$set(_vm.notify, \"feedEnable\", $$v)},expression:\"notify.feedEnable\"}}),_c('el-switch',{attrs:{\"active-color\":\"#0366d6\",\"inactive-color\":\"#999\",\"active-text\":\"通知粉丝\",\"disabled\":\"\"},model:{value:(_vm.notify.followEnable),callback:function ($$v) {_vm.$set(_vm.notify, \"followEnable\", $$v)},expression:\"notify.followEnable\"}}),_c('el-switch',{attrs:{\"active-color\":\"#0366d6\",\"inactive-color\":\"#999\",\"active-text\":\"同步至腾讯文档\",\"disabled\":\"\"},model:{value:(_vm.notify.tencentEnable),callback:function ($$v) {_vm.$set(_vm.notify, \"tencentEnable\", $$v)},expression:\"notify.tencentEnable\"}}),_c('el-switch',{attrs:{\"active-color\":\"#0366d6\",\"inactive-color\":\"#999\",\"active-text\":\"同步至微博头条文章\",\"disabled\":\"\"},model:{value:(_vm.notify.weiboEnable),callback:function ($$v) {_vm.$set(_vm.notify, \"weiboEnable\", $$v)},expression:\"notify.weiboEnable\"}}),_c('el-switch',{attrs:{\"active-color\":\"#0366d6\",\"inactive-color\":\"#999\",\"active-text\":\"同步至推栏\",\"disabled\":\"\"},model:{value:(_vm.notify.tuilanEnable),callback:function ($$v) {_vm.$set(_vm.notify, \"tuilanEnable\", $$v)},expression:\"notify.tuilanEnable\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-publish-notify\">\n        <el-switch\n            v-model=\"notify.feedEnable\"\n            active-color=\"#0366d6\"\n            inactive-color=\"#999\"\n            active-text=\"通知作品订阅用户\"\n            disabled\n        >\n        </el-switch>\n        <el-switch\n            v-model=\"notify.followEnable\"\n            active-color=\"#0366d6\"\n            inactive-color=\"#999\"\n            active-text=\"通知粉丝\"\n            disabled\n        >\n        </el-switch>\n        <el-switch\n            v-model=\"notify.tencentEnable\"\n            active-color=\"#0366d6\"\n            inactive-color=\"#999\"\n            active-text=\"同步至腾讯文档\"\n            disabled\n        >\n        </el-switch>\n        <el-switch\n            v-model=\"notify.weiboEnable\"\n            active-color=\"#0366d6\"\n            inactive-color=\"#999\"\n            active-text=\"同步至微博头条文章\"\n            disabled\n        >\n        </el-switch>\n        <el-switch\n            v-model=\"notify.tuilanEnable\"\n            active-color=\"#0366d6\"\n            inactive-color=\"#999\"\n            active-text=\"同步至推栏\"\n            disabled\n        >\n        </el-switch>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"post_notify\",\n    props: ['notify'],\n    data: function() {\n        return {\n            post_notify : this.notify\n        };\n    },\n    computed: {},\n    methods: {},\n    mounted: function() {},\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n.m-publish-notify {\n    .el-switch {\n        .mr(40px);\n    }\n}\n@media screen and (max-width:@phone){\n    .m-publish-notify{\n        div{\n            .mb(10px);\n            .db;\n            .mr(0) !important;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_notify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_notify.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post_notify.vue?vue&type=template&id=11e7e2ff&\"\nimport script from \"./post_notify.vue?vue&type=script&lang=js&\"\nexport * from \"./post_notify.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post_notify.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-banner\"},[_c('el-alert',{staticClass:\"u-tip\",attrs:{\"title\":\"图片尺寸180*100像素，非必选，部分栏目不会展示海报，分享功能将使用该图作为预览图\",\"type\":\"info\",\"show-icon\":\"\"}}),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.url,\"show-file-list\":false,\"on-success\":_vm.done,\"on-error\":_vm.fail,\"with-credentials\":\"\",\"accept\":\"image/jpg,image/jpeg,image/gif,image/png,image/bmp\"}},[(_vm.post_banner)?_c('img',{attrs:{\"src\":_vm._f(\"showBanner\")(_vm.post_banner)}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('el-button',{staticClass:\"u-remove\",attrs:{\"type\":\"info\",\"size\":\"mini\",\"icon\":\"el-icon-circle-close\"},on:{\"click\":_vm.clearBanner}},[_vm._v(\"移除海报\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-publish-banner\">\n        <el-alert class=\"u-tip\" title=\"图片尺寸180*100像素，非必选，部分栏目不会展示海报，分享功能将使用该图作为预览图\" type=\"info\" show-icon> </el-alert>\n        <el-upload\n            class=\"avatar-uploader\"\n            :action=\"url\"\n            :show-file-list=\"false\"\n            :on-success=\"done\"\n            :on-error=\"fail\"\n            with-credentials\n            accept=\"image/jpg,image/jpeg,image/gif,image/png,image/bmp\"\n        >\n            <img v-if=\"post_banner\" :src=\"post_banner | showBanner\" />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n        <el-button class=\"u-remove\" type=\"info\" size=\"mini\" icon=\"el-icon-circle-close\" @click=\"clearBanner\">移除海报</el-button>\n    </div>\n</template>\n\n<script>\nimport { __server } from \"@jx3box/jx3box-common/js/jx3box.json\";\nimport { showMinibanner } from \"@jx3box/jx3box-common/js/utils\";\nconst API = __server + \"upload\";\n// const API = \"http://localhost:5160/\" + \"publish/upload\";\n\nexport default {\n    name: \"post_banner\",\n    props: [\"banner\"],\n    data() {\n        return {\n            post_banner: this.banner,\n            url: API,\n        };\n    },\n    methods: {\n        done(res, file) {\n            this.post_banner = res.data.list[0];\n            this.$store.commit(\"editBanner\", this.post_banner);\n        },\n        fail(err, file, fileList) {\n            try {\n                let response = JSON.parse(err.message);\n                this.$message.error(`[${response.code}]${response.msg}`);\n            } catch {\n                this.$message.error(\"网络请求异常\");\n            }\n        },\n        clearBanner : function (){\n            this.post_banner = ''\n            this.$store.commit(\"editBanner\", this.post_banner);\n        }\n    },\n    filters : {\n        showBanner : function (val){\n            return showMinibanner(val)\n        }\n    }\n};\n</script>\n\n<style lang=\"less\">\n.m-publish-banner {\n    .u-tip{\n        padding:5px 15px;\n    }\n    img {\n        max-width: 180px;\n    }\n    .avatar-uploader{\n        .mt(10px);\n    }\n    .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n        border-color: #409eff;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 180px;\n        height: 100px;\n        line-height: 100px;\n        text-align: center;\n    }\n    .u-remove{\n        background-color: #c2c2c2;\n        border-color:#c2c2c2;\n        &:hover{\n            background-color: #fc3c3c;\n            border-color:#fc3c3c;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_banner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_banner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post_banner.vue?vue&type=template&id=37da0aa0&\"\nimport script from \"./post_banner.vue?vue&type=script&lang=js&\"\nexport * from \"./post_banner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post_banner.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const localforage = require(\"localforage\");\nclass IDB {\n\n    // 初始化数据库\n    constructor(dbName,storeName) {\n\n        if(!window.indexedDB){\n            console.log('不支持IndexedDB')\n            return\n        }\n\n        this.dbName = dbName || \"jx3box\";\n        this.storeName = storeName || \"posts\"\n        console.log(\n            '%c[IDB] Use Database - ',\n            'color:#ff3399;',\n            `${this.dbName} > ${this.storeName}`,\n        )\n        this.db = localforage.createInstance({\n            name: this.dbName,\n            storeName : this.storeName,\n            driver : localforage.INDEXEDDB\n        });\n        return this.db\n    }\n}\n\nexport default IDB\n\n// const DB = new IDB();\n// DB.ready().then(() => {\n//     DB.setItem('key','val')\n// })","import IDB from \"@jx3box/jx3box-common/js/idb\";\nconst _ = require(\"lodash\");\nconst DB = new IDB();\nconst INTERVAL = 5000; //至少5秒才触发一次\n\nfunction savePost(name, data) {\n    DB.ready().then(() => {\n        DB.setItem(name, data);\n    });\n}\n\nconst autoSavePost = _.throttle(savePost, INTERVAL);\n\nexport { DB , savePost, autoSavePost };\n","<template>\n    <div class=\"m-publish-box\">\n        <!-- 头部 -->\n        <pubheader :name=\"name\" :localDraft=\"localDraft\"\n            ><slot name=\"header\"></slot\n        ></pubheader>\n\n        <el-form label-position=\"left\" label-width=\"80px\">\n            <!-- 标题 -->\n            <post_title :title=\"post.post_title\"\n                ><slot name=\"title\"></slot\n            ></post_title>\n\n            <!-- 栏目特定字段 -->\n            <div class=\"m-publish-info\" v-if=\"infoEnable\">\n                <el-divider content-position=\"left\">信息</el-divider>\n                <slot></slot>\n            </div>\n\n            <!-- 正文之前 -->\n            <div class=\"m-publish-prepend\" v-show=\"contentEnable\">\n                <el-divider content-position=\"left\">正文</el-divider>\n                <slot name=\"prepend\"></slot>\n            </div>\n\n            <!-- 正文区域 -->\n            <div class=\"m-publish-content\" v-show=\"contentEnable\">\n                <Tinymce\n                    v-model=\"post.post_content\"\n                    :attachmentEnable=\"true\"\n                    :resourceEnable=\"true\"\n                    v-show=\"mode == 'tinymce'\"\n                    @update=\"updateContent\"\n                />\n            </div>\n\n            <!-- 正文之后 -->\n            <div class=\"m-publish-append\" v-if=\"excerptEnable\">\n                <el-divider content-position=\"left\">附加</el-divider>\n                <post_tag :tags=\"post.post_tags\" v-if=\"tagEnable\"></post_tag>\n                <post_excerpt :excerpt=\"post.post_excerpt\"></post_excerpt>\n                <slot name=\"append\"></slot>\n            </div>\n\n            <!-- 扩展功能 -->\n            <div class=\"m-publish-extend\" v-if=\"notifyEnable\">\n                <el-divider content-position=\"left\">扩展</el-divider>\n                <post_notify :notify=\"extend\" />\n                <slot name=\"extend\"></slot>\n            </div>\n\n            <!-- 海报 -->\n            <div class=\"m-publish-admin\" v-if=\"bannerEnable\">\n                <el-divider content-position=\"left\">海报</el-divider>\n                <post_banner :banner=\"post.post_banner\" />\n            </div>\n\n            <!-- 按钮 -->\n            <div class=\"m-publish-buttons\">\n                <el-button\n                    type=\"primary\"\n                    @click=\"publish\"\n                    :disabled=\"processing\"\n                    >{{ publish_text || \"发 &nbsp;&nbsp; 布\" }}</el-button\n                >\n                <el-button type=\"plain\" @click=\"draft\" :disabled=\"processing\">{{\n                    draft_text || \"保存为草稿\"\n                }}</el-button>\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport pubheader from \"./pubheader.vue\";\nimport upload from \"./upload.vue\";\nimport Tinymce from \"@jx3box/jx3box-editor/src/Tinymce\";\n// import tinymce from \"./tinymce.vue\";\nimport markdown from \"./markdown.vue\";\nimport post_title from \"./post_title.vue\";\nimport post_excerpt from \"./post_excerpt.vue\";\nimport post_tag from \"./post_tag.vue\";\nimport post_notify from \"./post_notify.vue\";\nimport post_banner from \"./post_banner.vue\";\nimport { autoSavePost } from \"@/utils/autoSave\";\nimport User from \"@jx3box/jx3box-common/js/user\";\n\nexport default {\n    name: \"boilerplate\",\n    props: [\n        \"name\",\n        \"type\",\n        \"post\",\n        \"meta\",\n        \"extend\",\n\n        \"localDraft\",\n        \"infoEnable\",\n        \"contentEnable\",\n        \"markdownEnable\",\n        \"excerptEnable\",\n        \"tagEnable\",\n        \"notifyEnable\",\n        \"bannerEnable\",\n\n        \"publish_text\",\n        \"draft_text\",\n    ],\n    data: function() {\n        return {\n            mode: this.post.post_mode || \"tinymce\",\n            draft_key: \"\",\n            isAdmin: User.getInfo().group > 30,\n            \n        };\n    },\n    computed: {\n        processing:function (){\n            return this.$store.state.processing\n        }\n    },\n    watch: {\n        // 修改本地字段时\n        \"post.post_meta\": {\n            handler: function(val) {\n                this.$store.commit(\"editPostMeta\", val);\n            },\n            deep: true,\n        },\n        meta: {\n            handler: function(val) {\n                this.$store.commit(\"editMeta\", val);\n            },\n            deep: true,\n        },\n        // 编辑模式切换\n        mode: function(val) {\n            this.$store.commit(\"changeMode\", val);\n        },\n    },\n    methods: {\n        publish: function() {\n            this.$store.commit(\"changeStatus\", \"publish\");\n            this.$emit(\"publish\");\n            this.$store.commit('startProcess')\n        },\n        draft: function() {\n            this.$store.commit(\"changeStatus\", \"draft\");\n            this.$emit(\"draft\");\n            this.$store.commit('startProcess')\n        },\n        updateContent: function(val) {\n            this.$store.commit(\"editContent\", val);\n        },\n    },\n    mounted: function() {\n        // this.draft_key = new Date().toUTCString();\n        this.$store.commit(\"changeType\", this.type);\n        this.$store.commit(\"changeSubtype\", this.post.post_subtype);\n    },\n    components: {\n        pubheader,\n        // upload,\n        // tinymce,\n        // markdown,\n        Tinymce,\n        post_title,\n        post_tag,\n        post_excerpt,\n        post_notify,\n        post_banner,\n    },\n};\n</script>\n\n<style lang=\"less\">\n.m-publish-box {\n    padding: 30px 40px;\n    .el-divider__text {\n        color: #888;\n        font-weight: 300;\n    }\n}\n@media screen and (max-width: @ipad) {\n    .m-publish-box {\n        padding: 20px;\n    }\n}\n\n@media screen and (max-width: @phone) {\n    .el-form-item__label {\n        float: none;\n    }\n    .el-form-item__content {\n        margin-left: 0 !important;\n    }\n}\n\n.m-publish-prepend {\n    .mb(10px);\n    .u-editor-mode {\n        .clearfix;\n        .fr;\n    }\n    .clearfix;\n}\n@media screen and (max-width: @ip5) {\n    .m-publish-prepend {\n        .u-editor-mode {\n            float: none;\n            .mb(10px);\n        }\n    }\n}\n\n.m-publish-buttons {\n    padding: 40px 0;\n    .x;\n\n    button {\n        .w(120px);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./boilerplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./boilerplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./boilerplate.vue?vue&type=template&id=00799fcd&\"\nimport script from \"./boilerplate.vue?vue&type=script&lang=js&\"\nexport * from \"./boilerplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./boilerplate.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_banner.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post_banner.vue?vue&type=style&index=0&lang=less&\"","'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n","function getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {\n        return;\n    }\n}\n\nvar idb = getIDB();\nexport default idb;\n","import idb from './idb';\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb || !idb.open) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari =\n            typeof openDatabase !== 'undefined' &&\n            /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) &&\n            !/Chrome/.test(navigator.userAgent) &&\n            !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch =\n            typeof fetch === 'function' &&\n            fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support\n        // (see: https://github.com/pouchdb/pouchdb/issues/5572).\n        // Safari 10.1 shipped with fetch, we can use that to detect it.\n        // Note: this creates issues with `window.fetch` polyfills and\n        // overrides; see:\n        // https://github.com/localForage/localForage/issues/856\n        return (\n            (!isSafari || hasFetch) &&\n            typeof indexedDB !== 'undefined' &&\n            // some outdated implementations of IDB that appear on Samsung\n            // and HTC Android devices <4.4 are missing IDBKeyRange\n            // See: https://github.com/mozilla/localForage/issues/128\n            // See: https://github.com/mozilla/localForage/issues/272\n            typeof IDBKeyRange !== 'undefined'\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\nexport default isIndexedDBValid;\n","// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder =\n            typeof BlobBuilder !== 'undefined'\n                ? BlobBuilder\n                : typeof MSBlobBuilder !== 'undefined'\n                  ? MSBlobBuilder\n                  : typeof MozBlobBuilder !== 'undefined'\n                    ? MozBlobBuilder\n                    : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\nexport default createBlob;\n","// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    require('lie/polyfill');\n}\nexport default Promise;\n","function executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(\n            function(result) {\n                callback(null, result);\n            },\n            function(error) {\n                callback(error);\n            }\n        );\n    }\n}\n\nexport default executeCallback;\n","function executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise.catch(errorCallback);\n    }\n}\n\nexport default executeTwoCallbacks;\n","export default function normalizeKey(key) {\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(`${key} used as a key, but it is not a string.`);\n        key = String(key);\n    }\n\n    return key;\n}\n","export default function getCallback() {\n    if (\n        arguments.length &&\n        typeof arguments[arguments.length - 1] === 'function'\n    ) {\n        return arguments[arguments.length - 1];\n    }\n}\n","import isIndexedDBValid from '../utils/isIndexedDBValid';\nimport createBlob from '../utils/createBlob';\nimport idb from '../utils/idb';\nimport Promise from '../utils/promise';\nimport executeCallback from '../utils/executeCallback';\nimport executeTwoCallbacks from '../utils/executeTwoCallbacks';\nimport normalizeKey from '../utils/normalizeKey';\nimport getCallback from '../utils/getCallback';\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nconst DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nlet supportsBlobs;\nconst dbContexts = {};\nconst toString = Object.prototype.toString;\n\n// Transaction Modes\nconst READ_ONLY = 'readonly';\nconst READ_WRITE = 'readwrite';\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise(function(resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function(e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function() {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(\n                matchedEdge ||\n                    !matchedChrome ||\n                    parseInt(matchedChrome[1], 10) >= 43\n            );\n        };\n    }).catch(function() {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function(value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise(function(resolve, reject) {\n        deferredOperation.resolve = resolve;\n        deferredOperation.reject = reject;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function() {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n        return deferredOperation.promise;\n    }\n}\n\nfunction _rejectReadiness(dbInfo, err) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Reject its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.reject(err);\n        return deferredOperation.promise;\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise(function(resolve, reject) {\n        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function(e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn(\n                            'The database \"' +\n                                dbInfo.name +\n                                '\"' +\n                                ' has been upgraded from version ' +\n                                e.oldVersion +\n                                ' to version ' +\n                                e.newVersion +\n                                ', but the storage \"' +\n                                dbInfo.storeName +\n                                '\" already exists.'\n                        );\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function(e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function() {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn(\n                'The database \"' +\n                    dbInfo.name +\n                    '\"' +\n                    \" can't be downgraded from version \" +\n                    dbInfo.db.version +\n                    ' to version ' +\n                    dbInfo.version +\n                    '.'\n            );\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise(function(resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function(e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function() {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Try to establish a new db connection to replace the\n// current one which is broken (i.e. experiencing\n// InvalidStateError while creating a transaction).\nfunction _tryReconnect(dbInfo) {\n    _deferReadiness(dbInfo);\n\n    var dbContext = dbContexts[dbInfo.name];\n    var forages = dbContext.forages;\n\n    for (var i = 0; i < forages.length; i++) {\n        const forage = forages[i];\n        if (forage._dbInfo.db) {\n            forage._dbInfo.db.close();\n            forage._dbInfo.db = null;\n        }\n    }\n    dbInfo.db = null;\n\n    return _getOriginalConnection(dbInfo)\n        .then(db => {\n            dbInfo.db = db;\n            if (_isUpgradeNeeded(dbInfo)) {\n                // Reopen the database for upgrading.\n                return _getUpgradedConnection(dbInfo);\n            }\n            return db;\n        })\n        .then(db => {\n            // store the latest db reference\n            // in case the db was upgraded\n            dbInfo.db = dbContext.db = db;\n            for (var i = 0; i < forages.length; i++) {\n                forages[i]._dbInfo.db = db;\n            }\n        })\n        .catch(err => {\n            _rejectReadiness(dbInfo, err);\n            throw err;\n        });\n}\n\n// FF doesn't like Promises (micro-tasks) and IDDB store operations,\n// so we have to do it with callbacks\nfunction createTransaction(dbInfo, mode, callback, retries) {\n    if (retries === undefined) {\n        retries = 1;\n    }\n\n    try {\n        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);\n        callback(null, tx);\n    } catch (err) {\n        if (\n            retries > 0 &&\n            (!dbInfo.db ||\n                err.name === 'InvalidStateError' ||\n                err.name === 'NotFoundError')\n        ) {\n            return Promise.resolve()\n                .then(() => {\n                    if (\n                        !dbInfo.db ||\n                        (err.name === 'NotFoundError' &&\n                            !dbInfo.db.objectStoreNames.contains(\n                                dbInfo.storeName\n                            ) &&\n                            dbInfo.version <= dbInfo.db.version)\n                    ) {\n                        // increase the db version, to create the new ObjectStore\n                        if (dbInfo.db) {\n                            dbInfo.version = dbInfo.db.version + 1;\n                        }\n                        // Reopen the database for upgrading.\n                        return _getUpgradedConnection(dbInfo);\n                    }\n                })\n                .then(() => {\n                    return _tryReconnect(dbInfo).then(function() {\n                        createTransaction(dbInfo, mode, callback, retries - 1);\n                    });\n                })\n                .catch(callback);\n        }\n\n        callback(err);\n    }\n}\n\nfunction createDbContext() {\n    return {\n        // Running localForages sharing a database.\n        forages: [],\n        // Shared database.\n        db: null,\n        // Database readiness (promise).\n        dbReady: null,\n        // Deferred operations on the database.\n        deferredOperations: []\n    };\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = createDbContext();\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady().catch(ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise.all(initPromises)\n        .then(function() {\n            dbInfo.db = dbContext.db;\n            // Get the connection or open a new one without upgrade.\n            return _getOriginalConnection(dbInfo);\n        })\n        .then(function(db) {\n            dbInfo.db = db;\n            if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n                // Reopen the database for upgrading.\n                return _getUpgradedConnection(dbInfo);\n            }\n            return db;\n        })\n        .then(function(db) {\n            dbInfo.db = dbContext.db = db;\n            self._dbInfo = dbInfo;\n            // Share the final connection amongst related localForages.\n            for (var k = 0; k < forages.length; k++) {\n                var forage = forages[k];\n                if (forage !== self) {\n                    // Self is already up-to-date.\n                    forage._dbInfo.db = dbInfo.db;\n                    forage._dbInfo.version = dbInfo.version;\n                }\n            }\n        });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_ONLY, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var req = store.get(key);\n\n                        req.onsuccess = function() {\n                            var value = req.result;\n                            if (value === undefined) {\n                                value = null;\n                            }\n                            if (_isEncodedBlob(value)) {\n                                value = _decodeBlob(value);\n                            }\n                            resolve(value);\n                        };\n\n                        req.onerror = function() {\n                            reject(req.error);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_ONLY, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var req = store.openCursor();\n                        var iterationNumber = 1;\n\n                        req.onsuccess = function() {\n                            var cursor = req.result;\n\n                            if (cursor) {\n                                var value = cursor.value;\n                                if (_isEncodedBlob(value)) {\n                                    value = _decodeBlob(value);\n                                }\n                                var result = iterator(\n                                    value,\n                                    cursor.key,\n                                    iterationNumber++\n                                );\n\n                                // when the iterator callback returns any\n                                // (non-`undefined`) value, then we stop\n                                // the iteration immediately\n                                if (result !== void 0) {\n                                    resolve(result);\n                                } else {\n                                    cursor.continue();\n                                }\n                            } else {\n                                resolve();\n                            }\n                        };\n\n                        req.onerror = function() {\n                            reject(req.error);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        var dbInfo;\n        self\n            .ready()\n            .then(function() {\n                dbInfo = self._dbInfo;\n                if (toString.call(value) === '[object Blob]') {\n                    return _checkBlobSupport(dbInfo.db).then(function(\n                        blobSupport\n                    ) {\n                        if (blobSupport) {\n                            return value;\n                        }\n                        return _encodeBlob(value);\n                    });\n                }\n                return value;\n            })\n            .then(function(value) {\n                createTransaction(self._dbInfo, READ_WRITE, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n\n                        // The reason we don't _save_ null is because IE 10 does\n                        // not support saving the `null` type in IndexedDB. How\n                        // ironic, given the bug below!\n                        // See: https://github.com/mozilla/localForage/issues/161\n                        if (value === null) {\n                            value = undefined;\n                        }\n\n                        var req = store.put(value, key);\n\n                        transaction.oncomplete = function() {\n                            // Cast to undefined so the value passed to\n                            // callback/promise is the same as what one would get out\n                            // of `getItem()` later. This leads to some weirdness\n                            // (setItem('foo', undefined) will return `null`), but\n                            // it's not my fault localStorage is our baseline and that\n                            // it's weird.\n                            if (value === undefined) {\n                                value = null;\n                            }\n\n                            resolve(value);\n                        };\n                        transaction.onabort = transaction.onerror = function() {\n                            var err = req.error\n                                ? req.error\n                                : req.transaction.error;\n                            reject(err);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_WRITE, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        // We use a Grunt task to make this safe for IE and some\n                        // versions of Android (including those used by Cordova).\n                        // Normally IE won't like `.delete()` and will insist on\n                        // using `['delete']()`, but we have a build step that\n                        // fixes this for us now.\n                        var req = store.delete(key);\n                        transaction.oncomplete = function() {\n                            resolve();\n                        };\n\n                        transaction.onerror = function() {\n                            reject(req.error);\n                        };\n\n                        // The request will be also be aborted if we've exceeded our storage\n                        // space.\n                        transaction.onabort = function() {\n                            var err = req.error\n                                ? req.error\n                                : req.transaction.error;\n                            reject(err);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_WRITE, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var req = store.clear();\n\n                        transaction.oncomplete = function() {\n                            resolve();\n                        };\n\n                        transaction.onabort = transaction.onerror = function() {\n                            var err = req.error\n                                ? req.error\n                                : req.transaction.error;\n                            reject(err);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_ONLY, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var req = store.count();\n\n                        req.onsuccess = function() {\n                            resolve(req.result);\n                        };\n\n                        req.onerror = function() {\n                            reject(req.error);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_ONLY, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var advanced = false;\n                        var req = store.openKeyCursor();\n\n                        req.onsuccess = function() {\n                            var cursor = req.result;\n                            if (!cursor) {\n                                // this means there weren't enough keys\n                                resolve(null);\n\n                                return;\n                            }\n\n                            if (n === 0) {\n                                // We have the first key, return it if that's what they\n                                // wanted.\n                                resolve(cursor.key);\n                            } else {\n                                if (!advanced) {\n                                    // Otherwise, ask the cursor to skip ahead n\n                                    // records.\n                                    advanced = true;\n                                    cursor.advance(n);\n                                } else {\n                                    // When we get here, we've got the nth key.\n                                    resolve(cursor.key);\n                                }\n                            }\n                        };\n\n                        req.onerror = function() {\n                            reject(req.error);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                createTransaction(self._dbInfo, READ_ONLY, function(\n                    err,\n                    transaction\n                ) {\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    try {\n                        var store = transaction.objectStore(\n                            self._dbInfo.storeName\n                        );\n                        var req = store.openKeyCursor();\n                        var keys = [];\n\n                        req.onsuccess = function() {\n                            var cursor = req.result;\n\n                            if (!cursor) {\n                                resolve(keys);\n                                return;\n                            }\n\n                            keys.push(cursor.key);\n                            cursor.continue();\n                        };\n\n                        req.onerror = function() {\n                            reject(req.error);\n                        };\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = (typeof options !== 'function' && options) || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise.reject('Invalid arguments');\n    } else {\n        const isCurrentDb =\n            options.name === currentConfig.name && self._dbInfo.db;\n\n        const dbPromise = isCurrentDb\n            ? Promise.resolve(self._dbInfo.db)\n            : _getOriginalConnection(options).then(db => {\n                  const dbContext = dbContexts[options.name];\n                  const forages = dbContext.forages;\n                  dbContext.db = db;\n                  for (var i = 0; i < forages.length; i++) {\n                      forages[i]._dbInfo.db = db;\n                  }\n                  return db;\n              });\n\n        if (!options.storeName) {\n            promise = dbPromise.then(db => {\n                _deferReadiness(options);\n\n                const dbContext = dbContexts[options.name];\n                const forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    const forage = forages[i];\n                    forage._dbInfo.db = null;\n                }\n\n                const dropDBPromise = new Promise((resolve, reject) => {\n                    var req = idb.deleteDatabase(options.name);\n\n                    req.onerror = req.onblocked = err => {\n                        const db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        reject(err);\n                    };\n\n                    req.onsuccess = () => {\n                        const db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        resolve(db);\n                    };\n                });\n\n                return dropDBPromise\n                    .then(db => {\n                        dbContext.db = db;\n                        for (var i = 0; i < forages.length; i++) {\n                            const forage = forages[i];\n                            _advanceReadiness(forage._dbInfo);\n                        }\n                    })\n                    .catch(err => {\n                        (\n                            _rejectReadiness(options, err) || Promise.resolve()\n                        ).catch(() => {});\n                        throw err;\n                    });\n            });\n        } else {\n            promise = dbPromise.then(db => {\n                if (!db.objectStoreNames.contains(options.storeName)) {\n                    return;\n                }\n\n                const newVersion = db.version + 1;\n\n                _deferReadiness(options);\n\n                const dbContext = dbContexts[options.name];\n                const forages = dbContext.forages;\n\n                db.close();\n                for (let i = 0; i < forages.length; i++) {\n                    const forage = forages[i];\n                    forage._dbInfo.db = null;\n                    forage._dbInfo.version = newVersion;\n                }\n\n                const dropObjectPromise = new Promise((resolve, reject) => {\n                    const req = idb.open(options.name, newVersion);\n\n                    req.onerror = err => {\n                        const db = req.result;\n                        db.close();\n                        reject(err);\n                    };\n\n                    req.onupgradeneeded = () => {\n                        var db = req.result;\n                        db.deleteObjectStore(options.storeName);\n                    };\n\n                    req.onsuccess = () => {\n                        const db = req.result;\n                        db.close();\n                        resolve(db);\n                    };\n                });\n\n                return dropObjectPromise\n                    .then(db => {\n                        dbContext.db = db;\n                        for (let j = 0; j < forages.length; j++) {\n                            const forage = forages[j];\n                            forage._dbInfo.db = db;\n                            _advanceReadiness(forage._dbInfo);\n                        }\n                    })\n                    .catch(err => {\n                        (\n                            _rejectReadiness(options, err) || Promise.resolve()\n                        ).catch(() => {});\n                        throw err;\n                    });\n            });\n        }\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    _support: isIndexedDBValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\nexport default asyncStorage;\n","function isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\nexport default isWebSQLValid;\n","/* eslint-disable no-bitwise */\nimport createBlob from './createBlob';\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH =\n    SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64String +=\n            BASE_CHARS[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String =\n            base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (\n        value &&\n        (valueType === '[object ArrayBuffer]' ||\n            (value.buffer &&\n                toString.call(value.buffer) === '[object ArrayBuffer]'))\n    ) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function() {\n            // Backwards-compatible prefix for the blob type.\n            var str =\n                BLOB_TYPE_PREFIX +\n                value.type +\n                '~' +\n                bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(\n        SERIALIZED_MARKER_LENGTH,\n        TYPE_SERIALIZED_MARKER_LENGTH\n    );\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\nexport default localforageSerializer;\n","import isWebSQLValid from '../utils/isWebSQLValid';\nimport serializer from '../utils/serializer';\nimport Promise from '../utils/promise';\nimport executeCallback from '../utils/executeCallback';\nimport normalizeKey from '../utils/normalizeKey';\nimport getCallback from '../utils/getCallback';\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nfunction createDbTable(t, dbInfo, callback, errorCallback) {\n    t.executeSql(\n        `CREATE TABLE IF NOT EXISTS ${dbInfo.storeName} ` +\n            '(id INTEGER PRIMARY KEY, key unique, value)',\n        [],\n        callback,\n        errorCallback\n    );\n}\n\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] =\n                typeof options[i] !== 'string'\n                    ? options[i].toString()\n                    : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise(function(resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(\n                dbInfo.name,\n                String(dbInfo.version),\n                dbInfo.description,\n                dbInfo.size\n            );\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function(t) {\n            createDbTable(\n                t,\n                dbInfo,\n                function() {\n                    self._dbInfo = dbInfo;\n                    resolve();\n                },\n                function(t, error) {\n                    reject(error);\n                }\n            );\n        }, reject);\n    });\n\n    dbInfo.serializer = serializer;\n    return dbInfoPromise;\n}\n\nfunction tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {\n    t.executeSql(\n        sqlStatement,\n        args,\n        callback,\n        function(t, error) {\n            if (error.code === error.SYNTAX_ERR) {\n                t.executeSql(\n                    'SELECT name FROM sqlite_master ' +\n                        \"WHERE type='table' AND name = ?\",\n                    [dbInfo.storeName],\n                    function(t, results) {\n                        if (!results.rows.length) {\n                            // if the table is missing (was deleted)\n                            // re-create it table and retry\n                            createDbTable(\n                                t,\n                                dbInfo,\n                                function() {\n                                    t.executeSql(\n                                        sqlStatement,\n                                        args,\n                                        callback,\n                                        errorCallback\n                                    );\n                                },\n                                errorCallback\n                            );\n                        } else {\n                            errorCallback(t, error);\n                        }\n                    },\n                    errorCallback\n                );\n            } else {\n                errorCallback(t, error);\n            }\n        },\n        errorCallback\n    );\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `SELECT * FROM ${\n                            dbInfo.storeName\n                        } WHERE key = ? LIMIT 1`,\n                        [key],\n                        function(t, results) {\n                            var result = results.rows.length\n                                ? results.rows.item(0).value\n                                : null;\n\n                            // Check to see if this is serialized content we need to\n                            // unpack.\n                            if (result) {\n                                result = dbInfo.serializer.deserialize(result);\n                            }\n\n                            resolve(result);\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `SELECT * FROM ${dbInfo.storeName}`,\n                        [],\n                        function(t, results) {\n                            var rows = results.rows;\n                            var length = rows.length;\n\n                            for (var i = 0; i < length; i++) {\n                                var item = rows.item(i);\n                                var result = item.value;\n\n                                // Check to see if this is serialized content\n                                // we need to unpack.\n                                if (result) {\n                                    result = dbInfo.serializer.deserialize(\n                                        result\n                                    );\n                                }\n\n                                result = iterator(result, item.key, i + 1);\n\n                                // void(0) prevents problems with redefinition\n                                // of `undefined`.\n                                if (result !== void 0) {\n                                    resolve(result);\n                                    return;\n                                }\n                            }\n\n                            resolve();\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                // The localStorage API doesn't return undefined values in an\n                // \"expected\" way, so undefined is always cast to null in all\n                // drivers. See: https://github.com/mozilla/localForage/pull/42\n                if (value === undefined) {\n                    value = null;\n                }\n\n                // Save the original value to pass to the callback.\n                var originalValue = value;\n\n                var dbInfo = self._dbInfo;\n                dbInfo.serializer.serialize(value, function(value, error) {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        dbInfo.db.transaction(\n                            function(t) {\n                                tryExecuteSql(\n                                    t,\n                                    dbInfo,\n                                    `INSERT OR REPLACE INTO ${\n                                        dbInfo.storeName\n                                    } ` + '(key, value) VALUES (?, ?)',\n                                    [key, value],\n                                    function() {\n                                        resolve(originalValue);\n                                    },\n                                    function(t, error) {\n                                        reject(error);\n                                    }\n                                );\n                            },\n                            function(sqlError) {\n                                // The transaction failed; check\n                                // to see if it's a quota error.\n                                if (sqlError.code === sqlError.QUOTA_ERR) {\n                                    // We reject the callback outright for now, but\n                                    // it's worth trying to re-run the transaction.\n                                    // Even if the user accepts the prompt to use\n                                    // more storage on Safari, this error will\n                                    // be called.\n                                    //\n                                    // Try to re-run the transaction.\n                                    if (retriesLeft > 0) {\n                                        resolve(\n                                            _setItem.apply(self, [\n                                                key,\n                                                originalValue,\n                                                callback,\n                                                retriesLeft - 1\n                                            ])\n                                        );\n                                        return;\n                                    }\n                                    reject(sqlError);\n                                }\n                            }\n                        );\n                    }\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `DELETE FROM ${dbInfo.storeName} WHERE key = ?`,\n                        [key],\n                        function() {\n                            resolve();\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `DELETE FROM ${dbInfo.storeName}`,\n                        [],\n                        function() {\n                            resolve();\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    // Ahhh, SQL makes this one soooooo easy.\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `SELECT COUNT(key) as c FROM ${dbInfo.storeName}`,\n                        [],\n                        function(t, results) {\n                            var result = results.rows.item(0).c;\n                            resolve(result);\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `SELECT key FROM ${\n                            dbInfo.storeName\n                        } WHERE id = ? LIMIT 1`,\n                        [n + 1],\n                        function(t, results) {\n                            var result = results.rows.length\n                                ? results.rows.item(0).key\n                                : null;\n                            resolve(result);\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise(function(resolve, reject) {\n        self\n            .ready()\n            .then(function() {\n                var dbInfo = self._dbInfo;\n                dbInfo.db.transaction(function(t) {\n                    tryExecuteSql(\n                        t,\n                        dbInfo,\n                        `SELECT key FROM ${dbInfo.storeName}`,\n                        [],\n                        function(t, results) {\n                            var keys = [];\n\n                            for (var i = 0; i < results.rows.length; i++) {\n                                keys.push(results.rows.item(i).key);\n                            }\n\n                            resolve(keys);\n                        },\n                        function(t, error) {\n                            reject(error);\n                        }\n                    );\n                });\n            })\n            .catch(reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// https://www.w3.org/TR/webdatabase/#databases\n// > There is no way to enumerate or delete the databases available for an origin from this API.\nfunction getAllStoreNames(db) {\n    return new Promise(function(resolve, reject) {\n        db.transaction(\n            function(t) {\n                t.executeSql(\n                    'SELECT name FROM sqlite_master ' +\n                        \"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\",\n                    [],\n                    function(t, results) {\n                        var storeNames = [];\n\n                        for (var i = 0; i < results.rows.length; i++) {\n                            storeNames.push(results.rows.item(i).name);\n                        }\n\n                        resolve({\n                            db,\n                            storeNames\n                        });\n                    },\n                    function(t, error) {\n                        reject(error);\n                    }\n                );\n            },\n            function(sqlError) {\n                reject(sqlError);\n            }\n        );\n    });\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = (typeof options !== 'function' && options) || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise.reject('Invalid arguments');\n    } else {\n        promise = new Promise(function(resolve) {\n            var db;\n            if (options.name === currentConfig.name) {\n                // use the db reference of the current instance\n                db = self._dbInfo.db;\n            } else {\n                db = openDatabase(options.name, '', '', 0);\n            }\n\n            if (!options.storeName) {\n                // drop all database tables\n                resolve(getAllStoreNames(db));\n            } else {\n                resolve({\n                    db,\n                    storeNames: [options.storeName]\n                });\n            }\n        }).then(function(operationInfo) {\n            return new Promise(function(resolve, reject) {\n                operationInfo.db.transaction(\n                    function(t) {\n                        function dropTable(storeName) {\n                            return new Promise(function(resolve, reject) {\n                                t.executeSql(\n                                    `DROP TABLE IF EXISTS ${storeName}`,\n                                    [],\n                                    function() {\n                                        resolve();\n                                    },\n                                    function(t, error) {\n                                        reject(error);\n                                    }\n                                );\n                            });\n                        }\n\n                        var operations = [];\n                        for (\n                            var i = 0, len = operationInfo.storeNames.length;\n                            i < len;\n                            i++\n                        ) {\n                            operations.push(\n                                dropTable(operationInfo.storeNames[i])\n                            );\n                        }\n\n                        Promise.all(operations)\n                            .then(function() {\n                                resolve();\n                            })\n                            .catch(function(e) {\n                                reject(e);\n                            });\n                    },\n                    function(sqlError) {\n                        reject(sqlError);\n                    }\n                );\n            });\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage,\n    _support: isWebSQLValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\n\nexport default webSQLStorage;\n","function isLocalStorageValid() {\n    try {\n        return (\n            typeof localStorage !== 'undefined' &&\n            'setItem' in localStorage &&\n            // in IE8 typeof localStorage.setItem === 'object'\n            !!localStorage.setItem\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\nexport default isLocalStorageValid;\n","// If IndexedDB isn't available, we'll fall back to localStorage.\n// Note that this will have considerable performance and storage\n// side-effects (all data will be serialized on save and only data that\n// can be converted to a string via `JSON.stringify()` will be saved).\n\nimport isLocalStorageValid from '../utils/isLocalStorageValid';\nimport serializer from '../utils/serializer';\nimport Promise from '../utils/promise';\nimport executeCallback from '../utils/executeCallback';\nimport normalizeKey from '../utils/normalizeKey';\nimport getCallback from '../utils/getCallback';\n\nfunction _getKeyPrefix(options, defaultConfig) {\n    var keyPrefix = options.name + '/';\n\n    if (options.storeName !== defaultConfig.storeName) {\n        keyPrefix += options.storeName + '/';\n    }\n    return keyPrefix;\n}\n\n// Check if localStorage throws when saving an item\nfunction checkIfLocalStorageThrows() {\n    var localStorageTestKey = '_localforage_support_test';\n\n    try {\n        localStorage.setItem(localStorageTestKey, true);\n        localStorage.removeItem(localStorageTestKey);\n\n        return false;\n    } catch (e) {\n        return true;\n    }\n}\n\n// Check if localStorage is usable and allows to save an item\n// This method checks if localStorage is usable in Safari Private Browsing\n// mode, or in any other case where the available quota for localStorage\n// is 0 and there wasn't any saved items yet.\nfunction _isLocalStorageUsable() {\n    return !checkIfLocalStorageThrows() || localStorage.length > 0;\n}\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);\n\n    if (!_isLocalStorageUsable()) {\n        return Promise.reject();\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = serializer;\n\n    return Promise.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear(callback) {\n    var self = this;\n    var promise = self.ready().then(function() {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function() {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function() {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(\n                value,\n                key.substring(keyPrefixLength),\n                iterationNumber++\n            );\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function() {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n    var promise = self.ready().then(function() {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            var itemKey = localStorage.key(i);\n            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(itemKey.substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length(callback) {\n    var self = this;\n    var promise = self.keys().then(function(keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function() {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function() {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise(function(resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function(value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (\n                            e.name === 'QuotaExceededError' ||\n                            e.name === 'NS_ERROR_DOM_QUOTA_REACHED'\n                        ) {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    options = (typeof options !== 'function' && options) || {};\n    if (!options.name) {\n        var currentConfig = this.config();\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise.reject('Invalid arguments');\n    } else {\n        promise = new Promise(function(resolve) {\n            if (!options.storeName) {\n                resolve(`${options.name}/`);\n            } else {\n                resolve(_getKeyPrefix(options, self._defaultConfig));\n            }\n        }).then(function(keyPrefix) {\n            for (var i = localStorage.length - 1; i >= 0; i--) {\n                var key = localStorage.key(i);\n\n                if (key.indexOf(keyPrefix) === 0) {\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage,\n    _support: isLocalStorageValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\n\nexport default localStorageWrapper;\n","const sameValue = (x, y) =>\n    x === y ||\n    (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\n\nconst includes = (array, searchElement) => {\n    const len = array.length;\n    let i = 0;\n    while (i < len) {\n        if (sameValue(array[i], searchElement)) {\n            return true;\n        }\n        i++;\n    }\n\n    return false;\n};\n\nexport default includes;\n","const isArray =\n    Array.isArray ||\n    function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\nexport default isArray;\n","import idbDriver from './drivers/indexeddb';\nimport websqlDriver from './drivers/websql';\nimport localstorageDriver from './drivers/localstorage';\nimport serializer from './utils/serializer';\nimport Promise from './utils/promise';\nimport executeCallback from './utils/executeCallback';\nimport executeTwoCallbacks from './utils/executeTwoCallbacks';\nimport includes from './utils/includes';\nimport isArray from './utils/isArray';\n\n// Drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nconst DefinedDrivers = {};\n\nconst DriverSupport = {};\n\nconst DefaultDrivers = {\n    INDEXEDDB: idbDriver,\n    WEBSQL: websqlDriver,\n    LOCALSTORAGE: localstorageDriver\n};\n\nconst DefaultDriverOrder = [\n    DefaultDrivers.INDEXEDDB._driver,\n    DefaultDrivers.WEBSQL._driver,\n    DefaultDrivers.LOCALSTORAGE._driver\n];\n\nconst OptionalDriverMethods = ['dropInstance'];\n\nconst LibraryMethods = [\n    'clear',\n    'getItem',\n    'iterate',\n    'key',\n    'keys',\n    'length',\n    'removeItem',\n    'setItem'\n].concat(OptionalDriverMethods);\n\nconst DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function() {\n        const _args = arguments;\n        return localForageInstance.ready().then(function() {\n            return localForageInstance[libraryMethod].apply(\n                localForageInstance,\n                _args\n            );\n        });\n    };\n}\n\nfunction extend() {\n    for (let i = 1; i < arguments.length; i++) {\n        const arg = arguments[i];\n\n        if (arg) {\n            for (let key in arg) {\n                if (arg.hasOwnProperty(key)) {\n                    if (isArray(arg[key])) {\n                        arguments[0][key] = arg[key].slice();\n                    } else {\n                        arguments[0][key] = arg[key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nclass LocalForage {\n    constructor(options) {\n        for (let driverTypeKey in DefaultDrivers) {\n            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {\n                const driver = DefaultDrivers[driverTypeKey];\n                const driverName = driver._driver;\n                this[driverTypeKey] = driverName;\n\n                if (!DefinedDrivers[driverName]) {\n                    // we don't need to wait for the promise,\n                    // since the default drivers can be defined\n                    // in a blocking manner\n                    this.defineDriver(driver);\n                }\n            }\n        }\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver).catch(() => {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n    config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if (typeof options === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\n                    \"Can't call config() after localforage \" + 'has been used.'\n                );\n            }\n\n            for (let i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    }\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n    defineDriver(driverObject, callback, errorCallback) {\n        const promise = new Promise(function(resolve, reject) {\n            try {\n                const driverName = driverObject._driver;\n                const complianceError = new Error(\n                    'Custom driver not compliant; see ' +\n                        'https://mozilla.github.io/localForage/#definedriver'\n                );\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n\n                const driverMethods = LibraryMethods.concat('_initStorage');\n                for (let i = 0, len = driverMethods.length; i < len; i++) {\n                    const driverMethodName = driverMethods[i];\n\n                    // when the property is there,\n                    // it should be a method even when optional\n                    const isRequired = !includes(\n                        OptionalDriverMethods,\n                        driverMethodName\n                    );\n                    if (\n                        (isRequired || driverObject[driverMethodName]) &&\n                        typeof driverObject[driverMethodName] !== 'function'\n                    ) {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                const configureMissingMethods = function() {\n                    const methodNotImplementedFactory = function(methodName) {\n                        return function() {\n                            const error = new Error(\n                                `Method ${methodName} is not implemented by the current driver`\n                            );\n                            const promise = Promise.reject(error);\n                            executeCallback(\n                                promise,\n                                arguments[arguments.length - 1]\n                            );\n                            return promise;\n                        };\n                    };\n\n                    for (\n                        let i = 0, len = OptionalDriverMethods.length;\n                        i < len;\n                        i++\n                    ) {\n                        const optionalDriverMethod = OptionalDriverMethods[i];\n                        if (!driverObject[optionalDriverMethod]) {\n                            driverObject[\n                                optionalDriverMethod\n                            ] = methodNotImplementedFactory(\n                                optionalDriverMethod\n                            );\n                        }\n                    }\n                };\n\n                configureMissingMethods();\n\n                const setDriverSupport = function(support) {\n                    if (DefinedDrivers[driverName]) {\n                        console.info(\n                            `Redefining LocalForage driver: ${driverName}`\n                        );\n                    }\n                    DefinedDrivers[driverName] = driverObject;\n                    DriverSupport[driverName] = support;\n                    // don't use a then, so that we can define\n                    // drivers that have simple _support methods\n                    // in a blocking manner\n                    resolve();\n                };\n\n                if ('_support' in driverObject) {\n                    if (\n                        driverObject._support &&\n                        typeof driverObject._support === 'function'\n                    ) {\n                        driverObject._support().then(setDriverSupport, reject);\n                    } else {\n                        setDriverSupport(!!driverObject._support);\n                    }\n                } else {\n                    setDriverSupport(true);\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    }\n\n    driver() {\n        return this._driver || null;\n    }\n\n    getDriver(driverName, callback, errorCallback) {\n        const getDriverPromise = DefinedDrivers[driverName]\n            ? Promise.resolve(DefinedDrivers[driverName])\n            : Promise.reject(new Error('Driver not found.'));\n\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    }\n\n    getSerializer(callback) {\n        const serializerPromise = Promise.resolve(serializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    }\n\n    ready(callback) {\n        const self = this;\n\n        const promise = self._driverSet.then(() => {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    }\n\n    setDriver(drivers, callback, errorCallback) {\n        const self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        const supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function() {\n                let currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        let driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self\n                            .getDriver(driverName)\n                            .then(extendSelfWithDriver)\n                            .catch(driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    const error = new Error(\n                        'No available storage method found.'\n                    );\n                    self._driverSet = Promise.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        const oldDriverSetDone =\n            this._driverSet !== null\n                ? this._driverSet.catch(() => Promise.resolve())\n                : Promise.resolve();\n\n        this._driverSet = oldDriverSetDone\n            .then(() => {\n                const driverName = supportedDrivers[0];\n                self._dbInfo = null;\n                self._ready = null;\n\n                return self.getDriver(driverName).then(driver => {\n                    self._driver = driver._driver;\n                    setDriverToConfig();\n                    self._wrapLibraryMethodsWithReady();\n                    self._initDriver = initDriver(supportedDrivers);\n                });\n            })\n            .catch(() => {\n                setDriverToConfig();\n                const error = new Error('No available storage method found.');\n                self._driverSet = Promise.reject(error);\n                return self._driverSet;\n            });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    }\n\n    supports(driverName) {\n        return !!DriverSupport[driverName];\n    }\n\n    _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    }\n\n    _getSupportedDrivers(drivers) {\n        const supportedDrivers = [];\n        for (let i = 0, len = drivers.length; i < len; i++) {\n            const driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    }\n\n    _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (let i = 0, len = LibraryMethods.length; i < len; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    }\n\n    createInstance(options) {\n        return new LocalForage(options);\n    }\n}\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\nexport default new LocalForage();\n"],"sourceRoot":""}