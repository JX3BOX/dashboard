(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41abafc6"],{"3aa2":function(t,a,n){},"46e8":function(t,a,n){"use strict";n.d(a,"m",(function(){return u})),n.d(a,"d",(function(){return s})),n.d(a,"k",(function(){return o})),n.d(a,"l",(function(){return m})),n.d(a,"h",(function(){return p})),n.d(a,"a",(function(){return b})),n.d(a,"g",(function(){return v})),n.d(a,"i",(function(){return g})),n.d(a,"b",(function(){return h})),n.d(a,"n",(function(){return f})),n.d(a,"c",(function(){return d})),n.d(a,"e",(function(){return l})),n.d(a,"f",(function(){return j})),n.d(a,"j",(function(){return _}));var e=n("41cb"),r=n("bc3a"),i=n.n(r),c=n("65c2");Object(e["a"])("server",{proxy:!1});function s(){return Object(e["b"])().get("/api/cms/user/my/profile")}function u(t){return Object(e["b"])().put("/api/cms/user/my/profile",t)}function o(t){return Object(e["b"])().put("/api/cms/user/my/avatar",t)}function f(t){return Object(e["b"])().post("/api/cms/upload/avatar",t)}function d(){var t=c["__imgPath"]+"avatar/index.json";return i.a.get(t)}function l(t){return Object(e["b"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function m(t){return Object(e["b"])().put("/api/cms/user/account/email/reset-password",t,{app:"jx3box"})}function b(t){return Object(e["b"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function v(t){return Object(e["b"])().post("/api/cms/user/account/email/bind",t)}function p(t){return Object(e["b"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function h(){return Object(e["b"])().get("/api/cms/account/oauth/status")}function g(t){return Object(e["b"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function j(){return Object(e["b"])().get("/api/cms/wechat/mp/bind")}function _(){return Object(e["b"])().get("/api/cms/wechat/mp/unbind")}},"97be":function(t,a,n){"use strict";n("3aa2")},"9be6":function(t,a,n){"use strict";n.r(a);n("b0c0");var e=function(){var t=this,a=t._self._c;return a("uc",{staticClass:"m-dashboard-frame m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[a("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[a("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[a("div",{staticClass:"m-frame"},[a("div",{staticClass:"m-frame-left"},[a("a",{staticClass:"u-btn el-button el-button--default el-button--mini is-plain",attrs:{href:"/dashboard/avatar",target:"_blank"}},[a("i",{staticClass:"el-icon-picture-outline-round"}),t._v(" 修改头像")]),a("div",{staticClass:"u-avatar-box"},[a("div",{staticClass:"u-avatar"},[a("img",{staticClass:"u-avatar-pic",attrs:{src:t.showAvatar(t.avatar)}}),t.frame?a("i",{staticClass:"u-avatar-frame"},[a("img",{attrs:{src:t.frameUrl(t.frame)}})]):t._e()])])]),a("div",{staticClass:"m-frame-right"},[a("div",{staticClass:"u-theme"},[a("div",{staticClass:"u-frame-list"},[a("div",{staticClass:"u-title"},[a("span",{staticClass:"u-name"},[a("i",{staticClass:"el-icon-collection-tag"}),t._v("头像框")]),a("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=avatar",target:"_blank"}},[a("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),a("div",{staticClass:"u-frame-item"},t._l(t.frameList,(function(n,e){return a("div",{key:e,staticClass:"u-picbox"},[a("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(n.desc)),a("br"),t._v(t._s(n.postscript))]),a("div",{staticClass:"u-pic",class:t.setClass(n),on:{click:function(a){return t.setAvatar(n)}}},[n.name?a("el-image",{attrs:{src:t.frameUrl(n.name),fit:"contain"}}):a("div",{staticClass:"u-noFrame"})],1)])],1)})),0)])])])]),a("div",{staticClass:"m-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateAvatarFrame}},[t._v("确认")]),a("el-button",{on:{click:t.reset}},[t._v("清除所有装扮")])],1)])},r=[],i=n("5530"),c=(n("99af"),n("d81d"),n("7db0"),n("d3b7"),n("4de4"),n("159b"),n("14d9"),n("b64b"),n("b547")),s=n("46c1"),u=n("c9d2"),o=n("85e4"),f=n("65c2"),d=n("46e8"),l=n("aa38"),m={name:"frame",props:[],data:function(){return{tabList:s["e"],uid:u["a"].getInfo().uid,frameList:[],framebak:"",framesBak:{},avatar:u["a"].getInfo().avatar_origin,frame:null,frames:{},avatars:[],decoration:null}},computed:{},methods:{reset:function(){this.frame=this.framebak,this.frames=this.framesBak,this.dataProcessing()},frameUrl:function(t){if(t)return f["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},showAvatar:function(t){return Object(o["showAvatar"])(t,600)},setClass:function(t){return t.decoration&&t.receive?"receive":t.isHave?t.using?"select":void 0:"noHave"},updateAvatarFrame:function(){var t=this;Object(l["j"])({user_avatar_frame:this.frame}).then((function(a){t.$message({message:"头像框更新成功",type:"success"});var n=t.frameList.map((function(t){return{val:t.name,using:t.using,type:"avatar"}}));Object(l["h"])(n)}))},receiveFrame:function(t){var a=this;Object(l["g"])(this.uid,t).then((function(t){a.$message({message:"领取成功",type:"success"}),a.loadDecoration()}))},setAvatar:function(t){if(t.decoration&&t.receive)this.receiveFrame(t.name);else if(t.isHave){var a=this.frameList,n=a.find((function(t){return 1==t.using}));n&&(n.using=0),1==t.using?t.using=0:t.using=1,this.frame=t.name}},load:function(){var t=this;Object(d["e"])(this.uid).then((function(a){t.frame=a.data.data.user_avatar_frame||"",t.framebak=a.data.data.user_avatar_frame||""})),Object(d["c"])().then((function(a){t.frames=a.data,t.framesBak=a.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(l["b"])().then((function(a){var n=a.data.data,e=["atcard","homebg","sidebar","calendar"],r=n.filter((function(t){return""!=t.type&&-1!=e.indexOf(t.type)}));t.decoration=t.formattingData(r,"val"),t.avatars=n.filter((function(t){return"avatar"==t.type})),t.dataProcessing()}))},formattingData:function(t,a){var n={};return t.forEach((function(t,e){n[t[a]]?n[t[a]].push(t):n[t[a]]=[t]})),n},decorationAather:function(t){var a,n=["atcard","homebg","sidebar","calendar"],e=null===(a=this.decoration[t])||void 0===a?void 0:a.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));return(null===e||void 0===e?void 0:e.length)>=4},dataProcessing:function(){var t=this,a=this.avatars||[],n=this.frames,e=[{desc:"无边框",name:"",val:"",isHave:1,using:1}],r=[],c=[];Object.keys(n).forEach((function(s,u){var o=Object(i["a"])(Object(i["a"])({},n[s]),{isHave:0,using:0,receive:!1}),f=a.find((function(t){return t.val==s}));f?(o.using=f.using,o.isHave=1,o.using&&(e[0].using=0)):o.decoration&&(o.receive=t.decorationAather(o.name)),o.isHave?e.push(o):o.decoration?r.push(o):c.push(o)})),this.frameList=[].concat(e,r,c)}},mounted:function(){this.load()},components:{uc:c["a"]}},b=m,v=(n("97be"),n("2877")),p=Object(v["a"])(b,e,r,!1,null,null,null);a["default"]=p.exports},aa38:function(t,a,n){"use strict";n.d(a,"b",(function(){return s})),n.d(a,"h",(function(){return u})),n.d(a,"c",(function(){return o})),n.d(a,"d",(function(){return f})),n.d(a,"g",(function(){return d})),n.d(a,"j",(function(){return l})),n.d(a,"e",(function(){return m})),n.d(a,"f",(function(){return b})),n.d(a,"i",(function(){return v})),n.d(a,"a",(function(){return p}));n("99af");var e=n("41cb"),r=n("bc3a"),i=n.n(r),c=n("65c2");function s(t){return Object(e["b"])().get("/api/cms/user/decoration",{params:t})}function u(t){return Object(e["b"])().post("/api/cms/user/decoration",t)}function o(){var t=c["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return i.a.get(t)}function f(){return i.a.get("".concat(c["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,a){return Object(e["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(a,"/for/avatar"))}function l(t){return Object(e["b"])().put("/api/cms/user/my/avatar-frame",t)}function m(){return Object(e["b"])().get("/api/cms/user/config/honor")}function b(t){return Object(e["c"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function v(t){return Object(e["b"])().put("/api/cms/user/honor/use/".concat(t))}function p(){return Object(e["b"])().delete("/api/cms/user/honor/use")}}}]);
//# sourceMappingURL=chunk-41abafc6.a7d9b43f.js.map