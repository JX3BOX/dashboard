{"version":3,"sources":["webpack:///./src/views/whitelist.vue?91c6","webpack:///./src/views/whitelist.vue?62e6","webpack:///./src/service/whitelist.js","webpack:///src/views/whitelist.vue","webpack:///./src/views/whitelist.vue?2168","webpack:///./src/views/whitelist.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","directives","name","rawName","value","expression","attrs","onSuccess","_l","item","i","key","info","user_avatar","avatar","_v","_s","display_name","remark","on","$event","delWhitelistBtn","kith_id","editWhitelistBtn","searchUid","model","callback","$$v","uid","userInfo","ID","allowAppend","addWhitelistBtn","list","length","hasNum","staticRenderFns","getWhitelist","$cms","proxy","get","getWhitelistById","id","delWhitelist","delete","addWhitelist","post","editWhitelist","data","put","props","isvip","ispro","computed","isVerify","hasUser","success","len","methods","then","val","$prompt","confirmButtonText","cancelButtonText","successTxt","TXT","setTimeout","getList","mounted","components","component"],"mappings":"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","file":"js/chunk-77185e1e.9b54beb1.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./whitelist.vue?vue&type=style&index=0&id=56502a1e&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard m-dashboard-work m-dashboard-whitelist\"},[_c('div',{staticClass:\"m-dashboard-whitelist-cont\"},[_vm._m(0),_c('el-alert',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.success),expression:\"success\"}],attrs:{\"title\":_vm.onSuccess,\"type\":\"success\",\"center\":\"\",\"show-icon\":\"\"}}),_c('div',{staticClass:\"u-box\"},_vm._l((_vm.list),function(item,i){return _c('div',{key:i,staticClass:\"u-item\"},[_c('div',{staticClass:\"u-item-box\"},[_c('img',{attrs:{\"src\":item.info.user_avatar || _vm.avatar}}),_c('div',{staticClass:\"u-item-txt\"},[_c('div',{staticClass:\"u-item-name\"},[_c('span',[_vm._v(_vm._s(item.info.display_name))]),_c('span',[_vm._v(\"备注：\"+_vm._s(item.remark || '无'))])]),_c('div',{staticClass:\"u-item-btn\"},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.delWhitelistBtn(item.kith_id)}}},[_vm._v(\"删除\")]),_c('el-button',{on:{\"click\":function($event){return _vm.editWhitelistBtn(item.kith_id)}}},[_vm._v(\"编辑\")])],1)])])])}),0)],1),_c('div',{staticClass:\"m-dashboard-whitelist-add\"},[_vm._m(1),_c('el-input',{staticClass:\"u-input\",attrs:{\"placeholder\":\"输入UID添加\",\"suffix-icon\":\"el-icon-search\"},on:{\"input\":_vm.searchUid},model:{value:(_vm.uid),callback:function ($$v) {_vm.uid=$$v},expression:\"uid\"}}),(_vm.hasUser)?_c('div',{staticClass:\"u-box u-user\"},[_c('img',{attrs:{\"src\":_vm.userInfo.user_avatar || _vm.avatar,\"alt\":\"userInfo.display_name\"}}),_c('div',{staticClass:\"u-txt\"},[_c('span',[_vm._v(\"UID：\"+_vm._s(_vm.userInfo.ID))]),_c('span',[_vm._v(_vm._s(_vm.userInfo.display_name))])])]):_c('div',{staticClass:\"u-box\"},[_c('el-alert',{attrs:{\"title\":\"请输入UID\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}})],1),_c('el-button',{attrs:{\"type\":\"success\",\"disabled\":!_vm.allowAppend},on:{\"click\":_vm.addWhitelistBtn}},[_vm._v(\"添加亲友 (\"+_vm._s(this.list.length)+\" / \"+_vm._s(_vm.hasNum)+\")\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{staticClass:\"u-title\"},[_c('i',{staticClass:\"el-icon-s-management\"}),_vm._v(\" 我的亲友\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"u-title\"},[_c('i',{staticClass:\"el-icon-news\"}),_vm._v(\" 添加亲友\")])}]\n\nexport { render, staticRenderFns }","import { $cms } from '@jx3box/jx3box-common/js/https'\n\nfunction getWhitelist() {\n  return $cms({ proxy: true }).get('/api/cms/user/kith/my')\n}\nfunction getWhitelistById(id) {\n  return $cms({ proxy: true }).get(`api/cms/user/${id}/info`)\n}\n\nfunction delWhitelist(id) {\n  return $cms({ proxy: true }).delete(`/api/cms/user/kith/${id}`)\n}\nfunction addWhitelist(id) {\n  return $cms({ proxy: true }).post(`/api/cms/user/kith/${id}`)\n}\nfunction editWhitelist(id, data) {\n  return $cms({ proxy: true }).put(`/api/cms/user/kith/${id}`, data)\n}\n\nexport { getWhitelist, editWhitelist, delWhitelist, addWhitelist ,getWhitelistById}\n","<template>\n  <div class=\"m-dashboard m-dashboard-work m-dashboard-whitelist\">\n    <div class=\"m-dashboard-whitelist-cont\">\n      <h2 class=\"u-title\"><i class=\"el-icon-s-management\"></i> 我的亲友</h2>\n      <el-alert :title=\"onSuccess\" v-show=\"success\" type=\"success\" center show-icon> </el-alert>\n      <div class=\"u-box\">\n        <div class=\"u-item\" v-for=\"(item, i) in list\" :key=\"i\">\n          <div class=\"u-item-box\">\n            <img :src=\"item.info.user_avatar || avatar\" />\n            <div class=\"u-item-txt\">\n              <div class=\"u-item-name\">\n                <span>{{ item.info.display_name }}</span\n                ><span>备注：{{ item.remark || '无' }}</span>\n              </div>\n              <div class=\"u-item-btn\"><el-button type=\"warning\" @click=\"delWhitelistBtn(item.kith_id)\">删除</el-button><el-button @click=\"editWhitelistBtn(item.kith_id)\">编辑</el-button></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"m-dashboard-whitelist-add\">\n      <div class=\"u-title\"><i class=\"el-icon-news\"></i> 添加亲友</div>\n      <el-input class=\"u-input\" v-model=\"uid\" placeholder=\"输入UID添加\" suffix-icon=\"el-icon-search\" @input=\"searchUid\"></el-input>\n      <div class=\"u-box u-user\" v-if=\"hasUser\">\n        <img :src=\"userInfo.user_avatar || avatar\" alt=\"userInfo.display_name\" />\n        <div class=\"u-txt\">\n          <span>UID：{{ userInfo.ID }}</span>\n          <span>{{ userInfo.display_name }}</span>\n        </div>\n      </div>\n      <div class=\"u-box\" v-else>\n        <el-alert title=\"请输入UID\" type=\"info\" show-icon :closable=\"false\"> </el-alert>\n      </div>\n      <el-button type=\"success\" :disabled=\"!allowAppend\" @click=\"addWhitelistBtn\">添加亲友 ({{ this.list.length }} / {{ hasNum }})</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport { getWhitelist, editWhitelist, delWhitelist, addWhitelist, getWhitelistById } from '@/service/whitelist.js'\nimport User from '@jx3box/jx3box-common/js/user.js'\n\nexport default {\n  name: 'whitelist',\n  props: [],\n  data: function() {\n    return {\n      uid: '',\n      list: {},\n      userInfo: '',\n      onSuccess: '',\n      avatar: 'https://console.cnyixun.com/image/common/avatar.png?x-oss-process=style/avatar_s',\n      isvip: false,\n      ispro: false,\n    }\n  },\n  computed: {\n    isVerify: function() {\n      if (this.uid == '') {\n        return false\n      }\n      if (this.userInfo == null) {\n        return false\n      }\n      return true\n    },\n    hasUser: function() {\n      return this.userInfo\n    },\n    success: function() {\n      return this.onSuccess !== ''\n    },\n    allowAppend: function() {\n      let len = this.list.length\n      if (len < 5) {\n        return true\n      } else if (len < 20) {\n        return this.isvip\n      } else {\n        return this.ispro\n      }\n    },\n    hasNum: function() {\n      if (this.isvip) {\n        return 20\n      }\n      if (this.ispro) {\n        return 100\n      }\n      return 0\n    },\n  },\n  methods: {\n    searchUid() {\n      if (this.uid) {\n        getWhitelistById(this.uid).then((res) => {\n          this.userInfo = res.data.data\n        })\n      }\n    },\n    addWhitelistBtn() {\n      addWhitelist(this.uid).then((res) => {\n        this.successTxt('亲友添加成功')\n        this.getList()\n      })\n    },\n    delWhitelistBtn(val) {\n      delWhitelist(val).then(() => {\n        this.successTxt('删除亲友成功')\n        this.getList()\n      })\n    },\n    editWhitelistBtn(id) {\n      this.$prompt('请输入备注', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n      })\n        .then((val) => {\n          editWhitelist(id, { remark: val.value }).then(() => {\n            this.successTxt('备注添加成功')\n            this.getList()\n          })\n        })\n        .catch(() => {})\n    },\n    successTxt(TXT) {\n      this.onSuccess = TXT\n      this.uid = ''\n      this.userInfo = ''\n      setTimeout(() => {\n        this.onSuccess = ''\n      }, 2000)\n    },\n    getList() {\n      getWhitelist().then((res) => {\n        this.list = res.data.data\n      })\n    },\n  },\n  mounted: function() {\n    this.getList()\n    User.getAsset().then(() => {\n      User.isVIP().then((data) => {\n        this.isvip = data\n      })\n      User.isPRO().then((data) => {\n        this.ispro = data\n      })\n    })\n  },\n  components: {},\n}\n</script>\n\n<style scoped lang=\"less\">\n@import '../assets/css/whitelist.less';\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./whitelist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./whitelist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./whitelist.vue?vue&type=template&id=56502a1e&scoped=true&\"\nimport script from \"./whitelist.vue?vue&type=script&lang=js&\"\nexport * from \"./whitelist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./whitelist.vue?vue&type=style&index=0&id=56502a1e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56502a1e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}