{"version":3,"sources":["webpack:///./src/service/profile.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/views/profile.vue?b99d","webpack:///src/views/profile.vue","webpack:///./src/views/profile.vue?76e8","webpack:///./src/views/profile.vue","webpack:///./node_modules/sterilizer/src/lib/_typeof.js","webpack:///./node_modules/sterilizer/src/sterilizer.js","webpack:///./src/views/profile.vue?9988","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["getUserInfo","uid","$","get","__server","params","checkNickname","name","updateNickname","data","post","updateProfile","getProfile","then","res","updateAvatar","updatePassword","checkEmailStatus","checkEmailAvailable","email","user_login","sendBindEmail","sendVerifyEmail","unbindOAuth","checkOAuth","getConf","setConf","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","_v","_s","renaming","on","startChangeName","dialogVisible","handleClose","$event","directives","rawName","value","expression","check","model","callback","$$v","rename","checkname","slot","endChangeName","submitChangeName","server","_l","item","key","rebio","submitChangeProfile","staticRenderFns","component","_typeof","o","s","Object","prototype","toString","call","match","toLowerCase","str","chain","Error","_symbols","_","symbols","keys","regs","values","_str","_chain","_type","_iter","includes","_toRemove","join","re","germ","undefined","Set","_detected","_germ","char","add","_sterilize","probiotics","delete","kill","words","replacement","sterilizer","fails","non","METHOD_NAME"],"mappings":"kHAAA,0hBAIA,SAASA,EAAYC,GACjB,OAAOC,OAAEC,IAAIC,cAAW,YAAa,CACjCC,OAAQ,CACJJ,IAAKA,KAMjB,SAASK,EAAcC,GACnB,OAAOL,OAAEC,IAAIC,cAAW,2BAA4B,CAChDC,OAAQ,CACJE,KAAMA,KAIlB,SAASC,EAAeC,GACpB,OAAOP,OAAEQ,KAAKN,cAAW,4BAA6B,CAAEG,KAAME,IAGlE,SAASE,EAAcF,GACnB,OAAOP,OAAEQ,KAAKN,cAAW,2BAA4BK,GAEzD,SAASG,IACL,OAAOV,OAAEC,IAAIC,cAAW,gBAAgBS,MAAK,SAACC,GAC1C,OAAOA,EAAIL,KAAKA,QAKxB,SAASM,EAAaN,GAClB,OAAOP,OAAEQ,KAAKN,cAAW,0BAA2BK,GAIxD,SAASO,EAAeP,GACpB,OAAOP,OAAEQ,KAAKN,cAAW,4BAA6BK,GAI1D,SAASQ,EAAiBhB,GACtB,OAAOC,OAAEC,IAAIC,cAAW,wBAAyB,CAC7CC,OAAQ,CACJJ,IAAKA,KAKjB,SAASiB,EAAoBC,GACzB,OAAOjB,OAAEC,IAAIC,cAAW,cAAe,CACnCC,OAAQ,CACJe,WAAYD,KAKxB,SAASE,EAAcZ,GACnB,OAAOP,OAAEQ,KAAKN,cAAW,uBAAwBK,GAGrD,SAASa,EAAgBrB,GACrB,OAAOC,OAAEC,IAAIC,cAAW,yBAA0B,CAC9CC,OAAQ,CACJJ,IAAKA,KAMjB,SAASsB,EAAYd,GACjB,OAAOP,OAAEQ,KAAKN,cAAW,yBAA0BK,GAGvD,SAASe,EAAWf,GAChB,OAAOP,OAAEQ,KAAKN,cAAW,wBAAyBK,GAItD,SAASgB,IACL,OAAOvB,OAAEC,IAAIC,cAAW,oBAG5B,SAASsB,EAAQjB,GACb,OAAOP,OAAEQ,KAAKN,cAAW,mBAAmBK,K,oCCtFhD,IAAIP,EAAI,EAAQ,QACZyB,EAAQ,EAAQ,QAA4BC,KAC5CC,EAAyB,EAAQ,QAIrC3B,EAAE,CAAE4B,OAAQ,SAAUC,OAAO,EAAMC,OAAQH,EAAuB,SAAW,CAC3ED,KAAM,WACJ,OAAOD,EAAMM,U,mBCPjBC,EAAOC,QAAU,iD,uBCFjB,IAAIC,EAAyB,EAAQ,QACjCC,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQC,OAAO,IAAMF,EAAaA,EAAa,KAC/CG,EAAQD,OAAOF,EAAaA,EAAa,MAGzCI,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAAIC,EAASC,OAAOV,EAAuBQ,IAG3C,OAFW,EAAPD,IAAUE,EAASA,EAAOE,QAAQR,EAAO,KAClC,EAAPI,IAAUE,EAASA,EAAOE,QAAQN,EAAO,KACtCI,IAIXX,EAAOC,QAAU,CAGfa,MAAON,EAAa,GAGpBO,IAAKP,EAAa,GAGlBd,KAAMc,EAAa,K,yPC1BrB,IAAIQ,EAAS,WAAa,IAAIC,EAAIlB,KAASmB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOD,YAAY,iBAAiBE,MAAM,CAAC,cAAc,OAAO,iBAAiB,SAAS,CAACJ,EAAG,eAAe,CAACE,YAAY,SAASE,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,MAAM,CAACE,YAAY,WAAW,CAACL,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAI5C,MAAM,KAAK+C,EAAG,YAAY,CAACE,YAAY,SAASE,MAAM,CAAC,SAAWP,EAAIU,SAAS,MAAQ,OAAO,KAAO,UAAU,KAAO,eAAe,KAAO,QAAQC,GAAG,CAAC,MAAQX,EAAIY,kBAAkB,CAACZ,EAAIQ,GAAG,WAAW,KAAKL,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,QAAUP,EAAIa,cAAc,MAAQ,MAAM,eAAeb,EAAIc,aAAaH,GAAG,CAAC,iBAAiB,SAASI,GAAQf,EAAIa,cAAcE,KAAU,CAACZ,EAAG,WAAW,CAACE,YAAY,QAAQE,MAAM,CAAC,MAAQ,4BAA4B,YAAc,uCAAuC,KAAO,UAAU,YAAY,MAAMJ,EAAG,MAAM,CAACa,WAAW,CAAC,CAAC5D,KAAK,OAAO6D,QAAQ,SAASC,MAAOlB,EAAY,SAAEmB,WAAW,aAAad,YAAY,YAAY,CAACF,EAAG,WAAW,CAACE,YAAY,iBAAiBE,MAAM,CAAC,UAAY,IAAI,UAAY,KAAK,kBAAkB,IAAII,GAAG,CAAC,OAASX,EAAIoB,OAAOC,MAAM,CAACH,MAAOlB,EAAU,OAAEsB,SAAS,SAAUC,GAAMvB,EAAIwB,OAAOD,GAAKJ,WAAW,YAAYhB,EAAG,IAAI,CAACa,WAAW,CAAC,CAAC5D,KAAK,OAAO6D,QAAQ,SAASC,MAAOlB,EAAa,UAAEmB,WAAW,cAAcd,YAAY,oCAAoCF,EAAG,WAAW,CAACa,WAAW,CAAC,CAAC5D,KAAK,OAAO6D,QAAQ,SAASC,OAAQlB,EAAIyB,UAAWN,WAAW,eAAeZ,MAAM,CAAC,MAAQ,SAAS,KAAO,QAAQ,YAAY,OAAO,GAAGJ,EAAG,OAAO,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,UAAUmB,KAAK,UAAU,CAACvB,EAAG,YAAY,CAACQ,GAAG,CAAC,MAAQX,EAAI2B,gBAAgB,CAAC3B,EAAIQ,GAAG,SAASL,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,UAAU,SAAWP,EAAIU,WAAaV,EAAIyB,WAAWd,GAAG,CAAC,MAAQX,EAAI4B,mBAAmB,CAAC5B,EAAIQ,GAAG,UAAU,IAAI,GAAGL,EAAG,eAAe,CAACE,YAAY,SAASE,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,YAAY,CAACE,YAAY,WAAWE,MAAM,CAAC,WAAa,GAAG,YAAc,UAAUc,MAAM,CAACH,MAAOlB,EAAU,OAAEsB,SAAS,SAAUC,GAAMvB,EAAI6B,OAAON,GAAKJ,WAAW,WAAWnB,EAAI8B,GAAI9B,EAAW,SAAE,SAAS+B,GAAM,OAAO5B,EAAG,YAAY,CAAC6B,IAAID,EAAKxB,MAAM,CAAC,MAAQwB,EAAK,MAAQA,QAAU,IAAI,GAAG5B,EAAG,eAAe,CAACE,YAAY,SAASE,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,WAAW,KAAO,EAAE,UAAY,KAAK,YAAc,OAAO,kBAAkB,IAAIc,MAAM,CAACH,MAAOlB,EAAS,MAAEsB,SAAS,SAAUC,GAAMvB,EAAIiC,MAAMV,GAAKJ,WAAW,YAAY,GAAGhB,EAAG,eAAe,CAACE,YAAY,SAASE,MAAM,CAAC,MAAQ,KAAK,CAACJ,EAAG,YAAY,CAACE,YAAY,WAAWE,MAAM,CAAC,KAAO,UAAU,KAAO,iBAAiBI,GAAG,CAAC,MAAQX,EAAIkC,sBAAsB,CAAClC,EAAIQ,GAAG,SAAS,IAAI,IAAI,IAC5nF2B,EAAkB,G,sECwHtB,GACE,KAAF,UACE,MAAF,GACE,KAAF,WACI,MAAJ,CACM,KAAN,GACM,OAAN,GACM,UAAN,EACM,WAAN,EAEM,IAAN,GACM,MAAN,GAEM,OAAN,GACM,QAAN,EAEM,eAAN,IAGE,SAAF,GACE,QAAF,CAEI,gBAFJ,WAGM,KAAN,YACM,KAAN,kBAEI,MANJ,WAMM,IAAN,OACM,KAAN,0BACA,qCACQ,KAAR,kCAIM,KAAN,0CACM,KAAN,iDAEM,OAAN,OAAM,CAAN,aACA,kBACQ,EAAR,gBAEA,mBACQ,EAAR,kBAGI,iBAxBJ,WAwBM,IAAN,OACA,eAUM,KAAN,+CACQ,kBAAR,KACQ,SAAR,YACA,cACY,OAAZ,OAAY,CAAZ,UACA,kBACc,EAAd,cACc,EAAd,iCAEc,EAAd,UACgB,QAAhB,SACgB,KAAhB,YAGc,EAAd,YACc,EAAd,uBAxBQ,KAAR,uBACU,kBAAV,KACU,SAAV,YACY,EAAZ,qCA2BI,cAxDJ,WAyDM,KAAN,YACM,KAAN,iBACM,KAAN,eACM,KAAN,kBAEI,YA9DJ,SA8DA,GACM,KAAN,kBACA,kBACQ,OAER,wBAGI,oBAtEJ,WAsEM,IAAN,OACA,GACQ,IAAR,WACQ,OAAR,aAGM,OAAN,OAAM,CAAN,GACA,kBACQ,EAAR,YACQ,EAAR,+BAEQ,EAAR,UACU,QAAV,SACU,KAAV,gBAKI,eAxFJ,WAwFM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,qBAIE,QAAF,WACI,KAAJ,0CACI,KAAJ,uCACI,KAAJ,mBC9O4Y,I,wBCQxYC,EAAY,eACd,EACArC,EACAoC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CCdf,SAASC,EAAQC,GACb,IAAIC,EAAIC,OAAOC,UAAUC,SAASC,KAAKL,GACvC,OAAOC,EAAEK,MAAM,oBAAoB,GAAGC,c,kCAG3B,QCDf,MAAM,EACF,YAAYC,EAAIC,GAEZ,GAAkB,WAAf,EAAQD,GACP,MAAM,IAAIE,MACN,8CAIRlE,KAAKmE,SAAW,CACZ,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACLlG,EAAG,MACH,IAAK,IACL,IAAK,MACL,IAAK,IACL,IAAK,MACL,IAAK,MACLmG,EAAG,IACH,IAAK,IACL,IAAK,IACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,KAAM,OACN,IAAK,IACL,IAAK,MACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,OAETpE,KAAKqE,QAAUX,OAAOY,KAAKtE,KAAKmE,UAChCnE,KAAKuE,KAAOb,OAAOc,OAAOxE,KAAKmE,UAC/BnE,KAAKgE,IAAMA,EACXhE,KAAKyE,KAAOT,EACZhE,KAAK0E,OAAST,EAIlB,WACI,OAAOjE,KAAKyE,KAIhB,UAAUjB,GACN,IAAImB,EAAQ,EAAQnB,GAChBoB,EAAQ,CAAC,SAAU,QAAS,OAChC,IAAKA,EAAMC,SAASF,GAChB,MAAM,IAAIT,MACN,0DAER,OAAOV,EAIX,WAAWsB,GACPA,EAAY,IAAIA,GAAWC,KAAK,IAChC,IAAIC,EAAK,IAAIzE,OAAO,IAAIuE,KAAc,MAEtC,OADA9E,KAAKyE,KAAOzE,KAAKyE,KAAK3D,QAAQkE,EAAI,IAC3BhF,KAAK0E,OAAS1E,KAAOA,KAAK4D,WAIrC,KAAKqB,GACD,IAAIH,EAAY,KAGhB,QAAYI,GAARD,EACAH,EAAY,IAAIK,IAAInF,KAAKuE,UACtB,CACHvE,KAAKoF,UAAUH,GACfH,EAAY,IAAIK,IAChB,IAAIE,EAAQ,IAAIF,IAAIF,GACpB,IAAK,IAAIK,KAAQD,EACTrF,KAAKqE,QAAQQ,SAASS,IACtBR,EAAUS,IAAIvF,KAAKmE,SAASmB,IAIxC,OAAOtF,KAAKwF,WAAWV,GAI3B,KAAKW,GACDzF,KAAKoF,UAAUK,GAGf,IAAIX,EAAY,IAAIK,IAAInF,KAAKuE,MAC7B,IAAK,IAAIe,KAAQG,EACTzF,KAAKqE,QAAQQ,SAASS,IACtBR,EAAUY,OAAO1F,KAAKmE,SAASmB,IAIvC,OAAOtF,KAAKwF,WAAWV,GAI3B,OACI,OAAO9E,KAAK2F,KAAK,CACb,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAKR,YACI,OAAO3F,KAAK2F,KAAK,CAAC,IAAK,IAAK,IAAK,IAAK,MAI1C,YACI,OAAO3F,KAAK2F,KAAK,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAIzD,cAEI,OADA3F,KAAKyE,KAAOzE,KAAKyE,KAAK3D,QAAQ,OAAQ,IAC/Bd,KAAK0E,OAAS1E,KAAOA,KAAK4D,WAIrC,OAAOgC,EAAOC,GACV,IAAIb,EAAK,IAAIzE,OAAO,GAAGqF,EAAS,MAGhC,OAFAC,OAA8BX,IAAhBW,EAA4BA,EAAc,GACxD7F,KAAKyE,KAAOzE,KAAKyE,KAAK3D,QAAQkE,EAAIa,GAC3B7F,KAAK0E,OAAS1E,KAAOA,KAAK4D,WAIrC,gBAEI,OADA5D,KAAKyE,KAAOzE,KAAKyE,KAAK3D,QAAQ,YAAa,IACpCd,KAAK0E,OAAS1E,KAAOA,KAAK4D,YAIzC,SAASkC,EAAW9B,EAAIC,GAAM,GAC1B,OAAO,IAAI,EAAWD,EAAIC,K,kCCxK9B,yBAAqpB,EAAG,G,qBCAxpB,IAAI8B,EAAQ,EAAQ,QAChB3F,EAAc,EAAQ,QAEtB4F,EAAM,MAIV/F,EAAOC,QAAU,SAAU+F,GACzB,OAAOF,GAAM,WACX,QAAS3F,EAAY6F,MAAkBD,EAAIC,MAAkBD,GAAO5F,EAAY6F,GAAa3H,OAAS2H","file":"js/chunk-4c60e4cd.a77ddb11.js","sourcesContent":["import { $ } from \"./axios\";\nimport { __server } from \"@jx3box/jx3box-common/js/jx3box.json\";\n\n// 信息\nfunction getUserInfo(uid) {\n    return $.get(__server + \"user/info\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\n// 昵称\nfunction checkNickname(name) {\n    return $.get(__server + \"dashboard/nickname/check\", {\n        params: {\n            name: name,\n        },\n    });\n}\nfunction updateNickname(data) {\n    return $.post(__server + \"dashboard/nickname/update\", { name: data });\n}\n// 资料\nfunction updateProfile(data) {\n    return $.post(__server + \"dashboard/profile/update\", data);\n}\nfunction getProfile(){\n    return $.get(__server + \"user/profile\").then((res) => {\n        return res.data.data\n    })\n}\n\n// 头像\nfunction updateAvatar(data) {\n    return $.post(__server + \"dashboard/avatar/update\", data);\n}\n\n// 密码\nfunction updatePassword(data) {\n    return $.post(__server + \"dashboard/password/update\", data);\n}\n\n// 邮箱\nfunction checkEmailStatus(uid) {\n    return $.get(__server + \"dashboard/email/check\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\nfunction checkEmailAvailable(email) {\n    return $.get(__server + \"account/has\", {\n        params: {\n            user_login: email,\n        },\n    });\n}\n\nfunction sendBindEmail(data) {\n    return $.post(__server + \"dashboard/email/bind\", data);\n}\n\nfunction sendVerifyEmail(uid) {\n    return $.get(__server + \"dashboard/email/verify\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\n// 互联\nfunction unbindOAuth(data) {\n    return $.post(__server + \"dashboard/oauth/unbind\", data);\n}\n\nfunction checkOAuth(data) {\n    return $.post(__server + \"dashboard/oauth/check\", data);\n}\n\n// 用户设置\nfunction getConf(){\n    return $.get(__server + \"dashboard/config\");\n}\n\nfunction setConf(data){\n    return $.post(__server + \"dashboard/config\",data);\n}\n\nexport {\n    getUserInfo,\n    checkNickname,\n    updateNickname,\n    updateProfile,\n    getProfile,\n    updateAvatar,\n    updatePassword,\n    sendVerifyEmail,\n    checkEmailAvailable,\n    checkEmailStatus,\n    sendBindEmail,\n    unbindOAuth,\n    checkOAuth,\n    getConf,\n    setConf\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard-profile\"},[_c('el-form',{ref:\"form\",staticClass:\"m-profile-name\",attrs:{\"label-width\":\"80px\",\"label-position\":\"left\"}},[_c('el-form-item',{staticClass:\"u-name\",attrs:{\"label\":\"昵称\"}},[_c('div',{staticClass:\"u-value\"},[_vm._v(\" \"+_vm._s(_vm.name)+\" \"),_c('el-button',{staticClass:\"u-edit\",attrs:{\"disabled\":_vm.renaming,\"title\":\"修改昵称\",\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":_vm.startChangeName}},[_vm._v(\"修改昵称\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"昵称修改\",\"visible\":_vm.dialogVisible,\"width\":\"60%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-alert',{staticClass:\"u-tip\",attrs:{\"title\":\"昵称将作为唯一识别符，默认只能修改1次，请谨慎操作\",\"description\":\"昵称中请勿使用任何符号、空格等特殊字符，否则云端宏/数据订阅号将无法加载\",\"type\":\"warning\",\"show-icon\":\"\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.renaming),expression:\"renaming\"}],staticClass:\"u-rename\"},[_c('el-input',{staticClass:\"u-rename-input\",attrs:{\"minlength\":\"2\",\"maxlength\":\"12\",\"show-word-limit\":\"\"},on:{\"change\":_vm.check},model:{value:(_vm.rename),callback:function ($$v) {_vm.rename=$$v},expression:\"rename\"}}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.checkname),expression:\"checkname\"}],staticClass:\"el-icon-success el-icons-status\"}),_c('el-alert',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.checkname),expression:\"!checkname\"}],attrs:{\"title\":\"昵称已被使用\",\"type\":\"error\",\"show-icon\":\"\"}})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.endChangeName}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.renaming && !_vm.checkname},on:{\"click\":_vm.submitChangeName}},[_vm._v(\"确 定\")])],1)],1),_c('el-form-item',{staticClass:\"u-name\",attrs:{\"label\":\"服务器\"}},[_c('el-select',{staticClass:\"u-server\",attrs:{\"filterable\":\"\",\"placeholder\":\"请输入服务器\"},model:{value:(_vm.server),callback:function ($$v) {_vm.server=$$v},expression:\"server\"}},_vm._l((_vm.servers),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{staticClass:\"u-name\",attrs:{\"label\":\"签名\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"maxlength\":\"80\",\"placeholder\":\"签名内容\",\"show-word-limit\":\"\"},model:{value:(_vm.rebio),callback:function ($$v) {_vm.rebio=$$v},expression:\"rebio\"}})],1),_c('el-form-item',{staticClass:\"u-btns\",attrs:{\"label\":\"\"}},[_c('el-button',{staticClass:\"u-submit\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.submitChangeProfile}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-dashboard-profile\">\n        <!-- <h1>资料</h1> -->\n\n        <el-form\n            class=\"m-profile-name\"\n            ref=\"form\"\n            label-width=\"80px\"\n            label-position=\"left\"\n        >\n            <!-- <el-divider content-position=\"left\">昵称</el-divider> -->\n            <el-form-item class=\"u-name\" label=\"昵称\">\n                <div class=\"u-value\">\n                    {{ name }}\n                    <el-button\n                        class=\"u-edit\"\n                        :disabled=\"renaming\"\n                        title=\"修改昵称\"\n                        @click=\"startChangeName\"\n                        type=\"primary\"\n                        icon=\"el-icon-edit\"\n                        size=\"mini\"\n                        >修改昵称</el-button\n                    >\n                </div>\n            </el-form-item>\n\n            <el-dialog\n                title=\"昵称修改\"\n                :visible.sync=\"dialogVisible\"\n                width=\"60%\"\n                :before-close=\"handleClose\"\n            >\n                <el-alert\n                    class=\"u-tip\"\n                    title=\"昵称将作为唯一识别符，默认只能修改1次，请谨慎操作\"\n                    description=\"昵称中请勿使用任何符号、空格等特殊字符，否则云端宏/数据订阅号将无法加载\"\n                    type=\"warning\"\n                    show-icon\n                ></el-alert>\n                <div class=\"u-rename\" v-show=\"renaming\">\n                    <el-input\n                        class=\"u-rename-input\"\n                        v-model=\"rename\"\n                        minlength=\"2\"\n                        maxlength=\"12\"\n                        @change=\"check\"\n                        show-word-limit\n                    ></el-input>\n                    <i\n                        v-show=\"checkname\"\n                        class=\"el-icon-success el-icons-status\"\n                    ></i>\n                    <el-alert\n                        v-show=\"!checkname\"\n                        title=\"昵称已被使用\"\n                        type=\"error\"\n                        show-icon\n                    >\n                    </el-alert>\n                </div>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"endChangeName\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"submitChangeName\" :disabled=\"renaming && !checkname\"\n                        >确 定</el-button\n                    >\n                </span>\n            </el-dialog>\n\n            <el-form-item class=\"u-name\" label=\"服务器\">\n                <!-- <el-divider content-position=\"left\">常驻服务器</el-divider> -->\n                <el-select\n                    class=\"u-server\"\n                    v-model=\"server\"\n                    filterable\n                    placeholder=\"请输入服务器\"\n                >\n                    <el-option\n                        v-for=\"item in servers\"\n                        :key=\"item\"\n                        :label=\"item\"\n                        :value=\"item\"\n                    >\n                    </el-option>\n                </el-select>\n            </el-form-item>\n\n            <!-- <el-divider content-position=\"left\">签名</el-divider> -->\n            <el-form-item class=\"u-name\" label=\"签名\">\n                <el-input\n                    type=\"textarea\"\n                    :rows=\"4\"\n                    maxlength=\"80\"\n                    placeholder=\"签名内容\"\n                    v-model=\"rebio\"\n                    show-word-limit\n                >\n                </el-input>\n            </el-form-item>\n\n            <el-form-item class=\"u-btns\" label=\"\">\n                <el-button type=\"primary\" class=\"u-submit\"  icon=\"el-icon-check\" @click=\"submitChangeProfile\"\n                    >提交</el-button\n                >\n                <!-- <el-button @click=\"reset\">取消</el-button> -->\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { JX3BOX, User } from \"@jx3box/jx3box-common\";\nimport {\n    checkNickname,\n    updateNickname,\n    updateProfile,\n    getProfile,\n} from \"../service/profile\";\nimport { sterilizer } from \"sterilizer/index.js\";\nimport servers from \"@jx3box/jx3box-data/data/server/server_list.json\";\n\nexport default {\n    name: \"profile\",\n    props: [],\n    data: function() {\n        return {\n            name: \"\",\n            rename: \"\",\n            renaming: false,\n            checkname: true,\n\n            bio: \"\",\n            rebio: \"\",\n\n            server: \"\",\n            servers,\n\n            dialogVisible: false,\n        };\n    },\n    computed: {},\n    methods: {\n        // 昵称\n        startChangeName() {\n            this.renaming = true;\n            this.dialogVisible = true\n        },\n        check() {\n            this.rename = this.rename.trim();\n            if (this.rename < 2 || this.rename.length > 12) {\n                this.$message.error(\"昵称长度限制为2~12个字符\");\n                return;\n            }\n            // 禁用符号\n            this.rename = sterilizer(this.rename).kill();\n            this.rename = sterilizer(this.rename).removeSpace();\n\n            checkNickname(this.rename)\n                .then((res) => {\n                    this.checkname = true;\n                })\n                .catch((err) => {\n                    this.checkname = false;\n                });\n        },\n        submitChangeName() {\n            if (!this.checkname) {\n                this.$alert(\"昵称不合法\", \"提交失败\", {\n                    confirmButtonText: \"确定\",\n                    callback: (action) => {\n                        this.$message.error(\"用户名已被使用或包含禁用字符\");\n                    },\n                });\n                return;\n            }\n\n            this.$alert(`确定修改为 ${this.rename} 吗`, \"消息\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                    if (action == \"confirm\") {\n                        updateNickname(this.rename)\n                            .then((res) => {\n                                this.name = this.rename;\n                                User.refresh(\"name\", this.rename);\n\n                                this.$message({\n                                    message: \"资料修改成功\",\n                                    type: \"success\",\n                                });\n\n                                this.renaming = false;\n                                this.dialogVisible = false\n                            })\n                    }\n                },\n            });\n        },\n        endChangeName() {\n            this.renaming = false;\n            this.rename = this.name;\n            this.rebio = this.bio;\n            this.dialogVisible = false\n        },\n        handleClose(done) {\n            this.$confirm(\"确认关闭？\")\n                .then((_) => {\n                    done();\n                })\n                .catch((_) => {});\n        },\n        // 提交资料\n        submitChangeProfile() {\n            let data = {\n                bio: this.rebio,\n                server: this.server,\n            };\n\n            updateProfile(data)\n                .then((res) => {\n                    this.bio = this.rebio;\n                    User.refresh(\"bio\", this.rebio);\n\n                    this.$message({\n                        message: \"资料修改成功\",\n                        type: \"success\",\n                    });\n                })\n        },\n        // 获取资料\n        getUserProfile() {\n            getProfile().then((data) => {\n                this.server = data.server;\n            });\n        },\n    },\n    mounted: function() {\n        this.name = this.rename = User.getInfo().name;\n        this.bio = this.rebio = User.getInfo().bio;\n        this.getUserProfile();\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/dashboard/profile.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=0cc734e7&\"\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./profile.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * \n * @param {any} o any object to be detected\n * @return {string} the type string\n */\nfunction _typeof(o){\n    var s = Object.prototype.toString.call(o);\n    return s.match(/\\[object (.*?)\\]/)[1].toLowerCase();\n}\n\nexport default _typeof","import _typeof from \"./lib/_typeof.js\";\n\n/**\n * @desc  Remove specified symbols & charaters\n * @param {string} str string will be sterilized\n * @param {boolean} chain whether use chain\n * @return {str} the clean string\n * @return {object} a sterilizer object , when chain is enabled use .toString() to output the sterilized string\n */\nclass Sterilizer {\n    constructor(str,chain) {\n\n        if(_typeof(str)!=='string'){\n            throw new Error(\n                \"[Sterilizer::init] params should be string\"\n            );\n        }\n\n        this._symbols = {\n            \"`\": \"`\",\n            \"~\": \"~\",\n            \"!\": \"!\",\n            \"@\": \"@\",\n            \"#\": \"#\",\n            $: \"\\\\$\",\n            \"%\": \"%\",\n            \"^\": \"\\\\^\",\n            \"&\": \"&\",\n            \"*\": \"\\\\*\",\n            \"-\": \"\\\\-\",\n            _: \"_\",\n            \"=\": \"=\",\n            \"+\": \"+\",\n            \"(\": \"\\\\(\",\n            \")\": \"\\\\)\",\n            \"[\": \"\\\\[\",\n            \"]\": \"\\\\]\",\n            \"{\": \"\\\\{\",\n            \"}\": \"\\\\}\",\n            \"|\": \"\\\\|\",\n            \"\\\\\": \"\\\\\\\\\",\n            \"/\": \"/\",\n            \"?\": \"\\\\?\",\n            \":\": \":\",\n            \";\": \";\",\n            \"'\": \"'\",\n            '\"': '\"',\n            \">\": \">\",\n            \"<\": \"<\",\n            \",\": \",\",\n            \".\": \"\\\\.\",\n        };\n        this.symbols = Object.keys(this._symbols);\n        this.regs = Object.values(this._symbols);\n        this.str = str;\n        this._str = str;\n        this._chain = chain;\n    }\n\n    // output the clean string\n    toString() {\n        return this._str;\n    }\n\n    // detected the object type\n    _detected(o) {\n        let _type = _typeof(o);\n        let _iter = [\"string\", \"array\", \"set\"];\n        if (!_iter.includes(_type))\n            throw new Error(\n                \"[Sterilizer::remove] params should be string|array|set\"\n            );\n        return o;\n    }\n\n    // replaced the specified symbols by RegExp\n    _sterilize(_toRemove) {\n        _toRemove = [..._toRemove].join(\"\");\n        let re = new RegExp(`[${_toRemove}]`, \"gm\");\n        this._str = this._str.replace(re, \"\");\n        return this._chain ? this : this.toString()\n    }\n\n    // remove the specified symbols\n    kill(germ) {\n        let _toRemove = null;\n\n        // build unique toRemove set\n        if (germ == undefined) {\n            _toRemove = new Set(this.regs);\n        } else {\n            this._detected(germ);\n            _toRemove = new Set();\n            let _germ = new Set(germ);\n            for (let char of _germ) {\n                if (this.symbols.includes(char))\n                    _toRemove.add(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove all the symbols exclude args\n    live(probiotics) {\n        this._detected(probiotics);\n\n        // build unique toRemove set\n        let _toRemove = new Set(this.regs);\n        for (let char of probiotics) {\n            if (this.symbols.includes(char)) {\n                _toRemove.delete(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove htmlspecialchars + urlspecialchars\n    safe() {\n        return this.kill([\n            \"&\",\n            \"<\",\n            \">\",\n            '\"',\n            \"'\",\n            \"+\",\n            \":\",\n            \"/\",\n            \"?\",\n            \"=\",\n            \"#\",\n            \"%\",\n        ]);\n    }\n\n    // remove htmlspecialchars\n    removeHSC() {\n        return this.kill([\"&\", \"<\", \">\", '\"', \"'\"]);\n    }\n\n    // remove urlspecialchars\n    removeURL() {\n        return this.kill([\"+\", \":\", \"/\", \"?\", \"=\", \"&\", \"#\", \"%\"]);\n    }\n\n    // remove all the space\n    removeSpace() {\n        this._str = this._str.replace(/\\s/gm, \"\");\n        return this._chain ? this : this.toString()\n    }\n\n    // remove specified charaters\n    remove(words, replacement) {\n        let re = new RegExp(`${words}`, \"gm\");\n        replacement = replacement !== undefined ? replacement : \"\";\n        this._str = this._str.replace(re, replacement);\n        return this._chain ? this : this.toString()\n    }\n\n    // remove all the HTML tags\n    removeHTMLtag() {\n        this._str = this._str.replace(/<[^>]+>/gm, \"\");\n        return this._chain ? this : this.toString()\n    }\n}\n\nfunction sterilizer(str,chain=false) {\n    return new Sterilizer(str,chain);\n}\n\nexport { Sterilizer, sterilizer };\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./profile.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./profile.vue?vue&type=style&index=0&lang=less&\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}