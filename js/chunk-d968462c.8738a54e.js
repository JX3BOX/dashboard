(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d968462c"],{"390c":function(t,e,i){"use strict";i("9381")},"46e8":function(t,e,i){"use strict";i.d(e,"l",(function(){return u})),i.d(e,"e",(function(){return o})),i.d(e,"j",(function(){return c})),i.d(e,"k",(function(){return f})),i.d(e,"h",(function(){return _})),i.d(e,"a",(function(){return v})),i.d(e,"b",(function(){return p})),i.d(e,"g",(function(){return b})),i.d(e,"i",(function(){return y})),i.d(e,"c",(function(){return g})),i.d(e,"m",(function(){return h})),i.d(e,"d",(function(){return d})),i.d(e,"f",(function(){return m}));var n=i("41cb"),s=i("bc3a"),r=i.n(s),a=i("65c2"),l=Object(n["a"])("server",{proxy:!1});function o(){return Object(n["b"])().get("/api/cms/user/my/profile")}function u(t){return Object(n["b"])().put("/api/cms/user/my/profile",t)}function c(t){return Object(n["b"])().put("/api/cms/user/my/avatar",t)}function h(t){return Object(n["b"])().post("/api/cms/upload/avatar",t)}function d(){var t=a["__imgPath"]+"avatar/index.json";return r.a.get(t)}function m(t){return Object(n["b"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function f(t){return l.post("profile/password",t)}function p(){return l.get("profile/email/check")}function v(t){return l.get("profile/email/available",{params:{user_email:t}})}function b(t){return l.post("profile/email/bind",t)}function _(){return l.post("profile/email/verify")}function g(){return Object(n["b"])().get("/api/cms/account/oauth/status")}function y(t){return Object(n["b"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}},9381:function(t,e,i){},9945:function(t,e,i){"use strict";function n(t){var e=Object.prototype.toString.call(t);return e.match(/\[object (.*?)\]/)[1].toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t){if("string"!==n(t))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=t,this._str=t}toString(){return this._str}_detected(t){let e=n(t),i=["string","array","set"];if(!i.includes(e))throw new Error("[Sterilizer::remove] params should be string|array|set");return t}_sterilize(t){t=[...t].join("");let e=new RegExp(`[${t}]`,"gm");return this._str=this._str.replace(e,""),this}kill(t){let e=null;if(void 0==t)e=new Set(this.regs);else{this._detected(t),e=new Set;let i=new Set(t);for(let t of i)this.symbols.includes(t)&&e.add(this._symbols[t])}return this._sterilize(e)}live(t){this._detected(t);let e=new Set(this.regs);for(let i of t)this.symbols.includes(i)&&e.delete(this._symbols[i]);return this._sterilize(e)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this}remove(t,e){let i=new RegExp(""+t,"gm");return e=void 0!==e?e:"",this._str=this._str.replace(i,e),this}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this}isDirty(t){return t?this.str.includes(t):this.symbols.some(t=>this.str.includes(t))}}function r(t){return new s(t)}class a{constructor(t,e){this.val=t,this.opt=e||{}}check(){try{if(1==this.opt.isOptional&&this.isOptional())return!0;for(let t in this.opt)if("isOptional"!=t&&!this[t](this.opt[t]))return!1;return!0}catch(t){console.error(t)}}isOptional(){let t=["",void 0,null];return!!t.includes(this.val)}is(t){if(!t instanceof RegExp)throw new Error("[Validator::is] param should be a RegExp");return t.test(this.val)}not(t){return!this.is(t)}len(t){let e=this.val.length;if("array"==n(t))return e>=t[0]&&e<=t[1];if("string"==n(t)||"number"==n(t))return e==t;throw new Error("[Validator::len] param should be array|string|number")}isIn(t){if("array"!=n(t))throw new Error("[Validator::isIn] param should be an array");return!!t.includes(this.val)}notIn(t){return!this.isIn(t)}isAlpha(t){return!t||/^[A-Z]+$/i.test(this.val)}isAlphanumeric(t){return!t||/^[A-Z0-9]+$/i.test(this.val)}isNumeric(t){return!t||/^[0-9]+$/.test(this.val)}isInt(t){return!t||/^(?:[-+]?(?:0|[1-9][0-9]*))$/.test(this.val)}isFloat(t){return!t||/^[-+]?[0-9]*\.?[0-9]+$/.test(this.val)}max(t){return this.val<=t}min(t){return this.val>=t}isChinese(t){return!t||/^[\u4e00-\u9fa5]+$/.test(this.val)}isIdentityCard(t){return!t||/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(this.val)}isMobilePhone(t){return!t||/^1[3456789]\d{9}$/.test(this.val)}isEmail(t){return!t||/^([A-Za-z0-9_\-\.\u4e00-\u9fa5])+@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,8})$/.test(this.val)}notEmpty(t){return!t||!/\s/gm.test(this.val)}}function l(t,e){const i=new a(t,e);return i.check()}e.Sterilizer=s,e.Validator=a,e.sterilizer=r,e.validator=l},"9a93":function(t,e,i){},ab43:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-notice"},[e("div",{staticClass:"m-dashboard-content"},[e("el-alert",{staticClass:"u-tip",attrs:{title:"配置你的联系方式以接收魔盒通知",type:"warning","show-icon":""}}),e("div",{staticClass:"m-dashboard-content-list"},t._l(t.list,(function(i,n){return e("div",{key:n,staticClass:"m-item"},[e("img",{staticClass:"u-icon",attrs:{"svg-inline":"",src:t.icon(i.key)}}),e(i.component,{tag:"component"})],1)})),0)],1)])},s=[],r=i("b547"),a=i("65c2"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-notice-wechat"})},o=[],u={name:"wechat",data:function(){return{status:null}},computed:{},methods:{},mounted:function(){}},c=u,h=(i("d9b8"),i("2877")),d=Object(h["a"])(c,l,o,!1,null,null,null),m=d.exports,f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-notice-email"},[t.address?e("span",{staticClass:"u-address"},[t._v(t._s(t.address))]):t._e(),1==t.status?[1==t.verified?[e("el-button",{staticClass:"u-button",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.changeEmail}},[t._v("修改邮箱")])]:t._e(),0==t.verified?[e("el-button",{staticClass:"u-button",attrs:{type:"warning",icon:"el-icon-s-promotion"},on:{click:t.verify}},[t._v("验证邮箱")]),e("el-button",{staticClass:"u-button",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.changeEmail}},[t._v("修改邮箱")])]:t._e()]:t._e(),0==t.status?[e("el-input",{staticClass:"u-text u-email",attrs:{placeholder:"邮箱地址",minlength:"3",maxlength:"50"},on:{change:t.checkEmail},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},[e("template",{slot:"prepend"},[e("i",{staticClass:"el-icon-message",staticStyle:{"font-size":"20px"}})]),e("el-button",{attrs:{slot:"append"},on:{click:t.bind},slot:"append"},[t._v(" 确定")])],2)]:t._e()],2)},p=[],v=i("9945"),b=i("c9d2"),_=i("46e8"),g={name:"email",data:function(){return{status:null,uid:b["a"].getInfo().uid,address:"",verified:null,email:"",email_validate:!1,email_available:!1,changeEmailMode:!1}},computed:{ready:function(){return this.email_validate&&this.email_available}},methods:{verify:function(){var t=this;Object(_["h"])(this.uid).then((function(e){t.$message({message:"邮件已发送请查收",type:"success"})}))},checkEmail:function(){var t=this;if(""==this.email)return this.email_validate=!1,void(this.email_available=!1);var e=Object(v["validator"])(this.email,{isEmail:!0,len:[3,50]});if(this.email_validate=e,!e)return this.$message.error("邮箱格式不正确或长度超出限制");Object(_["a"])(this.email).then((function(e){t.email_available=e.data.data,0==t.email_available&&t.$message.error("邮箱已被使用,请更换")}))},bind:function(){var t=this;this.ready&&Object(_["g"])({uid:this.uid,email:this.email}).then((function(){t.$alert("申请提交成功,请前往邮箱验证","消息",{confirmButtonText:"确定"}),t.status=!0,t.verified=!1,t.address=t.email}))},changeEmail:function(){this.status=!1,this.changeEmailMode=!0}},mounted:function(){var t=this;this.uid=b["a"].getInfo().uid,Object(_["b"])().then((function(e){e.data.data.email?(t.status=!0,t.address=e.data.data.email,t.verified=!!parseInt(e.data.data.verified)):t.status=!1}))}},y=g,w=(i("cf7a"),Object(h["a"])(y,f,p,!1,null,null,null)),j=w.exports,O={name:"notice",components:{uc:r["a"],wechat:m,email:j},data:function(){return{list:[{key:"email",name:"邮箱",component:j},{key:"wechat",name:"微信",component:m}]}},methods:{icon:function(t){return a["__imgPath"]+"image/connect/"+t+".svg"}},mounted:function(){}},k=O,E=(i("390c"),Object(h["a"])(k,n,s,!1,null,null,null));e["default"]=E.exports},c84f:function(t,e,i){},cf7a:function(t,e,i){"use strict";i("9a93")},d9b8:function(t,e,i){"use strict";i("c84f")}}]);
//# sourceMappingURL=chunk-d968462c.8738a54e.js.map