(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02598e29"],{"3f87":function(t,e,i){},9444:function(t){t.exports=JSON.parse('{"a":{"bigbang":"大事件","news":"杂闻","gossip":"八卦","celebrity":"名人","player":"玩家","organization":"帮会","team":"团队","game":"玩法","plot":"剧情","video":"视频","music":"音乐"}}')},a64c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-publish-box"},[i("pubheader",{attrs:{name:"百科词条"}},[t._t("header")],2),i("h1",{staticClass:"m-publish-wiki-header"},[t._v("贡献词条")]),i("el-form",{staticClass:"m-publish-wiki",attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{staticClass:"m-publish-wiki-type",attrs:{label:"类别"}},[i("el-radio-group",{model:{value:t.primary.type,callback:function(e){t.$set(t.primary,"type",e)},expression:"primary.type"}},t._l(t.types,(function(e,a){return i("el-radio",{key:a,attrs:{label:a,border:""}},[t._v(t._s(e))])})),1)],1),i("el-form-item",{staticClass:"m-publish-wiki-title",attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"请输入词条名称"},model:{value:t.primary.title,callback:function(e){t.$set(t.primary,"title",e)},expression:"primary.title"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-content",attrs:{label:"内容"}},[i("Tinymce",{attrs:{attachmentEnable:!0,resourceEnable:!0,height:600},model:{value:t.primary.content,callback:function(e){t.$set(t.primary,"content",e)},expression:"primary.content"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-tags",attrs:{label:"标签"}},[t._l(t.primary.tag,(function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",placeholder:"回车以添加"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 添加标签")])],2),i("el-form-item",{staticClass:"m-publish-wiki-remark",attrs:{label:"批注"}},[i("el-input",{attrs:{maxlength:200,minlength:2,"show-word-limit":"",required:"",rows:3,type:"textarea",placeholder:"填写本次修订说明"},model:{value:t.primary.remark,callback:function(e){t.$set(t.primary,"remark",e)},expression:"primary.remark"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-publish",attrs:{label:""}},[i("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:t.processing},on:{click:t.publish}},[t._v("提交词条")]),i("el-checkbox",{staticClass:"u-anonymous",model:{value:t.primary.anonymous,callback:function(e){t.$set(t.primary,"anonymous",e)},expression:"primary.anonymous"}},[t._v("匿名")])],1)],1)],1)},s=[],n=(i("c975"),i("a434"),i("a0fa")),r=i("9444"),l=i("221a"),o=(i("c9d2"),i("2777")),u="http://bb.jx3box.com/",c=u+"api/wiki/user_item";function p(t){return o["a"].post(c,t)}var m={name:"wiki",props:[],data:function(){return{primary:{wiki_id:"",type:"",title:"",content:"",tag:[],remark:"",reference:[],anonymous:0},types:r["a"],inputVisible:!1,inputValue:""}},computed:{id:function(){return this.$route.params.id},isNew:function(){return!this.id},processing:function(){return this.$store.state.processing}},watch:{},methods:{publish:function(){var t=this;this.$store.commit("startProcess"),console.log(this.primary),p(this.primary).then((function(e){console.log(e.data),t.success(e)}))},success:function(t){this.$message({message:t.data.msg||"提交成功",type:"success"})},loadData:function(){},updateTags:function(t){},validate:function(){},handleClose:function(t){this.primary.tag.splice(this.primary.tag.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.primary.tag.push(t),this.inputVisible=!1,this.inputValue=""}},created:function(){this.id&&this.loadData()},components:{pubheader:n["a"],Tinymce:l["a"]}},h=m,f=(i("efcf0"),i("2877")),b=Object(f["a"])(h,a,s,!1,null,null,null);e["default"]=b.exports},efcf0:function(t,e,i){"use strict";var a=i("3f87"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-02598e29.2572a2bb.js.map