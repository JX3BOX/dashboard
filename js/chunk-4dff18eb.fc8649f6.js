(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dff18eb"],{"337f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-dashboard-keycode m-credit"},[e._m(0),a("el-alert",{staticClass:"m-boxcoin-tip",attrs:{title:"请务必妥善保管，并注意过期时间。",type:"warning","show-icon":""}},[a("a",{attrs:{href:"https://charge.xoyo.com/pay?item=jx3&way=kcard",target:"_blank"}},[e._v("金山一卡通充值页面")])]),a("el-tabs",{attrs:{type:"border-card"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"一卡通",name:"keycode"}},[e.list.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:e.list,"show-header":""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.keycode[t.row.type]||"其他"))]}}],null,!1,1249896633)}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.subtypes[t.row.subtype]||"其他"))]}}],null,!1,704203944)}),a("el-table-column",{attrs:{label:"面额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.count))]}}],null,!1,1801049342)}),a("el-table-column",{attrs:{label:"卡密","min-width":"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"u-card"},[a("div",{staticClass:"u-count"},[a("div",{staticClass:"u-line"},[a("span",[e._v("卡号："+e._s(t.row.code||"****************")+" ")]),t.row.code?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+t.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制卡号")]):e._e()],1),a("div",{staticClass:"u-line"},[a("span",[e._v("卡密："+e._s(t.row.key||"****************"))]),t.row.key?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+t.row.key,expression:"'' + scope.row.key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制密码")]):e._e()],1)]),t.row.code?e._e():a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return e.getKeycode(t.$index,t.row)}}},[e._v("点击查看")])],1)]}}],null,!1,1182821010)}),a("el-table-column",{attrs:{label:"过期时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.expire_at?a("div",{staticClass:"u-time"},[a("span",{staticClass:"u-tag",class:e.compareTime(t.row.expire_at,"tag")},[e._v(e._s(e.compareTime(t.row.expire_at,"time")))]),a("span",[e._v(e._s(t.row.expire_at))])]):a("span",[e._v("-")])]}}],null,!1,2673936506)}),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200"}})],1):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到任何记录",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1),a("el-tab-pane",{attrs:{label:"激活码",name:"sn"}},[e.list.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-table",attrs:{data:e.list,"show-header":"","cell-class-name":"u-table-cell","header-cell-class-name":"u-header-cell"}},[a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.types[t.row.type]||"其他"))]}}],null,!1,1514819432)}),a("el-table-column",{attrs:{prop:"subtype",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.subtypes[t.row.subtype]||"其他"))]}}],null,!1,704203944)}),a("el-table-column",{attrs:{label:"激活码","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"u-code"},[a("span",{staticClass:"u-txt"},[e._v(e._s(t.row.code||"****************"))]),t.row.code?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+t.row.code,expression:"'' + scope.row.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"u-btn",attrs:{type:"txt",size:"mini",icon:"el-icon-document-copy"}},[e._v("复制")]):a("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"small",plain:""},on:{click:function(a){return e.getSn(t.$index,t.row)}}},[e._v("点击查看")])],1)]}}],null,!1,2751949383)}),a("el-table-column",{attrs:{label:"过期时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.expire_at?a("div",{staticClass:"u-time"},[a("span",{staticClass:"u-tag",class:e.compareTime(t.row.expire_at,"tag")},[e._v(e._s(e.compareTime(t.row.expire_at,"time")))]),a("span",[e._v(e._s(t.row.expire_at))])]):a("span",[e._v("-")])]}}],null,!1,2673936506)}),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"300"}})],1):a("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到任何记录",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-credit-pages",attrs:{background:"","page-size":e.per,"hide-on-single-page":!0,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-bank-card"}),e._v(" 我的卡密")])}],r=(a("fb6a"),a("d3b7"),a("d81d"),a("41cb"));function s(e){return Object(r["e"])().get("/api/my/codekeycode/history",{params:e})}function i(e){return Object(r["e"])().get("/api/my/codesn/history",{params:e})}function l(e,t){return Object(r["e"])().post("/api/my/codesn/".concat(e,"/activation-code"),t)}function c(e,t){return Object(r["e"])().post("/api/my/codekeycode/".concat(e,"/activation-code"),t)}var u=a("674a"),p=(a("2ef0"),{name:"card",data:function(){return{loading:!1,per:10,page:1,total:0,tab:"keycode",list:[],keycode:u["a"],types:u["c"],subtypes:u["b"]}},computed:{params:function(){return{tab:this.tab,pageIndex:this.page,pageSize:this.per}},loadName:function(){return"load"+this.tab.slice(0,1).toUpperCase()+this.tab.slice(1)}},watch:{tab:function(e){this.page=1,this.$router.push({name:"card",query:{tab:e}})},params:{immediate:!0,deep:!0,handler:function(){this[this.loadName]()}}},methods:{loadKeycode:function(){var e=this;this.loading=!0,s(this.params).then((function(t){e.list=t.data.data.list.map((function(e){return e.code="",e.key="",e})),e.total=t.data.data.page.total})).finally((function(){e.loading=!1}))},loadSn:function(){var e=this;this.loading=!0,i(this.params).then((function(t){e.list=t.data.data.list.map((function(e){return e.sn="",e})),e.total=t.data.data.page.total})).finally((function(){e.loading=!1}))},getKeycode:function(e,t){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;c(t.id,{password:o}).then((function(n){var o=n.data.data,r=o.code,s=o.key;t.code=r,t.key=s,a.$set(a.list,e,t)}))}))},getSn:function(e,t){var a=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then((function(n){var o=n.value;l(t.id,{password:o}).then((function(n){t.code=n.data.data.sn,a.$set(a.list,e,t)}))}))},compareTime:function(e,t){var a=new Date(e).getTime()>Date.now()?0:1,n={0:"green",1:"gray"},o={0:"未过期",1:"已过期"};return"tag"==t?n[a]:o[a]},onCopy:function(e){this.$notify({title:"复制成功",message:"复制内容 : "+e.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})}},created:function(){this.$route.query.tab&&(this.tab=this.$route.query.tab)}}),d=p,m=(a("fc8d"),a("2877")),b=Object(m["a"])(d,n,o,!1,null,null,null);t["default"]=b.exports},"551b":function(e,t,a){},"674a":function(e){e.exports=JSON.parse('{"a":{"seasun_ykt":"金山一卡通"},"c":{"tf":"体服激活码","game":"游戏内激活码"},"b":{"jdt_tf":"秘境百强","point_lottery":"积分抽奖","boxcoin":"盒币兑换"}}')},d81d:function(e,t,a){"use strict";var n=a("23e7"),o=a("b727").map,r=a("1dde"),s=r("map");n({target:"Array",proto:!0,forced:!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},fc8d:function(e,t,a){"use strict";a("551b")}}]);
//# sourceMappingURL=chunk-4dff18eb.fc8649f6.js.map