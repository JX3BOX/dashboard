(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cbc01aa"],{"0c1b":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return c}));var a=i("64c7"),r=i("2777"),n=a["__bb"]+"api/wiki/user_item";function s(t){return r["a"].post(n,t)}var l=a["__bb"]+"api/wiki/";function o(t){return r["a"].get(l+t)}var u=a["__bb"]+"api/wiki/user_item/";function c(t){return r["a"].get(u,{params:t})}},"3f87":function(t,e,i){},a623:function(t,e,i){"use strict";var a=i("23e7"),r=i("b727").every,n=i("a640"),s=i("ae40"),l=n("every"),o=s("every");a({target:"Array",proto:!0,forced:!l||!o},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},a64c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-publish-box"},[i("pubheader",{attrs:{name:"百科词条"}},[t._t("header")],2),i("h1",{staticClass:"m-publish-wiki-header"},[t._v("贡献词条")]),i("el-form",{staticClass:"m-publish-wiki",attrs:{"label-position":"left","label-width":"80px"},model:{value:t.primary,callback:function(e){t.primary=e},expression:"primary"}},[i("el-form-item",{staticClass:"m-publish-wiki-type isRequired",attrs:{label:"类别"}},[i("el-radio-group",{model:{value:t.primary.type,callback:function(e){t.$set(t.primary,"type",e)},expression:"primary.type"}},t._l(t.types,(function(e,a){return i("el-radio",{key:a,attrs:{label:a,border:""}},[t._v(t._s(e))])})),1)],1),i("el-form-item",{staticClass:"m-publish-wiki-title isRequired",attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"请输入词条名称",minlength:1,maxlength:50,disabled:!!t.id},model:{value:t.primary.title,callback:function(e){t.$set(t.primary,"title",e)},expression:"primary.title"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-content isRequired",attrs:{label:"内容"}},[i("Tinymce",{attrs:{attachmentEnable:!0,resourceEnable:!0,height:600},model:{value:t.primary.content,callback:function(e){t.$set(t.primary,"content",e)},expression:"primary.content"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-tags",attrs:{label:"标签"}},[t._l(t.primary.tag,(function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",placeholder:"回车以添加"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 添加标签")])],2),i("el-form-item",{staticClass:"m-publish-wiki-remark isRequired",attrs:{label:"批注"}},[i("el-input",{attrs:{maxlength:200,minlength:2,"show-word-limit":"",required:"",rows:3,type:"textarea",placeholder:"填写本次修订说明"},model:{value:t.primary.remark,callback:function(e){t.$set(t.primary,"remark",e)},expression:"primary.remark"}})],1),i("el-form-item",{staticClass:"m-publish-wiki-publish",attrs:{label:""}},[i("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:t.processing},on:{click:t.publish}},[t._v("提交词条")]),i("el-checkbox",{staticClass:"u-anonymous",model:{value:t.primary.anonymous,callback:function(e){t.$set(t.primary,"anonymous",e)},expression:"primary.anonymous"}},[t._v("匿名")])],1)],1)],1)},r=[],n=(i("a623"),i("c975"),i("a434"),i("a0fa")),s=i("aab8"),l=i("221a"),o=(i("c9d2"),i("0c1b")),u={name:"wiki",props:[],data:function(){return{primary:{wiki_id:"",type:"",title:"",content:"",remark:"",tag:[],reference:[],anonymous:0},types:s["a"],inputVisible:!1,inputValue:""}},computed:{id:function(){return this.$route.params.id},processing:function(){return this.$store.state.processing}},watch:{},methods:{publish:function(){var t=this,e=this.validate();e&&(this.$store.commit("startProcess"),this.primary.anonymous=~~this.primary.anonymous,Object(o["a"])(this.primary).then((function(e){t.success(e)})))},success:function(t){this.$message({message:"提交成功请等待审核",type:"success"}),this.$router.push({path:"/"})},loadData:function(){var t=this;Object(o["b"])(this.id).then((function(e){console.log(e.data.data),t.primary=e.data.data,t.primary.anonymous=~~t.primary.anonymous}))},validate:function(){var t=this,e=["title","type","content","remark"],i=e.every((function(e){return!!t.primary[e]}));return i||this.$message.error("请完成必填项"),i},handleClose:function(t){this.primary.tag.splice(this.primary.tag.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.primary.tag.push(t),this.inputVisible=!1,this.inputValue=""}},created:function(){this.id&&this.loadData()},components:{pubheader:n["a"],Tinymce:l["a"]}},c=u,p=(i("efcf0"),i("2877")),m=Object(p["a"])(c,a,r,!1,null,null,null);e["default"]=m.exports},aab8:function(t){t.exports=JSON.parse('{"a":{"noun":"名词","jargon":"术语","video":"视频","music":"音乐","bigbang":"事件","gossip":"八卦","game":"玩法","plot":"剧情","celebrity":"名人","player":"玩家","organization":"帮会","team":"团队","other":"其它"}}')},efcf0:function(t,e,i){"use strict";var a=i("3f87"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-2cbc01aa.2e41825a.js.map