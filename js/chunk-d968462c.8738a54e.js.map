{"version":3,"sources":["webpack:///./src/views/notice/index.vue?18b6","webpack:///./src/service/profile.js","webpack:///./node_modules/sterilizer/main.js","webpack:///./src/views/notice/index.vue","webpack:///./src/views/notice/wechat.vue","webpack:///src/views/notice/wechat.vue","webpack:///./src/views/notice/wechat.vue?4173","webpack:///./src/views/notice/wechat.vue?73d3","webpack:///./src/views/notice/email.vue","webpack:///src/views/notice/email.vue","webpack:///./src/views/notice/email.vue?9864","webpack:///./src/views/notice/email.vue?6955","webpack:///src/views/notice/index.vue","webpack:///./src/views/notice/index.vue?da8b","webpack:///./src/views/notice/index.vue?7833","webpack:///./src/views/notice/email.vue?35ef","webpack:///./src/views/notice/wechat.vue?292d"],"names":["$server","$_https","proxy","getProfile","$cms","get","updateProfile","data","put","updateAvatar","uploadAvatar","post","getFrames","url","__imgPath","axios","getUserOverview","uid","concat","params","__no_cache","updatePassword","checkEmailStatus","checkEmailAvailable","email","user_email","sendBindEmail","sendVerifyEmail","checkOAuth","unbindOAuth","type","popType","delete","_typeof","o","s","Object","prototype","toString","call","match","toLowerCase","defineProperty","exports","value","Sterilizer","str","Error","this","_symbols","$","_","symbols","keys","regs","values","_str","_type","_iter","includes","_toRemove","join","re","RegExp","replace","germ","undefined","Set","_detected","_germ","char","add","_sterilize","probiotics","kill","words","replacement","custom","some","item","sterilizer","Validator","val","opt","isOptional","rule","e","console","error","_invalid","test","is","range","length","options","isIn","status","maxValue","minValue","validator","ins","check","render","_vm","_c","_self","staticClass","attrs","_l","list","i","key","icon","component","tag","staticRenderFns","name","computed","methods","mounted","address","_v","_s","_e","verified","on","changeEmail","verify","checkEmail","model","callback","$$v","expression","slot","staticStyle","bind","User","getInfo","email_validate","email_available","changeEmailMode","ready","_this","then","res","$message","message","_this2","result","isEmail","len","_this3","$alert","confirmButtonText","_this4","parseInt","components","uc","wechat"],"mappings":"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","file":"js/chunk-d968462c.8738a54e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./index.vue?vue&type=style&index=0&id=e35cae80&prod&lang=less&\"","import { $cms,$_https } from \"@jx3box/jx3box-common/js/https.js\";\n\nimport axios from 'axios'\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\n\nconst $server = $_https('server', {\n    proxy: false,\n})\n\n// 1.资料\n// -------------------------------\nfunction getProfile() {\n    return $cms().get(\"/api/cms/user/my/profile\");\n}\nfunction updateProfile(data) {\n    return $cms().put(\"/api/cms/user/my/profile\", data);\n}\n\n// 2.头像\n// -------------------------------\nfunction updateAvatar(data) {\n    return $cms().put(\"/api/cms/user/my/avatar\", data);\n}\nfunction uploadAvatar(data) {\n    return $cms().post(\"/api/cms/upload/avatar\", data);\n}\nfunction getFrames() {\n    // let url = process.env.NODE_ENV == 'development'?'/temp/user_avatar_frame.json':(__imgPath + \"avatar/index.json\")\n    let url = __imgPath + \"avatar/index.json\"\n    return axios.get(url)\n}\nfunction getUserOverview(uid) {\n    return $cms().get(`/api/cms/user/${uid}/info`,{\n        params: {\n            __no_cache: 1\n        }\n    });\n}\n\n// 3.密码\n// -------------------------------\nfunction updatePassword(data) {\n    return $server.post(\"profile/password\", data);\n}\n\n// 4.邮箱\n// -------------------------------\nfunction checkEmailStatus() {\n    return $server.get(\"profile/email/check\");\n}\n\nfunction checkEmailAvailable(email) {\n    return $server.get(\"profile/email/available\", {\n        params: {\n            user_email: email,\n        },\n    });\n}\n\nfunction sendBindEmail(data) {\n    return $server.post(\"profile/email/bind\", data);\n}\n\nfunction sendVerifyEmail() {\n    return $server.post(\"profile/email/verify\");\n}\n\n// 5.互联\nfunction checkOAuth() {\n    return $cms().get(\"/api/cms/account/oauth/status\");\n}\n\nfunction unbindOAuth(type) {\n    return $cms({\n        popType : 'alert',\n    }).delete(`/api/cms/account/oauth/unbind/${type}`);\n}\n\n\nexport {\n    updateProfile,\n    getProfile,\n    updateAvatar,\n    updatePassword,\n    sendVerifyEmail,\n    checkEmailAvailable,\n    checkEmailStatus,\n    sendBindEmail,\n    unbindOAuth,\n    checkOAuth,\n    uploadAvatar,\n    getFrames,\n    getUserOverview,\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * \n * @param {any} o any object to be detected\n * @return {string} the type string\n */\nfunction _typeof(o){\n    var s = Object.prototype.toString.call(o);\n    return s.match(/\\[object (.*?)\\]/)[1].toLowerCase();\n}\n\n/**\n * @desc  Remove specified symbols & charaters\n * @param {string} str string will be sterilized\n * @return {str} the clean string\n * @return {object} a sterilizer object \n */\nclass Sterilizer {\n    constructor(str) {\n\n        if(_typeof(str)!=='string'){\n            throw new Error(\n                \"[Sterilizer::init] params should be string\"\n            );\n        }\n\n        this._symbols = {\n            \"`\": \"`\",\n            \"~\": \"~\",\n            \"!\": \"!\",\n            \"@\": \"@\",\n            \"#\": \"#\",\n            $: \"\\\\$\",\n            \"%\": \"%\",\n            \"^\": \"\\\\^\",\n            \"&\": \"&\",\n            \"*\": \"\\\\*\",\n            \"-\": \"\\\\-\",\n            _: \"_\",\n            \"=\": \"=\",\n            \"+\": \"+\",\n            \"(\": \"\\\\(\",\n            \")\": \"\\\\)\",\n            \"[\": \"\\\\[\",\n            \"]\": \"\\\\]\",\n            \"{\": \"\\\\{\",\n            \"}\": \"\\\\}\",\n            \"|\": \"\\\\|\",\n            \"\\\\\": \"\\\\\\\\\",\n            \"/\": \"/\",\n            \"?\": \"\\\\?\",\n            \":\": \":\",\n            \";\": \";\",\n            \"'\": \"'\",\n            '\"': '\"',\n            \">\": \">\",\n            \"<\": \"<\",\n            \",\": \",\",\n            \".\": \"\\\\.\",\n        };\n        this.symbols = Object.keys(this._symbols);\n        this.regs = Object.values(this._symbols);\n        this.str = str;\n        this._str = str;\n    }\n\n    // output the clean string\n    toString() {\n        return this._str;\n    }\n\n    // detected the object type\n    _detected(o) {\n        let _type = _typeof(o);\n        let _iter = [\"string\", \"array\", \"set\"];\n        if (!_iter.includes(_type))\n            throw new Error(\n                \"[Sterilizer::remove] params should be string|array|set\"\n            );\n        return o;\n    }\n\n    // replaced the specified symbols by RegExp\n    _sterilize(_toRemove) {\n        _toRemove = [..._toRemove].join(\"\");\n        let re = new RegExp(`[${_toRemove}]`, \"gm\");\n        this._str = this._str.replace(re, \"\");\n        return this\n    }\n\n    // remove the specified symbols\n    kill(germ) {\n        let _toRemove = null;\n\n        // build unique toRemove set\n        if (germ == undefined) {\n            _toRemove = new Set(this.regs);\n        } else {\n            this._detected(germ);\n            _toRemove = new Set();\n            let _germ = new Set(germ);\n            for (let char of _germ) {\n                if (this.symbols.includes(char))\n                    _toRemove.add(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove all the symbols exclude args\n    live(probiotics) {\n        this._detected(probiotics);\n\n        // build unique toRemove set\n        let _toRemove = new Set(this.regs);\n        for (let char of probiotics) {\n            if (this.symbols.includes(char)) {\n                _toRemove.delete(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove htmlspecialchars + urlspecialchars\n    safe() {\n        return this.kill([\n            \"&\",\n            \"<\",\n            \">\",\n            '\"',\n            \"'\",\n            \"+\",\n            \":\",\n            \"/\",\n            \"?\",\n            \"=\",\n            \"#\",\n            \"%\",\n        ]);\n    }\n\n    // remove htmlspecialchars\n    removeHSC() {\n        return this.kill([\"&\", \"<\", \">\", '\"', \"'\"]);\n    }\n\n    // remove urlspecialchars\n    removeURL() {\n        return this.kill([\"+\", \":\", \"/\", \"?\", \"=\", \"&\", \"#\", \"%\"]);\n    }\n\n    // remove all the space\n    removeSpace() {\n        this._str = this._str.replace(/\\s/gm, \"\");\n        return this\n    }\n\n    // remove specified charaters\n    remove(words, replacement) {\n        let re = new RegExp(`${words}`, \"gm\");\n        replacement = replacement !== undefined ? replacement : \"\";\n        this._str = this._str.replace(re, replacement);\n        return this\n    }\n\n    // remove all the HTML tags\n    removeHTMLtag() {\n        this._str = this._str.replace(/<[^>]+>/gm, \"\");\n        return this\n    }\n\n    // has symbols\n    isDirty(custom){\n        if(custom){\n            return this.str.includes(custom)\n        }else {\n            return this.symbols.some((item) => {\n                return this.str.includes(item)\n            })\n        }\n    }\n}\n\nfunction sterilizer(str) {\n    return new Sterilizer(str);\n}\n\n/**\n * @desc  Validate input value with sequelize similar interface\n * @param {any} val input will be validated\n * @param {object} opt validate option\n * @return {boolean} true or false\n */\nclass Validator {\n    constructor(val, opt) {\n        this.val = val;\n        this.opt = opt || {};\n    }\n\n    check() {\n        try {\n            // if it sets optional && invalid value\n            if (this.opt.isOptional == true) {\n                if (this.isOptional()) {\n                    return true;\n                }\n            }\n\n            // check all the conditions are right\n            for (let rule in this.opt) {\n                if (rule == \"isOptional\") continue;\n                if (!this[rule](this.opt[rule])) {\n                    return false;\n                }\n            }\n\n            return true;\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    isOptional() {\n        let _invalid = [\"\", undefined, null];\n        return _invalid.includes(this.val) ? true : false;\n    }\n\n    is(re) {\n        if (!re instanceof RegExp)\n            throw new Error(\"[Validator::is] param should be a RegExp\");\n        return re.test(this.val);\n    }\n\n    not(re) {\n        return !this.is(re);\n    }\n\n    len(range) {\n        let length = this.val.length;\n        if (_typeof(range) == \"array\") {\n            return length >= range[0] && length <= range[1];\n        }\n        if (_typeof(range) == \"string\" || _typeof(range) == \"number\") {\n            return length == range;\n        }\n        throw new Error(\"[Validator::len] param should be array|string|number\");\n    }\n\n    isIn(options) {\n        if (_typeof(options) != \"array\") {\n            throw new Error(\"[Validator::isIn] param should be an array\");\n        }\n        return options.includes(this.val) ? true : false;\n    }\n\n    notIn(options) {\n        return !this.isIn(options);\n    }\n\n    isAlpha(status) {\n        return status ? /^[A-Z]+$/i.test(this.val) : true;\n    }\n\n    isAlphanumeric(status) {\n        return status ? /^[A-Z0-9]+$/i.test(this.val) : true;\n    }\n\n    isNumeric(status) {\n        return status ? /^[0-9]+$/.test(this.val) : true;\n    }\n\n    isInt(status) {\n        return status ? /^(?:[-+]?(?:0|[1-9][0-9]*))$/.test(this.val) : true;\n    }\n\n    isFloat(status) {\n        return status ? /^[-+]?[0-9]*\\.?[0-9]+$/.test(this.val) : true;\n    }\n\n    max(maxValue) {\n        return this.val <= maxValue;\n    }\n\n    min(minValue) {\n        return this.val >= minValue;\n    }\n\n    // Chinese Characters\n    isChinese(status) {\n        return status ? /^[\\u4e00-\\u9fa5]+$/.test(this.val) : true;\n    }\n\n    // Chinese Identity Card (should be verfied the validity again)\n    isIdentityCard(status) {\n        return status\n            ? /^[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/.test(\n                this.val\n            )\n            : true;\n    }\n\n    // Chinese Mobile Phone Number\n    isMobilePhone(status) {\n        return status ? /^1[3456789]\\d{9}$/.test(this.val) : true;\n    }\n\n    // Only English domain\n    isEmail(status) {\n        return status\n            ? /^([A-Za-z0-9_\\-\\.\\u4e00-\\u9fa5])+@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,8})$/.test(this.val)\n            : true;\n    }\n\n    // not empty allowed\n    notEmpty(status){\n        return status\n            ? !/\\s/gm.test(this.val)\n            : true;\n    }\n}\n\nfunction validator(val, opt) {\n    const ins = new Validator(val, opt);\n    return ins.check();\n}\n\nexports.Sterilizer = Sterilizer;\nexports.Validator = Validator;\nexports.sterilizer = sterilizer;\nexports.validator = validator;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('uc',{staticClass:\"m-dashboard-notice\"},[_c('div',{staticClass:\"m-dashboard-content\"},[_c('el-alert',{staticClass:\"u-tip\",attrs:{\"title\":\"配置你的联系方式以接收魔盒通知\",\"type\":\"warning\",\"show-icon\":\"\"}}),_c('div',{staticClass:\"m-dashboard-content-list\"},_vm._l((_vm.list),function(item,i){return _c('div',{key:i,staticClass:\"m-item\"},[_c('img',{staticClass:\"u-icon\",attrs:{\"svg-inline\":\"\",\"src\":_vm.icon(item.key)}}),_c(item.component,{tag:\"component\"})],1)}),0)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-notice-wechat\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"m-notice-wechat\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"wechat\",\r\n    data: function () {\r\n        return {\r\n            status: null,\r\n        };\r\n    },\r\n    computed: {},\r\n    methods: {},\r\n    mounted: function () {},\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.m-notice-wechat {\r\n    .flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wechat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wechat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wechat.vue?vue&type=template&id=277d7e98&\"\nimport script from \"./wechat.vue?vue&type=script&lang=js&\"\nexport * from \"./wechat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wechat.vue?vue&type=style&index=0&id=277d7e98&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-notice-email\"},[(_vm.address)?_c('span',{staticClass:\"u-address\"},[_vm._v(_vm._s(_vm.address))]):_vm._e(),(_vm.status == true)?[(_vm.verified == true)?[_c('el-button',{staticClass:\"u-button\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEmail}},[_vm._v(\"修改邮箱\")])]:_vm._e(),(_vm.verified == false)?[_c('el-button',{staticClass:\"u-button\",attrs:{\"type\":\"warning\",\"icon\":\"el-icon-s-promotion\"},on:{\"click\":_vm.verify}},[_vm._v(\"验证邮箱\")]),_c('el-button',{staticClass:\"u-button\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEmail}},[_vm._v(\"修改邮箱\")])]:_vm._e()]:_vm._e(),(_vm.status == false)?[_c('el-input',{staticClass:\"u-text u-email\",attrs:{\"placeholder\":\"邮箱地址\",\"minlength\":\"3\",\"maxlength\":\"50\"},on:{\"change\":_vm.checkEmail},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}},[_c('template',{slot:\"prepend\"},[_c('i',{staticClass:\"el-icon-message\",staticStyle:{\"font-size\":\"20px\"}})]),_c('el-button',{attrs:{\"slot\":\"append\"},on:{\"click\":_vm.bind},slot:\"append\"},[_vm._v(\" 确定\")])],2)]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"m-notice-email\">\r\n        <span class=\"u-address\" v-if=\"address\">{{ address }}</span>\r\n        <template v-if=\"status == true\">\r\n            <template v-if=\"verified == true\">\r\n                <el-button type=\"primary\" class=\"u-button\" @click=\"changeEmail\" icon=\"el-icon-edit\">修改邮箱</el-button>\r\n            </template>\r\n            <template v-if=\"verified == false\">\r\n                <el-button type=\"warning\" class=\"u-button\" @click=\"verify\" icon=\"el-icon-s-promotion\"\r\n                    >验证邮箱</el-button\r\n                >\r\n                <el-button type=\"primary\" class=\"u-button\" @click=\"changeEmail\" icon=\"el-icon-edit\">修改邮箱</el-button>\r\n            </template>\r\n        </template>\r\n        <template v-if=\"status == false\">\r\n            <el-input\r\n                class=\"u-text u-email\"\r\n                v-model=\"email\"\r\n                placeholder=\"邮箱地址\"\r\n                minlength=\"3\"\r\n                maxlength=\"50\"\r\n                @change=\"checkEmail\"\r\n            >\r\n                <template slot=\"prepend\">\r\n                    <i class=\"el-icon-message\" style=\"font-size: 20px\"></i>\r\n                </template>\r\n                <el-button slot=\"append\" @click=\"bind\"> 确定</el-button>\r\n            </el-input>\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { validator } from \"sterilizer\";\r\nimport User from \"@jx3box/jx3box-common/js/user\";\r\nimport { sendVerifyEmail, sendBindEmail, checkEmailAvailable, checkEmailStatus } from \"@/service/profile\";\r\n\r\nexport default {\r\n    name: \"email\",\r\n    data: function () {\r\n        return {\r\n            status: null,\r\n            uid: User.getInfo().uid,\r\n            address: \"\",\r\n            verified: null,\r\n\r\n            email: \"\",\r\n            email_validate: false,\r\n            email_available: false,\r\n\r\n            changeEmailMode: false,\r\n        };\r\n    },\r\n    computed: {\r\n        ready: function () {\r\n            return this.email_validate && this.email_available;\r\n        },\r\n    },\r\n    methods: {\r\n        verify: function () {\r\n            sendVerifyEmail(this.uid).then((res) => {\r\n                this.$message({\r\n                    message: \"邮件已发送请查收\",\r\n                    type: \"success\",\r\n                });\r\n            });\r\n        },\r\n        checkEmail: function () {\r\n            // 如果为空\r\n            if (this.email == \"\") {\r\n                this.email_validate = false;\r\n                this.email_available = false;\r\n                return;\r\n            }\r\n\r\n            // 校验格式\r\n            let result = validator(this.email, {\r\n                isEmail: true,\r\n                len: [3, 50],\r\n            });\r\n            this.email_validate = result;\r\n            if (!result) return this.$message.error(\"邮箱格式不正确或长度超出限制\");\r\n\r\n            // 邮箱是否可用\r\n            checkEmailAvailable(this.email).then((res) => {\r\n                this.email_available = res.data.data;\r\n                if (this.email_available == false) this.$message.error(\"邮箱已被使用,请更换\");\r\n            });\r\n        },\r\n        bind: function () {\r\n            if (!this.ready) return;\r\n\r\n            sendBindEmail({\r\n                uid: this.uid,\r\n                email: this.email,\r\n            }).then(() => {\r\n                this.$alert(\"申请提交成功,请前往邮箱验证\", \"消息\", {\r\n                    confirmButtonText: \"确定\",\r\n                });\r\n                this.status = true;\r\n                this.verified = false;\r\n                this.address = this.email;\r\n            });\r\n        },\r\n        changeEmail: function () {\r\n            this.status = false;\r\n            this.changeEmailMode = true;\r\n        },\r\n    },\r\n    mounted: function () {\r\n        this.uid = User.getInfo().uid;\r\n        checkEmailStatus().then((res) => {\r\n            if (res.data.data.email) {\r\n                this.status = true;\r\n                this.address = res.data.data.email;\r\n                this.verified = !!parseInt(res.data.data.verified);\r\n            } else {\r\n                this.status = false;\r\n            }\r\n        });\r\n    },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.m-notice-email {\r\n    .flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./email.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./email.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./email.vue?vue&type=template&id=5e674417&\"\nimport script from \"./email.vue?vue&type=script&lang=js&\"\nexport * from \"./email.vue?vue&type=script&lang=js&\"\nimport style0 from \"./email.vue?vue&type=style&index=0&id=5e674417&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <uc class=\"m-dashboard-notice\">\r\n        <div class=\"m-dashboard-content\">\r\n            <el-alert class=\"u-tip\" title=\"配置你的联系方式以接收魔盒通知\" type=\"warning\" show-icon> </el-alert>\r\n            <div class=\"m-dashboard-content-list\">\r\n                <div class=\"m-item\" v-for=\"(item, i) in list\" :key=\"i\">\r\n                    <img class=\"u-icon\" svg-inline :src=\"icon(item.key)\" />\r\n                    <component :is=\"item.component\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </uc>\r\n</template>\r\n\r\n<script>\r\nimport uc from \"@/components/uc.vue\";\r\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\r\nimport wechat from \"./wechat.vue\";\r\nimport email from \"./email.vue\";\r\nexport default {\r\n    name: \"notice\",\r\n    components: { uc, wechat, email },\r\n    data: function () {\r\n        return {\r\n            list: [\r\n                { key: \"email\", name: \"邮箱\", component: email },\r\n                { key: \"wechat\", name: \"微信\", component: wechat },\r\n            ],\r\n        };\r\n    },\r\n    methods: {\r\n        icon: function (type) {\r\n            return __imgPath + \"image/connect/\" + type + \".svg\";\r\n        },\r\n    },\r\n    mounted: function () {},\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.m-dashboard-content-list {\r\n    .flex;\r\n    box-sizing: border-box;\r\n    flex-direction: column;\r\n    gap: 20px;\r\n    .m-item {\r\n        .flex;\r\n        padding: 30px 10px 10px 10px;\r\n        box-sizing: border-box;\r\n        gap: 60px;\r\n        border-top: 1px dashed #ddd;\r\n        &:first-child {\r\n            border: 0;\r\n        }\r\n    }\r\n    img,\r\n    svg {\r\n        .size(40px);\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e35cae80&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e35cae80&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./email.vue?vue&type=style&index=0&id=5e674417&prod&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wechat.vue?vue&type=style&index=0&id=277d7e98&prod&lang=less&\""],"sourceRoot":""}