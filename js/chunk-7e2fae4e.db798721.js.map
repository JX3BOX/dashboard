{"version":3,"sources":["webpack:///./src/publish/knowledge.vue?3bd5","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/@jx3box/jx3box-common/js/helper.js","webpack:///./src/publish/knowledge.vue?45a0","webpack:///./src/service/knowledge.js","webpack:///src/publish/knowledge.vue","webpack:///./src/publish/knowledge.vue?723f","webpack:///./src/publish/knowledge.vue","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./node_modules/@jx3box/jx3box-common/main.js"],"names":["$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","$helper","a","create","withCredentials","baseURL","WikiPost","type","id","supply","method","url","headers","Accept","params","source_id","post_id","data","stringify","post","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_t","_v","search_handle","options","loading","model","value","callback","$$v","$set","expression","_l","item","key","name","domProps","_s","label","on","$event","dialogVisible","tag","tags","splice","ref","handleInputConfirm","nativeOn","indexOf","_k","keyCode","inputValue","showInput","processing","publish","knowledge","_e","slot","create_knowledge","staticRenderFns","get_menus","get_list","qs","component","fails","non","METHOD_NAME","JX3BOX","SEO"],"mappings":"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","file":"js/chunk-7e2fae4e.db798721.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./knowledge.vue?vue&type=style&index=0&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","import axios from 'axios'\nimport qs from \"qs\";\nimport { __helperUrl } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { installInterceptors } from \"./axios\";\nconst $helper = axios.create({\n    withCredentials: true,\n    baseURL:__helperUrl\n});\ninstallInterceptors($helper);\n\n// 百科攻略\nlet WikiPost = {\n    // 获取最新攻略\n    newest(type, id, supply = 1) {\n        if (!id) return;\n        return $helper({\n            method: \"GET\",\n            url: `/api/wiki/post`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: { type: type, source_id: id, supply: supply },\n        });\n    },\n\n    // 获取最新攻略列表\n    newests(type) {\n        return $helper({\n            method: \"GET\",\n            url: `/api/wiki/posts/newest`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: { type: type },\n        });\n    },\n\n    // 获取历史版本\n    versions(type, id) {\n        if (!id) return;\n        return $helper({\n            method: \"GET\",\n            url: `/api/wiki/post/versions`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: { type: type, source_id: id },\n        });\n    },\n\n    // 获取指定攻略\n    view(post_id) {\n        if (!post_id) return null;\n        return $helper({\n            method: \"GET\",\n            url: `/api/wiki/post/${post_id}`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n        });\n    },\n\n    // 创建/更新攻略\n    save(params) {\n        return $helper({\n            method: \"POST\",\n            url: `/api/wiki/post`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            data: qs.stringify({ post: params }),\n        });\n    },\n\n    // 我的百科攻略列表\n    myList(params) {\n        return $helper({\n            method: \"GET\",\n            url: `/api/my/wiki/posts`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: params,\n        });\n    },\n\n    // 删除我的百科攻略\n    myRemove(post_id) {\n        if (!post_id) return null;\n        return $helper({\n            method: \"PUT\",\n            url: `/api/my/wiki/post/${post_id}/remove`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n        });\n    },\n};\n\n// 百科评论\nlet WikiComment = {\n    // 百科评论列表\n    list(type, id) {\n        if (!id) return;\n        return $helper({\n            method: \"GET\",\n            url: `/api/wiki/comments`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: { type: type, source_id: id },\n        });\n    },\n\n    // 创建百科评论\n    save(params) {\n        return $helper({\n            method: \"POST\",\n            url: `/api/wiki/comment`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            data: qs.stringify({ comment: params }),\n        });\n    },\n\n    // 我的百科评论列表\n    myList(params) {\n        return $helper({\n            method: \"GET\",\n            url: `/api/my/wiki/comments`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n            params: params,\n        });\n    },\n\n    // 删除我的百科评论\n    myRemove(comment_id) {\n        if (!comment_id) return null;\n        return $helper({\n            method: \"PUT\",\n            url: `/api/my/wiki/comment/${comment_id}/remove`,\n            headers: { Accept: \"application/prs.helper.v2+json\" },\n        });\n    },\n};\n\n// 面包屑\nfunction getBread(channel) {\n    return $helper.get(\"/api/breadcrumb/\" + channel, {\n        headers: { Accept: \"application/prs.helper.v2+json\" },\n    });\n}\n\nexport { WikiPost, WikiComment, getBread };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-box\"},[_c('pubheader',{attrs:{\"name\":\"通识百科\"}},[_vm._t(\"header\")],2),_c('el-form',{staticClass:\"m-publish-post\"},[_c('div',{staticClass:\"m-publish-source\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"选择通识 *\")]),_c('el-select',{staticClass:\"u-source-id\",attrs:{\"filterable\":\"\",\"remote\":\"\",\"disabled\":!!_vm.post.id,\"placeholder\":\"通过输入通识名称进行搜索\",\"remote-method\":_vm.search_handle,\"loading\":_vm.options.loading},model:{value:(_vm.post.source_id),callback:function ($$v) {_vm.$set(_vm.post, \"source_id\", $$v)},expression:\"post.source_id\"}},_vm._l((_vm.options.sources),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}},[_c('div',{staticClass:\"u-option\"},[_c('span',{staticClass:\"u-type\",domProps:{\"textContent\":_vm._s(item.label)}}),_c('span',{staticClass:\"u-name\",domProps:{\"textContent\":_vm._s(item.name)}})])])}),1),_c('p',{staticClass:\"m-knowledge-add\"},[_c('span',[_vm._v(\"如没有合适的通识选择，可点击此处\")]),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加通识\")]),_c('span',[_vm._v(\"Note：添加完成后的通识需要经过管理员审核通过后才会在通识百科上展示哦\")])],1)],1),_c('div',{staticClass:\"m-publish-remark\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"修订说明 *\")]),_c('el-input',{attrs:{\"maxlength\":200,\"minlength\":1,\"show-word-limit\":\"\",\"required\":\"\",\"placeholder\":\"请简单描述一下本次修订说明\"},model:{value:(_vm.post.remark),callback:function ($$v) {_vm.$set(_vm.post, \"remark\", $$v)},expression:\"post.remark\"}})],1),_c('div',{staticClass:\"m-publish-content\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"通识正文 *\")]),_c('Tinymce',{attrs:{\"attachmentEnable\":true,\"resourceEnable\":true,\"height\":600},model:{value:(_vm.post.content),callback:function ($$v) {_vm.$set(_vm.post, \"content\", $$v)},expression:\"post.content\"}})],1),_c('div',{staticClass:\"m-publish-tags\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"通识标签\")]),_vm._l((_vm.post.tags),function(tag,key){return _c('el-tag',{key:key,attrs:{\"closable\":\"\",\"disable-transitions\":false},on:{\"close\":function($event){return _vm.post.tags.splice(key, 1)}}},[_vm._v(_vm._s(tag)+\" \")])}),(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\",\"placeholder\":\"回车以添加\"},on:{\"blur\":_vm.handleInputConfirm},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=$$v},expression:\"inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showInput}},[_vm._v(\"+ 添加标签 \")])],2),_c('div',{staticClass:\"m-publish-commit\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}}),_c('el-button',{staticClass:\"u-publish\",attrs:{\"icon\":\"el-icon-s-promotion\",\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.publish}},[_vm._v(\"提交通识 \")])],1)]),_c('el-dialog',{attrs:{\"title\":\"通识添加\",\"visible\":_vm.dialogVisible,\"width\":\"640px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"open\":function($event){_vm.knowledge = { type: '', name: '' }}}},[(_vm.knowledge)?_c('el-form',{staticClass:\"m-publish-knowledge\"},[_c('div',{staticClass:\"m-publish-type\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"类别 *\")]),(_vm.types)?_c('el-radio-group',{model:{value:(_vm.knowledge.type),callback:function ($$v) {_vm.$set(_vm.knowledge, \"type\", $$v)},expression:\"knowledge.type\"}},_vm._l((_vm.types),function(type,key){return _c('el-radio',{key:type.name,attrs:{\"label\":key,\"border\":\"\"}},[_vm._v(_vm._s(type.label)+\" \")])}),1):_vm._e()],1),_c('div',{staticClass:\"m-publish-name\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"名称 *\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入通识名称\",\"minlength\":1,\"maxlength\":50,\"show-word-limit\":\"\"},model:{value:(_vm.knowledge.name),callback:function ($$v) {_vm.$set(_vm.knowledge, \"name\", $$v)},expression:\"knowledge.name\"}})],1)]):_vm._e(),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.create_knowledge}},[_vm._v(\"添加通识\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $helper } from \"./axios\";\nimport qs from \"qs\";\n\nfunction get_menus() {\n    return $helper({\n        method: \"GET\",\n        url: `/api/knowledge/menus`,\n    });\n}\n\nfunction get_list(params) {\n    return $helper({\n        method: \"GET\",\n        url: `/api/knowledges`,\n        params: params,\n    });\n}\n\nfunction create_knowledge(params) {\n    return $helper({\n        method: \"POST\",\n        url: `/api/knowledge`,\n        data: qs.stringify({ knowledge: params }),\n    });\n}\n\nexport { get_menus, get_list, create_knowledge };\n","<template>\n    <div class=\"m-publish-box\">\n        <!-- 头部 -->\n        <pubheader name=\"通识百科\">\n            <slot name=\"header\"></slot>\n        </pubheader>\n\n        <el-form class=\"m-publish-post\">\n            <div class=\"m-publish-source\">\n                <el-divider content-position=\"left\">选择通识 *</el-divider>\n                <el-select\n                    class=\"u-source-id\"\n                    v-model=\"post.source_id\"\n                    filterable\n                    remote\n                    :disabled=\"!!post.id\"\n                    placeholder=\"通过输入通识名称进行搜索\"\n                    :remote-method=\"search_handle\"\n                    :loading=\"options.loading\"\n                >\n                    <el-option\n                        v-for=\"item in options.sources\"\n                        :key=\"item.id\"\n                        :label=\"item.name\"\n                        :value=\"item.id\"\n                    >\n                        <div class=\"u-option\">\n                            <span class=\"u-type\" v-text=\"item.label\"></span>\n                            <span class=\"u-name\" v-text=\"item.name\"></span>\n                        </div>\n                    </el-option>\n                </el-select>\n                <p class=\"m-knowledge-add\">\n                    <span>如没有合适的通识选择，可点击此处</span>\n                    <el-button\n                        type=\"success\"\n                        @click=\"dialogVisible = true\"\n                        size=\"mini\"\n                        >添加通识</el-button\n                    >\n                    <span\n                        >Note：添加完成后的通识需要经过管理员审核通过后才会在通识百科上展示哦</span\n                    >\n                </p>\n            </div>\n\n            <div class=\"m-publish-remark\">\n                <el-divider content-position=\"left\">修订说明 *</el-divider>\n                <el-input\n                    v-model=\"post.remark\"\n                    :maxlength=\"200\"\n                    :minlength=\"1\"\n                    show-word-limit\n                    required\n                    placeholder=\"请简单描述一下本次修订说明\"\n                ></el-input>\n            </div>\n\n            <div class=\"m-publish-content\">\n                <el-divider content-position=\"left\">通识正文 *</el-divider>\n                <Tinymce\n                    v-model=\"post.content\"\n                    :attachmentEnable=\"true\"\n                    :resourceEnable=\"true\"\n                    :height=\"600\"\n                />\n            </div>\n\n            <div class=\"m-publish-tags\">\n                <el-divider content-position=\"left\">通识标签</el-divider>\n                <el-tag\n                    :key=\"key\"\n                    v-for=\"(tag, key) in post.tags\"\n                    closable\n                    :disable-transitions=\"false\"\n                    @close=\"post.tags.splice(key, 1)\"\n                    >{{ tag }}\n                </el-tag>\n                <el-input\n                    class=\"input-new-tag\"\n                    v-if=\"inputVisible\"\n                    v-model=\"inputValue\"\n                    ref=\"saveTagInput\"\n                    size=\"small\"\n                    placeholder=\"回车以添加\"\n                    @keyup.enter.native=\"handleInputConfirm\"\n                    @blur=\"handleInputConfirm\"\n                >\n                </el-input>\n                <el-button\n                    v-else\n                    class=\"button-new-tag\"\n                    size=\"small\"\n                    @click=\"showInput\"\n                    >+ 添加标签\n                </el-button>\n            </div>\n\n            <div class=\"m-publish-commit\">\n                <el-divider content-position=\"left\"></el-divider>\n                <el-button\n                    class=\"u-publish\"\n                    icon=\"el-icon-s-promotion\"\n                    type=\"primary\"\n                    @click=\"publish\"\n                    :disabled=\"processing\"\n                    >提交通识\n                </el-button>\n            </div>\n        </el-form>\n\n        <!-- 通识创建表单 -->\n        <el-dialog\n            title=\"通识添加\"\n            :visible.sync=\"dialogVisible\"\n            width=\"640px\"\n            @open=\"knowledge = { type: '', name: '' }\"\n        >\n            <el-form class=\"m-publish-knowledge\" v-if=\"knowledge\">\n                <div class=\"m-publish-type\">\n                    <el-divider content-position=\"left\">类别 *</el-divider>\n                    <el-radio-group v-if=\"types\" v-model=\"knowledge.type\">\n                        <el-radio\n                            :label=\"key\"\n                            border\n                            v-for=\"(type, key) in types\"\n                            :key=\"type.name\"\n                            >{{ type.label }}\n                        </el-radio>\n                    </el-radio-group>\n                </div>\n\n                <div class=\"m-publish-name\">\n                    <el-divider content-position=\"left\">名称 *</el-divider>\n                    <el-input\n                        v-model=\"knowledge.name\"\n                        placeholder=\"请输入通识名称\"\n                        :minlength=\"1\"\n                        :maxlength=\"50\"\n                        show-word-limit\n                    ></el-input>\n                </div>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取消</el-button>\n                <el-button\n                    type=\"primary\"\n                    :disabled=\"processing\"\n                    @click=\"create_knowledge\"\n                    >添加通识</el-button\n                >\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport pubheader from \"@/components/publish/pubheader.vue\";\nimport Tinymce from \"@jx3box/jx3box-editor/src/Tinymce\";\n\n// 本地依赖\nimport {JX3BOX} from \"@jx3box/jx3box-common\";\nimport {WikiPost} from \"@jx3box/jx3box-common/js/helper\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport {get_menus, get_list, create_knowledge} from \"../service/knowledge\";\n\nexport default {\n    name: \"knowledge\",\n    data() {\n        return {\n            dialogVisible: false,\n            knowledge: null,\n            post: {\n                id: \"\",\n                content: \"\",\n                source_id: \"\",\n                remark: \"\",\n                tags: [],\n            },\n            types: null,\n            options: {\n                sources: null,\n                loading: false,\n            },\n            inputVisible: false,\n            inputValue: \"\",\n        };\n    },\n    computed: {\n        processing() {\n            return this.$store.state.processing;\n        },\n    },\n    methods: {\n        create_knowledge() {\n            this.$store.commit(\"startProcess\");\n            create_knowledge({\n                type: this.knowledge.type,\n                name: this.knowledge.name,\n            }).then((res) => {\n                res = res.data;\n                if (res.code === 200) {\n                    // 自动选择已添加项\n                    this.post.source_id = res.data.id;\n                    this.$message({ message: \"通识添加成功\", type: \"success\" });\n                    this.dialogVisible = false;\n                } else {\n                    this.$message({\n                        message: `${res.message}`,\n                        type: \"warning\",\n                    });\n                }\n            }).finally(()=>{\n                this.$store.commit('endProcess');\n            });\n        },\n        // 通识搜索\n        search_handle(keyword = '') {\n            this.options.loading = true;\n            get_list({\n                keyword: keyword,\n                include_pending: 1,\n                limit: 10,\n            }).then((res) => {\n                res = res.data;\n                if (res.code === 200) this.options.sources = res.data.data;\n                this.options.loading = false;\n            });\n        },\n        validate() {\n            let result = [\"source_id\", \"content\", \"remark\"].every((prop) => {\n                return !!this.post[prop];\n            });\n            if (!result) this.$message.error(\"请完成必填项\");\n            return result;\n        },\n        publish: function() {\n            // 表单校验\n            if (!this.validate()) return;\n            this.$store.commit(\"startProcess\");\n            WikiPost.save({\n                type: \"knowledge\",\n                source_id: this.post.source_id,\n                user_nickname: User.getInfo().name,\n                content: this.post.content,\n                remark: this.post.remark,\n                tags: this.post.tags,\n            }).then((res) => {\n                res = res.data;\n                if (res.code === 200) {\n                    this.$message({message: \"提交成功，请等待审核\", type: \"success\"});\n                    setTimeout(() => {\n                        location.href = JX3BOX.__Root + '/dashboard/#/wiki';\n                    }, 500);\n                } else {\n                    this.$message({message: `${res.message}`, type: \"warning\"});\n                    this.$store.commit('endProcess');\n                }\n            }).catch(()=>{\n                this.$store.commit('endProcess');\n            });\n        },\n        showInput() {\n            this.inputVisible = true;\n            this.$nextTick((_) => {\n                this.$refs.saveTagInput.$refs.input.focus();\n            });\n        },\n        handleInputConfirm() {\n            let inputValue = this.inputValue.trim();\n            if (inputValue) {\n                this.post.tags.push(inputValue);\n            }\n            this.inputVisible = false;\n            this.inputValue = \"\";\n        },\n    },\n    created() {\n        // 初始化搜索列表\n        this.search_handle('');\n        // 获取百科ID并通过watch获取攻略\n        let id = this.$route.params.source_id;\n        this.post.source_id = id ? id : \"\";\n\n        get_menus().then((res) => {\n            res = res.data;\n            if (res.code === 200) this.types = res.data.menus;\n        });\n    },\n    watch: {\n        \"post.source_id\": {\n            handler() {\n                if (!this.post.source_id) return;\n                WikiPost.newest(\"knowledge\", this.post.source_id, 0).then(\n                    (res) => {\n                        let data = res.data;\n                        if (data.code === 200) {\n                            // 数据填充\n                            let post = data.data.post;\n                            let source = data.data.source;\n\n                            if (post) {\n                                this.post.source_id = parseInt(post.source_id);\n                                this.post.remark = \"\";\n                                this.post.content = post.content;\n                                this.post.tags = post.tags || [];\n                            } else {\n                                this.post.source_id = this.post.source_id\n                                    ? parseInt(this.post.source_id)\n                                    : \"\";\n                                this.post.remark = \"\";\n                                this.post.content = \"\";\n                                this.post.tags = [];\n                            }\n\n                            if (source) {\n                                // 将选择项恢复至下拉框\n                                let exist = false;\n                                this.options.sources =\n                                    this.options.sources || [];\n                                for (let index in this.options.sources) {\n                                    if (this.options.sources[index].id == source.id) {\n                                        exist = true;\n                                        break;\n                                    }\n                                }\n                                if (!exist) this.options.sources.push(source);\n                            }\n                        }\n                    }\n                );\n            },\n        },\n    },\n    components: {\n        pubheader,\n        Tinymce,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/publish/knowledge.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./knowledge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./knowledge.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./knowledge.vue?vue&type=template&id=5bac2bc7&\"\nimport script from \"./knowledge.vue?vue&type=script&lang=js&\"\nexport * from \"./knowledge.vue?vue&type=script&lang=js&\"\nimport style0 from \"./knowledge.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","const JX3BOX = require(\"./data/jx3box\");\nconst SEO = require(\"./data/seo\");\n\nmodule.exports = { JX3BOX, SEO };\n"],"sourceRoot":""}