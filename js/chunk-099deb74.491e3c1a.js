(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-099deb74"],{"33de":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-dashboard m-dashboard-work m-dashboard-msg"},[a("div",{staticClass:"m-dashboard-msg-header"},[t._m(0),a("el-button",{staticClass:"u-read-all",attrs:{type:"primary",size:"mini",disabled:!t.unread_total},on:{click:function(e){return t.read(null)}}},[a("i",{staticClass:"el-icon el-icon-check"}),a("span",{domProps:{textContent:t._s("全部设为已读")}})])],1),a("el-input",{staticClass:"m-dashboard-work-search",attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changePage(1)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("template",{slot:"prepend"},[t._v("关键词")]),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.changePage(1)}},slot:"append"})],2),t.data.length?a("ul",{staticClass:"m-dashboard-box-list"},t._l(t.data,(function(e,n){return a("li",{directives:[{name:"show",rawName:"v-show",value:0==e.deleted,expression:"item.deleted == 0"}],key:n,class:{on:1==e.read}},[a("div",{staticClass:"u-primary"},[a("span",{staticClass:"u-content"},[1==e.read?a("span",{staticClass:"u-label u-hasChecked"},[t._v("已读")]):a("span",{staticClass:"u-label u-hasNotChecked"},[t._v("未读")]),a("span",{domProps:{innerHTML:t._s(e.content)}}),t.hasLink(e)?a("a",{staticClass:"u-msg-link",attrs:{href:t._f("msgLink")(e),target:"_blank"},on:{click:function(a){return t.read(e)}}},[a("i",{staticClass:"el-icon-link"}),t._v(" 点击查看")]):t._e()]),a("time",{staticClass:"u-time"},[a("i",{staticClass:"el-icon-phone-outline"}),t._v(" "+t._s(t.dateFormat(~~e.created)))])]),a("el-button-group",{staticClass:"u-action"},[a("el-button",{attrs:{size:"mini",icon:"el-icon-check",title:"设为已读",disabled:1==e.read},on:{click:function(a){return t.read(e)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(a){return t.del(e)}}})],1)],1)})),0):a("el-alert",{staticClass:"m-dashboard-box-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),a("el-pagination",{staticClass:"m-dashboard-box-pages",attrs:{background:"","hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.changePage}})],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-bell"}),t._v(" 我的消息 ")])}],o=(a("caad"),a("99af"),a("41cb")),i=a("4328"),s=a.n(i);function c(t){return Object(o["c"])().get("/api/messages?".concat(s.a.stringify(t)))}function l(t){var e={};return t&&(e.ids=t),Object(o["c"])().put("/api/messages/read",s.a.stringify(e))}function u(t){return Object(o["c"])().put("/api/messages/remove",s.a.stringify({ids:t}))}var d=a("e4f1"),f=a("85e4"),h=a("e762"),p=["namespace"],g={name:"msg",props:[],data:function(){return{keyword:"",type:"all",data:[],unread_total:0,total:1,page:1}},methods:{changePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,c({where:{content:this.keyword},page:e}).then((function(e){t.unread_total=e.data.data.unread_count,t.total=e.data.data.total,t.data=e.data.data.messages}))},read:function(t){var e=this;l(t?[t.ID]:null).then((function(a){200===a.data.code?t?t.read=1:e.changePage(e.page):e.$notify.error({title:a.data.message})}))},del:function(t){var e=this;u([t.ID]).then((function(a){200===a.data.code?t.deleted=Math.round(new Date/1e3):e.$notify.error({title:a.data.message})}))},dateFormat:function(t){return Object(d["b"])(new Date(1e3*t))},hasLink:function(t){return!p.includes(t.source_type)&&!(!t.source_id||!t.source_type)}},filters:{msgLink:function(t){var e=t.source_id,a=t.source_type;if("birthday"==a)return"/author/".concat(t.user_id,"/#/birthday?code=")+h["a"].encode(e);if("sign"==a)return"/dashboard/#/cooperation";if("callback"==a){var n=encodeURIComponent(h["a"].encode(JSON.stringify(t)));return"/dashboard/#/".concat(t.type,"/").concat(t.subtype,"?info=").concat(n)}return Object(f["getLink"])(a,e)}},mounted:function(){this.changePage()}},b=g,m=(a("8034"),a("2877")),y=Object(m["a"])(b,n,r,!1,null,"2f05dd85",null);e["default"]=y.exports},8034:function(t,e,a){"use strict";a("b62b")},b62b:function(t,e,a){},e762:function(t,e,a){"use strict";a.d(e,"a",(function(){return J}));const n="3.7.2",r=n,o="function"===typeof atob,i="function"===typeof btoa,s="function"===typeof Buffer,c="function"===typeof TextDecoder?new TextDecoder:void 0,l="function"===typeof TextEncoder?new TextEncoder:void 0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=Array.prototype.slice.call(u),f=(t=>{let e={};return t.forEach((t,a)=>e[t]=a),e})(d),h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),g="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),b=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),m=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),y=t=>{let e,a,n,r,o="";const i=t.length%3;for(let s=0;s<t.length;){if((a=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(r=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=a<<16|n<<8|r,o+=d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]}return i?o.slice(0,i-3)+"===".substring(i):o},C=i?t=>btoa(t):s?t=>Buffer.from(t,"binary").toString("base64"):y,A=s?t=>Buffer.from(t).toString("base64"):t=>{const e=4096;let a=[];for(let n=0,r=t.length;n<r;n+=e)a.push(p.apply(null,t.subarray(n,n+e)));return C(a.join(""))},k=(t,e=!1)=>e?b(A(t)):A(t),v=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?p(192|e>>>6)+p(128|63&e):p(224|e>>>12&15)+p(128|e>>>6&63)+p(128|63&e)}e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return p(240|e>>>18&7)+p(128|e>>>12&63)+p(128|e>>>6&63)+p(128|63&e)},_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,x=t=>t.replace(_,v),w=s?t=>Buffer.from(t,"utf8").toString("base64"):l?t=>A(l.encode(t)):t=>C(x(t)),B=(t,e=!1)=>e?b(w(t)):w(t),F=t=>B(t,!0),U=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),a=e-65536;return p(55296+(a>>>10))+p(56320+(1023&a));case 3:return p((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return p((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},P=t=>t.replace(U,O),D=t=>{if(t=t.replace(/\s+/g,""),!h.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,a,n,r="";for(let o=0;o<t.length;)e=f[t.charAt(o++)]<<18|f[t.charAt(o++)]<<12|(a=f[t.charAt(o++)])<<6|(n=f[t.charAt(o++)]),r+=64===a?p(e>>16&255):64===n?p(e>>16&255,e>>8&255):p(e>>16&255,e>>8&255,255&e);return r},E=o?t=>atob(m(t)):s?t=>Buffer.from(t,"base64").toString("binary"):D,S=s?t=>g(Buffer.from(t,"base64")):t=>g(E(t),t=>t.charCodeAt(0)),j=t=>S(L(t)),z=s?t=>Buffer.from(t,"base64").toString("utf8"):c?t=>c.decode(S(t)):t=>P(E(t)),L=t=>m(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),R=t=>z(L(t)),I=t=>{if("string"!==typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},T=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Z=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,T(e));t("fromBase64",(function(){return R(this)})),t("toBase64",(function(t){return B(this,t)})),t("toBase64URI",(function(){return B(this,!0)})),t("toBase64URL",(function(){return B(this,!0)})),t("toUint8Array",(function(){return j(this)}))},$=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,T(e));t("toBase64",(function(t){return k(this,t)})),t("toBase64URI",(function(){return k(this,!0)})),t("toBase64URL",(function(){return k(this,!0)}))},N=()=>{Z(),$()},J={version:n,VERSION:r,atob:E,atobPolyfill:D,btoa:C,btoaPolyfill:y,fromBase64:R,toBase64:B,encode:B,encodeURI:F,encodeURL:F,utob:x,btou:P,decode:R,isValid:I,fromUint8Array:k,toUint8Array:j,extendString:Z,extendUint8Array:$,extendBuiltins:N}}}]);
//# sourceMappingURL=chunk-099deb74.491e3c1a.js.map