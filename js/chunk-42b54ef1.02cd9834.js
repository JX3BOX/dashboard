(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42b54ef1"],{"07cd":function(e,t,s){},1229:function(e,t,s){},"208a":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return o})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return c}));var a=s("2777"),i=s("4328"),r=s.n(i);function n(e){return Object(a["d"])({method:"GET",url:"/api/item_plan/".concat(e)})}function o(e){var t=e.id?"update":"create",s={action:t,plan:e};return Object(a["d"])({method:"POST",url:"/api/item_plan",data:r.a.stringify(s)})}function l(e){return Object(a["d"])({method:"GET",url:"/api/my/item_plans",params:e})}function c(e){return Object(a["d"])({method:"PUT",url:"/api/item_plan/remove",data:r.a.stringify({plan_id:e})})}},"2d41":function(e,t,s){},"85ca":function(e,t,s){"use strict";s("1229")},"8cbe":function(e,t,s){"use strict";s("07cd")},a1e2:function(e,t,s){},a457:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"m-publish-box"},[s("pubheader",{attrs:{name:"物品百科",localDraft:!1}},[e._t("header")],2),s("h1",{staticClass:"m-publish-item-header"},[e._v("物品清单")]),s("el-form",{staticClass:"m-publish-item",attrs:{"label-position":"left","label-width":"80px"}},[s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{attrs:{placeholder:"请输入物品清单的标题",maxlength:"20","show-word-limit":""},model:{value:e.plan.title,callback:function(t){e.$set(e.plan,"title",t)},expression:"plan.title"}})],1),s("el-form-item",{attrs:{label:"可见性"}},[s("el-radio",{attrs:{label:1},model:{value:e.plan.public,callback:function(t){e.$set(e.plan,"public",t)},expression:"plan.public"}},[e._v("公开")]),s("el-radio",{attrs:{label:0},model:{value:e.plan.public,callback:function(t){e.$set(e.plan,"public",t)},expression:"plan.public"}},[e._v("私有")])],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简单说明一下你的物品清单",maxlength:"2000","show-word-limit":""},model:{value:e.plan.description,callback:function(t){e.$set(e.plan,"description",t)},expression:"plan.description"}})],1),s("el-form-item",{attrs:{label:"类型"}},[s("el-radio-group",{attrs:{size:"medium"},model:{value:e.plan.type,callback:function(t){e.$set(e.plan,"type",t)},expression:"plan.type"}},[s("el-radio-button",{attrs:{label:"1"}},[e._v("道具清单")]),s("el-radio-button",{attrs:{label:"2"}},[e._v("装备清单")])],1)],1),s("el-form-item",{attrs:{label:"清单"}},[s("el-row",{staticStyle:{"line-height":"initial"}},[s("el-col",{staticClass:"c-item-search",attrs:{xs:24,sm:5}},[s("el-input",{attrs:{placeholder:"请输入物品名称（可适配中括号形式）","prefix-icon":"el-icon-search"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e.items&&e.items.length?s("draggable",{staticClass:"m-search-items",attrs:{tag:"ul",list:e.items,sort:!1,group:{name:"draggable-item",pull:"clone",put:!1},move:e.move_handle,"ghost-class":"ghost"}},e._l(e.items,(function(e,t){return s("li",{key:t,staticClass:"m-search-item"},[s("jx3-item-simple",{attrs:{item:e}})],1)})),0):e._e(),e.items&&!e.items.length?s("div",{staticClass:"m-no-item"},[s("i",{staticClass:"el-icon-chat-line-round"}),s("span",[e._v(" 查找不到相关记录")])]):e._e()],1),1==e.plan.type?s("el-col",{staticClass:"c-plan-relation c-normal-relation",attrs:{xs:24,sm:19}},[s("el-row",{staticClass:"m-positions",attrs:{gutter:15}},e._l(e.normal_relation,(function(t,a){return s("el-col",{key:a,attrs:{xs:24,sm:6}},[s("div",{staticClass:"m-position"},[s("el-input",{staticClass:"u-title",attrs:{placeholder:"子清单标题（选填）",maxlength:"20","show-word-limit":""},model:{value:t.title,callback:function(s){e.$set(t,"title",s)},expression:"position.title"}}),s("div",{staticClass:"c-selected-items"},[s("draggable",{staticClass:"m-selected-items",class:{empty:!t.data||t.data&&!t.data.length},attrs:{tag:"ul",list:t.data,group:"draggable-item","ghost-class":"ghost"}},e._l(t.data,(function(e,a){return s("li",{key:a,staticClass:"m-selected-item"},[s("jx3-item-simple",{attrs:{item:e}}),s("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(e){return t.data.splice(a,1)}}})],1)})),0),!t.data||t.data&&!t.data.length?s("span",{staticClass:"u-tip"},[e._v("拖拽所需道具到此处")]):e._e()],1),s("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(t){return e.normal_relation.splice(a,1)}}})],1)])})),1),s("el-row",{attrs:{gutter:15}},[s("el-col",{attrs:{xs:24,sm:6}},[s("div",{staticClass:"m-position-add",on:{click:e.add_normal_relation}},[e._v(" + ")])])],1)],1):e._e(),2==e.plan.type?s("el-col",{staticClass:"c-plan-relation",attrs:{xs:24,sm:19}},[s("el-row",{staticClass:"m-positions",attrs:{gutter:15}},e._l(e.positions,(function(t,a){return s("el-col",{key:a,attrs:{xs:24,sm:6}},e._l(t,(function(t,a){return s("div",{key:a,staticClass:"m-position"},[s("h3",{staticClass:"u-title",domProps:{textContent:e._s(t.label)}}),s("div",{staticClass:"c-selected-items"},[s("draggable",{staticClass:"m-selected-items m-selected-equips",class:{empty:!e.equip_relation[a]||e.equip_relation[a]&&!e.equip_relation[a].length},attrs:{tag:"ul",list:e.equip_relation[a],group:"draggable-item",move:e.move_handle,"data-AucGenre":t.AucGenre,"data-AucSubType":t.AucSubType,"ghost-class":"ghost"}},e._l(e.equip_relation[a],(function(t,i){return s("li",{key:i,staticClass:"m-selected-item"},[s("jx3-item-simple",{attrs:{item:t}}),s("i",{staticClass:"u-el-icon el-icon-close",on:{click:function(t){e.equip_relation[a].splice(i,1)}}}),0==i?s("span",{staticClass:"u-main"},[e._v("主")]):e._e()],1)})),0),!e.equip_relation[a]||e.equip_relation[a]&&!e.equip_relation[a].length?s("span",{staticClass:"u-tip"},[e._v("拖拽所需装备到此处")]):e._e()],1)])})),0)})),1)],1):e._e()],1)],1),s("el-form-item",[s("el-button",{staticClass:"u-publish",attrs:{icon:"el-icon-s-promotion",type:"primary",loading:e.$store.state.processing},on:{click:e.submit}},[e._v("提交物品清单 ")])],1)],1)],1)},i=[],r=(s("99af"),s("841c"),s("ac1f"),s("a0fa")),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.item?s("el-popover",{attrs:{placement:"right-end","popper-class":"m-simple-item-popup",width:"auto","visible-arrow":!1,trigger:"hover",transition:"none","close-delay":0},on:{show:function(t){e.item_id=e.item.id}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("div",{staticClass:"m-simple-item",class:{onlyIcon:e.onlyIcon,withName:e.withName},attrs:{slot:"reference"},on:{mousedown:function(t){e.visible=!1}},slot:"reference"},[s("div",{staticClass:"m-icon"},[s("div",{staticClass:"u-border",style:{backgroundImage:e.item_border(e.item),opacity:5==e.item.Quality?.9:1}}),s("div",{staticClass:"u-border-quest",style:{backgroundImage:e.item_border_quest(e.item)}}),s("img",{staticClass:"u-icon",style:{width:e.iconSize,height:e.iconSize},attrs:{src:e.icon_url(e.item.IconID),alt:"IconID:"+e.item.IconID}})]),s("span",{staticClass:"u-name",style:{color:e.item_color(e.item.Quality)},domProps:{textContent:e._s(e.item.Name)}}),s("span",{staticClass:"u-uiid fr",domProps:{textContent:e._s("ID: "+e.item.id)}})]),s("jx3-item",{attrs:{item_id:e.item_id}})],1):e._e()},o=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.source?s("div",{staticClass:"c-item",class:{"c-item-equipment":e.source.AucGenre>=1&&e.source.AucGenre<=4,"c-item-furniture":21==e.source.AucGenre}},[s("div",{staticClass:"c-item-wrapper"},[e.source.MaxStrengthLevel?s("div",{staticClass:"u-max-strength-level"},[s("span",{domProps:{textContent:e._s("精炼等级：0 / "+e.source.MaxStrengthLevel)}})]):e._e(),s("h4",{staticClass:"u-title",style:{color:e.color(e.source.Quality)},domProps:{textContent:e._s(e.source.Name)}}),e.source.BindType>1?s("div",{staticClass:"u-bind",domProps:{textContent:e._s(e.bind(e.source.BindType))}}):e._e(),1===parseInt(e.source.MaxExistAmount)?s("div",{staticClass:"unique",domProps:{textContent:e._s("唯一")}}):e._e(),parseInt(e.source.MaxExistTime)>0?s("div",{staticClass:"u-max-exist-time",domProps:{textContent:e._s("存在时间："+e.second_format(e.source.MaxExistTime))}}):e._e(),parseInt(e.source.MaxExistAmount)>1?s("div",{staticClass:"u-max-exist-amount",domProps:{textContent:e._s("最大拥有数："+e.source.MaxExistAmount)}}):e._e(),1==e.source.AucGenre?s("div",{staticClass:"u-weapon-type-label"},[e._v(" 近身武器 ")]):e._e(),2==e.source.AucGenre?s("div",{staticClass:"u-weapon-type-label"},[e._v(" 远程武器 ")]):e._e(),e.source.TypeLabel?s("div",{staticClass:"u-type-label",domProps:{textContent:e._s(e.source.TypeLabel)}}):e._e(),e.source.attributes&&e.source.attributes.length?s("div",{staticClass:"u-attributes"},e._l(e.source.attributes,(function(t,a){return s("div",{key:a,staticClass:"u-field",class:["u-"+t.color]},["atMeleeWeaponAttackSpeedBase"==t.type||"atRangeWeaponAttackSpeedBase"==t.type?s("span",{staticClass:"u-value u-speed",domProps:{textContent:e._s(t.label)}}):"atHorseAttribute"==t.type?s("span",{staticClass:"u-value u-horse-attribute"},[t.icon_id>0?s("img",{staticClass:"u-horse-icon",attrs:{src:e.icon_url(t.icon_id)}}):e._e(),s("div",{staticClass:"u-horse-desc",domProps:{innerHTML:e._s(t.label)}})]):s("span",{staticClass:"u-value"},[s("span",{domProps:{textContent:e._s(t.label)}}),s("span",{staticClass:"u-yellow",domProps:{textContent:e._s(e.attribute_percent(t.type,t.value))}})])])})),0):e._e(),e.source.furniture_attributes?s("div",{staticClass:"u-furniture-attributes"},[e.source.furniture_attributes.view?s("div",{staticClass:"u-field u-green"},[s("span",{staticClass:"u-value",domProps:{textContent:e._s("观赏提高"+e.source.furniture_attributes.view)}})]):e._e(),e.source.furniture_attributes.practical?s("div",{staticClass:"u-field u-green"},[s("span",{staticClass:"u-value",domProps:{textContent:e._s("实用提高"+e.source.furniture_attributes.practical)}})]):e._e(),e.source.furniture_attributes.hard?s("div",{staticClass:"u-field u-green"},[s("span",{staticClass:"u-value",domProps:{textContent:e._s("坚固提高"+e.source.furniture_attributes.hard)}})]):e._e(),e.source.furniture_attributes.geomantic?s("div",{staticClass:"u-field u-green"},[s("span",{staticClass:"u-value",domProps:{textContent:e._s("风水提高"+e.source.furniture_attributes.geomantic)}})]):e._e(),e.source.furniture_attributes.interesting?s("div",{staticClass:"u-field u-green"},[s("span",{staticClass:"u-value",domProps:{textContent:e._s("趣味提高"+e.source.furniture_attributes.interesting)}})]):e._e()]):e._e(),e.source.Diamonds?s("ul",{staticClass:"u-diamonds u-gray"},[e._l(e.source.Diamonds,(function(t,a){return s("li",{key:a,staticClass:"u-diamond"},[s("span",{staticClass:"u-square"}),s("span",{staticClass:"u-text",domProps:{textContent:e._s("镶嵌孔："+t)}})])})),1==e.source.AucGenre?s("li",{staticClass:"u-diamond"},[s("span",{staticClass:"u-square"}),s("span",{staticClass:"u-text"},[e._v("<只能镶嵌五彩石>")])]):e._e()],2):e._e(),e.source.Requires&&e.source.Requires[7]?s("div",{staticClass:"u-require-sex",domProps:{textContent:e._s(e.source.Requires[7])}}):e._e(),e.source.Requires&&e.source.Requires[6]?s("div",{staticClass:"u-require-school",domProps:{textContent:e._s(e.source.Requires[6])}}):e._e(),e.source.Requires&&e.source.Requires[5]?s("div",{staticClass:"u-require-level",domProps:{textContent:e._s(e.source.Requires[5])}}):e._e(),e.source.Requires&&e.source.Requires[100]?s("div",{staticClass:"u-require-camp",domProps:{textContent:e._s(e.source.Requires[100])}}):e._e(),e.source.Requires&&e.source.Requires[101]?s("div",{staticClass:"u-require-homeland-level",domProps:{textContent:e._s(e.source.Requires[101])}}):e._e(),e.source.AucGenre>=1&&e.source.AucGenre<=3?s("div",{staticClass:"u-max-durability",domProps:{textContent:e._s("最大耐久度"+e.source.MaxDurability)}}):e._e(),e.source.Set?s("div",{staticClass:"u-set"},[s("br"),s("div",{staticClass:"u-yellow",domProps:{textContent:e._s(e.source.Set.name+"(1/"+e.source.Set.siblings.length+")")}}),s("ul",{staticClass:"u-set-siblings u-gray"},e._l(e.source.Set.siblings,(function(t,a){return s("li",{key:a,class:{"u-yellow":t==e.source.Name},domProps:{textContent:e._s(t)}})})),0),s("br"),s("ul",{staticClass:"u-set-attributes u-gray"},e._l(e.source.Set.attributes,(function(t,a){return s("li",{key:a,domProps:{textContent:e._s("["+a+"]"+t)}})})),0),s("br")]):e._e(),e.source.ImageUrl?s("div",{staticClass:"u-image-url"},[s("img",{attrs:{src:e.source.ImageUrl},on:{"~error":function(t){e.source.ImageUrl=null}}})]):e._e(),e.source.DescHtml?s("p",{staticClass:"u-desc u-yellow",domProps:{innerHTML:e._s(e.source.DescHtml)}}):e._e(),e.source.WuCaiHtml?s("p",{staticClass:"u-desc",domProps:{innerHTML:e._s(e.source.WuCaiHtml)}}):e._e(),e.source.Level?s("div",{staticClass:"u-level u-yellow",domProps:{textContent:e._s("品质等级"+e.source.Level)}}):e._e(),e.source.EquipmentRating?s("div",{staticClass:"u-equipment-rating u-orange",domProps:{textContent:e._s("装备分数"+e.source.EquipmentRating)}}):e._e(),e.source.Recommend?s("div",{staticClass:"u-equipment-recommend",domProps:{textContent:e._s("推荐门派："+e.source.Recommend)}}):e._e(),e.source.CoolDown?s("div",{staticClass:"u-equipment-recommend",domProps:{textContent:e._s("使用间隔"+e.second_format(e.source.CoolDown))}}):e._e(),e.source.Appearance?s("div",{staticClass:"u-appearance",domProps:{textContent:e._s("外观名称："+e.source.Appearance)}}):e._e(),e.source.CanExterior?s("div",{staticClass:"u-can-exterior",domProps:{textContent:e._s("外观："+e.source.CanExterior)}}):e._e(),!e.source.CanShared||e.source.AucGenre>=1&&e.source.AucGenre<=4?e._e():s("div",{staticClass:"u-can-shared"},[e._v(" 该物品可以放入账号储物箱共享。 ")]),e.source.CanShared&&e.source.AucGenre>=1&&e.source.AucGenre<=4?s("div",{staticClass:"u-can-shared"},[e._v(" 该装备未精炼、镶嵌、附魔、穿戴前可以放入账号储物箱共享。 ")]):e._e(),e.source.furniture_attributes?s("div",{staticClass:"u-furniture-can"},[e.source.furniture_attributes.interact?s("span",[e._v("可交互")]):e._e(),e.source.furniture_attributes.scale_range?s("span",{domProps:{textContent:e._s("可缩放("+e.source.furniture_attributes.scale_range.replace(";"," - ")+"倍)")}}):e._e()]):e._e(),e.source.GetType?s("div",{staticClass:"u-get-type",domProps:{textContent:e._s("物品来源："+e.source.GetType)}}):e._e()])]):e._e()},c=[],u=s("9ec4"),m=s.n(u),d=s("65c2");function p(e){if(e)return m()({url:`${d["__helperUrl"]}api/item/${e}`,headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0})}const{__imgPath:_,__iconPath:h}=s("65c2");var b=e=>isNaN(parseInt(e))?_+"image/common/nullicon.png":`${h}icon/${e}.png`,C=e=>{let t=Math.floor(e/86400),s=Math.floor((e-24*t*3600)/3600),a=Math.floor((e-24*t*3600-3600*s)/60);e=e-24*t*3600-3600*s-60*a;let i="";return t&&(i+=t+"天"),s&&(i+=s+"小时"),a&&(i+=a+"分钟"),e&&(i+=e+"秒"),i},g=(e,t)=>{let s="";switch(t=t?parseInt(t):0,e){case"atAllTypeCriticalStrike":case"atLunarCriticalStrike":case"atMagicCriticalStrike":case"atNeutralCriticalStrike":case"atPhysicsCriticalStrike":case"atPoisonCriticalStrike":case"atSolarAndLunarCriticalStrike":case"atSolarCriticalStrike":s=`+${(t/35737.5*100).toFixed(2)}%`;break;case"atAllTypeCriticalDamagePowerBase":case"atLunarCriticalDamagePowerBase":case"atMagicCriticalDamagePowerBase":case"atNeutralCriticalDamagePowerBase":case"atPhysicsCriticalDamagePowerBase":case"atPoisonCriticalDamagePowerBase":case"atSolarAndLunarCriticalDamagePowerBase":case"atSolarCriticalDamagePowerBase":s=`+${(t/12506.25*100).toFixed(2)}%`;break;case"atToughnessBase":s=`+${(t/35737.5*100).toFixed(2)}% +${(t/9588.75*100).toFixed(2)}%会心减害`;break;case"atDecriticalDamagePowerBase":s="";break;case"atAllTypeHitValue":case"atLunarHitValue":case"atMagicHitValue":case"atNeutralHitValue":case"atPhysicsHitValue":case"atPoisonHitValue":case"atSolarAndLunarHitValue":case"atSolarHitValue":s=`+${(t/25991.25*100).toFixed(2)}%`;break;case"atDodge":s="";break;case"atParryBase":s="";break;case"atStrainBase":s=`+${(t/34458.75*100).toFixed(2)}%`;break;case"atPhysicsDefenceAdd":case"atPhysicsShieldAdditional":case"atPhysicsShieldBase":s="";break;case"atLunarMagicShieldBase":case"atMagicShield":case"atNeutralMagicShieldBase":case"atPoisonMagicShieldBase":case"atSolarMagicShieldBase":s="";break;case"atLunarOvercomeBase":case"atMagicOvercome":case"atNeutralOvercomeBase":case"atPhysicsOvercomeBase":case"atPoisonOvercomeBase":case"atSolarAndLunarOvercomeBase":case"atSolarOvercomeBase":s=`+${(t/35737.5*100).toFixed(2)}%`;break;case"atHasteBase":s=`+${(t/43856.25*100).toFixed(2)}%`;break;default:break}return s?` (${s})`:""},f=e=>{switch(e){case 1:return"不绑定";case 2:return"装备后绑定";case 3:return"拾取后绑定";default:return"未知"}},v=e=>{switch(e=parseInt(e),e){case 0:return"rgb(167,167,167)";case 1:return"rgb(255,255,255)";case 2:return"rgb(0,210,75)";case 3:return"rgb(0,126,255)";case 4:return"rgb(254,45,254)";case 5:return"rgb(255,165,0)";default:return"rgb(167,167,167)"}},y={name:"Item",props:["item","item_id"],data:function(){return{source:null}},methods:{icon_url:b,second_format:C,attribute_percent:g,bind:f,color:v},watch:{item:{immediate:!0,handler:function(){"undefined"!==typeof this.item&&(this.source=this.item)}},item_id:{immediate:!0,handler:function(){var e=this;if(this.item_id){var t=sessionStorage.getItem("item-".concat(this.item_id)),s=sessionStorage.getItem("item-".concat(this.item_id,"-created"));if((!1===t||t)&&Math.round(new Date/1e3)-s<=3600)return void(this.source=!1===t?null:JSON.parse(t));p(this.item_id).then((function(t){var s=t.data;if(200===s.code){var a=s.data.item;e.source="{}"!==JSON.stringify(a)?a:null,sessionStorage.setItem("item-".concat(e.source.id),!!e.source&&JSON.stringify(e.source)),sessionStorage.setItem("item-".concat(e.source.id,"-created"),Math.round(new Date/1e3))}}))}else"undefined"!==typeof this.item_id&&(this.source=null)}}}},A=y,x=(s("8cbe"),s("2877")),P=Object(x["a"])(A,l,c,!1,null,"23064962",null),S=P.exports;const{__imgPath:E}=s("65c2");var N=e=>{switch(e.Quality){case 3:return`url(${E}image/item/blue.png)`;case 4:return`url(${E}image/item/purple.png)`;case 5:return`url(${E}image/item/orange.gif)`;default:return""}};const{__imgPath:T}=s("65c2");var w=e=>e.IsQuest>0?`url(${T}image/item/renwu.png)`:"",k={name:"ItemSimple",props:["item","onlyIcon","iconSize","withName"],data:function(){return{visible:!1,item_id:null}},methods:{icon_url:b,item_color:v,item_border:N,item_border_quest:w},components:{"jx3-item":S}},O=k,G=(s("ecd9"),s("85ca"),Object(x["a"])(O,n,o,!1,null,null,null)),M=G.exports,q=s("b76a"),I=s.n(q),L=s("b78a"),B=s("208a");const R=Object.freeze({HELM:"helm",CHEST:"chest",WAIST:"waist",BANGLE:"bangle",PANTS:"pants",BOOTS:"boots",AMULET:"amulet",PENDANT:"pendant",RING:"ring",MELEE_WEAPON:"melee_weapon",RANGE_WEAPON:"range_weapon",AMMO_POUCH:"ammo_pouch",all(){return[this.HELM,this.CHEST,this.WAIST,this.BANGLE,this.PANTS,this.BOOTS,this.AMULET,this.PENDANT,this.RING,this.MELEE_WEAPON,this.RANGE_WEAPON,this.AMMO_POUCH]}});var $=R;const D=Object.freeze({HELM:$.HELM,CHEST:$.CHEST,WAIST:$.WAIST,BANGLE:$.BANGLE,PANTS:$.PANTS,BOOTS:$.BOOTS,AMULET:$.AMULET,PENDANT:$.PENDANT,RING_1:$.RING+"_1",RING_2:$.RING+"_2",MELEE_WEAPON:$.MELEE_WEAPON,RANGE_WEAPON:$.RANGE_WEAPON,all(){let e=[{type:this.MELEE_WEAPON,label:"武器",AucGenre:1},{type:this.RANGE_WEAPON,label:"暗器",AucGenre:2},{type:this.HELM,label:"帽子",AucGenre:3,AucSubType:2},{type:this.CHEST,label:"上衣",AucGenre:3,AucSubType:1},{type:this.WAIST,label:"腰带",AucGenre:3,AucSubType:3},{type:this.BANGLE,label:"护腕",AucGenre:3,AucSubType:6},{type:this.PANTS,label:"下装",AucGenre:3,AucSubType:4},{type:this.BOOTS,label:"鞋子",AucGenre:3,AucSubType:5},{type:this.AMULET,label:"项链",AucGenre:4,AucSubType:1},{type:this.PENDANT,label:"腰坠",AucGenre:4,AucSubType:3},{type:this.RING_1,label:"戒指",AucGenre:4,AucSubType:2},{type:this.RING_2,label:"戒指",AucGenre:4,AucSubType:2}],t={};for(let s in e){let a=e[s];t[a.type]=a}return t}});var H=D,W=(s("4328"),s("2ef0")),j=s("65c2"),U=j.__Root,J={name:"item",props:[],data:function(){var e=[[H.MELEE_WEAPON,H.RANGE_WEAPON],[H.HELM,H.CHEST,H.WAIST],[H.BANGLE,H.PANTS,H.BOOTS],[H.AMULET,H.PENDANT,H.RING_1,H.RING_2]],t=H.all();for(var s in e){var a={};for(var i in e[s]){var r=W.get(e,"".concat(s,".").concat(i));a[r]=t[r]}W.set(e,s,a)}var n={};for(var o in t){var l=t[o];n[l.type]=[]}return{keyword:"",items:null,normal_relation:[{title:"",data:[]}],equip_relation:n,plan:{id:"",title:"",public:1,type:1,relation:null,description:""},positions:e}},mounted:function(){var e=this;this.$route.params.plan_id&&Object(B["b"])(this.$route.params.plan_id).then((function(t){t=t.data,200===t.code?(e.plan=t.data.plan,e.plan?1==e.plan.type?e.normal_relation=e.plan.relation_items:2==e.plan.type?e.equip_relation=e.plan.relation_items:e.$message.error("物品清单类型异常，请联系管理员"):(e.$message.error(t.message),e.$router.push({name:"item_plan"}))):e.$message.error("获取物品清单异常，请联系管理员")}))},methods:{add_normal_relation:function(){this.normal_relation.push({title:"",data:[]})},move_handle:function(e){if(!e.to.classList.contains("m-selected-items"))return!1;if(!e.to.classList.contains("m-selected-equips"))return!0;var t=e.to.getAttribute("data-AucGenre"),s=e.to.getAttribute("data-AucSubType"),a=e.draggedContext.element.AucGenre==t;return null!==s&&(a=a&&e.draggedContext.element.AucSubType==s),a},search:function(){var e=this;Object(L["a"])(this.keyword,15,["id","UiID","Name","IconID","Quality","AucGenre","AucSubType"],2==this.plan.type).then((function(t){t=t.data,e.items=200===t.code?t.data.data:[]}),(function(){e.options.items=!1}))},submit:function(){var e=this;if(1==this.plan.type){var t=JSON.parse(JSON.stringify(this.normal_relation));for(var s in t)for(var a in t[s].data)t[s].data[a]=t[s].data[a].id;this.plan.relation=JSON.stringify(t)}else{if(2!=this.plan.type)return void this.$message.error("物品清单类型异常，请联系管理员");var i=JSON.parse(JSON.stringify(this.equip_relation));for(var r in i)for(var n in i[r])i[r][n]=i[r][n].id;this.plan.relation=JSON.stringify(i)}this.$store.commit("startProcess"),Object(B["d"])(this.plan).then((function(t){t=t.data,200===t.code?(e.$message({message:"物品清单提交成功",type:"success"}),location.href="".concat(U,"item/#/plan_view/").concat(t.data.id)):e.$message({message:"".concat(t.message),type:"warning"})}))}},watch:{keyword:{immediate:!0,handler:function(){this.search()}},"plan.type":function(){this.search()}},components:{draggable:I.a,pubheader:r["a"],"jx3-item-simple":M}},F=J,V=(s("f9c3"),Object(x["a"])(F,a,i,!1,null,null,null));t["default"]=V.exports},b78a:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s("2777");function i(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={keyword:e,limit:t,fields:s};return null!==i&&(r.is_equip=i?1:0),Object(a["d"])({method:"GET",url:"/api/item/search",params:r})}},ecd9:function(e,t,s){"use strict";s("2d41")},f9c3:function(e,t,s){"use strict";s("a1e2")}}]);
//# sourceMappingURL=chunk-42b54ef1.02cd9834.js.map