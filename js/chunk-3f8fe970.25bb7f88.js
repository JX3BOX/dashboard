(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f8fe970"],{"07d3":function(t,e,s){"use strict";s("4f42")},"0cb2":function(t,e,s){var r=s("7b0b"),i=Math.floor,n="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,s,o,l,u){var h=s+t.length,f=o.length,m=c;return void 0!==l&&(l=r(l),m=a),n.call(u,m,(function(r,n){var a;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(h);case"<":a=l[n.slice(1,-1)];break;default:var c=+n;if(0===c)return r;if(c>f){var u=i(c/10);return 0===u?r:u<=f?void 0===o[u-1]?n.charAt(1):o[u-1]+n.charAt(1):r}a=o[c-1]}return void 0===a?"":a}))}},"25f0":function(t,e,s){"use strict";var r=s("6eeb"),i=s("825a"),n=s("d039"),a=s("ad6d"),c="toString",o=RegExp.prototype,l=o[c],u=n((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=c;(u||h)&&r(RegExp.prototype,c,(function(){var t=i(this),e=String(t.source),s=t.flags,r=String(void 0===s&&t instanceof RegExp&&!("flags"in o)?a.call(t):s);return"/"+e+"/"+r}),{unsafe:!0})},"2b07":function(t,e,s){"use strict";s("5c32")},"4f42":function(t,e,s){},5319:function(t,e,s){"use strict";var r=s("d784"),i=s("825a"),n=s("50c4"),a=s("a691"),c=s("1d80"),o=s("8aa5"),l=s("0cb2"),u=s("14c3"),h=Math.max,f=Math.min,m=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,s,r){var d=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,b=d?"$":"$0";return[function(s,r){var i=c(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,i,r):e.call(String(i),s,r)},function(t,r){if(!d&&p||"string"===typeof r&&-1===r.indexOf(b)){var c=s(e,t,this,r);if(c.done)return c.value}var v=i(t),g=String(this),_="function"===typeof r;_||(r=String(r));var k=v.global;if(k){var y=v.unicode;v.lastIndex=0}var S=[];while(1){var w=u(v,g);if(null===w)break;if(S.push(w),!k)break;var E=String(w[0]);""===E&&(v.lastIndex=o(g,n(v.lastIndex),y))}for(var $="",x=0,C=0;C<S.length;C++){w=S[C];for(var j=String(w[0]),O=h(f(a(w.index),g.length),0),R=[],A=1;A<w.length;A++)R.push(m(w[A]));var L=w.groups;if(_){var D=[j].concat(R,O,g);void 0!==L&&D.push(L);var M=String(r.apply(void 0,D))}else M=l(j,g,O,R,L,r);O>=x&&($+=g.slice(x,O)+M,x=O+j.length)}return $+g.slice(x)}]}))},"5c32":function(t,e,s){},"857a":function(t,e,s){var r=s("1d80"),i=/"/g;t.exports=function(t,e,s,n){var a=String(r(t)),c="<"+e;return""!==s&&(c+=" "+s+'="'+String(n).replace(i,"&quot;")+'"'),c+">"+a+"</"+e+">"}},"9911f":function(t,e,s){"use strict";var r=s("23e7"),i=s("857a"),n=s("af03");r({target:"String",proto:!0,forced:n("link")},{link:function(t){return i(this,"a","href",t)}})},a0fa:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-publish-header"},[s("el-page-header",{attrs:{content:t.name},on:{back:t.goBack}})],1)},i=[],n={name:"pubheader",props:["name"],data:function(){return{dialogVisible:!1,selectedCount:0,tableData:[]}},computed:{},methods:{goBack:function(){this.$root.$router.push("/")}},mounted:function(){},components:{}},a=n,c=(s("07d3"),s("2877")),o=Object(c["a"])(a,r,i,!1,null,null,null);e["a"]=o.exports},af03:function(t,e,s){var r=s("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bd13:function(t,e,s){"use strict";function r(t){var e=Object.prototype.toString.call(t);return e.match(/\[object (.*?)\]/)[1].toLowerCase()}s.d(e,"a",(function(){return a}));var i=r;class n{constructor(t){if("string"!==i(t))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=t,this._str=t}toString(){return this._str}_detected(t){let e=i(t),s=["string","array","set"];if(!s.includes(e))throw new Error("[Sterilizer::remove] params should be string|array|set");return t}_sterilize(t){t=[...t].join("");let e=new RegExp(`[${t}]`,"gm");return this._str=this._str.replace(e,""),this}kill(t){let e=null;if(void 0==t)e=new Set(this.regs);else{this._detected(t),e=new Set;let s=new Set(t);for(let t of s)this.symbols.includes(t)&&e.add(this._symbols[t])}return this._sterilize(e)}live(t){this._detected(t);let e=new Set(this.regs);for(let s of t)this.symbols.includes(s)&&e.delete(this._symbols[s]);return this._sterilize(e)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this}remove(t,e){let s=new RegExp(""+t,"gm");return e=void 0!==e?e:"",this._str=this._str.replace(s,e),this}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this}isDirty(t){return t?this.str.includes(t):this.symbols.some(t=>this.str.includes(t))}}function a(t){return new n(t)}},e97b:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-dashboard-publish-namespace m-publish-box"},[s("pubheader",{attrs:{name:t.name,localDraft:!1}},[t._t("header")],2),s("div",{staticClass:"m-publish-namespace-box"},[s("header",{staticClass:"m-publish-namespace-header"},[t._m(0),s("div",{staticClass:"u-count"},[s("span",{staticClass:"u-count-txt"},[t._v("当前可建铭牌数： "),s("b",[t._v(t._s(t.count))]),t._v(" 个")]),t._m(1),t._m(2)])]),t.success?s("div",{staticClass:"m-namspace-tips"},[s("el-alert",{attrs:{title:"提交成功，请等待审核",type:"success","show-icon":""}})],1):t._e(),s("el-form",{staticClass:"m-publish-namespace-form",attrs:{rules:t.rules,model:t.form}},[s("el-form-item",{attrs:{label:"关键词",prop:"key"}},[s("el-input",{attrs:{placeholder:"全局唯一关键词"},model:{value:t.form.key,callback:function(e){t.$set(t.form,"key",e)},expression:"form.key"}}),t.available?t._e():s("el-alert",{attrs:{title:"已有关键词，请重新输入",type:"error","show-icon":""}})],1),s("el-form-item",{attrs:{label:"链接",prop:"link"}},[s("el-input",{attrs:{placeholder:"请输入跳转地址"},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}},[s("template",{slot:"prepend"},[t._v("https://")])],2)],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{placeholder:"请输入关于铭牌的描述",maxlength:"30","show-word-limit":""},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{staticClass:"u-submit",attrs:{type:"primary",disabled:!t.ready||t.processing},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"u-tip"},[t._v(' 铭牌是一个可以通过关键词快速访问的功能，例如定义铭牌 "某某气纯宏"，则可以在浏览器地址栏中通过快速输入 '),s("a",{attrs:{href:"https://剑网3.com/某某气纯宏",target:"_blank"}},[s("b",[t._v("剑网3.com/某某气纯宏")])]),t._v(" 访问你输入的链接 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"u-btn-buy el-button el-button--primary el-button--mini",attrs:{href:"/vip/namespace?from=dashboard_namespace_create",target:"_blank"}},[s("span",{staticClass:"el-icon-shopping-cart-2"}),t._v("购买铭牌")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"u-skip",attrs:{href:"/vip/namespace/?from=dashboard_namespace_create",target:"_blank"}},[s("span",{staticClass:"el-icon-connection"}),t._v("限时0.99元抢注10个铭牌")])}],n=(s("9911f"),s("d3b7"),s("25f0"),s("caad"),s("2532"),s("5319"),s("ac1f"),s("b0c0"),s("bd13")),a=s("a0fa"),c=(s("2777"),s("41cb"));function o(t){return Object(c["b"])().post("/api/cms/namespace",t)}function l(t,e){return Object(c["b"])().put("/api/cms/namespace/".concat(t),e)}function u(t){return Object(c["b"])().get("/api/cms/namespace/".concat(t))}function h(t){return Object(c["b"])().get("/api/cms/namespace-key",{params:{key:t}})}var f=s("c9d2"),m=s("2ef0"),d=s.n(m),p={key:"",desc:"",link:""},b={name:"namespace",props:[],data:function(){return{name:"剑三铭牌",form:d.a.cloneDeep(p),count:0,available:!1,success:!1,processing:!1,rules:{key:[{required:!0,message:"请输入铭牌名称",trigger:"blur"}],link:[{required:!0,message:"请输入链接网址",trigger:"blur"}]}}},computed:{data:function(){return{key:this.form.key,desc:this.form.desc,link:"https://"+this.form.link,source_type:"custom"}},isEditMode:function(){return!!this.$route.params.id},ready:function(){return this.isEditMode?this.available&&this.form.link:this.available&&this.form.link&&this.count}},methods:{checkKey:function(t){t?(this.form.key=Object(n["a"])(this.form.key).kill().removeSpace().toString(),this.form.key!=this.key_cache?this.checkAvailable():this.available=!0):this.available=!0},checkLink:function(t){if(t){var e=this.form.link;(e.includes("http://")||e.includes("https://"))&&(this.form.link=e.replace(/https?\:\/\//,""))}},checkAvailable:function(){var t=this;h(this.form.key).then((function(e){e.data.data?t.available=!1:t.available=!0}))},onSubmit:function(){var t=this;if(""==this.form.desc){var e=f["a"].getInfo();this.data.desc=e.name+"创建"}this.processing=!0,this.isEditMode?l(this.namespace_id,this.data).then((function(){t.onSuccess()})).finally((function(){t.processing=!1})):o(this.data).then((function(){t.onSuccess(),t.count-=1,t.form=d.a.cloneDeep(p)})).finally((function(){t.processing=!1}))},onSuccess:function(){this.success=!0,this.$notify.success({title:"成功",message:"提交成功",showClose:!1})}},watch:{"form.key":function(t){this.checkKey(t)},"form.link":function(t){this.checkLink(t)}},created:function(){var t=this;f["a"].getAsset().then((function(e){t.count=e.namespace_card_count}))},mounted:function(){var t=this;this.namespace_id=this.$route.params.id,this.namespace_id&&u(this.namespace_id).then((function(e){var s=e.data.data,r=s.key,i=s.desc,n=s.link;t.key_cache=r,t.form={key:r,desc:i,link:n}})),""==this.form.key&&(this.available=!0)},components:{pubheader:a["a"]}},v=b,g=(s("2b07"),s("2877")),_=Object(g["a"])(v,r,i,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-3f8fe970.25bb7f88.js.map