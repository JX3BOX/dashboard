(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-470cd369"],{"04d1":function(t,e,a){var i=a("342f"),n=i.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},1645:function(t){t.exports=JSON.parse('{"default":{"name":"default","style":"square","files":{"xs":{"w":48,"width":60,"file":"default-xs.gif"},"s":{"w":68,"width":84,"file":"default-s.gif"},"m":{"w":108,"width":136,"file":"default-m.png"},"l":{"w":180,"width":224,"file":"default-l.png"},"xl":{"w":240,"width":300,"file":"default-xl.png"}}},"flower_1":{"name":"flower_1","style":"circle","files":{"xs":{"w":48,"width":60,"file":"flower_1-xs.png"},"s":{"w":68,"width":84,"file":"flower_1-s.png"},"m":{"w":108,"width":136,"file":"flower_1-m.png"},"l":{"w":180,"width":224,"file":"flower_1-l.png"},"xl":{"w":240,"width":300,"file":"flower_1-xl.png"}}}}')},"25f0":function(t,e,a){"use strict";var i=a("5e77").PROPER,n=a("cb2d"),r=a("825a"),s=a("577e"),o=a("d039"),c=a("90d8"),l="toString",u=RegExp.prototype,f=u[l],d=o((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),v=i&&f.name!=l;(d||v)&&n(RegExp.prototype,l,(function(){var t=r(this),e=s(t.source),a=s(c(t));return"/"+e+"/"+a}),{unsafe:!0})},4208:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("uc",{staticClass:"m-dashboard-avatar"},[i("div",{staticClass:"m-profile-avatar"},[i("div",{staticClass:"m-profile-avatar-primary"},[i("el-upload",{staticClass:"u-upload",attrs:{drag:"",accept:"image/png, image/gif, image/jpeg","on-change":t.upload,action:"upload/avatar","auto-upload":!1}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击上传，只能上传jpg/png/gif文件",placement:"top-start"}},[i("div",{staticClass:"u-avatar"},[i("img",{staticClass:"u-avatar u-avatar-l",attrs:{src:t._f("showAvatar")(t.avatar)}})])])],1),i("span",{staticClass:"u-tip"},[t._v("当前装扮")]),i("div",{staticClass:"u-select"},[i("div",{staticClass:"u-avatar"},[t.frame?i("img",{attrs:{src:t.showFrame(t.frame)}}):t._e()]),i("div",{staticClass:"u-decoration"},[t.decoration.length>0&&null!=t.decorationActivate&&"无主题"!==t.decoration[t.decorationActivate].val?i("img",{attrs:{src:t._f("showDecoration")(t.decoration[t.decorationActivate].list[0])}}):t._e()])]),i("p",{staticClass:"u-btng"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),i("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1),i("div",{staticClass:"m-profile-avatar-frame"},[i("el-tabs",{attrs:{type:"card"},model:{value:t.tabActivate,callback:function(e){t.tabActivate=e},expression:"tabActivate"}},[i("el-tab-pane",{staticClass:"m-profile-tab",attrs:{label:"头像框",name:"0"}},[i("h3",{staticClass:"u-title"},[t._v(" 自定义头像框 "),i("span",{staticClass:"u-limit",class:{on:t.isVIP}},[t._v(" ( "),i("i",{class:t.isVIP?"el-icon-unlock":"el-icon-lock"}),t._v("仅"),i("a",{attrs:{href:"/vip/premium?from=dashboard_avatar",target:"_blank"}},[t._v("高级/专业版")]),t._v("账户适用 ) ")])]),t.frames?i("div",{staticClass:"u-list"},[i("li",{staticClass:"u-item",class:{on:!t.frame},on:{click:function(e){return t.selectFrame("")}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"无边框",placement:"top","open-delay":200}},[i("div",[i("img",{directives:[{name:"show",rawName:"v-show",value:!t.frame,expression:"!frame"}],staticClass:"u-pic",attrs:{src:t._f("showSmallAvatar")(t.avatar)}}),i("i",{staticClass:"u-frame u-frame-none"})])])],1),t._l(t.frames,(function(e,a){return i("li",{key:a,staticClass:"u-item",class:{on:a==t.frame},on:{click:function(a){return t.selectFrame(e)}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.desc,placement:"top","open-delay":300}},[i("div",{class:{"u-blocked":!e.status}},[i("img",{directives:[{name:"show",rawName:"v-show",value:a==t.frame,expression:"name == frame"}],staticClass:"u-pic isCircle",attrs:{src:t._f("showSmallAvatar")(t.avatar)}}),i("i",{staticClass:"u-frame"},[i("img",{attrs:{src:t.showFrame(e.name)}})])])])],1)}))],2):t._e(),i("div",{staticClass:"u-tip"},[i("i",{staticClass:"el-icon-warning-outline"}),t._v(" 「限定头像框」仅在指定时间段可选择激活。 ")])]),i("el-tab-pane",{staticClass:"m-profile-tab",attrs:{label:"主题装扮",name:"1"}},[0==t.decoration.length?i("el-tag",{staticClass:"u-empty",attrs:{type:"info"}},[t._v("暂无装扮")]):t._e(),i("div",{staticClass:"u-decoration-box"},t._l(t.decoration,(function(e,n){return i("div",{key:e.val,staticClass:"u-decoration-list"},[i("div",{staticClass:"u-title"},[t._v(" "+t._s(t.decorationJson[e.val]?t.decorationJson[e.val].desc:"取消主题")+"   "),i("el-checkbox",{on:{change:function(e){return t.selectAllChange(e,n)}},model:{value:t.selectAll[n],callback:function(e){t.$set(t.selectAll,n,e)},expression:"selectAll[i]"}},[t._v(t._s(0==n?"选中":"全选"))])],1),i("div",{staticClass:"u-decoration-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.list.length,expression:"item.list.length === 0"}],staticClass:"u-picbox",class:t.selectAll[n]?"select":"",on:{click:function(e){return t.selectAllChange(!0,n)}}},[i("img",{staticClass:"u-pic",attrs:{src:a("4429")}}),i("div",{staticClass:"u-decoration-name"},[t._v("取消主题")])]),t._l(e.list,(function(e,a){return i("div",{key:"c"+a,staticClass:"u-picbox",class:e.using?"select":"",attrs:{title:t._f("showDecorationName")(e.type)},on:{click:function(i){return t.decorationStatus(e,a,n)}}},[i("img",{staticClass:"u-pic",attrs:{src:t._f("showDecoration")(e)}}),i("div",{staticClass:"u-decoration-name"},[t._v(t._s(t._f("showDecorationName")(e.type)))])])}))],2)])})),0),i("div",{staticClass:"u-tip"},[i("i",{staticClass:"el-icon-warning-outline"}),t._v(" 仅展示已拥有装扮，同主题部分可分别激活 ")])],1)],1)],1)])])},n=[],r=a("ade3"),s=(a("d3b7"),a("25f0"),a("b0c0"),a("e9c4"),a("4ec9"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("b64b"),a("4e82"),a("7db0"),a("99af"),a("b547")),o=a("46e8"),c=a("41cb"),l=a("bc3a"),u=a.n(l),f=a("65c2");function d(t){return Object(c["b"])().get("/api/cms/user/decoration",{params:t})}function v(t){return Object(c["b"])().post("/api/cms/user/decoration",t)}function h(){var t=f["__imgPath"]+"decoration/index.json";return u.a.get(t)}var m=a("c9d2"),p=a("85e4"),g=a("1645"),b={name:"avatar",props:[],data:function(){return{bak:"",avatar:"",frame:"",isVIP:!1,uid:m["a"].getInfo().uid,frames:g,tabActivate:"0",decorationJson:{},decoration:[],decorationActivate:null,originalActivateName:null,selectAll:[],noDecoration:!1}},computed:{data:function(){return{user_avatar:this.avatar,user_avatar_frame:this.frame}}},methods:{upload:function(t,e){var a=this,i=new FormData,n=t.raw;i.append("avatar",n),Object(o["m"])(i).then((function(t){a.$message({message:"上传成功",type:"success"}),a.avatar=t.data.data[0]}))},reset:function(){this.avatar=this.bak},submit:function(){var t=this;this.decorationSubmit(),this.isVIP||(this.frame&&this.$notify({title:"头像框未生效",message:"头像框仅高级/专业账号可用",type:"warning"}),this.frame=""),Object(o["j"])(this.data).then((function(e){m["a"].refresh("avatar",t.avatar),t.$message({message:"头像更新成功",type:"success"})}))},decorationSubmit:function(){var t=this,e=this.decorationActivate,a=e?this.decoration[e].val:"",i=this.getActivate(),n={val:a,type:i.toString()};v(n).then((function(e){var n={name:a,type:i};a||(n.name=!1),localStorage.setItem("decoration_all",JSON.stringify(n)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))},formattingData:function(t,e){for(var a=this,i={"无主题":[]},n=[],s=this,o=[{name:"atcard",text:"个人名片",sort:2},{name:"homebg",text:"主页风格",sort:3},{name:"sidebar",text:"侧边栏主题",sort:4},{name:"calendar",text:"首页日历",sort:5}],c=function(n){var r=t[n],s=o.find((function(t){return t.name==r.type}));s&&(r.sort=s.sort,i[r[e]]?i[r[e]].push(r):i[r[e]]=[r],r.using&&(a.originalActivateName=r[e]))},l=0;l<t.length;l++)c(l);var u=function(t){return function(e,a){return e[t]-a[t]}},f=function(t,e){var a=new Map;return t.filter((function(t){return!a.has(t[e])&&a.set(t[e],1)}))};return Object.keys(i).forEach((function(t,a){var o;0!==a&&t==s.originalActivateName&&(s.decorationActivate=a),n.push((o={},Object(r["a"])(o,e,t),Object(r["a"])(o,"list",f(i[t],"type").sort(u("sort"))),o))})),n},loadFrames:function(){var t=this;Object(o["d"])().then((function(e){t.frames=e.data})),h().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,d().then((function(e){var a=e.data.data.filter((function(t){return""!=t.type}));t.decoration=t.formattingData(a,"val"),t.selectAllInit()}))}))},showFrame:function(t){return f["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},selectFrame:function(t){t?t.status&&(this.frame=t.name):this.frame=""},init:function(){var t=this;this.loadFrames(),m["a"].isVIP().then((function(e){t.isVIP=e})),this.avatar=this.bak=m["a"].getInfo().avatar_origin,Object(o["f"])(this.uid).then((function(e){t.frame=e.data.data.user_avatar_frame||""}))},decorationStatus:function(t,e,a){if("homebanner"!=t.type)if(1==t.using?t.using=0:t.using=1,a!=this.decorationActivate){for(var i=this.decoration[this.decorationActivate]?this.decoration[this.decorationActivate].list:[],n=0;n<i.length;n++)i[n].using=0;this.selectAll[this.decorationActivate]=!1,this.decorationActivate=a}else{for(var r=this.decoration[a].list,s=!1,o=!0,c=0;c<r.length;c++)r[c].using&&"homebanner"!=r[c].type?s=!0:o=!1;this.decorationActivate=s?a:null,this.selectAll[a]=o}},getActivate:function(){for(var t=this.decorationActivate,e=[],a=t?this.decoration[t].list:[],i=0;i<a.length;i++)a[i].using&&e.push(a[i].type);return e},selectAllInit:function(){var t=this.decorationActivate;if(null!=t){for(var e=!0,a=this.decoration[t].list,i=0;i<a.length;i++)a[i].using||(e=!1);this.selectAll[t]=e}else this.selectAll[0]=!0},selectAllChange:function(t,e){this.decorationActivate=t?e:null;for(var a=[],i=0;i<this.selectAll.length;i++)i!=e?a.push(!1):a.push(t);for(var n=this.decoration,r=0;r<n.length;r++)for(var s=n[r].list,o=0;o<s.length;o++)s[o].using=r===e&&t?1:0;this.$set(this,"decoration",n),this.selectAll=a}},filters:{showAvatar:function(t){return Object(p["showAvatar"])(t,480,!1)},showSmallAvatar:function(t){return Object(p["showAvatar"])(t,136,!1)},showDecoration:function(t){return f["__imgPath"]+"decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")},showDecorationName:function(t){var e=[{name:"homebanner",text:"资料卡(默认)"},{name:"atcard",text:"个人名片"},{name:"homebg",text:"主页风格"},{name:"sidebar",text:"侧边栏主题"},{name:"calendar",text:"首页日历"}],a=e.find((function(e){return e.name==t}));return a?a.text:"无"}},created:function(){this.init()},components:{uc:s["a"]}},w=b,x=(a("bfad"),a("2877")),_=Object(x["a"])(w,i,n,!1,null,null,null);e["default"]=_.exports},4429:function(t,e,a){t.exports=a.p+"img/no.5fe91973.svg"},"4e82":function(t,e,a){"use strict";var i=a("23e7"),n=a("e330"),r=a("59ed"),s=a("7b0b"),o=a("07fa"),c=a("083a"),l=a("577e"),u=a("d039"),f=a("addb"),d=a("a640"),v=a("04d1"),h=a("d998"),m=a("2d00"),p=a("512ce"),g=[],b=n(g.sort),w=n(g.push),x=u((function(){g.sort(void 0)})),_=u((function(){g.sort(null)})),y=d("sort"),A=!u((function(){if(m)return m<70;if(!(v&&v>3)){if(h)return!0;if(p)return p<603;var t,e,a,i,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)g.push({k:e+i,v:a})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),C=x||!_||!y||!A,k=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:l(e)>l(a)?1:-1}};i({target:"Array",proto:!0,forced:C},{sort:function(t){void 0!==t&&r(t);var e=s(this);if(A)return void 0===t?b(e):b(e,t);var a,i,n=[],l=o(e);for(i=0;i<l;i++)i in e&&w(n,e[i]);f(n,k(t)),a=n.length,i=0;while(i<a)e[i]=n[i++];while(i<l)c(e,i++);return e}})},"4ec9":function(t,e,a){a("6f48")},"4fadd":function(t,e,a){var i=a("d039"),n=a("861d"),r=a("c6b6"),s=a("d86b"),o=Object.isExtensible,c=i((function(){o(1)}));t.exports=c||s?function(t){return!!n(t)&&((!s||"ArrayBuffer"!=r(t))&&(!o||o(t)))}:o},"512ce":function(t,e,a){var i=a("342f"),n=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},6566:function(t,e,a){"use strict";var i=a("9bf2").f,n=a("7c73"),r=a("6964"),s=a("0366"),o=a("19aa"),c=a("2266"),l=a("7dd0"),u=a("2626"),f=a("83ab"),d=a("f183").fastKey,v=a("69f3"),h=v.set,m=v.getterFor;t.exports={getConstructor:function(t,e,a,l){var u=t((function(t,i){o(t,v),h(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=i&&c(i,t[l],{that:t,AS_ENTRIES:a})})),v=u.prototype,p=m(e),g=function(t,e,a){var i,n,r=p(t),s=b(t,e);return s?s.value=a:(r.last=s={index:n=d(e,!0),key:e,value:a,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=s),i&&(i.next=s),f?r.size++:t.size++,"F"!==n&&(r.index[n]=s)),t},b=function(t,e){var a,i=p(t),n=d(e);if("F"!==n)return i.index[n];for(a=i.first;a;a=a.next)if(a.key==e)return a};return r(v,{clear:function(){var t=this,e=p(t),a=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete a[i.index],i=i.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,a=p(e),i=b(e,t);if(i){var n=i.next,r=i.previous;delete a.index[i.index],i.removed=!0,r&&(r.next=n),n&&(n.previous=r),a.first==i&&(a.first=n),a.last==i&&(a.last=r),f?a.size--:e.size--}return!!i},forEach:function(t){var e,a=p(this),i=s(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:a.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!b(this,t)}}),r(v,a?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&i(v,"size",{get:function(){return p(this).size}}),u},setStrong:function(t,e,a){var i=e+" Iterator",n=m(e),r=m(i);l(t,e,(function(t,e){h(this,{type:i,target:t,state:n(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,a=t.last;while(a&&a.removed)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(e)}}},"6d61":function(t,e,a){"use strict";var i=a("23e7"),n=a("da84"),r=a("e330"),s=a("94ca"),o=a("cb2d"),c=a("f183"),l=a("2266"),u=a("19aa"),f=a("1626"),d=a("861d"),v=a("d039"),h=a("1c7e"),m=a("d44e"),p=a("7156");t.exports=function(t,e,a){var g=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),w=g?"set":"add",x=n[t],_=x&&x.prototype,y=x,A={},C=function(t){var e=r(_[t]);o(_,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!d(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!d(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!d(t))&&e(this,0===t?0:t)}:function(t,a){return e(this,0===t?0:t,a),this})},k=s(t,!f(x)||!(b||_.forEach&&!v((function(){(new x).entries().next()}))));if(k)y=a.getConstructor(e,t,g,w),c.enable();else if(s(t,!0)){var O=new y,j=O[w](b?{}:-0,1)!=O,S=v((function(){O.has(1)})),I=h((function(t){new x(t)})),E=!b&&v((function(){var t=new x,e=5;while(e--)t[w](e,e);return!t.has(-0)}));I||(y=e((function(t,e){u(t,_);var a=p(new x,t,y);return void 0!=e&&l(e,a[w],{that:a,AS_ENTRIES:g}),a})),y.prototype=_,_.constructor=y),(S||E)&&(C("delete"),C("has"),g&&C("get")),(E||j)&&C(w),b&&_.clear&&delete _.clear}return A[t]=y,i({global:!0,constructor:!0,forced:y!=x},A),m(y,t),b||a.setStrong(y,t,g),y}},"6f48":function(t,e,a){"use strict";var i=a("6d61"),n=a("6566");i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"90d8":function(t,e,a){var i=a("c65b"),n=a("1a2d"),r=a("3a9b"),s=a("ad6d"),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||n(t,"flags")||!r(o,t)?e:i(s,t)}},ade3:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},b64b:function(t,e,a){var i=a("23e7"),n=a("7b0b"),r=a("df75"),s=a("d039"),o=s((function(){r(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return r(n(t))}})},bb2f:function(t,e,a){var i=a("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bfad:function(t,e,a){"use strict";a("d38b")},d38b:function(t,e,a){},d86b:function(t,e,a){var i=a("d039");t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},d998:function(t,e,a){var i=a("342f");t.exports=/MSIE|Trident/.test(i)},f183:function(t,e,a){var i=a("23e7"),n=a("e330"),r=a("d012"),s=a("861d"),o=a("1a2d"),c=a("9bf2").f,l=a("241c"),u=a("057f"),f=a("4fadd"),d=a("90e3"),v=a("bb2f"),h=!1,m=d("meta"),p=0,g=function(t){c(t,m,{value:{objectID:"O"+p++,weakData:{}}})},b=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,m)){if(!f(t))return"F";if(!e)return"E";g(t)}return t[m].objectID},w=function(t,e){if(!o(t,m)){if(!f(t))return!0;if(!e)return!1;g(t)}return t[m].weakData},x=function(t){return v&&h&&f(t)&&!o(t,m)&&g(t),t},_=function(){y.enable=function(){},h=!0;var t=l.f,e=n([].splice),a={};a[m]=1,t(a).length&&(l.f=function(a){for(var i=t(a),n=0,r=i.length;n<r;n++)if(i[n]===m){e(i,n,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},y=t.exports={enable:_,fastKey:b,getWeakData:w,onFreeze:x};r[m]=!0}}]);
//# sourceMappingURL=chunk-470cd369.e1f305a0.js.map