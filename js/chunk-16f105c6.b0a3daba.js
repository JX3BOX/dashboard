(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f105c6"],{2777:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("bc3a"),i=n.n(r);n.d(t,"b",(function(){return i.a}));var s=n("64c7"),a=i.a.create({baseURL:s["__server"],withCredentials:!0});i.a.create({baseURL:s["__next"],withCredentials:!0})},"46e8":function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"d",(function(){return p}));var r=n("2777");function i(e){return r["a"].get("user/info",{params:{uid:e}})}function s(e){return r["a"].get("dashboard/nickname/check",{params:{name:e}})}function a(e){return r["a"].post("dashboard/nickname/update",{name:e})}function o(e){return r["a"].post("dashboard/profile/update",e)}function c(){return r["a"].get("user/profile").then((function(e){return e.data.data}))}function l(e){return r["a"].post("dashboard/avatar/update",e)}function u(e){return r["a"].post("dashboard/password/update",e)}function h(e){return r["a"].get("dashboard/email/check",{params:{uid:e}})}function m(e){return r["a"].get("account/has",{params:{user_login:e}})}function f(e){return r["a"].post("dashboard/email/bind",e)}function d(e){return r["a"].get("dashboard/email/verify",{params:{uid:e}})}function b(e){return r["a"].post("dashboard/oauth/unbind",e)}function p(e){return r["a"].post("dashboard/oauth/check",e)}},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,s=n("c8d2");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("5899"),s="["+i+"]",a=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},5928:function(e,t,n){},9756:function(e){e.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒","凌雪藏锋","风月同天","江湖故人","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},b3b1:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-dashboard-profile"},[n("el-form",{ref:"form",staticClass:"m-profile-name",attrs:{"label-width":"80px","label-position":"left"}},[n("el-form-item",{staticClass:"u-name",attrs:{label:"昵称"}},[n("div",{staticClass:"u-value"},[e._v(" "+e._s(e.name)+" "),n("el-button",{staticClass:"u-edit",attrs:{disabled:e.renaming,title:"修改昵称",type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:e.startChangeName}},[e._v("修改昵称")])],1)]),n("el-dialog",{attrs:{title:"昵称修改",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-alert",{staticClass:"u-tip",attrs:{title:"昵称将作为唯一识别符，默认只能修改1次，请谨慎操作",description:"昵称中请勿使用任何符号、空格等特殊字符，否则云端宏/数据订阅号将无法加载",type:"warning","show-icon":""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.renaming,expression:"renaming"}],staticClass:"u-rename"},[n("el-input",{staticClass:"u-rename-input",attrs:{minlength:"2",maxlength:"12","show-word-limit":""},on:{change:e.check},model:{value:e.rename,callback:function(t){e.rename=t},expression:"rename"}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.checkname,expression:"checkname"}],staticClass:"el-icon-success el-icons-status"}),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:!e.checkname,expression:"!checkname"}],attrs:{title:"昵称已被使用",type:"error","show-icon":""}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.endChangeName}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",disabled:e.renaming&&!e.checkname},on:{click:e.submitChangeName}},[e._v("确 定")])],1)],1),n("el-form-item",{staticClass:"u-name",attrs:{label:"服务器"}},[n("el-select",{staticClass:"u-server",attrs:{filterable:"",placeholder:"请输入服务器"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},e._l(e.servers,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{staticClass:"u-name",attrs:{label:"签名"}},[n("el-input",{attrs:{type:"textarea",rows:4,maxlength:"80",placeholder:"签名内容","show-word-limit":""},model:{value:e.rebio,callback:function(t){e.rebio=t},expression:"rebio"}})],1),n("el-form-item",{staticClass:"u-btns",attrs:{label:""}},[n("el-button",{staticClass:"u-submit",attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.submitChangeProfile}},[e._v("提交")])],1)],1)],1)},i=[],s=(n("b0c0"),n("498a"),n("ee8f")),a=n("46e8"),o=n("bd13"),c=n("9756"),l={name:"profile",props:[],data:function(){return{name:"",rename:"",renaming:!1,checkname:!0,bio:"",rebio:"",server:"",servers:c,dialogVisible:!1}},computed:{},methods:{startChangeName:function(){this.renaming=!0,this.dialogVisible=!0},check:function(){var e=this;this.rename=this.rename.trim(),this.rename<2||this.rename.length>12?this.$message.error("昵称长度限制为2~12个字符"):(this.rename=Object(o["a"])(this.rename).kill(),this.rename=Object(o["a"])(this.rename).removeSpace(),Object(a["c"])(this.rename).then((function(t){e.checkname=!0})).catch((function(t){e.checkname=!1,e.failCallback(t,e)})))},submitChangeName:function(){var e=this;this.checkname?this.$alert("确定修改为 ".concat(this.rename," 吗"),"消息",{confirmButtonText:"确定",callback:function(t){"confirm"==t&&Object(a["k"])(e.rename).then((function(t){e.name=e.rename,s["User"].refresh("name",e.rename),e.$message({message:"资料修改成功",type:"success"}),e.renaming=!1,e.dialogVisible=!1})).catch((function(t){e.failCallback(t,e)}))}}):this.$alert("昵称不合法","提交失败",{confirmButtonText:"确定",callback:function(t){e.$message.error("用户名已被使用或包含禁用字符")}})},endChangeName:function(){this.renaming=!1,this.rename=this.name,this.rebio=this.bio,this.dialogVisible=!1},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitChangeProfile:function(){var e=this,t={bio:this.rebio,server:this.server};Object(a["m"])(t).then((function(t){e.bio=e.rebio,s["User"].refresh("bio",e.rebio),e.$message({message:"资料修改成功",type:"success"})})).catch((function(t){e.failCallback(t,e)}))},getUserProfile:function(){var e=this;Object(a["e"])().then((function(t){e.server=t.server}))}},mounted:function(){this.name=this.rename=s["User"].getInfo().name,this.bio=this.rebio=s["User"].getInfo().bio,this.getUserProfile()}},u=l,h=(n("bfc8"),n("2877")),m=Object(h["a"])(u,r,i,!1,null,null,null);t["default"]=m.exports},bd13:function(e,t,n){"use strict";function r(e){var t=Object.prototype.toString.call(e);return t.match(/\[object (.*?)\]/)[1].toLowerCase()}n.d(t,"a",(function(){return a}));var i=r;class s{constructor(e,t){if("string"!==i(e))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=e,this._str=e,this._chain=t}toString(){return this._str}_detected(e){let t=i(e),n=["string","array","set"];if(!n.includes(t))throw new Error("[Sterilizer::remove] params should be string|array|set");return e}_sterilize(e){e=[...e].join("");let t=new RegExp(`[${e}]`,"gm");return this._str=this._str.replace(t,""),this._chain?this:this.toString()}kill(e){let t=null;if(void 0==e)t=new Set(this.regs);else{this._detected(e),t=new Set;let n=new Set(e);for(let e of n)this.symbols.includes(e)&&t.add(this._symbols[e])}return this._sterilize(t)}live(e){this._detected(e);let t=new Set(this.regs);for(let n of e)this.symbols.includes(n)&&t.delete(this._symbols[n]);return this._sterilize(t)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this._chain?this:this.toString()}remove(e,t){let n=new RegExp(""+e,"gm");return t=void 0!==t?t:"",this._str=this._str.replace(n,t),this._chain?this:this.toString()}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this._chain?this:this.toString()}}function a(e,t=!1){return new s(e,t)}},bfc8:function(e,t,n){"use strict";var r=n("5928"),i=n.n(r);i.a},c8d2:function(e,t,n){var r=n("d039"),i=n("5899"),s="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-16f105c6.b0a3daba.js.map