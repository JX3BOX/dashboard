{"version":3,"sources":["webpack:///./src/utils/filters.js","webpack:///./src/views/role/ListRole.vue","webpack:///src/views/role/ListRole.vue","webpack:///./src/views/role/ListRole.vue?f32e","webpack:///./src/views/role/ListRole.vue?738b","webpack:///./src/service/role.js","webpack:///./src/views/role/ListRole.vue?e401"],"names":["showBodyType","val","_bodyMap$val","bodyMap","label","showSchoolIcon","id","__imgPath","showSchoolName","school_id_map","render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","_v","attrs","model","mount","callback","$$v","_l","school","school_id","key","_f","_s","slot","data","length","item","i","ID","showAvatar","body_type","custom","_e","class","on","priority","$event","starRole","server","note","addNote","created_at","delRole","unbind","noteVisible","confirmNote","staticRenderFns","props","filters","showTime","currentItem","xfmap","computed","params","methods","_this","$alert","confirmButtonText","action","unbindRole","then","res","$notify","title","message","type","splice","loadData","_this2","getRoles","list","finally","getThumbnail","__cdn","go","route","$router","push","_this3","noteRole","role_id","_this4","deleteRole","_this5","unstarRole","Date","now","created","watch","immediate","handler","components","component","$team","get","getToken","put","concat","createRole","post","updateRole","getRole","delete","getRoleBelongTeams"],"mappings":"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","file":"js/chunk-1f232de7.73ca7075.js","sourcesContent":["import { bodyMap } from \"@jx3box/jx3box-facedat/assets/data/index.json\";\nfunction showBodyType(val) {\n    return bodyMap[val]?.label || \"未知\";\n}\n\nimport school_id_map from \"@jx3box/jx3box-data/data/xf/schoolid.json\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nfunction showSchoolIcon(val) {\n    let id = val || 0;\n    return __imgPath + \"image/school/\" + id + \".png\";\n}\n\nfunction showSchoolName(val) {\n    let id = val || 0;\n    return (id && school_id_map[id]) || \"未知\";\n}\n\nimport { showTime } from \"@jx3box/jx3box-common/js/moment.js\";\nimport { getThumbnail, authorLink, showAvatar } from \"@jx3box/jx3box-common/js/utils\";\n\nexport {\n    showBodyType,\n    showSchoolIcon,\n    showSchoolName,\n    showTime,\n    getThumbnail,\n    authorLink,\n    showAvatar\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-role-list\"},[_c('h2',{staticClass:\"u-title\"},[_c('i',{staticClass:\"el-icon-coordinate\"}),_vm._v(\" 我的角色 \"),_c('div',{staticClass:\"u-op\"},[_c('router-link',{staticClass:\"el-button el-button--primary el-button--mini\",attrs:{\"to\":\"/role/bind\"}},[_c('i',{staticClass:\"el-icon-connection\"}),_vm._v(\" 绑定角色 \")]),_c('router-link',{staticClass:\"el-button el-button--primary el-button--mini\",attrs:{\"to\":\"/role/add\"}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" 自定义角色 \")])],1)]),_c('div',{staticClass:\"m-role-list-filter\"},[_c('el-select',{attrs:{\"size\":\"small\",\"popper-class\":\"m-school-pop\"},model:{value:(_vm.mount),callback:function ($$v) {_vm.mount=$$v},expression:\"mount\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._l((_vm.school_id_map),function(school,school_id){return _c('el-option',{key:school_id,staticClass:\"u-school\",attrs:{\"value\":school_id,\"label\":school}},[_c('img',{attrs:{\"width\":\"24\",\"height\":\"24\",\"src\":_vm._f(\"showSchoolIcon\")(school_id)}}),_vm._v(\" \"+_vm._s(school)+\" \")])})],2),_c('el-input',{staticClass:\"u-name\",attrs:{\"placeholder\":\"请输入角色名称\",\"size\":\"small\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}},[_c('template',{slot:\"prepend\"},[_c('i',{staticClass:\"el-icon-search\"}),_vm._v(\" 查找 \")])],2)],1),(_vm.data && _vm.data.length)?_c('div',{staticClass:\"m-team-rolelist\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.data),function(item,i){return _c('li',{key:i,staticClass:\"u-item\"},[_c('router-link',{staticClass:\"u-pic u-avatar\",attrs:{\"to\":'/role/' + item.ID}},[_c('img',{attrs:{\"src\":_vm.showAvatar(item.mount, item.body_type),\"alt\":\"\"}}),(!item.custom)?_c('i',{staticClass:\"u-status\",attrs:{\"title\":\"已认证\"}},[_c('svg',{attrs:{\"height\":\"512\",\"viewBox\":\"0 0 511.375 511.375\",\"width\":\"512\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z\",\"fill\":\"#0ed678\"}}),_c('path',{attrs:{\"d\":\"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z\",\"fill\":\"#04eb84\"}}),_c('g',[_c('path',{attrs:{\"d\":\"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z\",\"fill\":\"#f7f0eb\"}}),_c('path',{attrs:{\"d\":\"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z\",\"fill\":\"#fffbf5\"}})])])]):_vm._e()]),_c('span',{staticClass:\"u-title\"},[_c('router-link',{staticClass:\"u-rolename\",attrs:{\"to\":'/role/' + item.ID}},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"u-star\",class:{ on: item.priority },on:{\"click\":function($event){return _vm.starRole(item)}}},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":item.priority ? '取消置顶' : '置顶',\"placement\":\"top\"}},[(item.priority)?_c('i',{staticClass:\"el-icon-star-on\"}):_c('i',{staticClass:\"el-icon-star-off\"})])],1)],1),_c('span',{staticClass:\"u-meta\"},[_c('span',{staticClass:\"u-server\"},[_c('em',[_vm._v(\"服务器\")]),_vm._v(\" \"+_vm._s(item.server)+\" \")]),_c('span',{staticClass:\"u-mount\"},[_c('em',[_vm._v(\"门派\")]),_c('img',{staticClass:\"u-icon\",attrs:{\"src\":_vm._f(\"showSchoolIcon\")(item.mount)}}),_vm._v(\" \"+_vm._s(_vm._f(\"showSchoolName\")(item.mount))+\" \")]),_c('span',{staticClass:\"u-note\"},[_c('em',[_vm._v(\"备注\")]),_vm._v(\" \"+_vm._s(item.note)+\" \"),_c('span',{staticClass:\"u-addnote\",on:{\"click\":function($event){return _vm.addNote(item)}}},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"设置备注\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-edit-outline\"})])],1)])]),_c('span',{staticClass:\"u-time\"},[_vm._v(\"绑定时间 : \"+_vm._s(_vm._f(\"showTime\")(item.created_at)))]),_c('div',{staticClass:\"u-op\"},[(!item.custom)?_c('el-button',{staticClass:\"u-btn u-unbind\",attrs:{\"plain\":\"\",\"size\":\"mini\",\"circle\":\"\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.unbind(item.ID, i)}}}):[_c('router-link',{staticClass:\"el-button u-btn u-delete el-button--default el-button--mini is-plain is-circle\",attrs:{\"to\":'/role/edit/' + item.ID}},[_c('i',{staticClass:\"el-icon-edit-outline\"})]),_c('el-button',{staticClass:\"u-btn u-delete\",attrs:{\"plain\":\"\",\"size\":\"mini\",\"circle\":\"\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.delRole(item.ID, i)}}})]],2)],1)}),0)]):[_c('el-alert',{staticClass:\"m-archive-null\",attrs:{\"title\":\"没有找到相关条目\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\"}}),_c('div',{staticClass:\"m-role-null\"},[_c('router-link',{staticClass:\"el-button el-button--primary el-button--mini\",attrs:{\"to\":\"/role/bind\"}},[_c('i',{staticClass:\"el-icon-connection\"}),_vm._v(\" 绑定角色 \")]),_c('router-link',{staticClass:\"el-button el-button--primary el-button--mini\",attrs:{\"to\":\"/role/add\"}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" 自定义角色 \")])],1)],_c('el-dialog',{staticClass:\"m-team-note-dialog\",attrs:{\"title\":\"设置备注\",\"visible\":_vm.noteVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.noteVisible=$event}}},[_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"maxlength\":20,\"show-word-limit\":true},model:{value:(_vm.note),callback:function ($$v) {_vm.note=$$v},expression:\"note\"}})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.noteVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmNote}},[_vm._v(\"确 定\")])],1)])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-role-list\" v-loading=\"loading\">\n        <h2 class=\"u-title\">\n            <i class=\"el-icon-coordinate\"></i> 我的角色\n            <!-- <goback /> -->\n            <div class=\"u-op\">\n                <router-link to=\"/role/bind\" class=\"el-button el-button--primary el-button--mini\">\n                    <i class=\"el-icon-connection\"></i> 绑定角色\n                </router-link>\n                <router-link to=\"/role/add\" class=\"el-button el-button--primary el-button--mini\">\n                    <i class=\"el-icon-plus\"></i> 自定义角色\n                </router-link>\n            </div>\n        </h2>\n        <div class=\"m-role-list-filter\">\n            <el-select size=\"small\" v-model=\"mount\" popper-class=\"m-school-pop\">\n                <el-option label=\"全部\" value=\"\"></el-option>\n                <el-option\n                    v-for=\"(school, school_id) in school_id_map\"\n                    :key=\"school_id\"\n                    :value=\"school_id\"\n                    :label=\"school\"\n                    class=\"u-school\"\n                >\n                    <img width=\"24\" height=\"24\" :src=\"school_id | showSchoolIcon\" />\n                    {{ school }}\n                </el-option>\n            </el-select>\n            <el-input class=\"u-name\" v-model=\"name\" placeholder=\"请输入角色名称\" size=\"small\">\n                <template slot=\"prepend\"> <i class=\"el-icon-search\"></i> 查找 </template>\n            </el-input>\n            <!-- <el-radio-group class=\"u-mount\" v-model=\"mount\">\n                <el-radio class=\"u-mount-unit\" label>全部</el-radio>\n                <el-radio\n                    class=\"u-mount-unit\"\n                    v-for=\"(school,school_id) in school_id_map\"\n                    :key=\"school_id\"\n                    :label=\"school_id\"\n                >\n                    <img :src=\"school_id | showSchoolIcon\" />\n                    {{school}}\n                </el-radio>\n            </el-radio-group> -->\n        </div>\n        <div class=\"m-team-rolelist\" v-if=\"data && data.length\">\n            <ul class=\"u-list\">\n                <li class=\"u-item\" v-for=\"(item, i) in data\" :key=\"i\">\n                    <router-link :to=\"'/role/' + item.ID\" class=\"u-pic u-avatar\">\n                        <img :src=\"showAvatar(item.mount, item.body_type)\" alt />\n                        <i class=\"u-status\" v-if=\"!item.custom\" title=\"已认证\">\n                            <svg height=\"512\" viewBox=\"0 0 511.375 511.375\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z\" fill=\"#0ed678\"/><path d=\"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z\" fill=\"#04eb84\"/><g><path d=\"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z\" fill=\"#f7f0eb\"/><path d=\"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z\" fill=\"#fffbf5\"/></g></svg>\n                        </i>\n                    </router-link>\n                    <span class=\"u-title\">\n                        <router-link class=\"u-rolename\" :to=\"'/role/' + item.ID\">{{ item.name }}</router-link>\n                        <span class=\"u-star\" :class=\"{ on: item.priority }\" @click=\"starRole(item)\">\n                            <el-tooltip\n                                class=\"item\"\n                                effect=\"dark\"\n                                :content=\"item.priority ? '取消置顶' : '置顶'\"\n                                placement=\"top\"\n                            >\n                                <i class=\"el-icon-star-on\" v-if=\"item.priority\"></i>\n                                <i class=\"el-icon-star-off\" v-else></i>\n                            </el-tooltip>\n                        </span>\n                    </span>\n                    <span class=\"u-meta\">\n                        <span class=\"u-server\">\n                            <em>服务器</em>\n                            {{ item.server }}\n                        </span>\n                        <span class=\"u-mount\">\n                            <em>门派</em>\n                            <img class=\"u-icon\" :src=\"item.mount | showSchoolIcon\" />\n                            {{ item.mount | showSchoolName }}\n                        </span>\n                        <span class=\"u-note\">\n                            <em>备注</em>\n                            {{ item.note }}\n                            <span class=\"u-addnote\" @click=\"addNote(item)\">\n                            <el-tooltip class=\"item\" effect=\"dark\" content=\"设置备注\" placement=\"top\">\n                                <i class=\"el-icon-edit-outline\"></i>\n                            </el-tooltip>\n                        </span>\n                        </span>\n                    </span>\n                    <span class=\"u-time\">绑定时间 : {{ item.created_at | showTime }}</span>\n                    <div class=\"u-op\">\n                        <el-button\n                            v-if=\"!item.custom\"\n                            class=\"u-btn u-unbind\"\n                            plain\n                            size=\"mini\"\n                            circle\n                            icon=\"el-icon-delete\"\n                            @click=\"unbind(item.ID, i)\"\n                        >\n                            <!-- <i class=\"u-icon\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"475.082\" height=\"475.082\" viewBox=\"0 0 475.082 475.082\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M107.067 317.195c1.713-1.708 2.568-3.898 2.568-6.563 0-2.663-.855-4.853-2.568-6.571-1.714-1.707-3.905-2.562-6.567-2.562H9.135c-2.666 0-4.853.855-6.567 2.562C.859 305.772 0 307.962 0 310.632c0 2.665.855 4.855 2.568 6.563 1.714 1.711 3.905 2.566 6.567 2.566H100.5c2.666.005 4.853-.851 6.567-2.566zM310.629 109.634c2.669 0 4.859-.855 6.563-2.568 1.718-1.711 2.574-3.901 2.574-6.567V9.138c0-2.659-.856-4.85-2.574-6.565-1.704-1.711-3.895-2.57-6.563-2.57-2.662 0-4.853.859-6.563 2.57-1.711 1.713-2.566 3.903-2.566 6.565v91.361c0 2.666.855 4.856 2.566 6.567 1.718 1.713 3.908 2.568 6.563 2.568zM118.771 347.184c-2.478 0-4.664.855-6.567 2.563l-73.089 73.087c-1.713 1.902-2.568 4.093-2.568 6.567s.855 4.664 2.568 6.566c2.096 1.708 4.283 2.57 6.567 2.57 2.475 0 4.665-.862 6.567-2.57l73.089-73.087c1.714-1.902 2.568-4.093 2.568-6.57 0-2.471-.854-4.661-2.568-6.563-1.902-1.708-4.093-2.563-6.567-2.563zM356.315 127.905c2.283 0 4.473-.855 6.571-2.565l73.087-73.089c1.707-1.903 2.562-4.093 2.562-6.567 0-2.475-.855-4.665-2.562-6.567-1.91-1.709-4.093-2.568-6.571-2.568-2.471 0-4.66.859-6.563 2.568l-73.087 73.089c-1.708 1.903-2.57 4.093-2.57 6.567s.862 4.661 2.57 6.567c2.094 1.71 4.285 2.565 6.563 2.565zM350.607 193.005c-4-3.999-9.328-7.994-15.988-11.991l-5.14 68.238 78.23 78.508c5.328 5.328 7.987 11.807 7.987 19.417 0 7.423-2.662 13.802-7.987 19.13l-41.977 41.686c-5.146 5.146-11.608 7.666-19.417 7.566-7.81-.1-14.271-2.707-19.411-7.854l-77.946-78.225-68.234 5.144c3.999 6.656 7.993 11.988 11.991 15.985l95.362 95.643c15.803 16.18 35.207 24.27 58.238 24.27 22.846 0 42.154-7.898 57.957-23.695l41.977-41.685c16.173-15.8 24.27-35.115 24.27-57.958 0-22.46-7.994-41.877-23.982-58.248l-95.93-95.931zM472.518 157.889c-1.711-1.709-3.901-2.565-6.563-2.565H374.59c-2.662 0-4.853.855-6.563 2.565-1.715 1.713-2.57 3.903-2.57 6.567 0 2.666.855 4.856 2.57 6.567 1.711 1.712 3.901 2.568 6.563 2.568h91.365c2.662 0 4.853-.856 6.563-2.568 1.708-1.711 2.563-3.901 2.563-6.567.001-2.664-.855-4.854-2.563-6.567zM109.348 67.099c5.523-5.14 11.991-7.705 19.417-7.705 7.611 0 14.084 2.663 19.414 7.993l77.943 78.227 68.234-5.142c-4-6.661-7.99-11.991-11.991-15.987l-95.358-95.643c-15.798-16.178-35.212-24.27-58.242-24.27-22.841 0-42.16 7.902-57.958 23.7l-41.97 41.683C12.659 85.756 4.57 105.073 4.57 127.912c0 22.463 7.996 41.877 23.982 58.245l95.93 95.93c3.995 4.001 9.325 7.995 15.986 11.991l5.139-68.521-78.23-78.227c-5.327-5.33-7.992-11.801-7.992-19.417 0-7.421 2.662-13.796 7.992-19.126l41.971-41.688zM164.454 365.451c-2.667 0-4.854.855-6.567 2.563-1.711 1.711-2.568 3.901-2.568 6.57v91.358c0 2.669.854 4.853 2.568 6.57 1.713 1.707 3.9 2.566 6.567 2.566 2.666 0 4.853-.859 6.567-2.566 1.713-1.718 2.568-3.901 2.568-6.57v-91.358c0-2.662-.855-4.853-2.568-6.57-1.715-1.707-3.905-2.563-6.567-2.563z\"/></svg> </i\n                            > -->\n                        </el-button>\n                        <template v-else>\n                            <router-link\n                                :to=\"'/role/edit/' + item.ID\"\n                                class=\"el-button u-btn u-delete el-button--default el-button--mini is-plain is-circle\"\n                            >\n                                <i class=\"el-icon-edit-outline\"></i>\n                            </router-link>\n                            <el-button\n                                class=\"u-btn u-delete\"\n                                plain\n                                size=\"mini\"\n                                circle\n                                @click=\"delRole(item.ID, i)\"\n                                icon=\"el-icon-delete\"\n                                ></el-button\n                            >\n                        </template>\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <template v-else>\n            <el-alert class=\"m-archive-null\" title=\"没有找到相关条目\" type=\"info\" center show-icon></el-alert>\n            <div class=\"m-role-null\">\n                <router-link to=\"/role/bind\" class=\"el-button el-button--primary el-button--mini\">\n                    <i class=\"el-icon-connection\"></i> 绑定角色\n                </router-link>\n                <router-link to=\"/role/add\" class=\"el-button el-button--primary el-button--mini\">\n                    <i class=\"el-icon-plus\"></i> 自定义角色\n                </router-link>\n            </div>\n        </template>\n        <el-dialog title=\"设置备注\" :visible.sync=\"noteVisible\" width=\"30%\" class=\"m-team-note-dialog\">\n            <div>\n                <el-input v-model=\"note\" placeholder=\"请输入内容\" :maxlength=\"20\" :show-word-limit=\"true\"></el-input>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"noteVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"confirmNote\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { getRoles, unbindRole, noteRole, deleteRole, starRole, unstarRole } from \"@/service/role.js\";\nimport school_id_map from \"@jx3box/jx3box-data/data/xf/schoolid.json\";\nimport { __imgPath, __cdn } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport xfmap from \"@jx3box/jx3box-data/data/xf/xf.json\";\nimport { showSchoolIcon, showSchoolName, showTime, getThumbnail } from \"@/utils/filters\";\nexport default {\n    name: \"ListRole\",\n    props: [],\n    filters: {\n        showSchoolIcon,\n        showSchoolName,\n        showTime,\n    },\n    data: function () {\n        return {\n            data: [\n                // {\n                //     id: 0,\n                //     uid: 0,\n                //     jx3id: \"testid\",\n                //     server: \"服务器名称\",\n                //     name: \"角色名\",\n                //     mount: \"10080\",\n                //     body_type: \"6\",\n                //     status: 1,\n                //     created_at: \"2020-09-29T16:55:03+08:00\",\n                // },\n            ],\n            loading: false,\n\n            // 备注\n            noteVisible: false,\n            currentItem: \"\",\n            note: \"\",\n\n            // 角色过滤\n            mount: \"\",\n            name: \"\",\n            xfmap,\n            school_id_map,\n        };\n    },\n    computed: {\n        params: function () {\n            return {\n                mount: this.mount,\n                name: this.name,\n            };\n        },\n    },\n    methods: {\n        unbind: function (id, i) {\n            this.$alert(\"在网站进行解绑游戏内需要小退方可生效\", \"消息\", {\n                confirmButtonText: \"确定解绑\",\n                callback: (action) => {\n                    if (action == \"confirm\") {\n                        unbindRole(id).then((res) => {\n                            this.$notify({\n                                title: \"解绑成功\",\n                                message: \"角色解绑成功\",\n                                type: \"success\",\n                            });\n                            this.data.splice(i, 1);\n                        });\n                    }\n                },\n            });\n        },\n        loadData: function () {\n            this.loading = true;\n            getRoles(this.params)\n                .then((res) => {\n                    this.data = res.data.data.list || [];\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        showAvatar: function (mount, body_type) {\n            return getThumbnail(__cdn + \"design/avatar/xisai/\" + mount + \"-\" + body_type + \".png\");\n        },\n        go: function (route) {\n            this.$router.push(route);\n        },\n        addNote: function (item) {\n            this.noteVisible = true;\n            this.currentItem = item;\n        },\n        confirmNote: function () {\n            noteRole(this.currentItem.ID, this.note).then((res) => {\n                this.noteVisible = false;\n                this.currentItem.note = this.note;\n                this.note = \"\";\n\n                this.$notify({\n                    title: \"成功\",\n                    message: \"备注设置成功\",\n                    type: \"success\",\n                });\n            });\n        },\n        delRole: function (role_id, i) {\n            this.$alert(\"确定删除该角色吗？\", \"消息\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                    if (action == \"confirm\") {\n                        deleteRole(role_id).then((res) => {\n                            this.$notify({\n                                title: \"删除成功\",\n                                message: \"角色删除成功\",\n                                type: \"success\",\n                            });\n                            this.data.splice(i, 1);\n                        });\n                    }\n                },\n            });\n        },\n        starRole: function (item) {\n            if (item.priority) {\n                unstarRole(item.ID).then((res) => {\n                    item.priority = 0;\n                    this.$notify({\n                        title: \"取消星标成功\",\n                        message: \"角色取消星标成功\",\n                        type: \"success\",\n                    });\n                });\n            } else {\n                starRole(item.ID).then((res) => {\n                    item.priority = Date.now();\n                    this.$notify({\n                        title: \"星标成功\",\n                        message: \"角色星标成功\",\n                        type: \"success\",\n                    });\n                });\n            }\n        },\n    },\n    created: function () {},\n    watch: {\n        params: {\n            immediate: true,\n            handler: function (val) {\n                this.loadData();\n            },\n        },\n    },\n    components: {},\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../assets/css/role/list_role.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ListRole.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ListRole.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ListRole.vue?vue&type=template&id=46859261\"\nimport script from \"./ListRole.vue?vue&type=script&lang=js\"\nexport * from \"./ListRole.vue?vue&type=script&lang=js\"\nimport style0 from \"./ListRole.vue?vue&type=style&index=0&id=46859261&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $team} from '@jx3box/jx3box-common/js/https';\n\nfunction getRoles(params) {\n    return $team().get(\"/api/team/my-game-roles\", {\n        params: params,\n    });\n}\n\nfunction unbindRole(id) {\n    return $team().get(\"/api/team/role-unbind/\" + id);\n}\n\nfunction getToken() {\n    return $team().get(\"/api/team/role-bind-token\");\n}\n\nfunction noteRole(role_id, note) {\n    return $team().put(`/api/team/role-update-note/${role_id}`, {\n        note: note,\n    });\n}\n\nfunction createRole(data) {\n    return $team().post(\"/api/team/custom-role\", data);\n}\n\nfunction updateRole(role_id, data) {\n    return $team().put(`/api/team/custom-role/${role_id}`, data);\n}\n\nfunction getRole(role_id) {\n    return $team().get(`/api/team/custom-role/${role_id}`);\n}\n\nfunction deleteRole(role_id) {\n    return $team().delete(`/api/team/custom-role/${role_id}`);\n}\n\nfunction starRole(role_id){\n    return $team().put(`/api/team/role-priority/${role_id}/top`)\n}\nfunction unstarRole(role_id){\n    return $team().put(`/api/team/role-priority/${role_id}/untop`)\n}\n\nfunction getRoleBelongTeams(role_id) {\n    return $team().get(`/api/team/relation/role/${role_id}/teams`);\n}\n\nexport {\n    getRoles,\n    unbindRole,\n    getToken,\n    noteRole,\n    createRole,\n    updateRole,\n    getRole,\n    deleteRole,\n    starRole,\n    unstarRole,\n    getRoleBelongTeams,\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ListRole.vue?vue&type=style&index=0&id=46859261&prod&lang=less\""],"sourceRoot":""}