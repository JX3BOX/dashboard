(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-773123ad"],{"0c34":function(t,a,e){},"0fa0":function(t){t.exports=JSON.parse('{"0":"待处理","1":"已完成","2":"异常"}')},"31e8":function(t){t.exports=JSON.parse('{"1":"品鉴评分","2":"用户打赏","3":"盒币充值","4":"盒币退回","-1":"撤销评分","-2":"盒币兑换"}')},ceab:function(t,a,e){"use strict";e("0c34")},d15e:function(t){t.exports=JSON.parse('["电信一区","电信五区","电信八区","双线一区","双线二区","双线四区"]')},e963:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-credit m-boxcoin"},[t._m(0),e("div",{staticClass:"m-credit-total m-packet-total"},[t._v(" 余额 : "),e("b",{class:{hasLeft:t.hasLeft}},[t._v(t._s(t.money))]),e("a",{staticClass:"el-button u-btn el-button--primary el-button--mini",attrs:{href:"/vip/boxcoin",target:"_blank"}},[t._v("充值")]),e("el-button",{staticClass:"u-btn",attrs:{type:"primary",size:"mini",disabled:!t.money},on:{click:t.togglePullBox}},[t._v("兑换")])],1),t.showPullBox?e("div",{staticClass:"m-credit-pull"},[e("el-alert",{staticClass:"m-boxcoin-tip",attrs:{title:"1盒币可兑换1通宝，不可折现",type:"warning","show-icon":""}},[t._v(" 所有兑换申请将在每月1-5号统一处理，每月1-5日将不能提交兑换申请。默认通宝将通过直充进入游戏账号（不会计入充销），如发放为金山一卡通方式，则会发送卡密邮件至邮箱（请自行在 "),e("a",{attrs:{href:"https://charge.xoyo.com/pay?item=jx3&way=kcard",target:"_blank"}},[t._v("一卡通充值页面")]),t._v("进行充值。） ")]),e("el-form",{staticClass:"m-boxcoin-form",attrs:{"label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:"游戏大区"}},[e("el-select",{attrs:{placeholder:"请选择所在大区"},model:{value:t.pull.zone,callback:function(a){t.$set(t.pull,"zone",a)},expression:"pull.zone"}},t._l(t.zones,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"游戏账号"}},[e("el-input",{attrs:{placeholder:"请务必填写正确的账号，通宝将直充入账号（不会计入充销）"},model:{value:t.pull.account,callback:function(a){t.$set(t.pull,"account",a)},expression:"pull.account"}})],1),e("el-form-item",{attrs:{label:"兑换数目"}},[e("el-radio-group",{model:{value:t.pull.cash,callback:function(a){t.$set(t.pull,"cash",a)},expression:"pull.cash"}},[e("el-radio",{attrs:{label:1500,border:"",disabled:!t.canSelect(1500)}},[t._v("1500通宝")]),e("el-radio",{attrs:{label:3e3,border:"",disabled:!t.canSelect(3e3)}},[t._v("3000通宝")]),e("el-radio",{attrs:{label:5e3,border:"",disabled:!t.canSelect(5e3)}},[t._v("5000通宝")]),e("el-radio",{attrs:{label:1e4,border:"",disabled:!t.canSelect(1e4)}},[t._v("10000通宝")])],1)],1),e("el-form-item",{attrs:{label:"邮箱地址"}},[e("el-input",{attrs:{placeholder:"请务必填写正确的邮箱，如发放的是一卡通形式则会发送卡密邮件至此邮箱"},model:{value:t.pull.email,callback:function(a){t.$set(t.pull,"email",a)},expression:"pull.email"}})],1),e("el-form-item",{attrs:{label:""}},[e("el-button",{attrs:{type:"primary",disabled:!t.ready||t.lockStatus},on:{click:t.openConfirmBox}},[t._v("提交申请")]),t.isAllowDate?t._e():e("span",{staticClass:"u-tip"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 每月1-5日结算期间不能进行兑换申请 ")])],1)],1)],1):t._e(),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-credit-table m-packet-table"},[e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.changeType},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("el-tab-pane",{attrs:{label:"盒币记录",name:"in"}},[t.list&&t.list.length?e("div",{staticClass:"m-packet-table"},[e("table",{staticClass:"m-boxcoin-in-list m-packet-in-list"},[e("tr",[e("th",[t._v("类型")]),e("th",[t._v("数量")]),e("th",[t._v("源于作品")]),e("th",[t._v("备注")]),e("th",[t._v("时间")])]),t._l(t.list,(function(a,n){return e("tr",{key:n},[e("td",[t._v(t._s(t._f("formatType")(a.action_type)))]),e("td",{staticClass:"u-count",class:{isNegative:Number(a.count)<0}},[e("span",[t._v(t._s(Number(a.count)>0?"+":""))]),e("b",[t._v(t._s(a.count))])]),e("td",[t.getPostLink(a)?e("a",{attrs:{href:t.getPostLink(a),target:"_blank"}},[e("i",{staticClass:"el-icon-link"}),t._v(" 点击查看 ")]):e("span",[t._v("-")])]),e("td",[e("span",{attrs:{title:a.remark}},[t._v(t._s(t._f("formatRemark")(a.remark)))])]),e("td",[t._v(t._s(t._f("formatDate")(a.created_at)))])])}))],2)]):e("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a}}})],1),e("el-tab-pane",{attrs:{label:"兑换记录",name:"out"}},[t.list&&t.list.length?e("div",{staticClass:"m-packet-table"},[e("table",{staticClass:"m-boxcoin-out-list m-packet-in-list"},[e("tr",[e("th",[t._v("数量")]),e("th",[t._v("大区")]),e("th",[t._v("账号")]),e("th",[t._v("邮箱")]),e("th",[t._v("处理状态")]),e("th",[t._v("备注")]),e("th",[t._v("申请时间")])]),t._l(t.list,(function(a,n){return e("tr",{key:n},[e("td",[e("b",[t._v(t._s(a.cash)+"通宝")])]),e("td",[t._v(t._s(a.zone))]),e("td",[t._v(t._s(a.account))]),e("td",[t._v(t._s(a.email))]),e("td",{class:{isFinished:1==a.status,isProcessing:!a.status,isPending:a.status>1}},[t._v(t._s(t._f("formatHistoryStatus")(a.status)))]),e("td",[t._v(t._s(a.remark))]),e("td",[t._v(t._s(t._f("formatDate")(a.created_at)))])])}))],2)]):e("el-alert",{staticClass:"m-credit-null m-packet-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-pagination",{staticClass:"m-credit-pages m-packet-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a}}})],1)],1)],1)])},l=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-coin"}),t._v(" 我的盒币 ")])}],s=(e("d3b7"),e("99af"),e("fb6a"),e("c9d2")),i=e("85e4"),o=e("e4f1"),c=e("31e8"),r=e("d15e"),u=e("0fa0"),p=e("41cb");function d(t){return Object(p["f"])().get("/api/my/boxcoin/cashout/history",{params:t})}function m(t){return Object(p["f"])().get("/api/my/boxcoin/bill",{params:t})}function f(t){return Object(p["f"])().post("/api/my/boxcoin/cashout",t)}var h={name:"Boxcoin",props:[],data:function(){return{money:0,min:1500,pull:{zone:"",account:"",cash:"",email:""},showPullBox:!1,lockStatus:!1,formStatus:!1,loading:!1,tab:"in",list:[],page:1,per:20,total:1,types:c,zones:r}},computed:{params:function(){var t={pageIndex:this.page,pageSize:this.per};return t},hasLeft:function(){return this.money>0},isAllowDate:function(){var t=(new Date).getDate();return t>5},canCash:function(){return this.hasLeft&&this.isAllowDate&&this.money>=this.min},ready:function(){return this.canCash&&this.formStatus}},methods:{init:function(){this.loadAsset(),this.loadData()},loadData:function(){var t=this;this.loading=!0;var a={in:m,out:d};a[this.tab](this.params).then((function(a){t.list=a.data.data.list,t.total=a.data.data.page.total})).finally((function(){t.loading=!1}))},changeType:function(){this.page=1,this.loadData()},getPostLink:function(t){return Object(i["getLink"])(t.post_type,t.post_id)},loadAsset:function(){var t=this;s["a"].getAsset().then((function(a){t.money=(null===a||void 0===a?void 0:a.box_coin)||0}))},togglePullBox:function(){this.showPullBox=!this.showPullBox},canSelect:function(t){return~~this.money>=~~t},checkForm:function(){for(var t in this.pull)if(!this.pull[t])return void(this.formStatus=!1);this.formStatus=!0},openConfirmBox:function(){var t=this;this.$alert('<div class="m-boxcoin-msg">大区：<b>'.concat(this.pull.zone,"</b> <br/> 账号：<b>").concat(this.pull.account,"</b> <br/> 邮箱：<b>").concat(this.pull.email,"</b> <br/> 兑换：<b>").concat(this.pull.cash,"通宝</b></div>"),"确认信息",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,callback:function(a){"confirm"==a&&(t.lockStatus=!0,t.loading=!0,f(t.pull).then((function(a){t.$message({type:"success",message:"申请成功,请耐心等待结算"}),t.showPullBox=!1,t.money=t.money-t.pull.cash})).then((function(){t.loadData()})).finally((function(){t.lockStatus=!1,t.loading=!1})))}})}},filters:{formatDate:function(t){return Object(o["b"])(t)},formatType:function(t){return t&&c[t]||"未知"},formatRemark:function(t){return t?t.length>12?t.slice(12)+"...":t:"-"},formatHistoryStatus:function(t){return u[t]||t}},created:function(){this.tab=this.$route.query.tab||"in",this.init()},components:{},watch:{params:{deep:!0,handler:function(){this.loadData()}},pull:{deep:!0,handler:function(){this.checkForm()}}}},b=h,_=(e("ceab"),e("2877")),g=Object(_["a"])(b,n,l,!1,null,null,null);a["default"]=g.exports}}]);
//# sourceMappingURL=chunk-773123ad.d16874e4.js.map