(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d56bedda"],{"46e8":function(t,i,n){"use strict";n.d(i,"m",(function(){return u})),n.d(i,"d",(function(){return r})),n.d(i,"k",(function(){return s})),n.d(i,"l",(function(){return p})),n.d(i,"h",(function(){return f})),n.d(i,"a",(function(){return m})),n.d(i,"g",(function(){return b})),n.d(i,"i",(function(){return _})),n.d(i,"b",(function(){return g})),n.d(i,"n",(function(){return h})),n.d(i,"c",(function(){return d})),n.d(i,"e",(function(){return l})),n.d(i,"f",(function(){return w})),n.d(i,"j",(function(){return q}));var e=n("41cb"),a=n("bc3a"),c=n.n(a),o=n("65c2");function r(){return Object(e["a"])().get("/api/cms/user/my/profile")}function u(t){return Object(e["a"])().put("/api/cms/user/my/profile",t)}function s(t){return Object(e["a"])().put("/api/cms/user/my/avatar",t)}function h(t){return Object(e["a"])().post("/api/cms/upload/avatar",t)}function d(){var t=o["__imgPath"]+"avatar/index.json";return c.a.get(t)}function l(t){return Object(e["a"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function p(t){return Object(e["a"])().put("/api/cms/user/my/password",t)}function m(t){return Object(e["a"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function b(t){return Object(e["a"])().post("/api/cms/user/account/email/bind",t)}function f(t){return Object(e["a"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function g(){return Object(e["a"])().get("/api/cms/account/oauth/status")}function _(t){return Object(e["a"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function w(){return Object(e["a"])().get("/api/cms/wechat/mp/bind")}function q(){return Object(e["a"])().get("/api/cms/wechat/mp/unbind")}},7834:function(t){t.exports=JSON.parse('{"github":{"id":"5fbf7a66cd7d3d0f5153","authorize_uri":"https://github.com/login/oauth/authorize","tokenURL":"https://github.com/login/oauth/access_token","resourceURL":"https://api.github.com/user","callback":"oauth/github/callback"},"qq":{"id":"101870778","authorize_uri":"https://graph.qq.com/oauth2.0/authorize","tokenURL":"https://graph.qq.com/oauth2.0/token","resourceURL":"https://graph.qq.com/oauth2.0/me","profileURL":"https://graph.qq.com/user/get_user_info","callback":"oauth/qq/callback"},"weibo":{"id":"4076650110","authorize_uri":"https://api.weibo.com/oauth2/authorize","tokenURL":"https://api.weibo.com/oauth2/access_token","resourceURL":"https://api.weibo.com/2/users/show.json","callback":"oauth/weibo/callback"},"wechat":{"id":"wx7804c72000d28202","authorize_uri":"https://open.weixin.qq.com/connect/qrconnect","tokenURL":"https://api.weixin.qq.com/sns/oauth2/access_token","resourceURL":"https://api.weixin.qq.com/sns/userinfo","callback":"oauth/wechat/callback"}}')},b6a5:function(t,i,n){"use strict";n("b725")},b725:function(t,i,n){},bd41:function(t,i,n){t.exports=n.p+"img/loginqrcode.af2b3174.jpg"},fe82:function(t,i,n){"use strict";n.r(i);n("b0c0");var e=function(){var t=this,i=t._self._c;return i("uc",{staticClass:"m-dashboard-connect"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-profile-connect"},[i("el-alert",{staticClass:"u-tip",attrs:{title:"通过第三方账号快速登录，如需解绑则需要先绑定一个邮箱",type:"warning","show-icon":""}}),i("div",{staticClass:"m-dashboard-content-list"},t._l(t.oauth,(function(n){return i("div",{key:n,staticClass:"m-item"},[i("span",{staticClass:"u-profile-item"},[i("img",{class:"u-"+n,attrs:{"svg-inline":"",src:t.icon(n)}}),i("span",{staticClass:"u-status"},[t._v(" "+t._s(t.types[n].name)+" ")])]),i("el-button",{staticClass:"u-button",attrs:{type:t.checkStatus(n)?"danger":"primary"},on:{click:function(i){t.checkStatus(n)?t.unbind(n):t.bind(n)}}},[t._v(" "+t._s(t.checkStatus(n)?"解除绑定":"立即绑定")+" ")])],1)})),0)],1),i("el-dialog",{attrs:{visible:t.showMiniProgram,title:"绑定微信小程序",width:t.isPhone?"95%":"400px","custom-class":"m-qrcode-dialog","show-close":!1},on:{"update:visible":function(i){t.showMiniProgram=i}},scopedSlots:t._u([{key:"footer",fn:function(){return[i("el-button",{attrs:{type:"primary"},on:{click:t.ihadBind}},[t._v("我已绑定")])]},proxy:!0}])},[i("div",{staticClass:"m-qr-content"},[i("img",{staticClass:"u-login-qrcode",attrs:{src:n("bd41"),alt:""}}),i("i",{staticClass:"u-tip"},[t._v("打开微信扫一扫，绑定小程序")]),i("small",{staticClass:"u-tip-small"},[t._v("绑定之后需要重新登陆方可生效")])])])],1)},a=[],c=(n("caad"),n("d3b7"),n("ac1f"),n("2532"),n("5319"),n("b547")),o=n("65c2"),r=n("7834");const u={github:`${r.github.authorize_uri}?client_id=${r.github.id}&redirect_uri=${o["__server"]}${r.github.callback}&state=login`,qq:`${r.qq.authorize_uri}?client_id=${r.qq.id}&redirect_uri=${o["__server"]}${r.qq.callback}&response_type=code&scope=get_user_info&state=login`,weibo:`${r.weibo.authorize_uri}?client_id=${r.weibo.id}&response_type=code&redirect_uri=${o["__server"]}${r.weibo.callback}&state=login`,wechat:`${r.wechat.authorize_uri}?appid=${r.wechat.id}&redirect_uri=${o["__server"]}${r.wechat.callback}&response_type=code&scope=snsapi_login&state=login#wechat_redirect`};var s=u,h=n("46e8"),d=location.host.includes("origin")?"origin":"std",l={github:{icon:"github",name:"Github"},qq:{icon:"qq",name:"QQ"},weibo:{icon:"weibo",name:"微博"},wechat:{icon:"wechat",name:"微信"},wechat_miniprogram:{icon:"app",name:"微信小程序"}},p={name:"connect",props:[],data:function(){return{data:{github_name:"",github_id:"",weibo_name:"",weibo_id:"",qq_name:"",qq_unionid:"",wechat_name:"",wechat_unionid:"",wechat_miniprogram_openid:""},oauth:["github","qq","weibo","wechat","wechat_miniprogram"],types:l,showMiniProgram:!1,isPhone:window.innerWidth<768,loading:!1}},computed:{},methods:{checkStatus:function(t){return"qq"==t||"wechat"==t?!!this.data[t+"_unionid"]:"wechat_miniprogram"==t?!!this.data[t+"_openid"]:!!this.data[t+"_id"]},getNickname:function(t){return this.data[t+"_name"]||"已绑定"},bind:function(t){"wechat_miniprogram"!=t?location.href=s[t].replace("state=login","state=bind_".concat(d)):this.showMiniProgram=!0},unbind:function(t){var i=this;this.$confirm("确定要解绑吗？","解绑",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(h["i"])(t).then((function(t){i.$message({message:"解绑成功",type:"success"}),i.loadAuth()}))})).catch((function(){}))},icon:function(t){return o["__cdn"]+"design/user/"+l[t]["icon"]+".png"},loadAuth:function(){var t=this;this.loading=!0,Object(h["b"])().then((function(i){t.data=i.data.data})).finally((function(){t.loading=!1}))},ihadBind:function(){this.showMiniProgram=!1,this.loadAuth()}},mounted:function(){this.loadAuth()},components:{uc:c["a"]}},m=p,b=(n("b6a5"),n("2877")),f=Object(b["a"])(m,e,a,!1,null,null,null);i["default"]=f.exports}}]);
//# sourceMappingURL=chunk-d56bedda.b81a2a7e.js.map