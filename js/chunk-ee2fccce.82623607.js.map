{"version":3,"sources":["webpack:///./src/views/avatar.vue?9a3c","webpack:///src/views/avatar.vue","webpack:///./src/views/avatar.vue?c5e1","webpack:///./src/views/avatar.vue","webpack:///./src/service/profile.js","webpack:///./src/views/avatar.vue?3c86"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","avatar","upload_url","success","fail","_v","on","submit","reset","staticRenderFns","component","getUserInfo","uid","$","get","__server","params","checkNickname","name","updateNickname","data","post","updateProfile","getProfile","then","res","updateAvatar","updatePassword","checkEmailStatus","checkEmailAvailable","email","user_login","sendBindEmail","sendVerifyEmail","unbindOAuth","checkOAuth"],"mappings":"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","file":"js/chunk-ee2fccce.82623607.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard m-dashboard-avatar\"},[_c('div',{staticClass:\"u-preview\"},[_c('img',{staticClass:\"u-avatar u-avatar-l\",attrs:{\"src\":_vm.avatar}})]),_c('el-upload',{staticClass:\"u-upload\",attrs:{\"drag\":\"\",\"action\":_vm.upload_url,\"with-credentials\":\"\",\"on-success\":_vm.success,\"on-error\":_vm.fail,\"accept\":\"image/png,image/gif,image/jpeg\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\" 将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")]),_c('br'),_c('span',{staticClass:\"u-tip\"},[_vm._v(\"只能上传jpg/png/gif文件\")])])]),_c('p',{staticClass:\"u-btng\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确认\")]),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-dashboard m-dashboard-avatar\">\n        <div class=\"u-preview\">\n            <img class=\"u-avatar u-avatar-l\" :src=\"avatar\" />\n            <!-- <img class=\"u-avatar u-avatar-m\" :src=\"avatar\" /> -->\n            <!-- <img class=\"u-avatar u-avatar-s\" :src=\"avatar\" /> -->\n        </div>\n        <el-upload\n            class=\"u-upload\"\n            drag\n            :action=\"upload_url\"\n            with-credentials\n            :on-success=\"success\"\n            :on-error=\"fail\"\n            accept=\"image/png,image/gif,image/jpeg\"\n        >\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">\n                将文件拖到此处，或<em>点击上传</em><br />\n                <span class=\"u-tip\">只能上传jpg/png/gif文件</span>\n            </div>\n        </el-upload>\n        <p class=\"u-btng\">\n            <el-button type=\"primary\" @click=\"submit\">确认</el-button>\n            <el-button @click=\"reset\">重置</el-button>\n        </p>\n    </div>\n</template>\n\n<script>\nimport { JX3BOX, User, Utils } from \"@jx3box/jx3box-common\";\nimport { updateAvatar } from \"../service/profile\";\nconst API = JX3BOX.__server;\n\nexport default {\n    name: \"avatar\",\n    props: [],\n    data: function() {\n        return {\n            avatar: \"\",\n            bak: \"\",\n            upload_url: API + \"upload/avatar\",\n            path: \"\",\n        };\n    },\n    computed: {},\n    methods: {\n        success: function(res) {\n            this.$message({\n                message: \"上传成功\",\n                type: \"success\",\n            });\n            this.avatar = Utils.showAvatar(res.data.list[0], \"l\");\n            this.path = res.data.list[0];\n        },\n        fail: function(err) {\n            this.$message.error(\"上传失败,网络异常或非法请求\");\n        },\n        reset: function() {\n            this.avatar = this.bak;\n        },\n        submit: function() {\n            updateAvatar({\n                uid: User.getInfo().uid,\n                path: this.path,\n            })\n                .then((res) => {\n                    User.refresh(\"avatar\", this.path);\n\n                    this.$message({\n                        message: \"头像更新成功\",\n                        type: \"success\",\n                    });\n                })\n                .catch((err) => {\n                    this.failCallback(err, this);\n                });\n        },\n    },\n    mounted: function() {\n        this.avatar = Utils.showAvatar(User.getInfo().avatar_origin, \"l\");\n        this.bak = this.avatar;\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/dashboard/avatar.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./avatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./avatar.vue?vue&type=template&id=65ede405&\"\nimport script from \"./avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./avatar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./avatar.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $ } from \"./axios\";\nimport { __server } from \"@jx3box/jx3box-common/js/jx3box.json\";\n\n// 信息\nfunction getUserInfo(uid) {\n    return $.get(__server + \"user/info\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\n// 昵称\nfunction checkNickname(name) {\n    return $.get(__server + \"dashboard/nickname/check\", {\n        params: {\n            name: name,\n        },\n    });\n}\nfunction updateNickname(data) {\n    return $.post(__server + \"dashboard/nickname/update\", { name: data });\n}\n// 资料\nfunction updateProfile(data) {\n    return $.post(__server + \"dashboard/profile/update\", data);\n}\nfunction getProfile(){\n    return $.get(__server + \"user/profile\").then((res) => {\n        return res.data.data\n    })\n}\n\n// 头像\nfunction updateAvatar(data) {\n    return $.post(__server + \"dashboard/avatar/update\", data);\n}\n\n// 密码\nfunction updatePassword(data) {\n    return $.post(__server + \"dashboard/password/update\", data);\n}\n\n// 邮箱\nfunction checkEmailStatus(uid) {\n    return $.get(__server + \"dashboard/email/check\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\nfunction checkEmailAvailable(email) {\n    return $.get(__server + \"account/has\", {\n        params: {\n            user_login: email,\n        },\n    });\n}\n\nfunction sendBindEmail(data) {\n    return $.post(__server + \"dashboard/email/bind\", data);\n}\n\nfunction sendVerifyEmail(uid) {\n    return $.get(__server + \"dashboard/email/verify\", {\n        params: {\n            uid: uid,\n        },\n    });\n}\n\n// 互联\nfunction unbindOAuth(data) {\n    return $.post(__server + \"dashboard/oauth/unbind\", data);\n}\n\nfunction checkOAuth(data) {\n    return $.post(__server + \"dashboard/oauth/check\", data);\n}\n\nexport {\n    getUserInfo,\n    checkNickname,\n    updateNickname,\n    updateProfile,\n    getProfile,\n    updateAvatar,\n    updatePassword,\n    sendVerifyEmail,\n    checkEmailAvailable,\n    checkEmailStatus,\n    sendBindEmail,\n    unbindOAuth,\n    checkOAuth,\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./avatar.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./avatar.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}