(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6ede764"],{"3ed1":function(t,a,e){},4208:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("uc",{staticClass:"m-dashboard-avatar"},[e("div",{staticClass:"m-profile-avatar"},[e("div",{staticClass:"m-profile-avatar-primary"},[e("div",{staticClass:"u-avatar"},[e("img",{staticClass:"u-avatar u-avatar-l",attrs:{src:t._f("showAvatar")(t.avatar)}})]),e("el-upload",{staticClass:"u-upload",attrs:{drag:"",accept:"image/png, image/gif, image/jpeg","on-change":t.upload,action:"upload/avatar","auto-upload":!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),e("em",[t._v("点击上传")]),e("br"),e("span",{staticClass:"u-tip"},[t._v("只能上传jpg/png/gif文件")])])]),e("p",{staticClass:"u-btng"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1),e("div",{staticClass:"m-profile-avatar-frame"},[e("h3",{staticClass:"u-title"},[t._v(" 自定义头像框 "),e("span",{staticClass:"u-limit",class:{on:t.isVIP}},[t._v(" ( "),e("i",{class:t.isVIP?"el-icon-unlock":"el-icon-lock"}),t._v(" 仅"),e("a",{attrs:{href:"/vip/premium?from=dashboard_avatar",target:"_blank"}},[t._v("高级/专业版")]),t._v("账户适用 ) ")])]),t.frames?e("div",{staticClass:"u-list"},[e("li",{staticClass:"u-item",class:{on:!t.frame},on:{click:function(a){return t.selectFrame("")}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"无边框",placement:"top","open-delay":200}},[e("div",[t.frame?t._e():e("img",{staticClass:"u-pic",attrs:{src:t._f("showSmallAvatar")(t.avatar)}}),e("i",{staticClass:"u-frame u-frame-none"})])])],1),t._l(t.frames,(function(a,s){return e("li",{key:s,staticClass:"u-item",class:{on:s==t.frame},on:{click:function(e){return t.selectFrame(a)}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.desc,placement:"top","open-delay":300}},[e("div",{class:{"u-blocked":!a.status}},[s==t.frame?e("img",{staticClass:"u-pic",class:{isCircle:"circle"==a.style},attrs:{src:t._f("showSmallAvatar")(t.avatar)}}):t._e(),e("i",{staticClass:"u-frame"},[e("img",{attrs:{src:t.showFrame(a.name,a.files.s.file)}})])])])],1)}))],2):t._e(),e("div",{staticClass:"u-tip"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 「限定头像框」仅在指定时间段可选择激活。 ")])])])])},n=[],i=(e("99af"),e("b0c0"),e("b547")),r=e("46e8"),c=e("c9d2"),o=e("85e4"),l=e("1645"),u=e("65c2"),f={name:"avatar",props:[],data:function(){return{bak:"",avatar:"",frame:"",isVIP:!1,uid:c["a"].getInfo().uid,frames:l}},computed:{data:function(){return{user_avatar:this.avatar,user_avatar_frame:this.frame}}},methods:{upload:function(t,a){var e=this,s=new FormData,n=t.raw;s.append("file",n),Object(r["m"])(s).then((function(t){e.$message({message:"上传成功",type:"success"}),e.avatar=t.data.data.list[0]}))},reset:function(){this.avatar=this.bak},submit:function(){var t=this;this.isVIP||(this.frame&&this.$notify({title:"头像框未生效",message:"头像框仅高级/专业账号可用",type:"warning"}),this.frame=""),Object(r["j"])(this.data).then((function(a){c["a"].refresh("avatar",t.avatar),t.$message({message:"头像更新成功",type:"success"})}))},loadFrames:function(){var t=this;Object(r["d"])().then((function(a){t.frames=a.data}))},showFrame:function(t,a){return u["__imgPath"]+"image/avatar/".concat(t,"/").concat(a)},selectFrame:function(t){t?t.status&&(this.frame=t.name):this.frame=""},init:function(){var t=this;this.loadFrames(),c["a"].isVIP().then((function(a){t.isVIP=a})),this.avatar=this.bak=c["a"].getInfo().avatar_origin,Object(r["f"])(this.uid).then((function(a){t.frame=a.data.data.avatar_frame||""}))}},filters:{showAvatar:function(t){return Object(o["showAvatar"])(t,"l")},showSmallAvatar:function(t){return Object(o["getThumbnail"])(t,68,!0)}},created:function(){this.init()},components:{uc:i["a"]}},m=f,d=(e("bfad"),e("2877")),p=Object(d["a"])(m,s,n,!1,null,null,null);a["default"]=p.exports},"46e8":function(t,a,e){"use strict";e.d(a,"l",(function(){return r})),e.d(a,"e",(function(){return i})),e.d(a,"j",(function(){return c})),e.d(a,"k",(function(){return f})),e.d(a,"h",(function(){return v})),e.d(a,"a",(function(){return d})),e.d(a,"b",(function(){return m})),e.d(a,"g",(function(){return p})),e.d(a,"i",(function(){return b})),e.d(a,"c",(function(){return h})),e.d(a,"m",(function(){return o})),e.d(a,"d",(function(){return l})),e.d(a,"f",(function(){return u}));var s=e("2777"),n=e("65c2");function i(){return s["d"].get("profile")}function r(t){return s["d"].post("profile",t)}function c(t){return s["d"].put("profile/avatar",t)}function o(t){return s["d"].post("upload/avatar",t)}function l(){return s["g"].get(n["__imgPath"]+"data/user_avatar_frame.json")}function u(t){return s["f"].get("user/overview/".concat(t))}function f(t){return s["d"].post("profile/password",t)}function m(){return s["d"].get("profile/email/check")}function d(t){return s["d"].get("profile/email/available",{params:{user_email:t}})}function p(t){return s["d"].post("profile/email/bind",t)}function v(){return s["d"].post("profile/email/verify")}function h(){return s["d"].get("profile/oauth/check")}function b(t){return s["d"].post("profile/oauth/unbind",t)}},b547:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-dashboard-profile m-profile"},[t._m(0),e("tabs"),t._t("default")],2)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-user"}),t._v(" 我的资料")])}],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("el-tab-pane",{attrs:{name:"profile"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-user"}),t._v(" 基本资料")])]),e("el-tab-pane",{attrs:{name:"avatar"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-camera"}),t._v(" 修改头像")])]),e("el-tab-pane",{attrs:{name:"pwd"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-lock"}),t._v(" 修改密码")])]),e("el-tab-pane",{attrs:{name:"email"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-message"}),t._v(" 邮箱设置")])]),e("el-tab-pane",{attrs:{name:"connect"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-connection"}),t._v(" 绑定账号")])])],1)},r=[],c=(e("b0c0"),{name:"",props:[],data:function(){return{active:"profile"}},watch:{$route:function(){this.active=this.$route.name}},computed:{},methods:{changeTab:function(){this.$router.push({name:this.active})}},mounted:function(){this.active=this.$route.name},components:{}}),o=c,l=e("2877"),u=Object(l["a"])(o,i,r,!1,null,null,null),f=u.exports,m={name:"uc",props:[],data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:f}},d=m,p=(e("bdd0"),Object(l["a"])(d,s,n,!1,null,null,null));a["a"]=p.exports},bdd0:function(t,a,e){"use strict";e("3ed1")},bfad:function(t,a,e){"use strict";e("d38b")},d38b:function(t,a,e){}}]);
//# sourceMappingURL=chunk-d6ede764.f5b9c17a.js.map